import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__require=(t=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,s)=>("undefined"!=typeof require?require:t)[s]}):t)((function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')})),__commonJS=(t,s)=>function(){return s||(0,t[__getOwnPropNames(t)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(t,s,i,e)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of __getOwnPropNames(s))__hasOwnProp.call(t,n)||n===i||__defProp(t,n,{get:()=>s[n],enumerable:!(e=__getOwnPropDesc(s,n))||e.enumerable});return t},__toESM=(t,s,i)=>(i=null!=t?__create(__getProtoOf(t)):{},__copyProps(!s&&t&&t.i?i:__defProp(i,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,s){return Math.abs(t-s)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(s))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},m=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},g=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},y=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},S=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},w=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},b=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},v=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},M=function(t){return t[0]*t[3]-t[2]*t[1]},x=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*l+r*u,t[3]=n*l+h*u,t},_=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},T=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},G=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},C=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},I=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},P=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},A=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},R=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},E=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},O=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},F=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},D=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},k=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},L=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},N=function(t){var s=new ARRAY_TYPE(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},$=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},W=function(t,s,i,e,n,r){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},V=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},j=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},H=function(t){return t[0]*t[3]-t[1]*t[2]},U=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},J=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},z=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},q=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*l+r*u+o,t[5]=n*l+h*u+a,t},Y=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},X=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},Z=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},K=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Q=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},st=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},it=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},et=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},nt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},rt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=s[0],l=s[1],u=s[2],c=s[3],f=s[4],d=s[5];return Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(e-l)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-u)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},ht=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},ot=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},at=function(t){var s=new ARRAY_TYPE(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},ut=function(t,s,i,e,n,r,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},ct=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},dt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},pt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+n*l)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(u*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},mt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-e*u,t[2]=e*o-n*h,t[3]=o*a-r*u,t[4]=i*u-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},gt=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+i*(-l*n+h*o)+e*(a*n-r*o)},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],S=i[6],w=i[7],b=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=S*e+w*h+b*l,t[7]=S*n+w*o+b*u,t[8]=S*r+w*a+b*c,t},St=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},wt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},bt=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},vt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Mt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},xt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},_t=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Tt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},Gt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=i*o-e*h,w=i*a-n*h,b=i*l-r*h,v=e*a-n*o,M=e*l-r*o,x=n*l-r*a,_=u*m-c*p,T=u*g-f*p,G=u*y-d*p,C=c*g-f*m,I=c*y-d*m,P=f*y-d*g,A=S*P-w*I+b*C+v*G-M*T+x*_;return A?(A=1/A,t[0]=(o*P-a*I+l*C)*A,t[1]=(a*G-h*P-l*T)*A,t[2]=(h*I-o*G+l*_)*A,t[3]=(n*I-e*P-r*C)*A,t[4]=(i*P-n*G+r*T)*A,t[5]=(e*G-i*I-r*_)*A,t[6]=(m*x-g*M+y*v)*A,t[7]=(g*b-p*x-y*w)*A,t[8]=(p*M-m*b+y*S)*A,t):null},Ct=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},It=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Pt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},At=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},Rt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Et=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Ot=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Ft=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Dt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=s[0],f=s[1],d=s[2],p=s[3],m=s[4],g=s[5],y=s[6],S=s[7],w=s[8];return Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(e-f)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-S)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-w)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(w))},kt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Lt=function(t){var s=new ARRAY_TYPE(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Bt=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m){var g=new ARRAY_TYPE(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},$t=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},Wt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Vt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},jt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=i*o-e*h,w=i*a-n*h,b=i*l-r*h,v=e*a-n*o,M=e*l-r*o,x=n*l-r*a,_=u*m-c*p,T=u*g-f*p,G=u*y-d*p,C=c*g-f*m,I=c*y-d*m,P=f*y-d*g,A=S*P-w*I+b*C+v*G-M*T+x*_;return A?(A=1/A,t[0]=(o*P-a*I+l*C)*A,t[1]=(n*I-e*P-r*C)*A,t[2]=(m*x-g*M+y*v)*A,t[3]=(f*M-c*x-d*v)*A,t[4]=(a*G-h*P-l*T)*A,t[5]=(i*P-n*G+r*T)*A,t[6]=(g*b-p*x-y*w)*A,t[7]=(u*x-f*b+d*w)*A,t[8]=(h*I-o*G+l*_)*A,t[9]=(e*G-i*I-r*_)*A,t[10]=(p*M-m*b+y*S)*A,t[11]=(c*b-u*M-d*S)*A,t[12]=(o*T-h*C-a*_)*A,t[13]=(i*C-e*T+n*_)*A,t[14]=(m*w-p*v-g*S)*A,t[15]=(u*v-c*w+f*S)*A,t):null},Ht=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=i*o-e*h,w=i*a-n*h,b=i*l-r*h,v=e*a-n*o,M=e*l-r*o,x=n*l-r*a,_=u*m-c*p,T=u*g-f*p,G=u*y-d*p,C=c*g-f*m,I=c*y-d*m,P=f*y-d*g;return t[0]=o*P-a*I+l*C,t[1]=n*I-e*P-r*C,t[2]=m*x-g*M+y*v,t[3]=f*M-c*x-d*v,t[4]=a*G-h*P-l*T,t[5]=i*P-n*G+r*T,t[6]=g*b-p*x-y*w,t[7]=u*x-f*b+d*w,t[8]=h*I-o*G+l*_,t[9]=e*G-i*I-r*_,t[10]=p*M-m*b+y*S,t[11]=c*b-u*M-d*S,t[12]=o*T-h*C-a*_,t[13]=i*C-e*T+n*_,t[14]=m*w-p*v-g*S,t[15]=u*v-c*w+f*S,t},Ut=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,S=i*o-e*h,w=l*p-u*d,b=l*m-c*d,v=u*m-c*p;return a*(s*v-i*b+e*w)-n*(r*v-h*b+o*w)+t[15]*(l*S-u*y+c*g)-f*(d*S-p*y+m*g)},Jt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],S=s[15],w=i[0],b=i[1],v=i[2],M=i[3];return t[0]=w*e+b*o+v*c+M*m,t[1]=w*n+b*a+v*f+M*g,t[2]=w*r+b*l+v*d+M*y,t[3]=w*h+b*u+v*p+M*S,w=i[4],b=i[5],v=i[6],M=i[7],t[4]=w*e+b*o+v*c+M*m,t[5]=w*n+b*a+v*f+M*g,t[6]=w*r+b*l+v*d+M*y,t[7]=w*h+b*u+v*p+M*S,w=i[8],b=i[9],v=i[10],M=i[11],t[8]=w*e+b*o+v*c+M*m,t[9]=w*n+b*a+v*f+M*g,t[10]=w*r+b*l+v*d+M*y,t[11]=w*h+b*u+v*p+M*S,w=i[12],b=i[13],v=i[14],M=i[15],t[12]=w*e+b*o+v*c+M*m,t[13]=w*n+b*a+v*f+M*g,t[14]=w*r+b*l+v*d+M*y,t[15]=w*h+b*u+v*p+M*S,t},zt=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},qt=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Yt=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,S,w,b,v,M,x,_,T,G,C,I=e[0],P=e[1],A=e[2],R=Math.hypot(I,P,A);return R<EPSILON?null:(I*=R=1/R,P*=R,A*=R,n=Math.sin(i),h=1-(r=Math.cos(i)),o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],S=s[11],w=I*I*h+r,b=P*I*h+A*n,v=A*I*h-P*n,M=I*P*h-A*n,x=P*P*h+r,_=A*P*h+I*n,T=I*A*h+P*n,G=P*A*h-I*n,C=A*A*h+r,t[0]=o*w+c*b+m*v,t[1]=a*w+f*b+g*v,t[2]=l*w+d*b+y*v,t[3]=u*w+p*b+S*v,t[4]=o*M+c*x+m*_,t[5]=a*M+f*x+g*_,t[6]=l*M+d*x+y*_,t[7]=u*M+p*x+S*_,t[8]=o*T+c*G+m*C,t[9]=a*T+f*G+g*C,t[10]=l*T+d*G+y*C,t[11]=u*T+p*G+S*C,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},Xt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*e,t[5]=h*n+u*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=l*n-r*e,t[9]=u*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},Zt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*e,t[1]=h*n-u*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+l*n,t[9]=h*e+u*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},Kt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*e,t[1]=h*n+u*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=l*n-r*e,t[5]=u*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},Qt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ts=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ss=function(t,s,i){var e,n,r,h=i[0],o=i[1],a=i[2],l=Math.hypot(h,o,a);return l<EPSILON?null:(h*=l=1/l,o*=l,a*=l,e=Math.sin(s),r=1-(n=Math.cos(s)),t[0]=h*h*r+n,t[1]=o*h*r+a*e,t[2]=a*h*r-o*e,t[3]=0,t[4]=h*o*r-a*e,t[5]=o*o*r+n,t[6]=a*o*r+h*e,t[7]=0,t[8]=h*a*r+o*e,t[9]=o*a*r-h*e,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},is=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},es=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,l=r+r,u=e*o,c=e*a,f=e*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,S=h*l;return t[0]=1-(d+m),t[1]=c+S,t[2]=f-y,t[3]=0,t[4]=c-S,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},hs=function(t,s){var i=new ARRAY_TYPE(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+n*n+r*r+h*h;return c>0?(i[0]=2*(o*h+u*e+a*r-l*n)/c,i[1]=2*(a*h+u*n+l*e-o*r)/c,i[2]=2*(l*h+u*r+o*n-a*e)/c):(i[0]=2*(o*h+u*e+a*r-l*n),i[1]=2*(a*h+u*n+l*e-o*r),i[2]=2*(l*h+u*r+o*n-a*e)),rs(t,s,i),t},os=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},ls=function(t,s){var i=new ARRAY_TYPE(3);as(i,s);var e=1/i[0],n=1/i[1],r=1/i[2],h=s[0]*e,o=s[1]*n,a=s[2]*r,l=s[4]*e,u=s[5]*n,c=s[6]*r,f=s[8]*e,d=s[9]*n,p=s[10]*r,m=h+u+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(c-d)/g,t[1]=(f-a)/g,t[2]=(o-l)/g):h>u&&h>p?(g=2*Math.sqrt(1+h-u-p),t[3]=(c-d)/g,t[0]=.25*g,t[1]=(o+l)/g,t[2]=(f+a)/g):u>p?(g=2*Math.sqrt(1+u-h-p),t[3]=(f-a)/g,t[0]=(o+l)/g,t[1]=.25*g,t[2]=(c+d)/g):(g=2*Math.sqrt(1+p-h-u),t[3]=(o-l)/g,t[0]=(f+a)/g,t[1]=(c+d)/g,t[2]=.25*g),t},us=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,S=h*m,w=o*d,b=a*p,v=l*m,M=u*d,x=c*p,_=f*m,T=g+b+_,G=0;return T>0?(G=2*Math.sqrt(T+1),t[3]=.25*G,t[0]=(v-x)/G,t[1]=(M-S)/G,t[2]=(y-w)/G):g>b&&g>_?(G=2*Math.sqrt(1+g-b-_),t[3]=(v-x)/G,t[0]=.25*G,t[1]=(y+w)/G,t[2]=(M+S)/G):b>_?(G=2*Math.sqrt(1+b-g-_),t[3]=(M-S)/G,t[0]=(y+w)/G,t[1]=.25*G,t[2]=(v+x)/G):(G=2*Math.sqrt(1+_-g-b),t[3]=(y-w)/G,t[0]=(M+S)/G,t[1]=(v+x)/G,t[2]=.25*G),t},cs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,S=o*l,w=o*u,b=e[0],v=e[1],M=e[2];return t[0]=(1-(p+g))*b,t[1]=(f+w)*b,t[2]=(d-S)*b,t[3]=0,t[4]=(f-w)*v,t[5]=(1-(c+g))*v,t[6]=(m+y)*v,t[7]=0,t[8]=(d+S)*M,t[9]=(m-y)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fs=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,S=a*l,w=a*u,b=a*c,v=e[0],M=e[1],x=e[2],_=n[0],T=n[1],G=n[2],C=(1-(m+y))*v,I=(d+b)*v,P=(p-w)*v,A=(d-b)*M,R=(1-(f+y))*M,E=(g+S)*M,O=(p+w)*x,F=(g-S)*x,D=(1-(f+m))*x;return t[0]=C,t[1]=I,t[2]=P,t[3]=0,t[4]=A,t[5]=R,t[6]=E,t[7]=0,t[8]=O,t[9]=F,t[10]=D,t[11]=0,t[12]=i[0]+_-(C*_+A*T+O*G),t[13]=i[1]+T-(I*_+R*T+F*G),t[14]=i[2]+G-(P*_+E*T+D*G),t[15]=1,t},ds=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ps=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},ms=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},gs=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},ys=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},Ss=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},ws=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*l,t[15]=1,t},bs=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p=s[0],m=s[1],g=s[2],y=e[0],S=e[1],w=e[2],b=i[0],v=i[1],M=i[2];return Math.abs(p-b)<EPSILON&&Math.abs(m-v)<EPSILON&&Math.abs(g-M)<EPSILON?Wt(t):(u=p-b,c=m-v,f=g-M,n=S*(f*=d=1/Math.hypot(u,c,f))-w*(c*=d),r=w*(u*=d)-y*f,h=y*c-S*u,(d=Math.hypot(n,r,h))?(n*=d=1/d,r*=d,h*=d):(n=0,r=0,h=0),o=c*h-f*r,a=f*n-u*h,l=u*r-c*n,(d=Math.hypot(o,a,l))?(o*=d=1/d,a*=d,l*=d):(o=0,a=0,l=0),t[0]=n,t[1]=o,t[2]=u,t[3]=0,t[4]=r,t[5]=a,t[6]=c,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=-(n*p+r*m+h*g),t[13]=-(o*p+a*m+l*g),t[14]=-(u*p+c*m+f*g),t[15]=1,t)},vs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=n-i[0],c=r-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},Ms=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},xs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},_s=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ts=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Gs=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Cs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Is=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ps=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],S=s[0],w=s[1],b=s[2],v=s[3],M=s[4],x=s[5],_=s[6],T=s[7],G=s[8],C=s[9],I=s[10],P=s[11],A=s[12],R=s[13],E=s[14],O=s[15];return Math.abs(i-S)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(e-w)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(n-b)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-v)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(h-M)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(o-x)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-_)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(l-T)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-G)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(c-C)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(f-I)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-P)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-A)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-R)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-E)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(y-O)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(O))},As=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Rs=function(t){var s=new ARRAY_TYPE(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Es=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Os=function(t,s,i){var e=new ARRAY_TYPE(3);return e[0]=t,e[1]=s,e[2]=i,e},Fs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Ds=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},ks=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Ls=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Ns=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Bs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},$s=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ws=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Vs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},js=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Hs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},Us=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},Js=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},zs=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},qs=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},Ys=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},Xs=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},Zs=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Ks=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},Qs=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ti=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},si=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},ii=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(Qs(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},ei=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*u,t},ni=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+i[0]*u+e[0]*c+n[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+n[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+n[2]*f,t},ri=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI,e=2*RANDOM()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},oi=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},ai=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-e*l,f=e*a-n*o,d=n*f-r*c,p=r*u-e*f,m=e*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},li=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ui=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ci=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},fi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),l=a&&Qs(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},di=function(t){return t[0]=0,t[1]=0,t[2]=0,t},pi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},gi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2];return Math.abs(i-r)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(o))},yi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Si=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},wi=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},bi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},vi=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Mi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},xi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},_i=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ti=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Gi=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ci=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Ii=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Pi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ai=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Ri=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Ei=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Oi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Fi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Di=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},ki=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},Li=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Bi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},$i=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},Vi=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},ji=function(t,s){var i,e,n,r,h,o;s=s||1;do{h=(i=2*RANDOM()-1)*i+(e=2*RANDOM()-1)*e}while(h>=1);do{o=(n=2*RANDOM()-1)*n+(r=2*RANDOM()-1)*r}while(o>=1);var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},Hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},Ui=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*r-a*n,c=l*n+a*e-h*r,f=l*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},Ji=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},zi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},qi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Yi=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},Xi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Ki=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return e>EPSILON?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){var i=dot$2(t,s);return Math.acos(2*i*i-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,t},ie=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},ee=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},ne=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},re=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},he=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},oe=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},ae=function(t,s,i){return oe(t,s),scale$2(t,t,i),he(t,t),t},le=function(t,s,i,e){var n,r,h,o,a,l=s[0],u=s[1],c=s[2],f=s[3],d=i[0],p=i[1],m=i[2],g=i[3];return(r=l*d+u*p+c*m+f*g)<0&&(r=-r,d=-d,p=-p,m=-m,g=-g),1-r>EPSILON?(n=Math.acos(r),h=Math.sin(n),o=Math.sin((1-e)*n)/h,a=Math.sin(e*n)/h):(o=1-e,a=e),t[0]=o*l+a*d,t[1]=o*u+a*p,t[2]=o*c+a*m,t[3]=o*f+a*g,t},ue=function(t){var s=RANDOM(),i=RANDOM(),e=RANDOM(),n=Math.sqrt(1-s),r=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=r*Math.sin(2*Math.PI*e),t[3]=r*Math.cos(2*Math.PI*e),t},ce=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},fe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},de=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},pe=function(t,s,i,e){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,r=Math.PI/360;s*=r,e*=r,i*=r;var h=Math.sin(s),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},me=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ge=function(t,s){return Math.abs($i(t,s))>=1-EPSILON},ye=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},Se=function(t){var s=new ARRAY_TYPE(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},we=function(t,s,i,e,n,r,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},be=function(t,s,i,e,n,r,h){var o=new ARRAY_TYPE(8);o[0]=t,o[1]=s,o[2]=i,o[3]=e;var a=.5*n,l=.5*r,u=.5*h;return o[4]=a*e+l*i-u*s,o[5]=l*e+u*t-a*i,o[6]=u*e+a*s-l*t,o[7]=-a*t-l*s-u*i,o},ve=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+n*a-r*o,t[5]=n*l+r*h-e*a,t[6]=r*l+e*o-n*h,t[7]=-e*h-n*o-r*a,t},Me=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},xe=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},_e=function(t,s){var i=Xi();ls(i,s);var e=new ARRAY_TYPE(3);return os(e,s),ve(t,i,e),t},Te=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Ge=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ce=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Ie=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Pe=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Ae=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+r*h+e*a-n*o),t[1]=2*(e*l+r*o+n*h-i*a),t[2]=2*(n*l+r*a+i*o-e*h),t},Re=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-e*l+c,t[6]=h*l+e*a-n*o+f,t[7]=-e*o-n*a-r*l+d,t},Ee=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ie(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Oe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ee(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Fe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ne(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},De=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*r-l*n,t[1]=a*h+u*n+l*e-o*r,t[2]=l*h+u*r+o*n-a*e,t[3]=u*h-o*e-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*r-l*n,t[5]=a*h+u*n+l*e-o*r,t[6]=l*h+u*r+o*n-a*e,t[7]=u*h-o*e-a*n-l*r,t},ke=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-e*l,t[6]=r*u+h*l+e*a-n*o,t[7]=h*u-e*o-n*a-r*l,t},Le=function(t,s,i,e){if(Math.abs(e)<EPSILON)return Te(t,s);var n=Math.hypot(i[0],i[1],i[2]);e*=.5;var r=Math.sin(e),h=r*i[0]/n,o=r*i[1]/n,a=r*i[2]/n,l=Math.cos(e),u=s[0],c=s[1],f=s[2],d=s[3];t[0]=u*l+d*h+c*a-f*o,t[1]=c*l+d*o+f*h-u*a,t[2]=f*l+d*a+u*o-c*h,t[3]=d*l-u*h-c*o-f*a;var p=s[4],m=s[5],g=s[6],y=s[7];return t[4]=p*l+y*h+m*a-g*o,t[5]=m*l+y*o+g*h-p*a,t[6]=g*l+y*a+p*o-m*h,t[7]=y*l-p*h-m*o-g*a,t},Ne=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Be=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],S=i[3];return t[0]=e*S+h*m+n*y-r*g,t[1]=n*S+h*g+r*m-e*y,t[2]=r*S+h*y+e*g-n*m,t[3]=h*S-e*m-n*g-r*y,t[4]=e*u+h*o+n*l-r*a+c*S+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-e*l+f*S+p*g+d*m-c*y,t[6]=r*u+h*l+e*a-n*o+d*S+p*y+c*g-f*m,t[7]=h*u-e*o-n*a-r*l+p*S-c*m-f*g-d*y,t},$e=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},We=function(t,s,i,e){var n=1-e;return dot$1(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},Ve=function(t,s){var i=squaredLength$1(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},je=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},He=function(t,s){var i=squaredLength$1(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+n*a+r*l+h*u;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(l-r*c)/i,t[7]=(u-h*c)/i}return t},Ue=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Je=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},ze=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7];return Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},qe=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},Ye=function(t){var s=new ARRAY_TYPE(2);return s[0]=t[0],s[1]=t[1],s},Xe=function(t,s){var i=new ARRAY_TYPE(2);return i[0]=t,i[1]=s,i},Ze=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ke=function(t,s,i){return t[0]=s,t[1]=i,t},Qe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},tn=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},sn=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},en=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},nn=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},rn=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},hn=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},on=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},an=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},un=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},cn=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},fn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},dn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},pn=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},mn=function(t){var s=t[0],i=t[1];return s*s+i*i},gn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},yn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},Sn=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},wn=function(t,s){return t[0]*s[0]+t[1]*s[1]},bn=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},vn=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},Mn=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},xn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},_n=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},Tn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},Gn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},Cn=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},In=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},Pn=function(t){return t[0]=0,t[1]=0,t},An=function(t){return"vec2("+t[0]+", "+t[1]+")"},Rn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},En=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1];return Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(r))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=g,fromValues$8=y,set$8=S,transpose$2=w,invert$5=b,adjoint$2=v,determinant$3=M,multiply$8=x,rotate$4=_,scale$8=T,fromRotation$4=G,fromScaling$3=C,str$8=I,frob$3=P,LDU=A,add$8=R,subtract$6=E,exactEquals$8=O,equals$8=F,multiplyScalar$3=D,multiplyScalarAndAdd$3=k,create$7=L,clone$7=N,copy$7=B,identity$4=$,fromValues$7=W,set$7=V,invert$4=j,determinant$2=H,multiply$7=U,rotate$3=J,scale$7=z,translate$3=q,fromRotation$3=Y,fromScaling$2=X,fromTranslation$3=Z,str$7=K,frob$2=Q,add$7=tt,subtract$5=st,multiplyScalar$2=it,multiplyScalarAndAdd$2=et,exactEquals$7=nt,equals$7=rt,create$6=ht,fromMat4$1=ot,clone$6=at,copy$6=lt,fromValues$6=ut,set$6=ct,identity$3=ft,transpose$1=dt,invert$3=pt,adjoint$1=mt,determinant$1=gt,multiply$6=yt,translate$2=St,rotate$2=wt,scale$6=bt,fromTranslation$2=vt,fromRotation$2=Mt,fromScaling$1=xt,fromMat2d=_t,fromQuat$1=Tt,normalFromMat4=Gt,projection=Ct,str$6=It,frob$1=Pt,add$6=At,subtract$4=Rt,multiplyScalar$1=Et,multiplyScalarAndAdd$1=Ot,exactEquals$6=Ft,equals$6=Dt,create$5=kt,clone$5=Lt,copy$5=Nt,fromValues$5=Bt,set$5=$t,identity$2=Wt,transpose=Vt,invert$2=jt,adjoint=Ht,determinant=Ut,multiply$5=Jt,translate$1=zt,scale$5=qt,rotate$1=Yt,rotateX$3=Xt,rotateY$3=Zt,rotateZ$3=Kt,fromTranslation$1=Qt,fromScaling=ts,fromRotation$1=ss,fromXRotation=is,fromYRotation=es,fromZRotation=ns,fromRotationTranslation$1=rs,fromQuat2=hs,getTranslation$1=os,getScaling=as,getRotation=ls,decompose=us,fromRotationTranslationScale=cs,fromRotationTranslationScaleOrigin=fs,fromQuat=ds,frustum=ps,perspectiveNO=ms,perspectiveZO=gs,perspectiveFromFieldOfView=ys,orthoNO=Ss,orthoZO=ws,lookAt=bs,targetTo=vs,str$5=Ms,frob=xs,add$5=_s,subtract$3=Ts,multiplyScalar=Gs,multiplyScalarAndAdd=Cs,exactEquals$5=Is,equals$5=Ps,create$4=As,clone$4=Rs,length$4=Es,fromValues$4=Os,copy$4=Fs,set$4=Ds,add$4=ks,subtract$2=Ls,multiply$4=Ns,divide$2=Bs,ceil$2=$s,floor$2=Ws,min$2=Vs,max$2=js,round$2=Hs,scale$4=Us,scaleAndAdd$2=Js,distance$2=zs,squaredDistance$2=qs,squaredLength$4=Ys,negate$2=Xs,inverse$2=Zs,normalize$4=Ks,dot$4=Qs,cross$2=ti,lerp$4=si,slerp$1=ii,hermite=ei,bezier=ni,random$3=ri,transformMat4$2=hi,transformMat3$1=oi,transformQuat$1=ai,rotateX$2=li,rotateY$2=ui,rotateZ$2=ci,angle$1=fi,zero$2=di,str$4=pi,exactEquals$4=mi,equals$4=gi,create$3=yi,clone$3=Si,fromValues$3=wi,copy$3=bi,set$3=vi,add$3=Mi,subtract$1=xi,multiply$3=_i,divide$1=Ti,ceil$1=Gi,floor$1=Ci,min$1=Ii,max$1=Pi,round$1=Ai,scale$3=Ri,scaleAndAdd$1=Ei,distance$1=Oi,squaredDistance$1=Fi,length$3=Di,squaredLength$3=ki,negate$1=Li,inverse$1=Ni,normalize$3=Bi,dot$3=$i,cross$1=Wi,lerp$3=Vi,random$2=ji,transformMat4$1=Hi,transformQuat=Ui,zero$1=Ji,str$3=zi,exactEquals$3=qi,equals$3=Yi,create$2=Xi,identity$1=Zi,setAxisAngle=Ki,getAxisAngle=Qi,getAngle=te,multiply$2=se,rotateX$1=ie,rotateY$1=ee,rotateZ$1=ne,calculateW=re,exp=he,ln=oe,pow=ae,slerp=le,random$1=ue,invert$1=ce,conjugate$1=fe,fromMat3=de,fromEuler=pe,str$2=me,equals$2=ge,create$1=ye,clone$1=Se,fromValues$1=we,fromRotationTranslationValues=be,fromRotationTranslation=ve,fromTranslation=Me,fromRotation=xe,fromMat4=_e,copy$1=Te,identity=Ge,set$1=Ce,getDual=Ie,setDual=Pe,getTranslation=Ae,translate=Re,rotateX=Ee,rotateY=Oe,rotateZ=Fe,rotateByQuatAppend=De,rotateByQuatPrepend=ke,rotateAroundAxis=Le,add$1=Ne,multiply$1=Be,scale$1=$e,lerp$1=We,invert=Ve,conjugate=je,normalize$1=He,str$1=Ue,exactEquals$1=Je,equals$1=ze,create=qe,clone=Ye,fromValues=Xe,copy=Ze,set=Ke,add=Qe,subtract=tn,multiply=sn,divide=en,ceil=nn,floor=rn,min=hn,max=on,round=an,scale=un,scaleAndAdd=cn,distance=fn,squaredDistance=dn,length=pn,squaredLength=mn,negate=gn,inverse=yn,normalize=Sn,dot=wn,cross=bn,lerp=vn,random=Mn,transformMat2=xn,transformMat2d=_n,transformMat3=Tn,transformMat4=Gn,rotate=Cn,angle=In,zero=Pn,str=An,exactEquals=Rn,equals=En,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get h(){return ARRAY_TYPE},o:RANDOM,l:ANGLE_ORDER,u:e,m:n,equals:h},mul$8=x,sub$6=E,mat2=Object.freeze({__proto__:null,create:u,clone:p,S:m,identity:g,v:y,set:S,M:w,_:b,T:v,G:M,multiply:x,rotate:_,scale:T,C:G,I:C,P:I,A:P,R:A,add:R,O:E,F:O,equals:F,D:D,L:k,mul:mul$8,sub:sub$6}),mul$7=U,sub$5=st,mat2d=Object.freeze({__proto__:null,create:L,clone:N,S:B,identity:$,v:W,set:V,_:j,G:H,multiply:U,rotate:J,scale:z,translate:q,C:Y,I:X,N:Z,P:K,A:Q,add:tt,O:st,D:it,L:et,F:nt,equals:rt,mul:mul$7,sub:sub$5}),mul$6=yt,sub$4=Rt,mat3=Object.freeze({__proto__:null,create:ht,B:ot,clone:at,S:lt,v:ut,set:ct,identity:ft,M:dt,_:pt,T:mt,G:gt,multiply:yt,translate:St,rotate:wt,scale:bt,N:vt,C:Mt,I:xt,$:_t,W:Tt,V:Gt,j:Ct,P:It,A:Pt,add:At,O:Rt,D:Et,L:Ot,F:Ft,equals:Dt,mul:mul$6,sub:sub$4}),perspective=ms,ortho=Ss,mul$5=Jt,sub$3=Ts,mat4=Object.freeze({__proto__:null,create:kt,clone:Lt,S:Nt,v:Bt,set:$t,identity:Wt,M:Vt,_:jt,T:Ht,G:Ut,multiply:Jt,translate:zt,scale:qt,rotate:Yt,H:Xt,U:Zt,J:Kt,N:Qt,I:ts,C:ss,Y:is,X:es,Z:ns,K:rs,tt:hs,st:os,it:as,et:ls,nt:us,rt:cs,ht:fs,W:ds,ot:ps,lt:ms,perspective:perspective,ut:gs,ct:ys,ft:Ss,dt:ortho,gt:ws,yt:bs,St:vs,P:Ms,A:xs,add:_s,O:Ts,D:Gs,L:Cs,F:Is,equals:Ps,mul:mul$5,sub:sub$3}),sub$2=Ls,mul$4=Ns,div$2=Bs,dist$2=zs,sqrDist$2=qs,len$4=Es,sqrLen$4=Ys,t=As(),forEach$2=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},vec3=Object.freeze({__proto__:null,create:As,clone:Rs,length:Es,v:Os,S:Fs,set:Ds,add:ks,O:Ls,multiply:Ns,wt:Bs,ceil:$s,floor:Ws,min:Vs,max:js,round:Hs,scale:Us,bt:Js,vt:zs,Mt:qs,xt:Ys,_t:Xs,inverse:Zs,normalize:Ks,Tt:Qs,Gt:ti,Ct:si,It:ii,Pt:ei,At:ni,random:ri,Rt:hi,Et:oi,Ot:ai,H:li,U:ui,J:ci,angle:fi,Ft:di,P:pi,F:mi,equals:gi,sub:sub$2,mul:mul$4,div:div$2,Dt:dist$2,kt:sqrDist$2,Lt:len$4,Nt:sqrLen$4,forEach:forEach$2}),sub$1=xi,mul$3=_i,div$1=Ti,dist$1=Oi,sqrDist$1=Fi,len$3=Di,sqrLen$3=ki,forEach$1=function(){var t=yi();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),vec4=Object.freeze({__proto__:null,create:yi,clone:Si,v:wi,S:bi,set:vi,add:Mi,O:xi,multiply:_i,wt:Ti,ceil:Gi,floor:Ci,min:Ii,max:Pi,round:Ai,scale:Ri,bt:Ei,vt:Oi,Mt:Fi,length:Di,xt:ki,_t:Li,inverse:Ni,normalize:Bi,Tt:$i,Gt:Wi,Ct:Vi,random:ji,Rt:Hi,Ot:Ui,Ft:Ji,P:zi,F:qi,equals:Yi,sub:sub$1,mul:mul$3,div:div$1,Dt:dist$1,kt:sqrDist$1,Lt:len$3,Nt:sqrLen$3,forEach:forEach$1}),clone$2=Si,fromValues$2=wi,copy$2=bi,set$2=vi,add$2=Mi,mul$2=se,scale$2=Ri,dot$2=$i,lerp$2=Vi,length$2=Di,len$2=length$2,squaredLength$2=ki,sqrLen$2=squaredLength$2,normalize$2=Bi,exactEquals$2=qi,rotationTo=function(){var t=As(),s=Os(1,0,0),i=Os(0,1,0);return function(e,n,r){var h=Qs(n,r);return h<-.999999?(ti(t,s,n),len$4(t)<1e-6&&ti(t,i,n),Ks(t,t),Ki(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ti(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,normalize$2(e,e))}}(),sqlerp=function(){var t=Xi(),s=Xi();return function(i,e,n,r,h,o){return le(t,e,h,o),le(s,n,r,o),le(i,t,s,2*o*(1-o)),i}}(),setAxes=function(){var t=ht();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],normalize$2(s,de(s,t))}}(),quat=Object.freeze({__proto__:null,create:Xi,identity:Zi,Bt:Ki,$t:Qi,Wt:te,multiply:se,H:ie,U:ee,J:ne,Vt:re,exp:he,jt:oe,pow:ae,It:le,random:ue,_:ce,Ht:fe,Ut:de,Jt:pe,P:me,clone:clone$2,v:fromValues$2,S:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Tt:dot$2,Ct:lerp$2,length:length$2,Lt:len$2,xt:squaredLength$2,Nt:sqrLen$2,normalize:normalize$2,F:exactEquals$2,equals:ge,zt:rotationTo,qt:sqlerp,Yt:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=Be,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:ye,clone:Se,v:we,Xt:be,K:ve,N:Me,C:xe,B:_e,S:Te,identity:Ge,set:Ce,Zt:getReal,Kt:Ie,Qt:setReal,ts:Pe,st:Ae,translate:Re,H:Ee,U:Oe,J:Fe,ss:De,es:ke,ns:Le,add:Ne,multiply:Be,mul:mul$1,scale:$e,Tt:dot$1,Ct:We,_:Ve,Ht:je,length:length$1,Lt:len$1,xt:squaredLength$1,Nt:sqrLen$1,normalize:He,P:Ue,F:Je,equals:ze}),len=pn,sub=tn,mul=sn,div=en,dist=fn,sqrDist=dn,sqrLen=mn,forEach=function(){var t=qe();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),vec2=Object.freeze({__proto__:null,create:qe,clone:Ye,v:Xe,S:Ze,set:Ke,add:Qe,O:tn,multiply:sn,wt:en,ceil:nn,floor:rn,min:hn,max:on,round:an,scale:un,bt:cn,vt:fn,Mt:dn,length:pn,xt:mn,_t:gn,inverse:yn,normalize:Sn,Tt:wn,Gt:bn,Ct:vn,random:Mn,rs:xn,hs:_n,Et:Tn,Rt:Gn,rotate:Cn,angle:In,Ft:Pn,P:An,F:Rn,equals:En,Lt:len,sub:sub,mul:mul,div:div,Dt:dist,kt:sqrDist,Nt:sqrLen,forEach:forEach}),globalThis.ls=common,globalThis.ls.us=mat2,globalThis.ls.cs=mat2d,globalThis.ls.fs=mat3,globalThis.ls.ds=mat4,globalThis.ls.ps=quat,globalThis.ls.gs=quat2,globalThis.ls.ys=vec2,globalThis.ls.Ss=vec3,globalThis.ls.ws=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetAudioSdkInstance,GetAudioDOMInterface,GetTouchSdkInstance,IsExpressionType,GetParticleEngine,randomOffset,getOffsetParam,normalizeCssColorString,CloneDrawable,WrapModeToStr,getIndexForEase,ValidateTags,accelerate,SetObjectTypeCollisionsEnabled,UnwrapIWorldInstance,CloneVec2,SplitConvexPolysOver8Points,SplitConvexPoly,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let On=function(t,s,i){i=i||0;var e,n,r,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],rr(l=e*o-h*n,0,i)||(u[0]=(o*r-n*a)/l,u[1]=(e*a-h*r)/l),u},Fn=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n==0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Dn=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},kn=function(t,s,i){return Dn(t,s,i)>0},Ln=function(t,s,i){return Dn(t,s,i)>=0},Nn=function(t,s,i){return Dn(t,s,i)<0},Bn=function(t,s,i){return Dn(t,s,i)<=0},$n=function(t,s,i,e){if(e){var n=tmpPoint1,r=tmpPoint2;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Dn(t,s,i)},Wn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},Vn=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},jn=function(t){t.length=0},Hn=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},Un=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!kn(Vn(t,s-1),Vn(t,s),Vn(t,s+1))&&(Jn(t),!0)},Jn=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},zn=function(t,s){return Nn(Vn(t,s-1),Vn(t,s),Vn(t,s+1))},qn=function(t,s,i){var e,n,r=tmpLine1,h=tmpLine2;if(Ln(Vn(t,s+1),Vn(t,s),Vn(t,i))&&Bn(Vn(t,s-1),Vn(t,s),Vn(t,i)))return!1;n=Wn(Vn(t,s),Vn(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&Ln(Vn(t,s),Vn(t,i),Vn(t,o+1))&&Bn(Vn(t,s),Vn(t,i),Vn(t,o))&&(r[0]=Vn(t,s),r[1]=Vn(t,i),h[0]=Vn(t,o),h[1]=Vn(t,o+1),e=On(r,h),Wn(Vn(t,s),e)<n))return!1;return!0},Yn=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Fn(Vn(t,s),Vn(t,i),Vn(t,e),Vn(t,e+1)))return!1;return!0},Xn=function(t,s,i,e){var n=e||[];if(jn(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},Zn=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(zn(t,h))for(var o=0;o<t.length;++o)if(qn(t,h,o)){i=Zn(Xn(t,h,o,n)),e=Zn(Xn(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([Vn(t,h),Vn(t,o)]))}return s},Kn=function(t){var s=Zn(t);return s.length>0?Qn(t,s):[t]},Qn=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=Qn(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[Xn(t,e,r),Xn(t,r,e)]},tr=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Fn(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Fn(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},sr=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=r*l-a*h;return rr(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},ir=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],S=[],w=t,b=t;if(b.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var v=0;v<t.length;++v)if(zn(w,v)){i.push(w[v]),u=c=Number.MAX_VALUE;for(var M=0;M<t.length;++M)kn(Vn(w,v-1),Vn(w,v),Vn(w,M))&&Bn(Vn(w,v-1),Vn(w,v),Vn(w,M-1))&&(l=sr(Vn(w,v-1),Vn(w,v),Vn(w,M),Vn(w,M-1)),Nn(Vn(w,v+1),Vn(w,v),l)&&(f=Wn(w[v],l))<c&&(c=f,a=l,m=M)),kn(Vn(w,v+1),Vn(w,v),Vn(w,M+1))&&Bn(Vn(w,v+1),Vn(w,v),Vn(w,M))&&(l=sr(Vn(w,v+1),Vn(w,v),Vn(w,M),Vn(w,M+1)),kn(Vn(w,v-1),Vn(w,v),l)&&(f=Wn(w[v],l))<u&&(u=f,o=l,p=M));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),v<p?(Hn(y,w,v,p+1),y.push(l),S.push(l),0!==m&&Hn(S,w,m,w.length),Hn(S,w,0,v+1)):(0!==v&&Hn(y,w,v,w.length),Hn(y,w,0,p+1),y.push(l),S.push(l),Hn(S,w,m,v+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)Ln(Vn(w,v-1),Vn(w,v),Vn(w,M))&&Bn(Vn(w,v+1),Vn(w,v),Vn(w,M))&&(f=Wn(Vn(w,v),Vn(w,M)))<d&&Yn(w,v,M)&&(d=f,g=M%t.length);v<g?(Hn(y,w,v,g+1),0!==g&&Hn(S,w,g,b.length),Hn(S,w,0,v+1)):(0!==v&&Hn(y,w,v,b.length),Hn(y,w,0,g+1),Hn(S,w,g,v+1))}return y.length<S.length?(ir(y,s,i,e,n,r,h),ir(S,s,i,e,n,r,h)):(ir(S,s,i,e,n,r,h),ir(y,s,i,e,n,r,h)),s}return s.push(t),s},er=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)$n(Vn(t,e-1),Vn(t,e),Vn(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},nr=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)hr(e,t[n],s)&&t.splice(i,1)},rr=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},hr=function(t,s,i){return rr(t[0],s[0],i)&&rr(t[1],s[1],i)};lineInt=On,lineSegmentsIntersect=Fn,triangleArea=Dn,isLeft=kn,isLeftOn=Ln,isRight=Nn,isRightOn=Bn,collinear=$n,sqdist=Wn,polygonAt=Vn,polygonClear=jn,polygonAppend=Hn,polygonMakeCCW=Un,polygonReverse=Jn,polygonIsReflex=zn,polygonCanSee=qn,polygonCanSee2=Yn,polygonCopy=Xn,polygonGetCutEdges=Zn,polygonDecomp=Kn,polygonSlice=Qn,polygonIsSimple=tr,getIntersectionPoint=sr,polygonQuickDecomp=ir,polygonRemoveCollinearPoints=er,polygonRemoveDuplicatePoints=nr,scalar_eq=rr,points_eq=hr,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.bs={vs:Kn,Ms:ir,xs:tr,_s:er,Ts:nr,Gs:Un}}{let ar=!1,lr=!1,ur="dev";const cr=Symbol("Construct internal API token");let fr=14;const dr=self.Cs=class{constructor(){throw TypeError("static class can't be instantiated")}static Is(){if(fr<=0)throw new Error("cannot obtain internal API token");return--fr,cr}static Ps(){ar=!0}static As(){return ar}static Rs(){lr=!0}static Es(){return lr}static Os(t){ur=t}static Fs(){return ur}static Ds(){return"final"===ur}};dr.ks=!1,dr.Ls=!1,dr.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ns={}}{const pr=self.Cs;pr.Bs=class{constructor(t){this.$s=t,this.Ws=new Map,this.Vs()}Vs(){let t=this.$s;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.js(t)}js(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ws.set(i,e)}Hs(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Us(t){return this.Ws.has(t)}Js(t){const s=this.Ws.get(t);return void 0===s?null:s}zs(){history.replaceState("",document.title,location.pathname+location.search)}qs(t){this.$s=t,this.Ws.clear(),this.Vs()}},pr.Ys=new pr.Bs(location.search),pr.Xs=new pr.Bs(location.hash),pr.Ys.Us("perf")&&(pr.Zs=!0),"dev"!==pr.Ys.Js("mode")&&pr.Os("final")}{let mr=function(t){const s=parseFloat(t);return Sr.get(s)||(s>=13?"11":"NT "+t)};GetWindowsNTVersionName=mr;const gr=self.Cs,yr="(unknown)";gr.Ks={Qs:yr,ti:yr,si:yr,ii:yr,ei:NaN,ni:yr,ri:"browser",hi:!0,oi:!1,ai:!1,li:!1,ci:async()=>{}};const Sr=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),wr=navigator.userAgent,br=navigator.userAgentData;if(br&&br.brands.length>0){let Mr=function(t){let s="",i="",e="",n="";for(const r of t){const t=xr.get(r.brand);!s&&t&&(s=t,i=r.version);const h=_r.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(gr.Ks.si="Chromium",gr.Ks.ii=n),gr.Ks.si=s||yr,gr.Ks.ii=i||yr,gr.Ks.ni=e||yr};ReadBrandList=Mr,gr.Ks.Qs=br.platform,gr.Ks.oi=br.mobile,gr.Ks.hi=!gr.Ks.oi;const xr=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),_r=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Mr(br.brands);let Tr=!1;gr.Ks.ci=async()=>{if(!Tr)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Mr(t.fullVersionList),"Windows"===gr.Ks.Qs?gr.Ks.ti=mr(t.platformVersion):gr.Ks.ti=t.platformVersion,Tr=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Gr=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(wr);if(i){s(i);break}}};RunTest=Gr,Gr(/windows\s+nt\s+([\d\.]+)/i,(t=>{gr.Ks.Qs="Windows";const s=t[1];gr.Ks.ti=mr(s)})),Gr(/mac\s+os\s+x\s+([\d\._]+)/i,(t=>{gr.Ks.Qs="macOS",gr.Ks.ti=t[1].replace(/_/g,".")})),Gr(/CrOS/,(()=>{gr.Ks.Qs="Chrome OS"})),Gr(/linux|openbsd|freebsd|netbsd/i,(()=>{gr.Ks.Qs="Linux"})),Gr(/android/i,(()=>{gr.Ks.Qs="Android"})),Gr(/android\s+([\d\.]+)/i,(t=>{gr.Ks.Qs="Android",gr.Ks.ti=t[1]})),gr.Ks.Qs===yr&&(Gr(/(iphone|ipod|ipad)/i,(t=>{gr.Ks.Qs="iOS"})),Gr([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],(t=>{gr.Ks.Qs="iOS",gr.Ks.ti=t[1].replace(/_/g,".")})));const Cr=/chrome\//i.test(wr),Ir=/chromium\//i.test(wr),Pr=/edg\//i.test(wr),Ar=/OPR\//.test(wr),Rr=/nwjs/i.test(wr),Er=/safari\//i.test(wr),Or=/webkit/i.test(wr);Pr||Ar||Gr(/chrome\/([\d\.]+)/i,(t=>{gr.Ks.si="Chrome",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"})),Gr(/edg\/([\d\.]+)/i,(t=>{gr.Ks.si="Edge",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"})),Gr(/OPR\/([\d\.]+)/,(t=>{gr.Ks.si="Opera",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"})),Gr(/chromium\/([\d\.]+)/i,(t=>{gr.Ks.si="Chromium",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"})),Gr(/nwjs\/[0-9.]+/i,(t=>{gr.Ks.si="NW.js",gr.Ks.ii=t[1],gr.Ks.ni="Chromium",gr.Ks.ri="nwjs"})),Gr(/firefox\/([\d\.]+)/i,(t=>{gr.Ks.si="Firefox",gr.Ks.ii=t[1],gr.Ks.ni="Gecko"})),!Er||Cr||Ir||Pr||Ar||Rr||(gr.Ks.si="Safari",gr.Ks.ni="WebKit",Gr(/version\/([\d\.]+)/i,(t=>{gr.Ks.ii=t[1]})),Gr(/crios\/([\d\.]+)/i,(t=>{gr.Ks.si="Chrome for iOS",gr.Ks.ii=t[1]})),Gr(/fxios\/([\d\.]+)/i,(t=>{gr.Ks.si="Firefox for iOS",gr.Ks.ii=t[1]})),Gr(/edgios\/([\d\.]+)/i,(t=>{gr.Ks.si="Edge for iOS",gr.Ks.ii=t[1]}))),gr.Ks.ni===yr&&Or&&(gr.Ks.ni="WebKit"),"Android"===gr.Ks.Qs&&"Safari"===gr.Ks.si&&(gr.Ks.si="Stock");const Fr=new Set(["Windows","macOS","Linux","Chrome OS"]).has(gr.Ks.Qs)||"nwjs"===gr.Ks.ri;gr.Ks.hi=Fr,gr.Ks.oi=!Fr}"Chrome"===gr.Ks.si&&"browser"===gr.Ks.ri&&/wv\)/.test(wr)&&(gr.Ks.ri="webview"),"nwjs"!==gr.Ks.ri&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(gr.Ks.ri="webapp"),gr.Ks.ei=parseFloat(gr.Ks.ii);const vr="macOS"===gr.Ks.Qs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;vr&&(gr.Ks.Qs="iOS",gr.Ks.ti=gr.Ks.ii,gr.Ks.hi=!1,gr.Ks.oi=!0,gr.Ks.li=!0),gr.Ks.ai="macOS"===gr.Ks.Qs||"iOS"===gr.Ks.Qs}{let Dr=function(t){return new Promise(((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)}))},kr=function(t){return new Promise(((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)}))},Lr=function(t,s){return zr(t,s)},Nr=function(t,s){return zr(t,s,!0)},Br=function(t){$r(t);let s=Hr.get(t);return s instanceof Promise||(s=qr(t),Hr.set(t,s),s.catch((s=>Hr.delete(t)))),s},$r=function(t){if("string"!=typeof t)throw new TypeError("expected string")},Wr=function(t,s){const i=t.objectStore(jr).openCursor();return new Promise((t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}}))};s=Dr,a=kr,c=Lr,i=Nr,l=Br,f=$r,d=Wr;const Vr=2,jr="keyvaluepairs",Hr=new Map,Ur="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,Jr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function zr(t,s,i=!1,e=!0){const n=await Br(t);try{return s(n.transaction([jr],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return Hr.delete(t),zr(t,s,i,!1);throw n}}async function qr(t){$r(t);const s=indexedDB.open(t,Vr);return s.addEventListener("upgradeneeded",(s=>{try{s.target.result.createObjectStore(jr)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}})),Dr(s)}class Yr{constructor(t){$r(t),this.name=t}async ready(){await Br(this.name)}set(t,s){return $r(t),Nr(this.name,(async i=>{const e=Dr(i.objectStore(jr).put(s,t)),n=kr(i);await Promise.all([n,e])}))}get(t){return $r(t),Lr(this.name,(async s=>{const i=Dr(s.objectStore(jr).get(t)),e=kr(s),[n,r]=await Promise.all([e,i]);return r}))}delete(t){return $r(t),Nr(this.name,(async s=>{const i=Dr(s.objectStore(jr).delete(t)),e=kr(s);await Promise.all([e,i])}))}clear(){return Nr(this.name,(async t=>{const s=Dr(t.objectStore(jr).clear()),i=kr(t);await Promise.all([i,s])}))}keys(){return Lr(this.name,(async t=>{let s;s=Jr?Dr(t.objectStore(jr).getAllKeys()):Wr(t,"keys");const i=kr(t),[e,n]=await Promise.all([i,s]);return n}))}values(){return Lr(this.name,(async t=>{let s;s=Ur?Dr(t.objectStore(jr).getAll()):Wr(t,"values");const i=kr(t),[e,n]=await Promise.all([i,s]);return n}))}entries(){return Lr(this.name,(async t=>{const s=Wr(t,"entries"),i=kr(t),[e,n]=await Promise.all([i,s]);return n}))}}self.fi=Yr}{let Xr=function(t){throw new Error(`"${t}" is not implemented`)},Zr=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Kr=function(t){return"object"==typeof t?new Promise((s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)})):Promise.resolve(t)};r=Xr,a=Zr,o=Kr;const Qr=self.fi,th=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class sh{constructor(t){this.di=t,this.pi=!this.di,this.pi||"undefined"!=typeof indexedDB||(this.pi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.mi=new Map}gi(t){if(!this.pi)for(const s of th)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.pi=!0;break}}async yi(t){const s=this.mi.get(t),i=await Kr(s);return void 0===i?null:i}async Si(t,s){s=await Kr(s),this.mi.set(t,s)}wi(t){this.mi.delete(t)}bi(){this.mi.clear()}Mi(){return Array.from(this.mi.keys())}xi(){return this.pi}_i(){return this.mi}Ti(t){this.mi=t}async getItem(t,s){if(Zr(s),this.pi)return await this.yi(t);let i;try{i=await this.di.get(t)}catch(s){return this.gi(s),this.pi?await this.yi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(Zr(i),void 0===s&&(s=null),this.pi)await this.Si(t,s);else try{await this.di.set(t,s)}catch(i){if(this.gi(i),!this.pi)throw i;await this.Si(t,s)}}async removeItem(t,s){if(Zr(s),this.pi)this.wi(t);else try{await this.di.delete(t)}catch(s){this.gi(s),this.pi?this.wi(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(Zr(t),this.pi)this.bi();else try{await this.di.clear()}catch(t){this.gi(t),this.pi?this.bi():console.error("Error clearing storage: ",t)}}async keys(t){if(Zr(t),this.pi)return this.Mi();let s=[];try{s=await this.di.keys()}catch(t){if(this.gi(t),this.pi)return this.Mi();console.error("Error getting storage keys: ",t)}return s}ready(t){return Zr(t),this.pi?Promise.resolve(!0):this.di.ready()}Gi(t){if(t.Ci)return new sh(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new Qr(s);return new sh(i)}}length(t){Xr("localforage.length()")}key(t,s){Xr("localforage.key()")}iterate(t,s){Xr("localforage.iterate()")}Ii(t){Xr("localforage.setDriver()")}config(t){Xr("localforage.config()")}Pi(t){Xr("localforage.defineDriver()")}Ai(){Xr("localforage.driver()")}supports(t){Xr("localforage.supports()")}dropInstance(){Xr("localforage.dropInstance()")}}self.localforage=new sh(new Qr("localforage"))}{const ih=self.Cs;if(ih.Ri={},ih.Ri.Ei=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),ih.Ri.Oi="undefined"!=typeof HTMLDialogElement,ih.Ri.Fi=!!self.requestIdleCallback,ih.Ri.ImageBitmap=!!self.createImageBitmap,ih.Ri.ImageBitmapOptions=!1,ih.Ri.Di=!1,ih.Ri.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then((()=>{ih.Ri.ImageBitmapOptions=!0})).catch((()=>{ih.Ri.ImageBitmapOptions=!1}))}catch(eh){ih.Ri.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then((t=>{ih.Ri.Di=10===t.width&&10===t.height})).catch((()=>{ih.Ri.Di=!1}))}catch(nh){ih.Ri.Di=!1}}if(ih.Ri.ki=!(!navigator.clipboard||!navigator.clipboard.readText),ih.Ri.Li=!(!navigator.permissions||!navigator.permissions.query),ih.Ri.Ni=!1,ih.Ri.Li){const rh={name:"clipboard-read"};navigator.permissions.query(rh).then((()=>{ih.Ri.Ni=!0})).catch((()=>{ih.Ri.Ni=!1}))}ih.Ri.Bi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),ih.Ri.$i="undefined"!=typeof Proxy,ih.Ri.Wi="undefined"!=typeof document&&void 0!==document.createElement("a").download,ih.Ri.Vi="function"==typeof fetch,ih.Ri.ji=!!(self.isSecureContext&&"Opera"!==ih.Ks.si&&navigator.storage&&navigator.storage.persist),ih.Ri.Hi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),ih.Ri.Ui=(()=>{if("undefined"==typeof document)return!1;if("iOS"===ih.Ks.Qs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),ih.Ri.ImageDecoder=void 0!==self.ImageDecoder,ih.Ri.Ji=!!self.VideoEncoder,ih.Ri.zi=!!self.showOpenFilePicker,ih.Ri.Yi=!!self.queryLocalFonts,ih.Ri.UserActivation=!!navigator.userActivation,ih.Ri.Xi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise((s=>t.toBlob(s,"image/webp",1)))),ih.Ri.Xi=i&&"image/webp"===i.type}catch(t){ih.Ri.Xi=!1}})()}{const hh=self.Cs;if(!String.prototype.trimStart){const oh=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(oh,"")}}if(!String.prototype.trimEnd){const ah=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(ah,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(hh.Zi(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let lh=function(t,s){return t.reduce(((t,i)=>s>0&&Array.isArray(i)?(Array.prototype.push.apply(t,lh(i,s-1)),t):(t.push(i),t)),[])};arrayFlat=lh,Array.prototype.flat=function(t=1){return lh(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise(((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota(((s,i)=>t({usage:s,quota:i})),s)))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let uh=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+ch.Ki();console.error(s)};assertFail=uh;const ch=self.Cs;self.assert=function(t,s){t||uh(s)}}{const fh=self.Cs,dh=self.Ns;fh.Qi=function(t){return"number"==typeof t},fh.te=function(t){return fh.Qi(t)&&isFinite(t)},fh.se=function(t){if(!fh.Qi(t))throw new TypeError("expected number")},fh.ie=function(t){fh.ee(t)},fh.ne=function(t,s,i){if(!fh.Qi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},fh.re=function(...t){for(let s of t);},fh.he=function(t){if(!fh.te(t))throw new TypeError("expected finite number")},fh.oe=function(t){fh.ee(t)},fh.ae=function(...t){for(let s of t);},fh.le=function(t){return"string"==typeof t},fh.ue=function(t){if(!fh.le(t))throw new TypeError("expected string")},fh.ce=function(t){fh.ee(t)},fh.fe=function(...t){for(let s of t);},fh.de=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},fh.pe=function(t){if(!fh.de(t))throw new TypeError("expected simple object")},fh.me=function(t){if(!fh.ee(t)&&!fh.de(t))throw new TypeError("expected simple object")},fh.ge=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},fh.ye=function(t){if(!fh.ge(t))throw new TypeError("expected object")},fh.Se=function(t){fh.ee(t)},fh.we=function(...t){for(let s of t);},fh.be=function(t){return fh.ve(t,Blob)&&"string"==typeof t.name},fh.Me=function(t){if(!fh.be(t))throw new TypeError("expected file")},fh.xe=function(t){fh.ee(t)},fh._e=function(t){return Array.isArray(t)},fh.Te=function(t){if(!fh._e(t))throw new TypeError("expected array")},fh.Ge=function(t){fh.ee(t)},fh.Ce=function(...t){for(let s of t);},fh.Ie=function(t){return!(!fh._e(t)||t.length&&!fh._e(t[0]))},fh.Pe=function(t){if(!fh.Ie(t))throw new TypeError("expected 2d array");for(let s of t)if(!fh._e(s))throw new TypeError("expected 2d array")},fh.Ae=function(t){fh.ee(t)},fh.Re=function(t){return"function"==typeof t},fh.Ee=function(t,s){if(!fh.Re(t))throw new TypeError("expected function");if(!fh.ee(s)&&t!==s)throw new TypeError("expected same function reference")},fh.Oe=function(t){fh.ee(t)},fh.Fe=function(...t){for(let s of t);},fh.De=function(t,...s){if(!fh.Re(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!fh.ee(i)&&t===i)return;throw new TypeError("expected same function reference")},fh.ke=function(...t){if(!fh.ee(t))for(let s of t);},fh.Le=function(t,s){return t instanceof s},fh.Ne=function(t,...s){for(let i of s)if(fh.Le(t,i))return!0;return!1},fh.Be=function(t,s){if(!fh.Le(t,s))throw new TypeError("unexpected type")},fh.$e=function(t,s){fh.ee(t)},fh.We=function(t,...s){for(let t of s);},fh.Ve=function(t,...s){if(!fh.Ne(t,...s))throw new TypeError("unexpected type")},fh.je=function(t,...s){if(!fh.ee(t)&&!fh.Ne(t,...s))throw new TypeError("unexpected type")},fh.He=function(t,s){for(let i of t)if(!fh.Le(i,s))return!1;return!0},fh.Ue=function(t){for(let s of t)if(!fh.te(s))return!1;return!0},fh.Je=function(t,s){for(let s of t);},fh.ze=function(t,s){if(!fh.ee(t))for(let s of t);},fh.qe=function(t,s){if(!fh.ee(t))for(let s of t);},fh.Ye=function(t,...s){for(let s of t);},fh.Xe=function(t,...s){if(!fh.ee(t))for(let s of t);},fh.Ze=function(t,s){return!(fh.ee(t)||!fh.le(t.nodeName))&&(!s||fh.Ke(t.nodeName,s))},fh.Qe=function(t,s){if(fh.ee(t)||!fh.le(t.nodeName))throw new TypeError("expected DOM node");if(s&&!fh.Ke(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},fh.tn=function(t,s){fh.ee(t)},fh.sn=function(t,s){return!(fh.ee(t)||!fh.le(t.tagName))&&(!s||fh.Ke(t.tagName,s))},fh.en=function(t,s){if(fh.ee(t)||!fh.le(t.tagName))throw new TypeError("expected HTML element");if(s&&!fh.Ke(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},fh.nn=function(t,s){fh.ee(t)},fh.rn=function(t){return fh.sn(t,"img")||fh.sn(t,"canvas")||fh.sn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},fh.hn=function(t){if(!fh.rn(t))throw new TypeError("expected drawable")},fh.an=function(t){fh.ee(t)},fh.ln=function(t){return t instanceof ImageData||fh.rn(t)},fh.un=function(t){if(!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.cn=function(t){if(!fh.ee(t)&&!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.fn=function(t){return"string"==typeof t||fh.dn&&t instanceof fh.dn||t instanceof fh.pn},fh.mn=function(t){if(!fh.fn(t))throw new TypeError("expected string-like")},fh.gn=function(t){fh.ee(t)},fh.yn=function(...t){for(let s of t);},fh.Sn=function(){throw new Error("must be overridden")},fh.wn=function(){throw new Error("not yet implemented")},fh.bn=function(t){return t.constructor===function*(){}.constructor},fh.vn=function(t){if(!fh.bn(t))throw new Error("expected generator function")},fh.Mn=function(t){return"function"===t[Symbol.iterator]},fh.xn=function(t){if(!fh.Mn(t))throw new Error("expected iterable")},fh._n=function(t){return!fh.ee(t)},fh.ee=function(t){return null==t},fh.Tn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},fh.Gn=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const ph=Object.getPrototypeOf(Uint8Array);fh.Cn=function(t){return fh.Le(t,ph)},fh.In=function(t){},fh.Pn=function(t){fh.An(t,ph)},fh.Rn=function(t,...s){if(!fh.En(t,...s))throw new TypeError("unexpected type")},fh.En=function(t,...s){for(const i of s)if(fh.ve(t,i))return!0;return!1},fh.An=function(t,s){if(!fh.ve(t,s))throw new TypeError("unexpected type")},fh.ve=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},dh.se=fh.se,dh.ie=fh.ie,dh.he=fh.he,dh.oe=fh.oe,dh.ue=fh.ue,dh.ce=fh.ce,dh.ye=fh.ye,dh.Se=fh.Se,dh.Te=fh.Te,dh.Ge=fh.Ge,dh.Ee=fh.Ee,dh.Oe=fh.Oe,dh.Be=fh.Be,dh.$e=fh.$e,dh.ee=fh.ee}{let mh=function(t,s){let i=bh.getType(t),e=bh.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},gh=function(t){console.warn("[Defence] "+t+" @",bh.Ki())},yh=function(){if(Ih=-1,xh.size>0||_h.size>0){let t=[...new Set([...xh.keys()].map((t=>bh.getName(t))))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),xh.clear(),_h.clear()}},Sh=function(t){let s=new Set;for(let i in t)s.add(i);return s},wh=function(t,s){let i=Sh(s),e=Ph.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);bh.On(s,[...i]),s.length&&console.warn(`[Defence] '${bh.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Ph.set(t,i)};isValidTypeChange=mh,logDefendedObjectWarning=gh,CheckDefendedObjectsUsedCorrectly=yh,getObjectPropertySet=Sh,VerifyObjectPropertiesConsistent=wh;const bh=self.Cs,vh=new Map;let Mh;bh.Fn=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},bh.Dn=function(t,...s){vh.has(t)||vh.set(t,-1),-1===vh.get(t)&&vh.set(t,requestAnimationFrame((()=>{console.log(`%c${t}`,"font-weight: bold",...s),vh.set(t,-1)})))},bh.kn=function(t){performance.mark(t),Mh||(Mh=new Map),Mh.has(t)||Mh.set(t,{Ln:0,total:0,Nn:0,Bn:1,toString:function(){return`${t} :: current => ${this.Ln.toPrecision(3)} :: average => ${this.Nn.toPrecision(3)} :: calls => ${this.Bn}`}})},bh.$n=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Mh.get(t);i.Ln=s.duration,i.total+=i.Ln,i.Nn=i.total/i.Bn,console.log(i.toString()),i.Bn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},bh.Ki=function(){return(new Error).stack},bh.Wn=function(){},bh.cast=function(t,s){return t&&t instanceof s?t:null},bh.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":bh.Qi(t)?"<number>":bh.le(t)?"<string>":bh._e(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":bh.Re(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},bh.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},bh.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let xh=new Map,_h=new Map,Th=new WeakMap,Gh=new WeakMap;bh.Vn={};const Ch=new Set(["then","splice"]);bh.Vn.get=function(t,s){return s in t||"symbol"==typeof s||Ch.has(s)||gh(`Accessed missing property '${s}' from defended object '${bh.getName(t)}', returning undefined`),Gh.has(t)&&"symbol"!=typeof s&&!Ch.has(s)&&gh(`Accessed property '${s}' on a released object '${bh.getName(t)}'\nObject was originally released at: ${Gh.get(t)})\nCall stack at access: `),t[s]},bh.Vn.set=function(t,s,i){return s in t||xh.has(t)||gh(`Set non-existent property '${s}' to '${i}' on defended object '${bh.getName(t)}'`),mh(t[s],i)||xh.has(t)||gh(`Set '${bh.getType(t[s])}' property '${s}' to type '${bh.getType(i)}' on defended object '${bh.getName(t)}'`),Gh.has(t)&&gh(`Set property '${s}' on a released object '${bh.getName(t)}'\nObject was originally released at: ${Gh.get(t)})\nCall stack at access: `),t[s]=i,!0},bh.Vn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${bh.getName(t)}'`)},bh.Vn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${bh.getName(t)}'`)},bh.Vn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${bh.getName(t)}'`)};let Ih=-1;bh.jn=class{constructor(){if(!bh.Ls||!bh.Ri.$i)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,bh.Vn);return xh.set(s,i),_h.set(i,s),Th.set(i,s),-1===Ih&&(Ih=requestAnimationFrame(yh)),i}},bh.Hn=function(t){if(bh.Ls&&bh.Ri.$i&&t instanceof bh.jn){if(!_h.has(t))return t;let s=_h.get(t);return _h.delete(t),xh.delete(s),t}return bh.ks?Object.seal(t):t},bh.Un=function(t,...s){let i;try{i=new t(...s)}catch(t){throw _h.clear(),xh.clear(),t}return bh.Ls&&wh(t,i),bh.Hn(i)},bh.Jn=function(t){let s=Th.get(t);s&&Gh.set(s,bh.Ki())},bh.zn=function(t){let s=Th.get(t);return!!s&&!!Gh.get(s)};let Ph=new Map;bh.qn=class{constructor(t){this.Yn="",t&&this.start(t)}start(t){bh.Zs&&(this.Yn=t,performance.mark(this.Yn+"-Start"))}end(){bh.Zs&&(performance.mark(this.Yn+"-End"),performance.measure(this.Yn,this.Yn+"-Start",this.Yn+"-End"))}next(t){bh.Zs&&(this.end(),this.Yn=t,performance.mark(this.Yn+"-Start"))}}}{let Ah=function(t){return 0===t&&1/t<0};isNegativeZero=Ah;const Rh=self.Cs,Eh=2*Math.PI,Oh=Math.PI/180,Fh=180/Math.PI;Rh.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},Rh.Xn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},Rh.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},Rh.Zn=function(t,s,i){return t<s?s:t>i?i:t},Rh.Kn=function(t){return(t%=Eh)<0&&(t+=Eh),t},Rh.Qn=function(t){return t*Oh},Rh.tr=function(t){return t*Fh},Rh.sr=function(t,s){return Math.sqrt(t*t+s*s)},Rh.ir=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},Rh.er=function(t,s,i,e){return Rh.sr(i-t,e-s)},Rh.nr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},Rh.rr=function(t,s,i,e){return Math.atan2(e-s,i-t)},Rh.hr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Rh.ar=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?Rh.Kn(t+i):Rh.Kn(t-i):Rh.Kn(s)},Rh.lr=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},Rh.ur=function(t,s,i,e=0){let n=Rh.hr(t,s);const r=Eh*e;return Rh.lr(s,t)?Rh.Kn(t+(n+r)*i):Rh.Kn(t-(n+r)*i)},Rh.cr=function(t,s,i,e=0){const n=Rh.hr(t,s),r=Eh*e;return Rh.lr(s,t)?Rh.Kn(t+(n+r)*i):Rh.Kn(t+(Eh-n+r)*i)},Rh.dr=function(t,s,i,e=0){const n=Rh.hr(t,s),r=Eh*e;return Rh.lr(s,t)?Rh.Kn(t-(-Eh+n-r)*i):Rh.Kn(t-(n+r)*i)},Rh.pr=function(t,s){const i=Rh.hr(t,s);return Rh.lr(t,s)?Rh.Kn(s-i):Rh.Kn(s+i)},Rh.Ct=function(t,s,i){return t+i*(s-t)},Rh.mr=function(t,s,i){return t===s?0:(i-t)/(s-t)},Rh.gr=function(t,s,i,e,n){return Rh.Ct(e,n,Rh.mr(t,s,i))},Rh.yr=function(t,s,i,e){return Rh.Ct(Rh.Ct(t,s,e),Rh.Ct(s,i,e),e)},Rh.Sr=function(t,s,i,e,n){return Rh.Ct(Rh.yr(t,s,i,n),Rh.yr(s,i,e,n),n)},Rh.wr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},Rh.br=function(t){return t>0&&!(t-1&t)},Rh.vr=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Rh.Mr=function(t,s){return Math.round(t*s)/s},Rh._r=function(t,s){return Math.floor(t*s)/s},Rh.Tr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},Rh.Gr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Rh.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},Rh.Cr=function(t,s,i){return Rh.Zn(t,0,255)|Rh.Zn(s,0,255)<<8|Rh.Zn(i,0,255)<<16};const Dh=1024,kh=1023,Lh=16384,Nh=8191,Bh=-8192;Rh.Ir=function(t,s,i,e){return(t=Rh.Zn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Rh.Zn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=Rh.Zn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=Rh.Zn(Math.floor(1023*e),0,1023)))},Rh.Pr=function(t,s,i){return Rh.Ir(t,s,i,1)},Rh.Ar=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Rh.Rr=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Rh.Er=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Rh.Or=function(t){return Ah(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Rh.Fr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const $h=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Rh.Dr=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of $h){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=Rh.Fr(t,s);return[t/i,s/i]},Rh.kr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,S=i-t,w=e-s,b=h-n,v=o-r,M=Math.abs(w*b-v*S),x=b*y-v*g;if(Math.abs(x)>M)return!1;const _=S*y-w*g;return Math.abs(_)<=M},Rh.Lr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-i,y=l-s+c-e,S=i-t,w=e-s,b=u-a,v=c-l,M=Math.abs(w*b-v*S),x=b*y-v*g;if(Math.abs(x)>M)return!1;const _=S*y-w*g;return Math.abs(_)<=M},Rh.Nr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.Br(),u=n.$r(),c=n.Wr(),f=n.Vr(),d=n.jr(),p=n.Hr(),m=n.Ur(),g=n.Jr();return Rh.Lr(t,s,i,e,r,h,o,a,l,u,c,f)||Rh.Lr(t,s,i,e,r,h,o,a,c,f,d,p)||Rh.Lr(t,s,i,e,r,h,o,a,d,p,m,g)||Rh.Lr(t,s,i,e,r,h,o,a,m,g,l,u)},Rh.zr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=n.length-4;l<=u;l+=2)if(Rh.Lr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return Rh.Lr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[0],n[1])};const Wh=2,Vh=1e-6;Rh.qr=function(t,s,i,e,n,r,h,o){const a=i-t,l=o-r,u=a*l-(e-s)*(h-n);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},Rh.Yr=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return Rh.qr(t,s,i,e,n-l,r-u,h+l,o+u)},Rh.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,S=u*f+c*d,w=1/(p*y-m*m),b=(y*g-m*S)*w,v=(p*S-m*g)*w;return b>=0&&v>=0&&b+v<=1},Rh.Zr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,S=f*u+d*c,w=p*g-m*m,b=(g*y-m*S)/w,v=(p*S-m*y)/w;return[1-b-v,b,v]},Rh.Kr=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{const jh=self.Cs;let Hh=null,Uh="";if("undefined"!=typeof document){Hh=document;const Zh=document.querySelector("base");Uh=Zh&&Zh.hasAttribute("href")?Zh.getAttribute("href"):"",Uh&&(Uh.startsWith("/")&&(Uh=Uh.substr(1)),Uh.endsWith("/")||(Uh+="/"))}jh.Qr=function(){return Uh},jh.th=function(){if(!Hh)return"";const t=Hh.location;return jh.sh(t.origin+t.pathname)+Uh},jh.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},jh.ih=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},jh.eh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},jh.nh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},jh.rh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},jh.hh=function(t){return t.replace(/\\/g,"/")},jh.oh=function(t,s){return s===(t?jh.eh(t).slice(1):"")},jh.ah=function(t,s){let i,e;return jh.be(t)&&(i=jh.rh(t.name)),jh.le(t)&&(i=jh.rh(t)),jh.be(s)&&(e=jh.rh(s.name)),jh.le(s)&&(e=jh.rh(s)),i===e},jh.uh=function(t){t=jh.hh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,fh:r,name:e,root:s,ext:h,dh:s+n+r}},jh.ph=function(t,s){return new Promise(((i,e)=>{self.setTimeout(i,t,s)}))},jh.mh=function(t){try{t()}catch(t){jh.ks&&console.warn("Swallowed exception: ",t)}},jh.gh=function(){},jh.Ke=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},jh.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},jh.Sh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},jh.wh=function(t,s){t.length=s},jh.bh=function(t){t&&0!==t.length&&jh.wh(t,0)},jh.Mh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];jh.wh(i,0)}jh.wh(t,0)}},jh.xh=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},jh._h=function(t,s,i){s|=0;const e=t.length;s<e?jh.wh(t,s):s>e&&jh.xh(t,s,i)},jh.Th=function(t,s){jh.bh(t),jh.On(t,s)},jh.On=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},jh.Gh=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];jh.wh(t,i)},jh.Ch=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},jh.Ih=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},jh.Ph=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return jh.wh(t,e),i},jh.Ah=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return jh.wh(t,e),i-e},jh.Rh=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},jh.Eh=function(t,s){if(!jh.Rh(t,s))throw new RangeError("array index out of bounds")},jh.Oh=function(t){return t.slice()},jh.Fh=function(t,s){let i=[];for(let e of t)if(jh.ge(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else jh._e(e)?i.push(jh.Fh(e,s)):i.push(e);return i},jh.Dh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},jh.kh=function(t,s=" "){return t?t.split(s).map((t=>t.trim())).filter((t=>!!t)):[]},jh.Lh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},jh.Nh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},jh.Bh=function(t,s){for(const i of s)t.add(i);return t},jh.$h=function(t){for(let s of t)return s;return null},jh.xor=function(t,s){return!t!=!s},jh.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},jh.Wh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},jh.Vh=function(t,s){return t.length?new Promise(((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then((e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))})).catch((t=>{h=!0,e(t)}))})):Promise.resolve([])};let Jh=[];jh.jh=function(t){Jh.push(t)},jh.Hh=function(){let t=0;for(let s of Jh)t+=s();return Math.floor(t)};let zh=1;const qh=new Map,Yh=new MessageChannel;Yh.port2.onmessage=function(t){const s=t.data,i=qh.get(s);qh.delete(s),i&&i(performance.now())},jh.Uh=function(t){const s=zh++;return qh.set(s,t),Yh.port1.postMessage(s),s},jh.Jh=function(t){qh.delete(t)},jh.zh=jh.Uh,jh.qh=function(){return new Promise((t=>jh.zh(t)))};const Xh=new Set;jh.Yh=function(t){const s=self.requestAnimationFrame((async i=>{await jh.qh(),Xh.has(s)&&(Xh.delete(s),t(i))}));return Xh.add(s),s},jh.Xh=function(t){Xh.has(t)&&(self.cancelAnimationFrame(t),Xh.delete(t))}}{const Kh=self.Cs;Kh.Zh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Kh.Kh=function(t){return!Kh.Zh(t)},Kh.Qh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Kh.so=function(t,s){return fetch(t,s).then((t=>(Kh.Qh(t),t)))},Kh.io=function(t){return Kh.so(t).then((t=>t.text()))},Kh.eo=function(t){return Kh.so(t).then((t=>t.json()))},Kh.no=function(t){return Kh.so(t).then((t=>t.blob()))},Kh.ro=function(t){return Kh.so(t).then((t=>t.arrayBuffer()))},Kh.ho=function(t){return new Promise(((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t}))},Kh.oo=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise(((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)}))},Kh.ao=function(t){return"function"==typeof t.text?t.text():new Promise(((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)}))},Kh.lo=function(t){return Kh.ao(t).then((t=>JSON.parse(t)))},Kh.uo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await Kh.ho(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},Kh.co=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},Kh.fo=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=Kh.Zn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise((e=>t.toBlob(e,s,i)));throw new Error("could not convert canvas to blob")},Kh.do=function(t,s,i){const e=Kh.co(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),Kh.fo(e,s,i)},Kh.po=function(t,s,i){if(Kh.Ri.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then((t=>Kh.do(t,s,i)));if(Kh.Ri.ImageBitmap)return createImageBitmap(t).then((t=>Kh.do(t,s,i)));{const e=Kh.co(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),Kh.fo(e,s,i)}},Kh.mo=function(t,s){t.clear();for(const i of s)t.add(i)},Kh.yo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},Kh.So=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},Kh.wo=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map((s=>t(s)))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map((s=>[s[0],t(s[1])]))};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Kh.bo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map((s=>t(s))));if("map"===s._c3type_)return new Map(s.data.map((s=>[s[0],t(s[1])])));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Kh.vo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},Kh.Mo=function(t){return"object"==typeof t&&"function"==typeof t.next},Kh.xo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let Qh=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},to=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};padTwoDigits=Qh,hueToRGB=to;const so=self.Cs,io=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,eo=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;so._o=class{constructor(t,s,i,e){this.To=NaN,this.Go=NaN,this.Co=NaN,this.Io=NaN,this.To=0,this.Go=0,this.Co=0,this.Io=0,t instanceof so._o?this.set(t):this.Po(t||0,s||0,i||0,e||0)}Ao(t,s,i){return this.To=+t,this.Go=+s,this.Co=+i,this.Zn(),this}Po(t,s,i,e){return this.To=+t,this.Go=+s,this.Co=+i,this.Io=+e,this.Zn(),this}set(t){return this.To=t.To,this.Go=t.Go,this.Co=t.Co,this.Io=t.Io,this}S(t){return this.set(t)}add(t){this.To+=t.To,this.Go+=t.Go,this.Co+=t.Co,this.Io+=t.Io,this.Zn()}Ro(t,s,i,e=0){this.To+=+t,this.Go+=+s,this.Co+=+i,this.Io+=+e,this.Zn()}Eo(t){this.Oo(Math.max(this.To,t.To)-Math.min(this.To,t.To)),this.Fo(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Do(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.ko(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Zn()}Lo(t){this.To=t.To,this.Go=t.Go,this.Co=t.Co}Oo(t){this.To=so.Zn(+t,0,1)}No(){return this.To}Fo(t){this.Go=so.Zn(+t,0,1)}Bo(){return this.Go}Do(t){this.Co=so.Zn(+t,0,1)}$o(){return this.Co}ko(t){this.Io=so.Zn(+t,0,1)}Wo(){return this.Io}clone(){return so.Un(so._o,this.To,this.Go,this.Co,this.Io)}toArray(){return[this.To,this.Go,this.Co,this.Io]}Vo(){return new Float64Array(this.toArray())}jo(t,s){t[s++]=this.To,t[s++]=this.Go,t[s++]=this.Co,t[s]=this.Io}Ho(t,s){t[s++]=this.To,t[s++]=this.Go,t[s]=this.Co}equals(t){return this.To===t.To&&this.Go===t.Go&&this.Co===t.Co&&this.Io===t.Io}Uo(t){return this.To===t.To&&this.Go===t.Go&&this.Co===t.Co}Jo(t,s,i){return this.To===t&&this.Go===s&&this.Co===i}zo(t,s,i,e){return this.To===t&&this.Go===s&&this.Co===i&&this.Io===e}qo(t,s){return t[s]===Math.fround(this.To)&&t[s+1]===Math.fround(this.Go)&&t[s+2]===Math.fround(this.Co)&&t[s+3]===Math.fround(this.Io)}Yo(t,s){return t[s]===Math.fround(this.To)&&t[s+1]===Math.fround(this.Go)&&t[s+2]===Math.fround(this.Co)}multiply(t){this.To*=t.To,this.Go*=t.Go,this.Co*=t.Co,this.Io*=t.Io}Xo(t){this.To*=t,this.Go*=t,this.Co*=t,this.Io*=t}Zo(){return this.To*=this.Io,this.Go*=this.Io,this.Co*=this.Io,this}Ko(){return this.To/=this.Io,this.Go/=this.Io,this.Co/=this.Io,this}Zn(){return this.To=so.Zn(this.To,0,1),this.Go=so.Zn(this.Go,0,1),this.Co=so.Zn(this.Co,0,1),this.Io=so.Zn(this.Io,0,1),this}Qo(t){this.To=so.Ar(t),this.Go=so.Rr(t),this.Co=so.Er(t),this.Io=so.Or(t)}ta(t,s,i){return`rgb(${100*(so.te(t)?t:this.No())}%, ${100*(so.te(s)?s:this.Bo())}%, ${100*(so.te(i)?i:this.$o())}%)`}sa(t,s,i,e){return`rgba(${100*(so.te(t)?t:this.No())}%, ${100*(so.te(s)?s:this.Bo())}%, ${100*(so.te(i)?i:this.$o())}%, ${so.te(e)?e:this.Wo()})`}ia(){const t=Math.round(255*this.No()),s=Math.round(255*this.Bo()),i=Math.round(255*this.$o());return"#"+Qh(t.toString(16))+Qh(s.toString(16))+Qh(i.toString(16))}ea(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Oo(s),isFinite(i)&&this.Fo(i),isFinite(e)&&this.Do(e),this.ko(1),!0}na(){return`${Math.round(255*this.No())}, ${Math.round(255*this.Bo())}, ${Math.round(255*this.$o())}`}ra(){return[Math.round(255*this.No()),Math.round(255*this.Bo()),Math.round(255*this.$o())]}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),this.ko(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),this.ko(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),isFinite(r)&&this.ko(r),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),isFinite(r)&&this.ko(r),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.oa(t):this.ha(t);if(t.startsWith("rgba("))return t.includes("%")?this.la(t):this.aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ca(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.oa(t):4===s.length&&this.la(t):3===s.length?this.ha(t):4===s.length&&this.aa(t)}}return this.ea(t)}toJSON(){return[this.To,this.Go,this.Co,this.Io]}fa(t,s,i,e){let n,r,h;if(t%=360,s=so.Zn(s,0,100),i=so.Zn(i,0,100),e=so.Zn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=to(o,e,t+1/3),r=to(o,e,t),h=to(o,e,t-1/3)}return this.Oo(n),this.Fo(r),this.Do(h),this.ko(e),this}ca(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=io.exec(s),e=eo.exec(s);return i&&4===i.length?(this.fa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.fa(+i[1],+i[2],+i[3],+i[4]),0))}da(){const t=this.To,s=this.Go,i=this.Co,e=this.Io;return`hsla(${so._o.pa(t,s,i)}, ${so._o.ma(t,s,i)}%, ${so._o.ga(t,s,i)}%, ${e})`}ya(){const t=this.To,s=this.Go,i=this.Co;return[so._o.pa(t,s,i),so._o.ma(t,s,i),so._o.ga(t,s,i),this.Io]}Sa(t){Array.isArray(t)&&(t.length<3||(this.To=t[0],this.Go=t[1],this.Co=t[2],t.length>=4?this.Io=t[3]:this.Io=1))}set r(t){this.Oo(t)}get r(){return this.No()}set g(t){this.Fo(t)}get g(){return this.Bo()}set b(t){this.Do(t)}get b(){return this.$o()}set a(t){this.ko(t)}get a(){return this.Wo()}wa(t,s){switch(t){case 0:this.Oo(s);break;case 1:this.Fo(s);break;case 2:this.Do(s);break;case 3:this.ko(s);break;default:throw new RangeError("invalid color index")}}ba(t){switch(t){case 0:return this.No();case 1:return this.Bo();case 2:return this.$o();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static va(t,s){let i,e;if(Array.isArray(t))i=new so._o,i.Sa(t);else{if(!(t instanceof so._o))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new so._o,e.Sa(s);else{if(!(s instanceof so._o))throw new Error("unexpected type");e=s}return i.equals(e)}static Ma(t,s){return so.Zn(Math.max(t,s)-Math.min(t,s),0,1)}static xa(t,s){const i=new so._o;return i.Oo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Fo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Do(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.ko(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i}static _a(t,s){const i=new so._o(0,0,0,1);return i.Oo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Fo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Do(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i}static pa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ma(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ga(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},so._o.Ta=Object.freeze(so.Un(so._o,1,1,1,1)),so._o.Ga=Object.freeze(so.Un(so._o,0,0,0,1)),so._o.Ca=Object.freeze(so.Un(so._o,0,0,0,0))}{const no=self.Cs;no.Ia=class{constructor(t,s){this.Pa=0,this.Aa=0,t instanceof no.Ia?this.S(t):this.set(t||0,s||0)}set(t,s){this.Pa=+t,this.Aa=+s}S(t){this.Pa=t.Pa,this.Aa=t.Aa}equals(t){return this.Pa===t.Pa&&this.Aa===t.Aa}Ra(t,s){return this.Pa===t&&this.Aa===s}qo(t,s){return t[s]===Math.fround(this.Pa)&&t[s+1]===Math.fround(this.Aa)}Ea(t){this.Pa=+t}Oa(){return this.Pa}Fa(t){this.Aa=+t}Da(){return this.Aa}toArray(){return[this.Pa,this.Aa]}Vo(){return new Float64Array(this.toArray())}jo(t,s){t[s++]=this.Pa,t[s]=this.Aa}offset(t,s){this.Pa+=+t,this.Aa+=+s}scale(t,s){this.Pa*=t,this.Aa*=s}wt(t,s){this.Pa/=t,this.Aa/=s}round(){this.Pa=Math.round(this.Pa),this.Aa=Math.round(this.Aa)}floor(){this.Pa=Math.floor(this.Pa),this.Aa=Math.floor(this.Aa)}ceil(){this.Pa=Math.ceil(this.Pa),this.Aa=Math.ceil(this.Aa)}angle(){return no.rr(0,0,this.Pa,this.Aa)}ka(){return this.Pa*this.Pa+this.Aa*this.Aa}length(){return no.sr(this.Pa,this.Aa)}La(t,s){const i=this.Pa*s-this.Aa*t;this.Aa=this.Aa*s+this.Pa*t,this.Pa=i}rotate(t){0!==t&&this.La(Math.sin(t),Math.cos(t))}Na(t,s,i){0===t||s===this.Pa&&i===this.Aa||(this.Pa-=s,this.Aa-=i,this.La(Math.sin(t),Math.cos(t)),this.Pa+=+s,this.Aa+=+i)}move(t,s){0!==s&&(this.Pa+=Math.cos(t)*s,this.Aa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Pa/=t,this.Aa/=t)}Zn(t,s){this.Pa=no.Zn(this.Pa,t,s),this.Aa=no.Zn(this.Aa,t,s)}Tt(t){return this.Pa*t.Pa+this.Aa*t.Aa}reverse(){this.Pa=-this.Pa,this.Aa=-this.Aa}Ba(){let t=this.Pa;return this.Pa=this.Aa,this.Aa=-t,this}}}{const ro=self.Cs;ro.Rect=class{constructor(t,s,i,e){this.$a=NaN,this.Wa=NaN,this.Va=NaN,this.ja=NaN,this.$a=0,this.Wa=0,this.Va=0,this.ja=0,t instanceof ro.Rect?this.S(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.$a=+t,this.Wa=+s,this.Va=+i,this.ja=+e}Ha(t,s,i,e){t=+t,s=+s,this.$a=t,this.Wa=s,this.Va=t+ +i,this.ja=s+ +e}S(t){this.$a=+t.$a,this.Wa=+t.Wa,this.Va=+t.Va,this.ja=+t.ja}clone(){return new ro.Rect(this.$a,this.Wa,this.Va,this.ja)}static Ua(t,s){const i=new ro.Rect;return i.Ja(Math.min(t.$a,s.$a)),i.za(Math.min(t.Wa,s.Wa)),i.qa(Math.max(t.Va,s.Va)),i.Ya(Math.max(t.ja,s.ja)),i}static Xa(t){return new ro.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.$a===t.$a&&this.Wa===t.Wa&&this.Va===t.Va&&this.ja===t.ja}Za(t,s,i,e){return this.$a===t&&this.Wa===s&&this.width()===i&&this.height()===e}qo(t,s){return t[s]===Math.fround(this.$a)&&t[s+1]===Math.fround(this.Wa)&&t[s+2]===Math.fround(this.Va)&&t[s+3]===Math.fround(this.ja)}Ja(t){this.$a=+t}Ka(){return this.$a}za(t){this.Wa=+t}Qa(){return this.Wa}qa(t){this.Va=+t}tl(){return this.Va}Ya(t){this.ja=+t}sl(){return this.ja}toArray(){return[this.$a,this.Wa,this.Va,this.ja]}Vo(){return new Float64Array(this.toArray())}il(){return new DOMRect(this.$a,this.Wa,this.width(),this.height())}static el(t){return ro.Un(ro.Rect,t.left,t.top,t.right,t.bottom)}jo(t,s){t[s++]=this.$a,t[s++]=this.Wa,t[s++]=this.Va,t[s]=this.ja}nl(t,s){t[s++]=this.$a,t[s++]=this.Wa,t[s++]=this.Va,t[s++]=this.Wa,t[s++]=this.Va,t[s++]=this.ja,t[s++]=this.$a,t[s]=this.ja}rl(t,s,i){t[s++]=this.$a,t[s++]=this.Wa,t[s++]=i,t[s++]=this.Va,t[s++]=this.Wa,t[s++]=i,t[s++]=this.Va,t[s++]=this.ja,t[s++]=i,t[s++]=this.$a,t[s++]=this.ja,t[s]=i}width(){return this.Va-this.$a}height(){return this.ja-this.Wa}hl(){return(this.$a+this.Va)/2}ol(){return(this.Wa+this.ja)/2}offset(t,s){t=+t,s=+s,this.$a+=t,this.Wa+=s,this.Va+=t,this.ja+=s}offsetLeft(t){this.$a+=+t}offsetTop(t){this.Wa+=+t}al(t){this.Va+=+t}ll(t){this.ja+=+t}ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Wa<this.ja?this.$a<this.Va?this.ja=this.Wa+this.width():this.ja=this.Wa-this.width():this.$a<this.Va?this.ja=this.Wa-this.width():this.ja=this.Wa+this.width()}cl(t,s){t=+t,s=+s,this.$a-=t,this.Wa-=s,this.Va+=t,this.ja+=s}fl(t,s){t=+t,s=+s,this.$a+=t,this.Wa+=s,this.Va-=t,this.ja-=s}multiply(t,s){this.$a*=t,this.Wa*=s,this.Va*=t,this.ja*=s}wt(t,s){this.$a/=t,this.Wa/=s,this.Va/=t,this.ja/=s}dl(t){this.$a=+t-this.$a,this.Va=+t-this.Va}pl(t){this.Wa=+t-this.Wa,this.ja=+t-this.ja}ml(t,s){const i=this.width(),e=this.height(),n=this.Ka()+i*t,r=this.Qa()+e*s;this.Ha(n-e*s,r-i*t,e,i)}gl(){const t=this.$a;this.$a=this.Va,this.Va=t}yl(){const t=this.Wa;this.Wa=this.ja,this.ja=t}Sl(t){const s=this.Wa;this.Wa=+t-this.ja,this.ja=+t-s}round(){this.$a=Math.round(this.$a),this.Wa=Math.round(this.Wa),this.Va=Math.round(this.Va),this.ja=Math.round(this.ja)}wl(){this.$a=Math.ceil(this.$a),this.Wa=Math.ceil(this.Wa),this.Va=Math.floor(this.Va),this.ja=Math.floor(this.ja)}bl(){this.$a=Math.floor(this.$a),this.Wa=Math.floor(this.Wa),this.Va=Math.ceil(this.Va),this.ja=Math.ceil(this.ja)}floor(){this.$a=Math.floor(this.$a),this.Wa=Math.floor(this.Wa),this.Va=Math.floor(this.Va),this.ja=Math.floor(this.ja)}ceil(){this.$a=Math.ceil(this.$a),this.Wa=Math.ceil(this.Wa),this.Va=Math.ceil(this.Va),this.ja=Math.ceil(this.ja)}Zn(t,s,i,e){this.$a=Math.max(this.$a,+t),this.Wa=Math.max(this.Wa,+s),this.Va=Math.min(this.Va,+i),this.ja=Math.min(this.ja,+e)}vl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.$a=ro.Zn(this.$a,t,i),this.Wa=ro.Zn(this.Wa,s,e),this.Va=ro.Zn(this.Va,t,i),this.ja=ro.Zn(this.ja,s,e)}normalize(){this.$a>this.Va&&this.gl(),this.Wa>this.ja&&this.yl()}Ml(t){return!(t.Va<this.$a||t.ja<this.Wa||t.$a>this.Va||t.Wa>this.ja)}xl(t,s,i){return!(t.Va+s<this.$a||t.ja+i<this.Wa||t.$a+s>this.Va||t.Wa+i>this.ja)}_l(t,s){return t>=this.$a&&t<=this.Va&&s>=this.Wa&&s<=this.ja}Tl(t){return t.$a>=this.$a&&t.Wa>=this.Wa&&t.Va<=this.Va&&t.ja<=this.ja}Gl(t){t.$a<this.$a&&(this.$a=+t.$a),t.Wa<this.Wa&&(this.Wa=+t.Wa),t.Va>this.Va&&(this.Va=+t.Va),t.ja>this.ja&&(this.ja=+t.ja)}Cl(t){this.$a=ro.Ct(t.$a,t.Va,this.$a),this.Wa=ro.Ct(t.Wa,t.ja,this.Wa),this.Va=ro.Ct(t.$a,t.Va,this.Va),this.ja=ro.Ct(t.Wa,t.ja,this.ja)}}}{const ho=self.Cs;ho.Il=class{constructor(t,s,i,e,n,r,h,o){this.Pl=NaN,this.Al=NaN,this.Rl=NaN,this.El=NaN,this.Ol=NaN,this.Fl=NaN,this.Dl=NaN,this.kl=NaN,this.Pl=0,this.Al=0,this.Rl=0,this.El=0,this.Ol=0,this.Fl=0,this.Dl=0,this.kl=0,t instanceof ho.Il?this.S(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.Pl=+t,this.Al=+s,this.Rl=+i,this.El=+e,this.Ol=+n,this.Fl=+r,this.Dl=+h,this.kl=+o}Ll(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}S(t){this.Pl=t.Pl,this.Al=t.Al,this.Rl=t.Rl,this.El=t.El,this.Ol=t.Ol,this.Fl=t.Fl,this.Dl=t.Dl,this.kl=t.kl}equals(t){return this.Pl===t.Pl&&this.Al===t.Al&&this.Rl===t.Rl&&this.El===t.El&&this.Ol===t.Ol&&this.Fl===t.Fl&&this.Dl===t.Dl&&this.kl===t.kl}Nl(t){this.Pl=+t}Br(){return this.Pl}Bl(t){this.Al=+t}$r(){return this.Al}$l(t){this.Rl=+t}Wr(){return this.Rl}Wl(t){this.El=+t}Vr(){return this.El}Vl(t){this.Ol=+t}jr(){return this.Ol}jl(t){this.Fl=+t}Hr(){return this.Fl}Hl(t){this.Dl=+t}Ur(){return this.Dl}Ul(t){this.kl=+t}Jr(){return this.kl}Jl(){return new DOMQuad(new DOMPoint(this.Pl,this.Al),new DOMPoint(this.Rl,this.El),new DOMPoint(this.Ol,this.Fl),new DOMPoint(this.Dl,this.kl))}static zl(t){return ho.Un(ho.Il,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Pl,this.Al,this.Rl,this.El,this.Ol,this.Fl,this.Dl,this.kl]}Vo(){return new Float64Array(this.toArray())}jo(t,s){t[s++]=this.Pl,t[s++]=this.Al,t[s++]=this.Rl,t[s++]=this.El,t[s++]=this.Ol,t[s++]=this.Fl,t[s++]=this.Dl,t[s]=this.kl}ql(t,s,i){t[s++]=this.Pl,t[s++]=this.Al,t[s++]=i,t[s++]=this.Rl,t[s++]=this.El,t[s++]=i,t[s++]=this.Ol,t[s++]=this.Fl,t[s++]=i,t[s++]=this.Dl,t[s++]=this.kl,t[s]=i}offset(t,s){t=+t,s=+s,this.Pl+=t,this.Al+=s,this.Rl+=t,this.El+=s,this.Ol+=t,this.Fl+=s,this.Dl+=t,this.kl+=s}round(){this.Pl=Math.round(this.Pl),this.Al=Math.round(this.Al),this.Rl=Math.round(this.Rl),this.El=Math.round(this.El),this.Ol=Math.round(this.Ol),this.Fl=Math.round(this.Fl),this.Dl=Math.round(this.Dl),this.kl=Math.round(this.kl)}floor(){this.Pl=Math.floor(this.Pl),this.Al=Math.floor(this.Al),this.Rl=Math.floor(this.Rl),this.El=Math.floor(this.El),this.Ol=Math.floor(this.Ol),this.Fl=Math.floor(this.Fl),this.Dl=Math.floor(this.Dl),this.kl=Math.floor(this.kl)}ceil(){this.Pl=Math.ceil(this.Pl),this.Al=Math.ceil(this.Al),this.Rl=Math.ceil(this.Rl),this.El=Math.ceil(this.El),this.Ol=Math.ceil(this.Ol),this.Fl=Math.ceil(this.Fl),this.Dl=Math.ceil(this.Dl),this.kl=Math.ceil(this.kl)}Yl(t){this.Pl=t.$a,this.Al=t.Wa,this.Rl=t.Va,this.El=t.Wa,this.Ol=t.Va,this.Fl=t.ja,this.Dl=t.$a,this.kl=t.ja}Xl(t,s){0===s?this.Yl(t):this.Zl(t,Math.sin(s),Math.cos(s))}Zl(t,s,i){const e=t.$a*s,n=t.Wa*s,r=t.Va*s,h=t.ja*s,o=t.$a*i,a=t.Wa*i,l=t.Va*i,u=t.ja*i;this.Pl=o-n,this.Al=a+e,this.Rl=l-n,this.El=a+r,this.Ol=l-h,this.Fl=u+r,this.Dl=o-h,this.kl=u+e}Kl(t){t.set(Math.min(this.Pl,this.Rl,this.Ol,this.Dl),Math.min(this.Al,this.El,this.Fl,this.kl),Math.max(this.Pl,this.Rl,this.Ol,this.Dl),Math.max(this.Al,this.El,this.Fl,this.kl))}_l(t,s){let i=this.Rl-this.Pl,e=this.El-this.Al;const n=this.Ol-this.Pl,r=this.Fl-this.Al,h=t-this.Pl,o=s-this.Al;let a=i*i+e*e,l=i*n+e*r,u=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Dl-this.Pl,e=this.kl-this.Al,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}hl(){return(this.Pl+this.Rl+this.Ol+this.Dl)/4}ol(){return(this.Al+this.El+this.Fl+this.kl)/4}Ql(t,s,i,e){return!(!this._l(t,s)&&!this._l(i,e))||ho.Nr(t,s,i,e,this)}tu(t){let s=t.hl(),i=t.ol();if(this._l(s,i))return!0;if(s=this.hl(),i=this.ol(),t._l(s,i))return!0;const e=this.Pl,n=this.Al,r=this.Rl,h=this.El,o=this.Ol,a=this.Fl,l=this.Dl,u=this.kl;return ho.Nr(e,n,r,h,t)||ho.Nr(r,h,o,a,t)||ho.Nr(o,a,l,u,t)||ho.Nr(l,u,e,n,t)}su(){const t=this.Pl,s=this.Al;this.Pl=this.Rl,this.Al=this.El,this.Rl=this.Ol,this.El=this.Fl,this.Ol=this.Dl,this.Fl=this.kl,this.Dl=t,this.kl=s}iu(){this.eu(0,2),this.eu(1,3),this.eu(6,4),this.eu(7,5)}nu(){this.eu(0,6),this.eu(1,7),this.eu(2,4),this.eu(3,5)}ru(){this.eu(2,6),this.eu(3,7)}eu(t,s){const i=this.hu(t);this.ou(t,this.hu(s)),this.ou(s,i)}hu(t){switch(t){case 0:return this.Pl;case 1:return this.Al;case 2:return this.Rl;case 3:return this.El;case 4:return this.Ol;case 5:return this.Fl;case 6:return this.Dl;case 7:return this.kl;default:throw new RangeError("invalid quad point index")}}ou(t,s){switch(s=+s,t){case 0:this.Pl=s;break;case 1:this.Al=s;break;case 2:this.Rl=s;break;case 3:this.El=s;break;case 4:this.Ol=s;break;case 5:this.Fl=s;break;case 6:this.Dl=s;break;case 7:this.kl=s;break;default:throw new RangeError("invalid quad point index")}}}}{const oo=self.Cs,ao=self.assert,lo=[0,0,1,0,1,1,0,1],uo=oo.Un(oo.Il);oo.au=class extends oo.jn{constructor(t,s=!0){super(),t||(t=lo),this.lu=Float64Array.from(t),this.uu=new oo.Rect,this.cu=!0,this.fu=s}Jn(){}du(){return this.lu}pu(){return this.lu.length/2}mu(t){this.lu.length===t.length?this.lu.set(t):this.lu=Float64Array.from(t),this.cu=!0}gu(){this.mu(lo)}S(t){this.mu(t.lu)}yu(){this.cu=!0}Su(){if(!this.cu)return;const t=this.lu;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.uu.set(s,i,e,n),this.cu=!1}Yl(t,s,i){let e=this.lu;8!==e.length&&(e=new Float64Array(8),this.lu=e),e[0]=t.Ka()-s,e[1]=t.Qa()-i,e[2]=t.tl()-s,e[3]=t.Qa()-i,e[4]=t.tl()-s,e[5]=t.sl()-i,e[6]=t.Ka()-s,e[7]=t.sl()-i,this.uu.S(t),0===s&&0===i||this.uu.offset(-s,-i),this.cu=!1}wu(t,s,i){uo.S(t),uo.offset(s,i),this.mu(uo.toArray()),this.cu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.bu(t,s,e,n)}bu(t,s,i,e){const n=this.lu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.cu=!0}offset(t,s){const i=this.lu;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}_l(t,s){const i=this.lu;if(t===i[0]&&s===i[1])return!0;this.Su();const e=this.uu,n=e.Ka()-110,r=e.Qa()-101,h=e.tl()+131,o=e.sl()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,S=i.length;e<S;e+=2){const w=(e+2)%S,b=i[e],v=i[e+1],M=i[w],x=i[w+1];oo.Lr(n,r,t,s,a,u,l,c,b,v,M,x)&&++g,oo.Lr(h,o,t,s,f,p,d,m,b,v,M,x)&&++y}return g%2==1||y%2==1}vu(t,s,i){const e=t.lu,n=this.lu;if(this._l(e[0]+s,e[1]+i))return!0;if(t._l(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(oo.Lr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}Ql(t,s,i,e,n,r){if(this._l(i-t,e-s))return!0;if(this._l(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,l=r):(o=r,l=e);const u=this.lu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(oo.Lr(i,e,n,r,h,a,o,l,p,m,g,y))return!0}return!1}iu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.cu=!0}nu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.cu=!0}ru(){const t=this.lu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.cu=!0}Mu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.pu()}xu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.pu()}_u(){return this.lu}Tu(){return this.pu()}Gu(){return this.fu}}}{const co=self.Cs;co.Cu=class extends co.jn{constructor(t){if(super(),this.Iu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Jn(){this.Pu(),this.Iu=null}Au(){return 0===this.Iu.size}Pu(){const t=this.Iu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Iu;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}Js(t,s){const i=this.Iu.get(t);return i?i.get(s):i}Us(t,s){const i=this.Iu.get(t);return!!i&&i.has(s)}Ru(t,s){const i=this.Iu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Eu(t){const s=this.Iu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Ou(){let t=0;for(const s of this.Iu.values())t+=s.size;return t}*values(){for(const t of this.Iu.values())yield*t.values()}*Fu(){for(const[t,s]of this.Iu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Iu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const fo=self.Cs;fo.Du=class extends fo.jn{constructor(){super(),this.ku=new Set,this.Lu=[],this.Nu=!1}Jn(){this.Pu()}Pu(){this.ku.clear(),fo.bh(this.Lu),this.Nu=!1}Bu(t){this.ku.has(t)||(this.ku.add(t),this.Nu||this.Lu.push(t))}Us(t){return this.ku.has(t)}Ru(t){this.ku.delete(t)&&(this.Nu=!0)}Ou(){return this.ku.size}Au(){return 0===this.ku.size}$u(){return this.Nu&&(this.Wu(),this.Nu=!1),this.Lu}Wu(){const t=this.Lu;fo.bh(t);for(const s of this.ku)t.push(s)}}}{const po=self.Cs,mo=new Map,go=new Map,yo=new Map,So=new Map,wo=new Map,bo=new Map,vo=new Map,Mo=new Map,xo=new Map;xo.set("linear","noease"),xo.set("default","noease");const _o=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],To=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Go=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Vu=class t{constructor(){}static ju(){return"default"}static Hu(){return"noease"}static Uu(t){return Go.get(t)}static Ju(s,...i){let e,n;this.zu(),s?(yo.has(s)||yo.set(s,new Map),e=yo.get(s),n=[...e.keys()].filter((i=>!t.qu(i,s)||t.qu(i,s).transition.Yu()))):(e=wo,n=[...e.keys()]);const r=n.sort();return[...go.keys()].concat(r).filter((t=>!i.includes(t)))}static Xu(){this.zu();const t=[...wo.keys()];return t.sort(),[...go.keys()].concat(t)}static Zu(){this.zu();const t=[...wo.keys()];return t.sort(),t}static Ku(t){for(const s of _o)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of To)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Qu(t){return this.zu(),[...go.keys()].includes(t)}static tc(s){const i=xo.get(s);return i?mo.get(i):t.Qu(s)?mo.get(s):vo.has(s)?vo.get(s):void 0}static sc(t){return this.zu(),Mo.get(t)}static ec(s,i){this.zu();const e=t.tc(s);if(e)return e;if(!i)throw new Error("missing ease function");return yo.get(i).get(s)}static qu(t,s){this.zu();const i=So.get(s);if(i)return i.get(t)}static nc(s,i){return this.zu(),!!t.tc(s)||!!yo.get(i).get(s)}static rc(s){this.zu();return t.tc(s)||wo.get(s)}static hc(t){return this.zu(),bo.get(t)}static oc(t){return this.zu(),this.Xu()[t]}static ac(t,s){return this.zu(),this.Ju(s).indexOf(t)}static lc(t){return this.ac(t)}static zu(){0===mo.size&&(this.uc("default",(()=>{})),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("cubicbezier",this.fc),this.cc("spline",this.dc))}static uc(s,i,e=!1){if("function"==typeof i)t.mc(s,i,"predefined");else{if(!po._e(i))throw new Error("unexpected arguments");if(self.yc){const n=po.Un(self.yc,s,e);n.Sc(i),t.mc(s,((t,s,i,e)=>n.wc(t,s,i,e)),"predefined"),Mo.set(s,n)}else{const n=po.Un(po.bc,[s,i.map((t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee]))],!1);n.vc(e),t.mc(s,((t,s,i,e)=>n.wc(t,s,i,e)),"predefined")}}}static cc(s,i){t.mc(s,i,"private")}static Mc(s,i,e,n){this.zu(),t.mc(s,i,"custom",e,n)}static xc(t,s){if(this.Qu(t))return;if([...vo.keys()].includes(t))return;const i=yo.get(s);i&&i.delete(t);const e=So.get(s);e&&e.delete(t)}static mc(t,s,i,e,n){switch(i){case"predefined":mo.set(t,s),go.set(t,s);break;case"custom":e?(yo.has(e)||yo.set(e,new Map),So.has(e)||So.set(e,new Map),yo.get(e).set(t,s),So.get(e).set(t,n)):(wo.set(t,s),bo.set(t,n));break;case"private":mo.set(t,s),vo.set(t,s);break;default:throw new Error("unexpected ease mode")}}static _c(t,s,i,e){return 0===e?s:i*t/e+s}static fc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static dc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=No(t,s,e,r,o,l),c=Oo(i,n,h,a),f=Fo(i,n,h,a),d=Do(i,n,h,a);return ko(u,c,f,d)}static Tc(t,s,i,e){const n=[],r=Oo(t,s,i,e),h=Fo(t,s,i,e),o=Do(t,s,i,e);for(let t=0;t<Co;++t){const s=ko(t*Io,r,h,o);n.push(s)}return n}};const Co=11,Io=1/(Co-1),Po=4,Ao=.01,Ro=1e-7,Eo=10,Oo=(t,s,i,e)=>e-3*i+3*s-t,Fo=(t,s,i,e)=>3*i-6*s+3*t,Do=(t,s,i,e)=>3*(s-t),ko=(t,s,i,e)=>((s*t+i)*t+e)*t,Lo=(t,s,i,e)=>3*s*t*t+2*i*t+e,No=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=Co-1;for(r[Co-1];o!=l&&a<=t;)o++,a=r[o],h+=Io;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*Io;const c=Oo(s,i,e,n),f=Fo(s,i,e,n),d=Do(s,i,e,n),p=Lo(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(ko(u,c,f,d)-t)/Lo(u,c,f,d);return u}{let s,i,e=h,n=h+Io,r=0;do{u=e+(n-e)/2;let h=ko(u,c,f,d)-t;h>0?n=u:e=u,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return u}}}{let Bo=function(t){$o.le(t)};RequireStringOrNumber=Bo;const $o=self.Cs;$o.Gc=class{constructor(t){this.Cc=[],this.Yn=t||"",this.Ic=0}Jn(){this.Pu(),this.Cc=null}Pc(){return this.Yn}Pu(){$o.Mh(this.Cc),this.Ic=0}Ac(){return this.Ic}Rc(t=Math.random()*this.Ac()){let s=0;for(const[i,e]of this.Cc)if(s+=i,t<s)return e;return 0}Ec(){return!!this.Cc.length}Oc(t,s){Bo(s),this.Ic+=t,this.Cc.push([t,s])}Fc(t,s){Bo(s);const i=0===t;for(let e=0;e<this.Cc.length;e++){const n=this.Cc[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this.Cc.splice(e,1),this.Ic-=n[0];break}}}Dc(){return JSON.stringify(this.Cc)}static kc(t,s){const i=new $o.Gc(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Oc(s,e)}return i}}}{const Wo=self.Cs;let Vo=0;Wo.Lc=class{constructor(t,s){this.Nc=t,this.Bc=s,this.$c=Vo++,this.Nc.Wc("runtime","screen-reader-text",{type:"create",id:this.$c,text:this.Bc})}Jn(){this.Nc.Wc("runtime","screen-reader-text",{type:"release",id:this.$c}),this.Nc=null,this.Bc="",this.$c=-1}Vc(t){this.Bc!==t&&(this.Bc=t,this.Nc.Wc("runtime","screen-reader-text",{type:"update",id:this.$c,text:this.Bc}))}}}{const jo=self.Cs;jo.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.jc=!1,this.Hc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Hc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.jc=!0}}}{const Ho=self.Cs,Uo=self.assert;Ho.Event.Uc=class extends Ho.jn{constructor(t){super(),this.Jc=t,this.zc=[],this.qc=new Set,this.Yc=[],this.Xc=new Set,this.Zc=0,this.Kc=[]}Jn(){this.Zc>0||(Ho.bh(this.zc),this.qc.clear(),Ho.bh(this.Yc),this.Xc.clear(),Ho.bh(this.Kc),Ho.Jn(this))}Qc(t,s){if(this.tf())this.Kc.push({sf:"add",if:t,capture:s});else if(s){if(this.qc.has(t))return;this.zc.push(t),this.qc.add(t)}else{if(this.Xc.has(t))return;this.Yc.push(t),this.Xc.add(t)}}ef(t,s){this.tf()?this.Kc.push({sf:"remove",if:t,capture:s}):s?this.qc.has(t)&&(this.qc.delete(t),Ho.Ch(this.zc,t)):this.Xc.has(t)&&(this.Xc.delete(t),Ho.Ch(this.Yc,t))}nf(){return!this.zc.length&&!this.Yc.length}tf(){return this.Zc>0}rf(){const t=new Set,s=new Set;for(const i of this.Kc)if("add"===i.sf)this.Qc(i.if,i.capture),i.capture?s.delete(i.if):t.delete(i.if);else{if("remove"!==i.sf)throw new Error("invalid op");i.capture?(this.qc.delete(i.if),s.add(i.if)):(this.Xc.delete(i.if),t.add(i.if))}Ho.Ah(this.Yc,t),Ho.Ah(this.zc,s),Ho.bh(this.Kc)}hf(t){this.af();let s=!1;for(let i=0,e=this.zc.length;i<e;++i)if(this.zc[i](t),t.jc){s=!0;break}if(!s)for(let s=0,i=this.Yc.length;s<i&&(this.Yc[s](t),!t.jc);++s);return this.lf(),!t.defaultPrevented}uf(t){this.af();for(let s=0,i=this.zc.length;s<i;++s)this.zc[s](t);for(let s=0,i=this.Yc.length;s<i;++s)this.Yc[s](t);return this.lf(),!0}af(){this.Zc++}lf(){this.Zc--,0===this.Zc&&this.Kc.length>0&&this.rf()}cf(t){t?this.af():this.lf()}ff(t){let s=[];for(let i=0,e=this.zc.length;i<e;++i){let e=this.zc[i];s.push(Ho.df((()=>e(t))))}for(let i=0,e=this.Yc.length;i<e;++i){let e=this.Yc[i];s.push(Ho.df((()=>e(t))))}return Promise.all(s).then((()=>!t.defaultPrevented))}pf(t){const s=[];this.af();for(let i=0,e=this.zc.length;i<e;++i){const e=this.zc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Yc.length;i<e;++i){const e=this.Yc[i](t);e instanceof Promise&&s.push(e)}return this.lf(),s.length?Promise.all(s).then((()=>!t.defaultPrevented)):!t.defaultPrevented}async mf(t){return await this.pf(t)}async gf(t){this.af();for(let s=0,i=this.zc.length;s<i;++s){const i=this.zc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);i instanceof Promise&&await i}return this.lf(),!t.defaultPrevented}*yf(t){this.af();for(let s=0,i=this.zc.length;s<i;++s){const i=this.zc[s](t);Ho.Mo(i)&&(yield*i)}for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);Ho.Mo(i)&&(yield*i)}this.lf()}}}{const Jo=self.Cs;Jo.Event.Sf=class extends Jo.jn{constructor(){super(),this.wf=new Map,this.bf=!1}Jn(){if(this.bf)throw new Error("already released");this.vf(),this.bf=!0,Jo.Jn(this)}zn(){return this.bf}vf(){if(this.wf){for(let t of this.wf.values())t.Jn();this.wf.clear()}}Mf(t,s){let i=this.wf.get(t);return i||(s?(i=Jo.Un(Jo.Event.Uc,t),this.wf.set(t,i),i):null)}xf(t){return this.wf.has(t)}addEventListener(t,s,i){this.Mf(t,!0).Qc(s,!!i)}removeEventListener(t,s,i){let e=this.Mf(t,!1);e&&(e.ef(s,!!i),e.nf()&&this.wf.delete(t))}dispatchEvent(t){const s=this.Mf(t.type,!1);return!s||(t.cancelable?s.hf(t):s.uf(t))}_f(t){const s=this.Mf(t.type,!1);return s?(t.Hc=!0,s.ff(t)):Promise.resolve(!0)}async Tf(t){const s=this.Mf(t.type,!1);if(!s)return!0;this.wf.delete(t.type),t.Hc=!0;const i=await s.ff(t);return s.Jn(),i}async Gf(t){const s=this.Mf(t.type,!1);return!s||await s.mf(t)}Cf(t){const s=this.Mf(t.type,!1);return!s||s.pf(t)}async If(t){const s=this.Mf(t.type,!1);return!s||await s.gf(t)}Pf(t){const s=this.Mf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.yf(t)}cf(t){for(const s of this.wf.values())s.cf(t)}}}{let zo=function(t){ia=ta&&0===ea?requestIdleCallback(qo,{timeout:35}):setTimeout(qo,ea>0?1:t)},qo=function(t){if(ia=-1,!sa.length)return;let s=performance.now(),i=s,e=0,n=0;do{Yo(sa.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(sa.length&&(ta&&0===ea&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===ia&&sa.length){let t=i-s;zo(Math.max(16-t,4))}},Yo=function(t){let s;try{s=t.if()}catch(s){return void t.reject(s)}t.resolve(s)};SetNewCallback=zo,DoAsyncifiedWork=qo,DoNextAsyncifiedJob=Yo;const Xo=self.Cs,Zo=12,Ko=16,Qo=35,ta="undefined"!=typeof requestIdleCallback;let sa=[],ia=-1,ea=0,na=Xo.Ys.Us("disable-asyncify");na&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Xo.df=function(t){let s=null;return Xo.ks&&(s=Xo.Ki()),new Promise(((i,e)=>{sa.push({if:t,resolve:i,reject:e,stack:s}),na?Yo(sa.pop()):-1===ia&&zo(16)}))},Xo.df.Af=function(t){if(t)++ea;else if(--ea,ea<0)throw new Error("already turned off high throughput mode")}}{let ra=function(){ua=-1},ha=function(){ca=-1,fa=-1;let t=Date.now();for(let s of da)if(s.Rf(t)){let t=s.Ef();(-1===fa||t<fa)&&(fa=t)}else da.delete(s);if(-1!==fa){let s=Math.max(fa-t+100,1e3);ca=self.setTimeout(ha,s)}};ClearTimeCache=ra,CheckActiveIdleTimeouts=ha;const oa=self.Cs,aa=1e3,la=100;let ua=-1;oa.Of=function(){return-1===ua&&(ua=Date.now(),self.setTimeout(ra,16)),ua};let ca=-1,fa=-1,da=new Set;oa.Ff=class{constructor(t,s){this.Df=t,this.kf=1e3*s,this.Lf=0,this.Nf=!1}Bf(){let t=oa.Of();this.Lf=t+this.kf,this.Nf||(da.add(this),this.Nf=!0),-1===ca?(fa=this.Lf,ca=self.setTimeout(ha,this.kf+100)):this.Lf<fa&&fa>t+1e3&&(self.clearTimeout(ca),fa=this.Lf,ca=self.setTimeout(ha,this.kf+100))}Rf(t){return!(t>=this.Lf&&(this.Df()?(this.Lf=t+this.kf,0):(this.Nf=!1,1)))}Ef(){return this.Lf}$f(){this.Nf&&(da.delete(this),this.Nf=!1,0===da.size&&-1!==ca&&(self.clearTimeout(ca),ca=-1,fa=-1))}Jn(){this.$f(),this.Df=null}}}{const pa=self.Cs;pa.Wf=class t{constructor(t){this.Vf=!1,this.jf=t}Hf(){this.Vf||(this.Vf=!0,this.jf&&(this.jf(),this.jf=null))}Uf(){return this.Vf}Jn(){this.Hf()}static Jn(s){return new t((()=>s.Jn()))}static Jf(t,s,i,e,n){if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),s.includes(" ")){s=s.split(" ");const n=new pa.zf;for(let r of s)t.addEventListener(r,i,e),n.Bu(pa.Un(pa.Wf,(()=>t.removeEventListener(r,i,e))));return n}return t.addEventListener(s,i,e),pa.Un(pa.Wf,(()=>t.removeEventListener(s,i,e)))}},pa.qf=class extends pa.Wf{Yf(t){this.jf=t}},pa.zf=class extends pa.Wf{constructor(...t){super(),this.Xf=new Set;for(let s of t)this.Bu(s)}Bu(...t){if(this.Vf)throw new Error("already disposed");for(let s of t)this.Xf.add(s)}Zf(t){if(this.Vf)throw new Error("already disposed");this.Xf.delete(t)}Kf(){if(this.Vf)throw new Error("already disposed");if(this.Xf){for(let t of this.Xf)t.Hf();this.Xf.clear()}}Uf(){return this.Vf}Hf(){if(this.Vf)throw new Error("already disposed");this.Vf=!0;for(let t of this.Xf)t.Hf();this.Xf.clear(),this.Xf=null}Jn(){this.Hf()}}}{const ma=self.Cs;ma.Qf=class extends ma.jn{constructor(){super(),this.td=0,this.Aa=0,this.sd=0,this.ed=0}Bu(t){t=+t,this.Aa=t-this.td,this.sd=this.ed+this.Aa,this.td=this.sd-this.ed-this.Aa,this.ed=this.sd}nd(t){this.ed-=+t}Js(){return this.ed}Bf(){this.td=0,this.Aa=0,this.sd=0,this.ed=0}Set(t){this.td=0,this.Aa=0,this.sd=0,this.ed=+t}rd(t){this.td=t.td,this.Aa=t.Aa,this.sd=t.sd,this.ed=t.ed}Jn(){}}}{const ga=self.Cs,ya={},Sa=!0,wa=!1;ya.hd=function(t){this.od=t,this.right=this.od.ad,this.left=this.od.ad,this.parent=null,this.color=!1,this.key=null},ya.ld=function(t){this.size=0,this.ad=new ya.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad,this.compare=t||this.ud},ya.ld.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},ya.ld.prototype.clone=function(){var t=new ya.ld(this.compare);return t.fd(this),t},ya.ld.prototype.clear=function(){this.size=0,this.ad=new ya.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad},ya.ld.prototype.dd=function(t){var s=t.right;t.right=s.left,s.left!=this.ad&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ya.ld.prototype.pd=function(t){var s=t.left;t.left=s.right,s.right!=this.ad&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ya.ld.prototype.md=function(t){if(this.contains(t))this.gd(t).key=t;else{var s=new ya.hd(this);s.key=t;for(var i=this.ad,e=this.root;e!=this.ad;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ad?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ad,s.right=this.ad,s.color=Sa,this.yd(s),this.size++}},ya.ld.prototype.yd=function(t){for(;t!=this.ad&&t!=this.root&&t.parent.color==Sa;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==Sa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=Sa,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=Sa,t.parent.parent!=this.ad&&this.pd(t.parent.parent)):(s=t.parent.parent.left).color==Sa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=Sa,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=Sa,t.parent.parent!=this.ad&&this.dd(t.parent.parent))}this.root.color=!1},ya.ld.prototype.Sd=function(t){var s,i;(i=(s=t.left==this.ad||t.right==this.ad?t:this.wd(t)).left!=this.ad?s.left:s.right).parent=s.parent,s.parent==this.ad?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.bd(i),this.size--},ya.ld.prototype.bd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==Sa&&(s.color=!1,t.parent.color=Sa,this.dd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=Sa,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=Sa,this.pd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.dd(t.parent),t=this.root)):((s=t.parent.left).color==Sa&&(s.color=!1,t.parent.color=Sa,this.pd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=Sa,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=Sa,this.dd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.pd(t.parent),t=this.root))}t.color=!1},ya.ld.prototype.remove=function(t){var s=this.gd(t);if(s!=this.ad){var i=s.key;return this.Sd(s),i}return null},ya.ld.prototype.vd=function(t,s){this.remove(s)},ya.ld.prototype.min=function(t){for(;t.left!=this.ad;)t=t.left;return t},ya.ld.prototype.max=function(t){for(;t.right!=this.ad;)t=t.right;return t},ya.ld.prototype.wd=function(t){if(t.right!=this.ad)return this.min(t.right);for(var s=t.parent;s!=this.ad&&t==s.right;)t=s,s=s.parent;return s},ya.ld.prototype.Md=function(t){if(t.left!=this.ad)return this.max(t.left);for(var s=t.parent;s!=this.ad&&t==s.left;)t=s,s=s.parent;return s},ya.ld.prototype.xd=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.right!=this.ad)return this.min(s.right).key;for(var i=s.parent;i!=this.ad&&s==i.right;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ya.ld.prototype._d=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.left!=this.ad)return this.max(s.left).key;for(var i=s.parent;i!=this.ad&&s==i.left;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ya.ld.prototype.Td=function(){return this.min(this.root).key},ya.ld.prototype.Gd=function(){return this.max(this.root).key},ya.ld.prototype.gd=function(t){for(var s=this.root;s!=this.ad&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ya.ld.prototype.contains=function(t){return null!=this.gd(t).key},ya.ld.prototype.getValues=function(){var t=[];return this.forEach((function(s){t.push(s)})),t},ya.ld.prototype.fd=function(t){if("array"==ya.Cd(t))for(var s=0;s<t.length;s++)this.md(t[s]);else if("function"==ya.Cd(t.forEach))t.forEach(this.md,this);else if("function"==ya.Cd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.md(i[s])}else if("object"==ya.Cd(t))for(var e in t)this.md(t[e])},ya.ld.prototype.Id=function(t){if("array"==ya.Cd(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ya.Cd(t.forEach))t.forEach(this.vd,this);else if("function"==ya.Cd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==ya.Cd(t))for(var e in t)this.remove(t[e])},ya.ld.prototype.Pd=function(t){if("array"==ya.Cd(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ya.Cd(t.forEach))return t.every(this.contains,this);if("function"==ya.Cd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==ya.Cd(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},ya.ld.prototype.range=function(t,s){var i=[];return this.Ad((function(t){i.push(t)}),t,s),i},ya.ld.prototype.Rd=function(t,s){if(!this.Ed())for(var i=this.min(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.wd(i)}},ya.ld.prototype.Od=function(t,s,i){if(!this.Ed())for(var e=this.gd(s);e!=this.ad;){if(t.call(i,e.key,this))return;e=this.wd(e)}},ya.ld.prototype.traverseTo=function(t,s,i){if(!this.Ed())for(var e=this.min(this.root),n=this.gd(s);e!=n;){if(t.call(i,e.key,this))return;e=this.wd(e)}},ya.ld.prototype.Ad=function(t,s,i,e){if(!this.Ed())for(var n=this.gd(s),r=this.gd(i);n!=r;){if(t.call(e,n.key,this))return;n=this.wd(n)}},ya.ld.prototype.Fd=function(t,s){if(!this.Ed())for(var i=this.max(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Md(i)}},ya.ld.prototype.forEach=function(t,s){if(!this.Ed())for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))t.call(s,i.key,i.key,this)},ya.ld.prototype.some=function(t,s){if(this.Ed())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},ya.ld.prototype.every=function(t,s){if(this.Ed())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},ya.ld.prototype.map=function(t,s){var i=[];if(this.Ed())return i;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))i.push(t.call(s,e.key,e.key,this));return i},ya.ld.prototype.filter=function(t,s){var i=[];if(this.Ed())return i;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},ya.ld.prototype.Dd=function(){return this.size},ya.ld.prototype.Ed=function(){return 0==this.size},ya.ld.prototype.isSubsetOf=function(t){var s=ya.Dd(t);if(this.Dd()>s)return!1;var i=0;if(this.Ed())return!0;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))ya.contains.call(t,t,e.key)&&i++;return i==this.Dd()},ya.ld.prototype.intersection=function(t){var s=new ya.ld(this.compare);if(this.Ed())return s;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))t.contains.call(t,i.key,i.key,this)&&s.md(i.key);return s},ga.ld=class extends ga.jn{constructor(t){super(),this.kd=new ya.ld(t),this.Ld=!1,this.Nd=new Set,this.Bd=new Set}Bu(t){this.Ld?this.kd.contains(t)?this.Bd.delete(t):this.Nd.add(t):this.kd.md(t)}Zf(t){this.Ld?this.kd.contains(t)?this.Bd.add(t):this.Nd.delete(t):this.kd.remove(t)}Us(t){return this.Ld?!!this.Nd.has(t)||!this.Bd.has(t)&&this.kd.contains(t):this.kd.contains(t)}Pu(){this.kd.clear(),this.Nd.clear(),this.Bd.clear()}toArray(){if(this.Ld)throw new Error("cannot be used in queueing mode");return this.kd.getValues()}Ou(){return this.kd.Dd()+this.Nd.size-this.Bd.size}Au(){return 0===this.Ou()}$d(){if(this.Au())throw new Error("empty set");if(this.Ld)throw new Error("cannot be used in queueing mode");const t=this.kd;return t.min(t.root).key}Wd(){if(this.Au())throw new Error("empty set");if(this.Ld)throw new Error("cannot be used in queueing mode");const t=this.$d();return this.Zf(t),t}Vd(t){if(t=!!t,this.Ld!==t&&(this.Ld=t,!t)){for(const t of this.Bd)this.kd.remove(t);this.Bd.clear();for(const t of this.Nd)this.kd.md(t);this.Nd.clear()}}jd(t){this.kd.forEach(t)}*values(){if(this.Au())return;const t=this.kd;for(let s=t.min(t.root);s!=t.ad;s=t.wd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const ba=self.Cs;ba.Hd=class{constructor(t=ba.hardwareConcurrency){this.Ud=t,this.Jd=[],this.zd=0}Bu(t){return new Promise(((s,i)=>{this.Jd.push({if:t,resolve:s,reject:i}),this.qd()}))}Yd(t){for(let s=0,i=this.Jd.length;s<i;++s)if(this.Jd[s].if===t)return s;return-1}Xd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Jd[i].resolve(s),this.Jd.splice(i,1)}Zd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Jd[i].reject(s),this.Jd.splice(i,1)}async qd(){if(!this.Jd.length)return;if(this.zd>=this.Ud)return;this.zd++;const t=this.Jd.shift();try{const s=await t.if();t.resolve(s)}catch(s){t.reject(s)}this.zd--,this.qd()}static async Kd(t,s){const i=[];let e=!1;const n=async t=>{let n;for(;n=s.pop();){if(e)return;try{i.push(await n())}catch(t){throw e=!0,t}}},r=[];for(;t--;)r.push(n());return await Promise.all(r),i}}}{const va=self.Cs;va.Qd=class{constructor(t,s,i){this.Df=t,this.tp=s,this.sp=i||2*s,this.ip=-1,this.ep=-1/0,this.np=()=>this.rp(),this.hp=!1,this.op=!1,this.ap=null}lp(t){this.op=!!t}up(){return void 0!==va.cp&&va.cp.fp()?this.sp:this.tp}pp(...t){if(-1!==this.ip)return;this.ap=t;let s=va.Of(),i=s-this.ep,e=this.up();i>=e&&this.op?(this.ep=s,this.mp()):this.ip=self.setTimeout(this.np,Math.max(e-i,4))}mp(){this.hp=!0;const t=this.ap;this.ap=null,t?this.Df(...t):this.Df(),this.hp=!1}Bf(){this.hp||(this.gp(),this.ap=null,this.ep=va.Of())}rp(){this.ip=-1,this.ep=va.Of(),this.mp()}gp(){-1!==this.ip&&(self.clearTimeout(this.ip),this.ip=-1)}Jn(){this.gp(),this.Df=null,this.ap=null,this.np=null}}}{const Ma=self.Cs;Ma.yp=class{constructor(){this.Sp=new Map,this.wp=!1,this.bp=null,this.vp=null,this.Mp=null,this.xp=null}_p(t){this.wp=!!t}Tp(){return this.wp}Gp(t){this.bp=t}Cp(t){if(!this.bp)throw new Error("no get base size callback set");return this.bp(t)}Ip(t){this.vp=t}Pp(t,s,i,e,n,r){if(!this.vp)throw new Error("no raster at size callback set");return this.vp(t,s,i,e,n,r)}Ap(t){this.Mp=t}Rp(t){if(!this.Mp)throw new Error("no release result callback set");this.Mp(t)}Ep(t){this.xp=t}Op(){if(!this.xp)throw new Error("no redraw callback set");this.xp()}Fp(t){let s=this.Sp.get(t);return s||(s=Ma.Un(Ma.Dp,this,t),this.Sp.set(t,s)),s.kp(),s}Lp(t){this.Sp.delete(t.Np())}Bp(){for(const t of this.Sp.values())t.$p(),t.Wp()}}}{const xa=self.Cs,_a=4096;xa.Dp=class{constructor(t,s){this.Vp=t,this.jp=s,this.Hp=0,this.Up=0,this.Jp=0,this.zp=this.Vp.Cp(s).then((t=>{this.Vp&&(this.Up=t[0],this.Jp=t[1],this.Vp.Op())})).catch((t=>{console.error("[SVG] Error loading SVG: ",t),this.qp=!0,this.Vp&&this.Vp.Op()})),this.Yp=0,this.Xp=0,this.Zp=0,this.Kp=0,this.Qp=!1,this.tm=null,this.sm=!1,this.qp=!1}Jn(){if(this.Hp<=0)throw new Error("already released");this.Hp--,0===this.Hp&&this.im()}$p(){this.tm&&(this.Vp.Rp(this.tm),this.tm=null)}im(){this.$p(),this.Vp.Lp(this),this.Vp=null}Np(){return this.jp}kp(){this.Hp++}nm(){return this.Hp>0}rm(){return this.tm}Wp(){this.sm=!0}async hm(t,s,i){if(0===s||0===i||this.qp)return;if(this.Qp)return;let e=xa.vr(Math.ceil(s)),n=xa.vr(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.Vp.Tp()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Yp&&n<=this.Xp&&!this.sm)return;this.Qp=!0,this.Yp=e,this.Xp=n;const h=await this.Vp.Pp(this.jp,t,this.Yp,this.Xp,s,i);this.Vp&&(this.$p(),this.tm=h,this.Zp=s,this.Kp=i,this.Qp=!1,this.sm=!1,this.Vp.Op())}om(){return this.zp}am(){return this.Up}lm(){return this.Jp}um(){return this.Zp}fm(){return this.Kp}dm(){return this.qp}}}{let Ta=function(t){return Ra.get(t)};lookupHtmlEntity=Ta;const Ga=self.Cs;Ga.pm="\ufeff";const Ca=new Set("0123456789");Ga.gm=function(t){return Ca.has(t)};const Ia=new Set(" \t\n\r\u2028\u2029");Ga.ym=function(t){return Ia.has(t)},Ga.Sm=function(t){return[...t].filter((t=>!Ga.ym(t))).join("")},Ga.wm=function(t){for(const s of t)if(!Ga.ym(s))return!1;return!0},Ga.bm=function(t){for(const s of t)if(!Ga.ym(s))return!1;return!0},Ga.vm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Ga.Mm=function(t){return[...t].filter((t=>!Ga.vm(t))).join("")};let Pa=null;try{Pa=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Ga.xm=function(t){return!Ga.ym(t)&&Pa&&Pa.test(t)};const Aa=new Set("0123456789.+-e");Ga._m=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!Ca.has(s))return!1;for(let s of t)if(!Aa.has(s))return!1;return!0},Ga.Tm=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!Ga.gm(i))break;--s}return t.substr(0,s)},Ga.Gm=function(t){let s=Ga.Tm(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const Ra=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Ea=/[&<>"']/g;Ga.Cm=function(t){return t.replace(Ea,Ta)},Ga.Im=function(t){let s=Ga.Pm(t,"\\","\\\\");return s=Ga.Pm(s,'"','\\"'),s=Ga.Pm(s,"\t","\\t"),s=Ga.Pm(s,"\r",""),Ga.Pm(s,"\n","\\n")},Ga.Am=function(t){let s=Ga.Pm(t,"&","&amp;");return s=Ga.Pm(s,"<","&lt;"),s=Ga.Pm(s,">","&gt;"),Ga.Pm(s,'"',"&quot;")};const Oa=/[-[\]{}()*+?.,\\^$|#\s]/g;Ga.Zi=function(t){return t.replace(Oa,"\\$&")},Ga.Rm=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},Ga.Em=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},Ga.Om=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},Ga.Pm=function(t,s,i){return t.replaceAll(s,(()=>i))},Ga.Fm=function(t,s,i){return t.replace(new RegExp(Ga.Zi(s),"gi"),(()=>i))},Ga.Dm=function(t,s){"string"==typeof s?t.textContent=s:s.km()?t.textContent=s.toString():(t.innerHTML=s.Lm(),s instanceof Ga.pn&&s.Nm(t))},Ga.Bm=function(t,s){return t instanceof Ga.dn||t instanceof Ga.pn?t.equals(s):s instanceof Ga.dn||s instanceof Ga.pn?s.equals(t):t===s},Ga.$m=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},Ga.Wm=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},Ga.Vm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},Ga.jm=function(t,s){return t>s?1:t<s?-1:0},Ga.Hm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Fa=new self.Intl.Segmenter;Ga.Um=function(t){const s=[];for(const i of Fa.segment(t))s.push(i.segment);return s},Ga.Jm=function*(t){for(const s of Fa.segment(t))yield s.segment},Ga.zm=function(t){let s=0;for(const i of Fa.segment(t))++s;return s};const Da=1024,ka=1048576,La=1073741824,Na=1099511627776;Ga.qm=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Ym;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<La){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Na){let s=t/La;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Na;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const Ba={Xm:!1,Zm:!0,Km:!0,Qm:!0,tg:!0};Ga.sg=function(t,s){s=Object.assign({},Ba,s),Ga.eg.ig("common.time");const i=[],e=self.lang,n=self.ng;if(s.Zm){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Km){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.Qm){const e=Math.floor(t/60);(e>0||i.length||!s.tg)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.tg){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.Xm?e(".approx-prefix"):"")+i.join(e(".separator"));return Ga.eg.rg(),r},Ga.hg=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},Ga.og=function(t){return t.toLowerCase().replace(/\b\w/g,(t=>t.toUpperCase()))},Ga.ag=function(t,s){let i=t.split(".").map((t=>t.trim())),e=s.split(".").map((t=>t.trim()));Ga._h(i,4,"0"),Ga._h(e,4,"0"),i=i.map((t=>parseInt(t,10))),e=e.map((t=>parseInt(t,10)));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},Ga.lg=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)}))},Ga.ug=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},Ga.cg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let $a=function(t,s,i){const e=ja.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${Ya++}">`:t;if("string"==typeof e){if("a"===e&&0===za.length||"abbr"===e&&0===qa.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=qa.length)throw new Error("invalid bbcode tip substitution");const s=qa[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Wa.Pm(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=za.length)throw new Error("invalid bbcode link substitution");const s=za[t];if("string"==typeof s)return`<a href="${za[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};bbToHtmlReplacerFunc=$a;const Wa=self.Cs,Va=self.assert,ja=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),Ha=new Set(["icon"]),Ua=/\[(\/?)([a-zA-Z0-9]+)\]/g,Ja=/\[(\/?)([^\[\n]*?)\]/g;let za=null,qa=null,Ya=0;const Xa=/\n/g;Wa.pn=class{constructor(t,s){if(this.fg=s&&s.dg?t:Wa.Cm(t),this.pg="",this.mg=!1,this.gg=[],this.yg=[],s){if(this.mg=!!s.Sg,s.links){if(s.links.length>9)throw new Error("too many links");this.gg=s.links}if(s.wg){if(s.wg.length>9)throw new Error("too many tips");this.yg=s.wg}}this.bg=this.fg.includes("["),this.vg=this.mg&&this.fg.includes("\n"),this.Mg=!this.bg&&!this.vg&&!this.fg.includes("&"),this.xg=!1,this._g=[]}toString(){return this.fg}valueOf(){return this.fg}km(){return this.Mg}Tg(){return this.bg?this.fg.replace(Ua,""):this.fg}Lm(){if(this.Mg)return this.fg;if(!this.pg&&this.fg){let t=this.fg;this.bg&&(Ya=0,za=this.gg,qa=this.yg,t=t.replace(Ua,$a),za=null,qa=null),this.vg&&(t=t.replace(Xa,"<br>")),this.pg=t}return this.pg}Nm(t){if(this.gg.length)for(let s=0,i=this.gg.length;s<i;++s){const i=this.gg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Wa.dn?this.Lm()===t.Lm():t instanceof Wa.pn?this.fg===t.fg:this.fg===t}Gg(){if(this.xg)return this._g;const t=[],s=this.fg,i=[];Ja.lastIndex=0;let e=0,n=null;for(;null!==(n=Ja.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(e,r);if(e=r+h.length,l&&t.push({text:l,Cg:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Ha.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Cg:i.slice(0)})}else i.push({tag:s,Ig:e})}}e<s.length&&t.push({text:s.substring(e),Cg:i.slice(0)});for(const s of t)s.text&&(s.text=this.Pg(s.text));return this._g=t.map((t=>t.icon?Wa.Un(Wa.Ag,{icon:t.icon,Cg:t.Cg}):Wa.Un(Wa.Rg,{Eg:Wa.Um(t.text),Cg:t.Cg}))),this.xg=!0,this._g}Pg(t){return t=Wa.Pm(t,"\\[","["),Wa.Pm(t,"\\\\","\\")}static Og(t){return Wa.Un(Wa.pn,t,{dg:!0}).Tg()}static Fg(t){return t.replace(Ja,"")}}}{let Za=function(t){return""!==t&&""!==t&&il.ym(t)},Ka=function(t){return el.has(t)},Qa=function(t){return il.xm(t)&&!Ka(t)},tl=function(t){for(;t.length>0&&Za(t.at(-1));)t.pop()},sl=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Za,IsOpeningCJKPunctiationChar=Ka,IsContinuingCJKPunctuationChar=Qa,WordBreakTrimEnd=tl,IsNewline=sl;const il=self.Cs,el=new Set("");il.Dg=class{constructor(){this.kg=[],this.Lg=null}Ng(){return this.kg}Bg(){return this.kg.length}$g(t){this.Lg=t}Wg(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.Vg()){const t=s(o);o.jg(t.height),o.Hg(t.fontBoundingBoxAscent||0),o.Ug(t.fontBoundingBoxDescent||0),o.Jg(t.zg||0),o.qg()?o.Yg(t.width):o.Xg()&&o.Zg(this.Lg)}i+=o.Vg(),e=Math.max(e,o.Kg()),n=Math.max(n,o.Qg()),r=Math.max(r,o.ty()),h=Math.max(h,o.sy())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,zg:h}}iy(t,s,i,e,n,r){this.kg.push(il.Un(il.Dg.ey,{ny:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,zg:r}))}Dg(t,s,i,e,n){if("string"==typeof t&&(t=[il.Un(il.Rg,{Eg:il.Um(t)})]),il.bh(this.kg),!t.length||1===t.length&&t[0].qg()&&t[0].Au()||i<2)return;if(1===t.length){const e=t[0];if(e.qg()&&e.hy()<=100&&!e.oy()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,zg:a}=s(e);if(t+=n,e.Yg(t),e.jg(r),e.Hg(h||0),e.Ug(o||0),e.Jg(a||0),t<=i)return void this.iy([e],t,r,h,o,a)}}let r;r="word"===e?this.ly(t):"cjk"===e?this.uy(t):this.py(t),this.my(r,s,i,n)}ly(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.gy();if(n.Xg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yy())if(sl(r))i.length>0&&s.push(i),s.push([il.Un(il.Rg,{Eg:["\n"],Cg:t})]),i=[];else if(0===i.length)i.push(il.Un(il.Rg,{Eg:[r],Cg:t})),e=Za(r);else{const n=Za(r);if(n===e){const s=i.at(-1);s.gy()===t?s.Sy(r):i.push(il.Un(il.Rg,{Eg:[r],Cg:t}))}else s.push(i),i=[il.Un(il.Rg,{Eg:[r],Cg:t})],e=n}}return i.length>0&&s.push(i),s}uy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.gy();if(n.Xg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yy())if(sl(r))i.length>0&&s.push(i),s.push([il.Un(il.Rg,{Eg:["\n"],Cg:t})]),i=[];else if(0===i.length)i.push(il.Un(il.Rg,{Eg:[r],Cg:t})),e=Ka(r);else if(e||Qa(r)){const s=i.at(-1);s.gy()===t?s.Sy(r):i.push(il.Un(il.Rg,{Eg:[r],Cg:t})),e=Ka(r)}else s.push(i),i=[il.Un(il.Rg,{Eg:[r],Cg:t})],e=Ka(r)}return i.length>0&&s.push(i),s}py(t){const s=[];for(const i of t)if(i.qg()){const t=i.yy();il.On(s,t.map((t=>[il.Un(il.Rg,{Eg:[t],Cg:i.gy()})])))}else s.push([i]);return s}wy(t){return t.map((t=>t.by()))}vy(t,s){const i=t.length?t.at(-1):null;let e=0;i&&i.qg()&&s[0].qg()&&s[0].gy()===i.gy()&&(i.My(s[0].yy()),e=1);for(let i=s.length;e<i;++e){const i=s[e];t.push(i.by())}}my(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,l=0;for(const e of t){if(1===e.length&&e[0].qg()&&1===e[0].hy()&&sl(e[0].yy()[0])){if(0===h){const t=s(il.Un(il.Rg,{Eg:[" "],Cg:e[0].gy()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,l=t.zg||0}this.iy(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0;continue}const t=this.wy(n);this.vy(t,e);const u=this.Wg(t,s),c=u.width;if(c>=i)if(n.length>0&&this.iy(n,r,h,o,a,l),n=[],e[0].qg()&&il.bm(e[0].yy()))r=0,h=0,o=0,a=0,l=0;else{this.vy(n,e);const t=this.Wg(n,s);r=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,l=t.zg}else n=t,r=c,h=u.height,o=u.fontBoundingBoxAscent,a=u.fontBoundingBoxDescent,l=u.zg}n.length>0&&this.iy(n,r,h,o,a,l),this.xy(s,e)}xy(t,s){for(const i of this.kg){const e=i._y();if(!e.length)continue;let n=e.at(-1);if(n.qg()){const r=n.yy(),h=r.slice(0);if(tl(h),0===h.length)i.Ty(-n.Vg()),e.pop();else if(h.length<r.length){n.Gy(h);const s=t(n).width,e=n.Vg()-s;n.Yg(s),i.Ty(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.Ty(s),i.Ty(s))}}}Pu(){il.bh(this.kg)}Cy(){return this.kg.reduce(((t,s)=>Math.max(t,s.Vg())),0)}Iy(){return this.kg.reduce(((t,s)=>t+s.Kg()),0)}}}{const nl=self.Cs;nl.Dg.ey=class{constructor(t){this._g=t.ny||[],this.Py=t.width||-1,this.Ay=t.height||-1,this.Ry=t.fontBoundingBoxAscent||-1,this.Ey=t.fontBoundingBoxDescent||-1,this.Oy=t.zg||-1,this.Fy=0,this.Dy=0}ny(){return this._g.values()}*ky(){const t=this._g;for(let s=t.length-1;s>=0;--s)yield t[s]}_y(){return this._g}Ty(t){this.Py+=t}Vg(){return this.Py}Kg(){return this.Ay}Ly(){return this.Ry}ty(){return this.Ey}sy(){return this.Oy}Ny(t){this.Fy=t}By(){return this.Fy}$y(t){this.Dy=t}Wy(){return this.Dy}}}{const rl=self.Cs;rl.Vy=class{constructor(t){this.jy=t.Cg||[],this.Py=t.width||-1,this.Ay=t.height||-1,this.Ry=t.fontBoundingBoxAscent||-1,this.Ey=t.fontBoundingBoxDescent||-1,this.Oy=t.zg||-1,this.Fy=0,this.Dy=0}qg(){return!1}Xg(){return!1}gy(){return this.jy}Hy(t){const s=this.jy;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}Uy(t){return!!this.Hy(t)}Jy(){const t=new Map;for(const s of this.jy)t.set(s.tag,s.Ig);return t}Ty(t){this.Py+=t}Yg(t){this.Py=t}Vg(){return this.Py}jg(t){this.Ay=t}Kg(){return this.Ay}Hg(t){this.Ry=t}Qg(){return this.Ry}Ug(t){this.Ey=t}ty(){return this.Ey}Jg(t){this.Oy=t}sy(){return this.Oy}Ny(t){this.Fy=t}By(){return this.Fy}$y(t){this.Dy=t}Wy(){return this.Dy}}}{const hl=self.Cs;hl.Rg=class extends hl.Vy{constructor(t){super(t),this.zy=t.Eg}qg(){return!0}My(t){hl.On(this.zy,t),this.Py=-1,this.Ay=-1,this.Ry=-1,this.Ey=-1,this.Oy=-1}Sy(t){this.zy.push(t)}by(){return hl.Un(hl.Rg,{Eg:this.zy.slice(0),Cg:this.jy,width:this.Py,height:this.Ay,fontBoundingBoxAscent:this.Ry,fontBoundingBoxDescent:this.Ey,zg:this.Oy})}yy(){return this.zy}Gy(t){this.zy=t}hy(){return this.zy.length}Au(){return 0===this.zy.length}oy(){return this.zy.includes("\n")}}}{const ol=self.Cs;ol.Ag=class extends ol.Vy{constructor(t){super(t),this.qy=t.icon}Xg(){return!0}Yy(){return this.qy}by(){return ol.Un(ol.Ag,{icon:this.qy,Cg:this.jy,width:this.Py,height:this.Ay,fontBoundingBoxAscent:this.Ry,fontBoundingBoxDescent:this.Ey,zg:this.Oy})}Xy(t){if(!t)return null;let s=Number(this.qy);return String(s)===this.qy?(s=Math.floor(s),t.Zy(s)):t.Ky(this.qy)}Zg(t){const s=this.Xy(t);this.Py=s?this.Ay*s.Vg()/s.Kg():0}Qy(t){const s=this.Xy(t);return s?s.Qy():null}hy(){return 1}}}{const al=self.Cs;al.tS=class{constructor(t){this.sS=new Map,this.iS=t.eS,this.nS=t.rS}Jn(){for(const t of this.sS.values())t.Jn();this.sS.clear()}hS(t){let s=this.sS.get(t);if(s)return s;const i=this.iS(t);return s=al.Un(al.oS,this,{source:t,aS:i}),this.sS.set(t,s),s}lS(t){return this.sS.has(t)}uS(t){const s=this.sS.get(t);s&&s.Jn(),this.sS.delete(t)}async cS(t){return await this.nS(t)}}}{const ll=self.Cs;ll.oS=class{constructor(t,s){this.fS=t,this.dS=s.source,this.pS=[],this.mS=new Map,this.gS=!1,this.yS=!1,this.SS=null;const i=s.aS.wS;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=ll.Un(ll.bS,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.pS.push(e),s.tag&&this.mS.set(s.tag.toLowerCase(),e)}}Jn(){for(const t of this.pS)t.Jn();ll.bh(this.pS),this.mS.clear(),this.fS=null,this.dS=null}vS(){return this.gS}MS(){return this.yS}xS(){return this.SS||(this.SS=this._S()),this.SS}async _S(){if(this.gS)return;this.gS=!0,this.yS=!0;const t=await this.fS.cS(this.dS);if(!this.fS)return;const s=t.wS;for(let t=0,i=Math.min(s.length,this.pS.length);t<i;++t){const i=s[t].TS;this.pS[t].GS(i)}this.yS=!1}Zy(t){return(t=Math.floor(t))<0||t>=this.pS.length?null:this.pS[t]}Ky(t){return this.mS.get(t.toLowerCase())||null}}}{const ul=self.Cs;ul.bS=class{constructor(t,s){this.CS=t,this.dS=s.source||null,this.IS=s.index,this.PS=s.tag,this.Py=s.width,this.Ay=s.height,this.AS=null}Jn(){this.Py=0,this.Ay=0,this.CS=null}RS(){return this.dS}Vg(){return this.Py}Kg(){return this.Ay}GS(t){this.AS=t}Qy(){return this.AS}}}{let cl=function(t,s,i,e){const n=vl;gl.O(wl,i,s),gl.O(bl,t,s),gl.Gt(n,wl,bl),gl.normalize(n,n),e.set(n[0],n[1],n[2],gl.Tt(t,n))},fl=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.ES,f=h.OS,d=h.FS,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g>=u||o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g>u},dl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};PlaneFromPoints=cl,IsInFrontOfPlane=fl,IsPointInFrontOfPlane=dl;const pl=self.Cs,ml=self.ls,gl=ml.Ss,yl=ml.ws,Sl=ml.ds,wl=gl.create(),bl=gl.create(),vl=gl.create(),Ml=yl.create(),xl=Sl.create(),_l=gl.create(),Tl=gl.create(),Gl=gl.create(),Cl=gl.create(),Il=gl.create(),Pl=gl.create(),Al=gl.create(),Rl=gl.create(),El=yl.v(0,0,1,1);pl.DS={kS(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},LS(t,s,i,e,n,r,h){const o=xl,a=Ml;return Sl.multiply(o,n,e),null!==Sl._(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,yl.Rt(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},NS(t,s,i,e,n,r,h){const o=wl,a=bl;if(!pl.DS.LS(t,s,0,e,n,r,o))return!1;if(!pl.DS.LS(t,s,1,e,n,r,a))return!1;const l=bl;gl.O(l,a,o);const u=vl;gl.set(u,0,0,1);const c=-i,f=gl.Tt(u,l);let d=0;if(0===f){if(0!==gl.Tt(u,o)+c)return!1}else if(d=-(gl.Tt(o,u)+c)/f,d<0)return!1;return gl.bt(h,o,l,d),!0}};class Ol{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.ES=NaN,this.OS=NaN,this.FS=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.ES=t>0?1:0,this.OS=s>0?1:0,this.FS=i>0?1:0}}pl.DS.BS=class{constructor(){this.$S=new Ol,this.WS=new Ol,this.VS=new Ol,this.jS=new Ol,this.HS=new Ol,this.US=new Ol}JS(t,s){const i=El;pl.DS.LS(0,1,0,t,s,i,_l),pl.DS.LS(1,1,0,t,s,i,Tl),pl.DS.LS(0,0,0,t,s,i,Gl),pl.DS.LS(1,0,0,t,s,i,Cl),pl.DS.LS(0,1,1,t,s,i,Il),pl.DS.LS(1,1,1,t,s,i,Pl),pl.DS.LS(0,0,1,t,s,i,Al),pl.DS.LS(1,0,1,t,s,i,Rl),cl(Gl,_l,Il,this.$S),cl(_l,Tl,Pl,this.WS),cl(Tl,Cl,Rl,this.VS),cl(Cl,Gl,Al,this.jS),cl(Al,Il,Pl,this.US),cl(Cl,Tl,_l,this.HS)}zS(t,s,i,e,n,r){return fl(t,s,i,e,n,r,this.$S)&&fl(t,s,i,e,n,r,this.WS)&&fl(t,s,i,e,n,r,this.VS)&&fl(t,s,i,e,n,r,this.jS)&&fl(t,s,i,e,n,r,this.HS)&&fl(t,s,i,e,n,r,this.US)}qS(t,s,i){return!dl(t,s,i,this.HS)}}}{const Fl=self.Cs,Dl=self.ls,kl=Dl.Ss,Ll=Dl.ws,Nl=Dl.ds,Bl=Nl.create(),$l=kl.v(0,0,0),Wl=kl.v(0,0,0),Vl=kl.v(0,0,0),jl=kl.v(0,1,0),Hl=Ll.v(0,0,0,0),Ul=new Fl.Il,Jl=new Fl.Rect,zl=new Fl.Il(0,0,1,0,1,1,0,1),ql={YS:1,XS:1e4},Yl=Nl.v(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Fl.DS.ZS=class{constructor(t){t=Object.assign({},ql,t),this.Py=0,this.Ay=0,this.KS=Fl.Qn(45),this.QS=Math.tan(this.KS/2),this.tw=Nl.create(),this.sw=Nl.create(),this.iw=!1,this.ew=t.YS,this.rw=t.XS,this.hw=[],this.ow=new Map,this.aw=null,this.lw=null,this.uw=null,this.cw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=null,this.gw=null,this.yw=null,this.Sw=null,this.ww=null,this.bw=new Map,this.Mw=null,this.xw=[],this._w=new Map,this.Tw=0,this.Gw=0,this.Cw=1,this.Iw=[this.Cw],this.Pw=1,this.Aw=[this.Pw],this.Rw=.5,this.Ew=[this.Rw],this.Ow=0,this.Fw=!0,this.Dw=!1}kw(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Lw(){this.Tw=0,this.Gw=0,this.aw=null,this.lw=null,this.uw=null,this.cw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=null,this.gw=null,this.yw=null,this.Sw=null,this.ww=null,this.Nw()}Bw(){this.Lw(),this.Mw=null}$w(){for(const t of this.hw)t.Jn();this.Lw()}Vg(){return this.Py}Kg(){return this.Ay}Ww(t){return this.Vw()?100:t/(2*this.jw())}Hw(t){return this.Vw()?t/(2*this.jw())/this.Ww(t):1}Uw(t){this.ew=t}Jw(){return this.ew}zw(t){this.rw=t}qw(){return this.rw}Yw(t){this.KS=t,this.QS=Math.tan(this.KS/2)}Xw(){return this.KS}jw(){return this.QS}Zw(){this.iw=!1}Kw(){this.iw=!0}Vw(){return!this.iw}Qw(){return this.iw}tb(t,s,i=.5,e=.5){const n=this.Jw(),r=this.qw(),h=this.Xw();if(.5===i&&.5===e)this.sb()?Nl.ut(t,h,s,n,r):Nl.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.jw()*n,c=u*s;Nl.ot(t,h*c,o*c,a*u,l*u,n,r),this.sb()&&Nl.mul(t,Yl,t)}}ib(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.Ww(i)*n*this.jw()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.sb()?Nl.gt(t,a,l,u,c,this.Jw(),this.qw()):Nl.dt(t,a,l,u,c,this.Jw(),this.qw())}eb(t,s,i,e,n,r=1){let h=1;this.Vw()&&(h=200*this.jw()/n);const o=Vl;kl.set(o,h,-h,1);const a=$l,l=Wl;kl.multiply(a,s,o),kl.multiply(l,i,o),Nl.yt(t,a,l,e||jl),o[2]=r,Nl.scale(t,t,o)}nb(t,s,i,e,n,r,h,o){return kl.set($l,t,s,i),kl.set(Wl,e,n,r),this.eb(Bl,$l,Wl,jl,h,o),Bl}rb(t){this.hw.push(t),this.ow.set(t.Pc(),t)}hb(t){const s=this.hw.indexOf(t);-1!==s&&this.hw.splice(s,1),this.ow.delete(t.Pc())}Nw(){Fl.bh(this.hw),this.ow.clear()}ob(t){return this.ow.get(t)||null}ab(){return this.aw}lb(){this.ub(this.aw)}cb(){return this.lw}fb(){this.ub(this.lw)}pb(){this.ub(this.uw)}mb(){this.ub(this.cw)}gb(){this.ub(this.fw)}yb(){this.ub(this.dw)}Sb(){this.ub(this.pw)}wb(){this.ub(this.mw)}bb(){this.ub(this.gw)}Mb(){this.ub(this.yw)}xb(){this.ub(this.Sw)}_b(){this.ub(this.ww)}Tb(t){this.Mw=t}Gb(){return this.Mw}Cb(t,s,i,e){const n=Fl.DS.Pb.Ib(t,s,i,e);let r=this.bw.get(n);return r||(r=Fl.Un(Fl.DS.Pb,this,t,s,i,e),this.bw.set(n,r)),r.Ab(),r}Rb(t){t.Eb(),0===t.Ob()&&(this.Mw===t&&(this.Mw=null),this.bw.delete(t.Fb()),t.Jn())}Db(t){Fl.bh(this.xw),this._w.clear();let s=0;for(const i of t){const t=i[0],e=i[1],n=i[2];this.xw.push([e,n]),this._w.set(t,{number:s,kb:e,Lb:n}),s++}}Nb(t){return this.xw[t]}Bb(t){return this.Nb(t)[0]}$b(t){return this.Nb(t)[1]}Wb(t){const s=this._w.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Vb(t){const s=this._w.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}jb(t){this.Tw=t}Hb(){return this.Tw}Ub(t){this.Gw=t,this.Mw=null}Jb(){return this.Gw}ey(t,s,i,e){const n=Fl.rr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.Cw,a=r*o,l=h*o,u=this.Pw;2===u?this.zb(t,s,0,i,e,0,a,l):1===u?this.qb(t,s,0,i,e,0,a,l):this.Yb(t,s,0,i,e,0,a,l)}Xb(t,s,i,e,n,r){const h=Fl.rr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.Cw,u=o*l,c=a*l,f=this.Pw;2===f?this.zb(t,s,i,e,n,r,u,c):1===f?this.qb(t,s,i,e,n,r,u,c):this.Yb(t,s,i,e,n,r,u,c)}zb(t,s,i,e,n,r,h,o){const a=this.Rw,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,S=u+o+p,w=c+h,b=f-o,v=c-h-d,M=f+o-p;this.Zb(m,g,i,w,b,r,v,M,r,y,S,i,zl)}qb(t,s,i,e,n,r,h,o){const a=this.Rw,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,S=f-o,w=c-h,b=f+o;this.Zb(d,p,i,y,S,r,w,b,r,m,g,i,zl)}Yb(t,s,i,e,n,r,h,o){const a=this.Rw,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,S=f-o,w=c-h,b=f+o;this.Zb(d,p,i,y,S,r,w,b,r,m,g,i,zl)}Kb(t,s,i,e,n,r){const h=Fl.rr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.Cw,u=o*l,c=a*l,f=this.Pw;2===f?this.Qb(t,s,i,e,u,c,n,r):1===f?this.tv(t,s,i,e,u,c,n,r):this.sv(t,s,i,e,u,c,n,r)}Qb(t,s,i,e,n,r,h,o){const a=this.Rw,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,S=u+r+p,w=c+n,b=f-r,v=c-n-d,M=f+r-p;Ul.set(m,g,w,b,v,M,y,S),Jl.set(h,0,o,0),this.ev(Ul,Jl)}tv(t,s,i,e,n,r,h,o){const a=this.Rw,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,S=f-r,w=c-n,b=f+r;Ul.set(d,p,y,S,w,b,m,g),Jl.set(h,0,o,0),this.ev(Ul,Jl)}sv(t,s,i,e,n,r,h,o){const a=this.Rw,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,S=f-r,w=c-n,b=f+r;Ul.set(d,p,y,S,w,b,m,g),Jl.set(h,0,o,0),this.ev(Ul,Jl)}nv(t,s,i,e){const n=.5*this.Cw,r=this.Pw;2===r?this.rv(t,s,i,e,n):1===r?this.hv(t,s,i,e,n):this.ov(t,s,i,e,n)}rv(t,s,i,e,n){this.zb(t,s,0,i,s,0,0,n),this.zb(i,s,0,i,e,0,n,0),this.zb(i,e,0,t,e,0,0,-n),this.zb(t,e,0,t,s,0,-n,0)}hv(t,s,i,e,n){this.qb(t,s,0,i,s,0,0,n),this.qb(i,s,0,i,e,0,n,0),this.qb(i,e,0,t,e,0,0,-n),this.qb(t,e,0,t,s,0,-n,0)}ov(t,s,i,e,n){this.Yb(t,s,0,i,s,0,0,n),this.Yb(i,s,0,i,e,0,n,0),this.Yb(i,e,0,t,e,0,0,-n),this.Yb(t,e,0,t,s,0,-n,0)}av(t){this.nv(t.Ka(),t.Qa(),t.tl(),t.sl())}lv(t){const s=Fl.rr(t.Br(),t.$r(),t.Wr(),t.Vr()),i=Math.sin(s),e=Math.cos(s),n=.5*this.Cw,r=i*n,h=e*n,o=this.Pw;2===o?this.uv(t,r,h):1===o?this.cv(t,r,h):this.fv(t,r,h)}uv(t,s,i){this.zb(t.Br(),t.$r(),0,t.Wr(),t.Vr(),0,s,i),this.zb(t.Wr(),t.Vr(),0,t.jr(),t.Hr(),0,i,-s),this.zb(t.jr(),t.Hr(),0,t.Ur(),t.Jr(),0,-s,-i),this.zb(t.Ur(),t.Jr(),0,t.Br(),t.$r(),0,-i,s)}cv(t,s,i){this.qb(t.Br(),t.$r(),0,t.Wr(),t.Vr(),0,s,i),this.qb(t.Wr(),t.Vr(),0,t.jr(),t.Hr(),0,i,-s),this.qb(t.jr(),t.Hr(),0,t.Ur(),t.Jr(),0,-s,-i),this.qb(t.Ur(),t.Jr(),0,t.Br(),t.$r(),0,-i,s)}fv(t,s,i){this.Yb(t.Br(),t.$r(),0,t.Wr(),t.Vr(),0,s,i),this.Yb(t.Wr(),t.Vr(),0,t.jr(),t.Hr(),0,i,-s),this.Yb(t.jr(),t.Hr(),0,t.Ur(),t.Jr(),0,-s,-i),this.Yb(t.Ur(),t.Jr(),0,t.Br(),t.$r(),0,-i,s)}dv(t){this.Cw=t,this.Iw[this.Iw.length-1]=t}pv(){return this.Cw}mv(t){if(this.Iw.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.Iw.push(t),this.Cw=t}gv(){if(this.Iw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Iw.pop(),this.Cw=this.Iw.at(-1)}yv(){this.Pw=0,this.Aw[this.Aw.length-1]=0}Sv(){this.Pw=1,this.Aw[this.Aw.length-1]=0}wv(){this.Pw=2,this.Aw[this.Aw.length-1]=0}bv(t){if("butt"===t)this.vv();else if("square"===t)this.Mv();else{if("zag"!==t)throw new Error("invalid line cap");this.xv()}}vv(){if(this.Aw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Aw.push(0),this.Pw=0}Mv(){if(this.Aw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Aw.push(1),this.Pw=1}xv(){if(this.Aw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Aw.push(2),this.Pw=2}_v(){if(this.Aw.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Aw.pop(),this.Pw=this.Aw.at(-1)}Tv(t){this.Rw=t,this.Ew[this.Ew.length-1]=t}Gv(){return this.Rw}Cv(t){if(this.Ew.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.Ew.push(t),this.Rw=t}Iv(){if(this.Ew.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Ew.pop(),this.Rw=this.Ew.at(-1)}Pv(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.Av(n,r,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.Av(n,r,h,o,a,l,s,e)}}}Rv(){return 3}Ev(){this.Ov(!0),this.Ow++}Fv(){return this.Ow}Dv(){this.Ow++}kv(t){this.Fw=!!t}Lv(){return this.Fw}Nv(t){this.Dw=!!t}Bv(){return this.Dw}$v(){return!1}sb(){return!1}Wv(){}Vv(){}jv(){}Hv(){return this.Wv()+this.Vv()+this.jv()}Uv(){return Fl.Un(Fl.DS.Jv,this)}}}{const Xl=self.Cs;Xl.DS.zv=class{constructor(t,s){this.Yn=s.name,this.qv=t,this.Yv=s.Xv||0,this.Zv=s.Kv||0,this.Qv=!!s.tM,this.sM=!!s.iM,this.eM=!!s.nM,this.rM=!!s.hM,this.oM=!!s.animated,this.aM=!!s.lM,this.uM=!!s.cM,this.fM=!1,this.dM=this.Qv||this.aM||0!==this.Yv||0!==this.Zv}Jn(){this.qv=null}pM(){return this.qv}Pc(){return this.Yn}mM(){return 0!==this.Yv||0!==this.Zv}gM(){return this.Yv}yM(){return this.Zv}SM(){return this.Qv}wM(){return this.sM}bM(){return this.eM}vM(){return this.rM}MM(){return this.oM}xM(){return this.aM}_M(){return this.uM}TM(){return this.fM}GM(){return this.dM}CM(){return!1}}}{const Zl=self.Cs;Zl.DS.Pb=class{constructor(t,s,i,e,n){this.qv=t,this.Hp=0,this.IM=null,this.PM="",this.AM=i,this.RM=Zl.Un(Zl._o),this.RM.set(e),this.EM=n,"string"==typeof s?this.PM=s:(this.IM=s,this.PM=this.IM.Pc())}Jn(){if(this.Hp>0)throw new Error("releasing state group still in use");this.qv=null,this.IM=null,this.PM=""}OM(){const t=this.qv;t.ub(this.IM),t.FM(this.AM),t.DM(this.RM),t.Ub(this.EM),t.Tb(this)}Fb(){return Zl.DS.Pb.Ib(this.PM,this.AM,this.RM,this.EM)}Ab(){++this.Hp}Eb(){--this.Hp}Ob(){return this.Hp}kM(){this.IM=null}LM(t){if(this.IM=t.ob(this.PM),!this.IM)throw new Error("failed to restore shader program")}static Ib(t,s,i,e){return("string"==typeof t?t:t.Pc())+","+s+","+i.No()+","+i.Bo()+","+i.$o()+","+i.Wo()+","+e}}}{let Kl=function(t,s,i){const e=i.Br(),n=i.$r(),r=i.Wr()-e,h=i.Vr()-n;return[e+r*t+(i.Ur()-e)*s,n+h*t+(i.Jr()-n)*s]};interpolateQuad=Kl;const Ql=self.Cs,tu=Ql.Un(Ql.Il);Ql.DS.NM=class{constructor(t,s,i){this.BM=t,this.$M=s,this.WM=i,this.Pa=NaN,this.Aa=NaN,this.EM=NaN,this.VM=NaN,this.jM=NaN,this.Pa=0,this.Aa=0,this.EM=0,this.VM=0,this.jM=0}HM(t,s,i,e){this.Pa=t,this.Aa=s,this.VM=i,this.jM=e}UM(){return this.Pa}JM(t){this.Pa!==t&&(this.Pa=t,this.BM.zM())}qM(){return this.Aa}YM(t){this.Aa!==t&&(this.Aa=t,this.BM.zM())}XM(){return this.EM}ZM(t){this.EM!==t&&(this.EM=Math.max(t,0),this.BM.zM())}KM(){return this.VM}QM(t){this.VM=t}tx(){return this.jM}sx(t){this.jM=t}ix(t,s,i){[this.Pa,this.Aa]=Kl(t.Pa,t.Aa,s),this.EM=t.EM,this.VM=Ql.Ct(i.Ka(),i.tl(),t.VM),this.jM=Ql.Ct(i.Qa(),i.sl(),t.jM)}nx(t,s,i){[this.Pa,this.Aa]=Kl(t.Pa,t.Aa,s),this.EM=t.EM,[this.VM,this.jM]=Kl(t.VM,t.jM,i)}hx(){return{x:this.UM(),y:this.qM(),z:this.XM(),u:this.KM(),v:this.tx()}}ox(t){this.JM(t.x),this.YM(t.y),t.hasOwnProperty("z")&&this.ZM(t.z),this.QM(t.u),this.sx(t.v)}lx(){return this.BM}ux(){return this.$M}mx(){return this.WM}},Ql.DS.gx=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.yx=t,this.Sx=s,this.wx=i||null,this.bx=[],this.vx=0,this.Mx=0,this.xx=1,this._x=1,this.Tx=0,this.Gx=!1;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Ql.Un(Ql.DS.NM,this,r,i),h=r/e,o=i/n;t.HM(h,o,h,o),s.push(t)}this.bx.push(s)}}Jn(){Ql.bh(this.bx)}Cx(){return this.yx}Ix(){return this.Sx}Px(){return this.wx}Ax(){return this.bx}zM(){this.Gx=!0}Rx(){if(!this.Gx)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.bx)for(const h of r){const r=h.UM(),o=h.qM();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.XM())}this.vx=t,this.Mx=s,this.xx=i,this._x=e,this.Tx=n,this.Gx=!1}Ex(){return this.Rx(),this.vx}Ox(){return this.Rx(),this.Mx}Fx(){return this.Rx(),this.xx}Dx(){return this.Rx(),this._x}kx(){return this.Rx(),this.Tx}Lx(){return this.kx()>0}Nx(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.yx||s<0||s>=this.Sx?null:this.bx[s][t]}Bx(t,s,i){const e=i instanceof Ql.Rect;if(t.Cx()!==this.Cx()||t.Ix()!==this.Ix())throw new Error("source mesh wrong size");const n=t.bx,r=this.bx;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.ix(n,s,i):r.nx(n,s,i)}}}$x(t){const s=this.bx;let i=s[0];for(let e=1,n=s.length;e<n;++e){const n=s[e];let r=i[0],h=n[0];for(let s=1,e=n.length;s<e;++s){const e=i[s],o=n[s];tu.set(r.KM(),r.tx(),e.KM(),e.tx(),o.KM(),o.tx(),h.KM(),h.tx()),t.Zb(r.UM(),r.qM(),r.XM(),e.UM(),e.qM(),e.XM(),o.UM(),o.qM(),o.XM(),h.UM(),h.qM(),h.XM(),tu),r=e,h=o}i=n}}Wx(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.bx;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.UM(),o.qM(),o.XM()),[m,g,y]=s(u.UM(),u.qM(),u.XM()),[S,w,b]=s(c.UM(),c.qM(),c.XM()),[v,M,x]=s(a.UM(),a.qM(),a.XM());t.Xb(f,d,p,m,g,y),t.Xb(f,d,p,S,w,b),t.Xb(f,d,p,v,M,x),i===l-1&&t.Xb(m,g,y,S,w,b),n===r-1&&t.Xb(v,M,x,S,w,b),o=u,a=c}e=h}}Vx(t){const s=.001,i=.99999999,e=t.du(),n=[],r=this.Cx()-1,h=this.Ix()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=e[0],f=e[1],d=Ql.Zn(Math.floor(c*r),0,l),p=Ql.Zn(Math.floor(f*h),0,u),m=!0,g=0,y=0,S=0,w=-1;const b=()=>{c=Ql.Zn(Ql.Ct(c,g,S),0,1),f=Ql.Zn(Ql.Ct(f,y,S),0,1),n.push(c,f)};for(let t=0,v=e.length;t<v;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Ql.Zn(Math.floor(c*r),0,l),p=Ql.Zn(Math.floor(f*h),0,u);const M=(t+2)%v;for(g=e[M],y=e[M+1],w=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Ql.Xr(c,f,t,e,r,e,r,h),0!==w&&(S=Ql.Yr(c,f,g,y,t,e,r,h,-.001),S>=0&&S<=i))b(),m=!m,w=0;else if(p>0&&2!==w&&(S=Ql.Yr(c,f,g,y,t,e,r,e,s),S>=0&&S<=i))b(),p--,m=!1,w=4;else if(d<l&&3!==w&&(S=Ql.Yr(c,f,g,y,r,e,r,h,s),S>=0&&S<=i))b(),d++,m=!1,w=1;else if(d>0&&1!==w&&(S=Ql.Yr(c,f,g,y,t,e,t,h,s),S>=0&&S<=i))b(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&(S=Ql.Yr(c,f,g,y,t,h,r,h,s),S>=0&&S<=i)))break;b(),p++,m=!0,w=2}}}return Ql.Un(Ql.au,n)}jx(t,s){const i=this.Hx(t);this.Ux(i),s.mu(i)}Hx(t){const s=[],i=t.du();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.Jx(e,n);s.push(r,h)}return s}Jx(t,s){const i=this.Cx()-1,e=this.Ix()-1,n=1/i,r=1/e,h=Ql.Zn(Math.floor(t*i),0,i-1),o=Ql.Zn(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.Nx(h,o),d=this.Nx(h+1,o+1),p=Ql.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.Nx(h+(p?1:0),o+(p?0:1)),[S,w,b]=Ql.Zr(t,s,a,l,m,g,u,c);return Ql.Kr(S,w,b,f.UM(),f.qM(),f.XM(),y.UM(),y.qM(),y.XM(),d.UM(),d.qM(),d.XM())}Ux(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Ql.Th(t,s)}hx(){return{cols:this.Cx(),rows:this.Ix(),points:this.bx.map((t=>t.map((t=>t.hx()))))}}ox(t){const s=this.Cx(),i=this.Ix();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.Nx(e,t).ox(i[e])}}}}{let su=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{zx:i,qx:e,format:n,type:r}};GetFormatSpecifiers=su;const iu=self.Cs,eu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),nu=new Set(["nearest","bilinear","trilinear"]),ru=new Set(["default","low","high"]),hu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),ou={Yx:"clamp-to-edge",Xx:"clamp-to-edge",Zx:"trilinear",Kx:0,Qx:"rgba8",t_:!0,s_:"default",i_:!0,e_:!1,width:-1,height:-1},au={i_:!0,flipY:!1},lu=new Set;iu.DS.n_=class{constructor(t){this.qv=t,this.r_=null,this.Py=0,this.Ay=0,this.h_=!0,this.o_="clamp-to-edge",this.a_="clamp-to-edge",this.l_="trilinear",this.u_=0,this.c_="rgba8",this.f_=!1,this.d_="default",this.Hp=0}p_(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer||null===t))throw new Error("invalid texture source");if(s=Object.assign({},ou,s),this.r_)throw new Error("already created texture");if(this.o_=s.Yx,this.a_=s.Xx,this.l_=s.Zx,this.u_=s.Kx,this.c_=s.Qx,this.f_=!!s.t_&&this.qv.Lv(),this.d_=s.s_,!hu.has(this.o_)||!hu.has(this.a_))throw new Error("invalid wrap mode");if(!nu.has(this.l_))throw new Error("invalid sampling");if(!eu.has(this.c_))throw new Error("invalid pixel format");if(!ru.has(this.d_))throw new Error("invalid mipmap quality");if(this.h_=!0,t instanceof ArrayBuffer||null===t||s.e_){if(this.Py=s.width,this.Ay=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Py*this.Ay*4)throw new Error("ArrayBuffer wrong size")}else this.Py=t.width,this.Ay=t.height;if(this.Py<=0||this.Ay<=0)throw new Error("invalid texture data size");if(s.e_){const s=iu.co(this.Py,this.Ay);s.getContext("2d").drawImage(t,0,0,this.Py,this.Ay),t=s}const i=iu.br(this.Py)&&iu.br(this.Ay),e=this.qv.m_();if(this.Py>e||this.Ay>e)throw new Error("texture data exceeds maximum texture size");const n=this.qv.g_(),r=this.qv.y_();this.r_=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.r_),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.i_),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=su(this.c_,n);if(this.qv.S_()||i||!this.w_())if(r>=2){let s;s=this.f_?Math.floor(Math.log2(Math.max(this.Py,this.Ay))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.zx,this.Py,this.Ay),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Py,this.Ay,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.qx,this.Py,this.Ay,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.qx,this.Py,this.Ay,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.qx,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Py,this.Ay)),t instanceof ImageData){const s=iu.co(this.Py,this.Ay);s.getContext("2d").putImageData(t,0,0),t=s}const s=iu.co(iu.vr(this.Py),iu.vr(this.Ay)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.l_,i.drawImage(t,0,0,this.Py,this.Ay,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.qx,h.format,h.type,s)}null!==t&&this.b_(n),n.bindTexture(n.TEXTURE_2D,null),this.qv.v_(),this.Hp=1,lu.add(this)}M_(t,s,i){if(i=Object.assign({},ou,i),this.r_)throw new Error("already created texture");if(this.o_=i.Yx,this.a_=i.Xx,this.l_=i.Zx,this.c_=i.Qx,this.f_=!!i.t_&&this.qv.Lv(),this.d_=i.s_,!hu.has(this.o_)||!hu.has(this.a_))throw new Error("invalid wrap mode");if(!nu.has(this.l_))throw new Error("invalid sampling");if(!eu.has(this.c_))throw new Error("invalid pixel format");if(!ru.has(this.d_))throw new Error("invalid mipmap quality");this.h_=!1,this.Py=Math.floor(t),this.Ay=Math.floor(s);const e=iu.br(this.Py)&&iu.br(this.Ay),n=this.qv.m_();if(this.Py<=0||this.Ay<=0)throw new Error("invalid texture size");if(this.Py>n||this.Ay>n)throw new Error("texture exceeds maximum texture size");if(!this.qv.S_()&&this.w_()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.qv.g_(),h=this.qv.y_();this.r_=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.r_),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.i_),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=su(this.c_,r),a=h>=2?o.zx:o.qx;r.texImage2D(r.TEXTURE_2D,0,a,this.Py,this.Ay,0,o.format,o.type,null),this.b_(r),r.bindTexture(r.TEXTURE_2D,null),this.qv.v_(),this.Hp=1,lu.add(this)}x_(t){if("default"===this.d_)return this.h_?t.NICEST:t.FASTEST;if("low"===this.d_)return t.FASTEST;if("high"===this.d_)return t.NICEST;throw new Error("invalid mipmap quality")}w_(){return"clamp-to-edge"!==this.o_||"clamp-to-edge"!==this.a_}__(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}b_(t){const s=iu.br(this.Py)&&iu.br(this.Ay);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.__(t,this.o_)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.__(t,this.a_)),"nearest"===this.l_)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.f_=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.qv.S_())&&this.f_){t.hint(t.GENERATE_MIPMAP_HINT,this.x_(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.l_&&!this.qv.Bv();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.f_=!1;const i=this.qv.T_();i&&this.u_>0&&"nearest"!==this.l_&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.u_,this.qv.G_()))}C_(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.r_||this.Hp<=0)throw new Error("texture not created");if(this.h_)throw new Error("cannot update static texture");s=Object.assign({},au,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.qv.y_(),r=this.qv.g_();r.bindTexture(r.TEXTURE_2D,this.r_),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.i_),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=su(this.c_,r),o=n>=2?h.zx:h.qx;try{if(this.Py===i&&this.Ay===e){const s=iu.br(this.Py)&&iu.br(this.Ay);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.qv.S_())&&this.f_&&(r.hint(r.GENERATE_MIPMAP_HINT,this.x_(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Py=i,this.Ay=e;const s=iu.br(this.Py)&&iu.br(this.Ay);if(!this.qv.S_()&&this.w_()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.qv.S_())&&this.f_&&(r.hint(r.GENERATE_MIPMAP_HINT,this.x_(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.qv.v_()}I_(){if(this.Hp>0)throw new Error("texture still has references");if(!this.r_)throw new Error("already deleted texture");lu.delete(this),this.qv.g_().deleteTexture(this.r_),this.r_=null}P_(){return!!this.r_}A_(){return this.r_}pM(){return this.qv}R_(){this.Hp++}E_(){if(this.Hp<=0)throw new Error("no more references");this.Hp--}O_(){return this.Hp}Vg(){return this.Py}Kg(){return this.Ay}F_(){return this.h_}D_(){let t=this.Py*this.Ay;switch(this.c_){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.f_&&(t+=Math.floor(t/3)),t}static kM(){lu.clear()}static k_(){return lu.values()}}}{const uu=self.Cs,cu=self.assert,fu=self.ls,du=fu.Ss,pu=fu.ds,mu=new Set(["nearest","bilinear","trilinear"]),gu={Zx:"trilinear",alpha:!0,depth:!1,L_:!0,N_:!0,B_:0},yu=new Set;uu.DS.W_=class{constructor(t){this.qv=t,this.V_=null,this.j_=null,this.r_=null,this.H_=null,this.Py=0,this.Ay=0,this.U_=!0,this.l_="trilinear",this.J_=!0,this.z_=!1,this.q_=!0,this.Y_=0,this.X_=pu.create(),this.Z_=0,this.K_=0,this.Q_=0}tT(t,s,i){i=Object.assign({},gu,i);const e=this.qv.y_();if(this.r_||this.H_)throw new Error("already created render target");if(this.l_=i.Zx,this.J_=!!i.alpha,this.z_=!!i.depth,this.q_=!!i.L_,this.U_=!!i.N_,this.Y_=i.B_,!mu.has(this.l_))throw new Error("invalid sampling");if(this.Y_>0&&(e<2||this.q_))throw new Error("invalid use of multisampling");if(e<2&&(this.q_=!0),this.Py=t,this.Ay=s,this.Py<=0||this.Ay<=0)throw new Error("invalid render target size");this.sT();const n=this.qv.g_();if(this.V_=n.createFramebuffer(),this.z_&&(this.j_=n.createFramebuffer()),this.q_){this.r_=this.qv.iT(this.Py,this.Ay,{Zx:this.l_,Qx:this.J_?"rgba8":"rgb8",t_:!1});const t=this.r_.A_();n.bindFramebuffer(n.FRAMEBUFFER,this.V_),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.z_&&(n.bindFramebuffer(n.FRAMEBUFFER,this.j_),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.H_=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.H_);const t=this.J_?n.RGBA8:n.RGB8;if(this.Y_>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.Y_>t&&(this.Y_=t)}else this.Y_=0}0===this.Y_?n.renderbufferStorage(n.RENDERBUFFER,t,this.Py,this.Ay):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.Y_,t,this.Py,this.Ay),n.bindFramebuffer(n.FRAMEBUFFER,this.V_),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.H_),this.z_&&(n.bindFramebuffer(n.FRAMEBUFFER,this.j_),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.H_)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.qv.eT();this.z_&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.V_),this.qv.nT()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),yu.add(this)}rT(t,s){if(this.Py===t&&this.Ay===s)return;this.Py=t,this.Ay=s,this.sT();const i=this.qv.g_();i.bindFramebuffer(i.FRAMEBUFFER,this.V_),this.r_?this.r_.C_(new ImageData(this.Py,this.Ay)):(i.bindRenderbuffer(i.RENDERBUFFER,this.H_),i.renderbufferStorage(i.RENDERBUFFER,this.J_?i.RGBA8:i.RGB8,this.Py,this.Ay),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.qv.eT();this.z_&&e&&(this.qv.nT()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}I_(){if(!this.r_&&!this.H_)throw new Error("already deleted render target");yu.delete(this);const t=this.qv.g_();this.r_?(t.bindFramebuffer(t.FRAMEBUFFER,this.V_),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.z_&&(t.bindFramebuffer(t.FRAMEBUFFER,this.j_),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.qv.hT(this.r_),this.r_=null):this.H_&&(t.bindFramebuffer(t.FRAMEBUFFER,this.V_),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.z_&&(t.bindFramebuffer(t.FRAMEBUFFER,this.j_),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.H_),this.H_=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.qv.y_()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.V_),this.z_&&t.deleteFramebuffer(this.j_);const s=this.qv.oT();s.aT=null,s.lT=null,this.V_=null}sT(){this.qv.tb(this.X_,this.Py/this.Ay),this.Z_=this.qv.Xw(),this.K_=this.qv.Jw(),this.Q_=this.qv.qw()}uT(){return this.V_}cT(){return this.j_}pM(){return this.qv}fT(){return this.r_}dT(){return this.qv.Xw()===this.Z_&&this.qv.Jw()===this.K_&&this.qv.qw()===this.Q_||this.sT(),this.X_}pT(){return"nearest"!==this.l_}mT(){return this.J_}gT(){return this.q_}yT(){return this.z_}Vg(){return this.Py}Kg(){return this.Ay}ST(){return this.U_}wT(){return this.Y_}bT(){const t={Zx:this.l_,alpha:this.J_,L_:this.q_};return this.U_||(t.width=this.Py,t.height=this.Ay),t}vT(t){return"nearest"!==(t=Object.assign({},gu,t)).Zx===this.pT()&&!!t.alpha===this.mT()&&!!t.depth===this.yT()&&!(this.qv.y_()>=2&&!!t.L_!==this.gT())&&("number"==typeof t.width||"number"==typeof t.height?!this.ST()&&this.Vg()===Math.floor(t.width)&&this.Kg()===Math.floor(t.height):this.ST())}MT(){return this.r_?this.r_.A_():null}D_(){return this.r_?this.r_.D_():this.Py*this.Ay*(this.J_?4:3)}static async xT(t,s){const i=await t._T(s,!0);return await uu.po(i)}static kM(){yu.clear()}static TT(){return yu.values()}static GT(t,s){for(const i of yu)i.ST()&&i.rT(t,s)}}}{const Su=self.Cs,wu=self.ls,bu=wu.Ss,vu=wu.ds,Mu=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);Su.DS.CT=class extends Su.DS.zv{static async IT(t,s){const i=t.g_(),e=s.src,n=s.PT,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a);const l=t.AT();if(l?await t.RT((()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR))):await Su.ph(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=Su.Mm(i.getProgramInfoLog(a)||"").trim();return u&&!Su.wm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async ET(t,s){const i=await Su.DS.CT.IT(t,s);return new Su.DS.CT(t,i,s)}constructor(t,s,i){super(t,i);const e=t.g_(),n=t.oT();t.Ov(),e.useProgram(s),this.OT=e,this.IM=s,this.FT="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex");this.DT=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.kT),e.vertexAttribPointer(r,t.Rv(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.LT),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==this.DT&&(e.bindBuffer(e.ARRAY_BUFFER,t.NT),e.vertexAttribPointer(this.DT,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.DT)),e.bindBuffer(e.ARRAY_BUFFER,null),this.BT=new Su.DS.$T(this,"matP","mat4"),this.WT=new Su.DS.$T(this,"matMV","mat4"),this.VT=new Su.DS.$T(this,"color","vec4"),this.jT=new Su.DS.$T(this,"samplerFront","sampler"),this.HT=new Su.DS.$T(this,"pointTexStart","vec2"),this.UT=new Su.DS.$T(this,"pointTexEnd","vec2"),this.JT=new Su.DS.$T(this,"zElevation","float"),this.zT=new Su.DS.$T(this,"tileSize","vec2"),this.qT=new Su.DS.$T(this,"tileSpacing","vec2"),this.YT=new Su.DS.$T(this,"color2_","vec4"),this.XT=new Su.DS.$T(this,"outlineThickness","float"),this.ZT=new Su.DS.$T(this,"samplerBack","sampler"),this.KT=new Su.DS.$T(this,"samplerDepth","sampler"),this.QT=new Su.DS.$T(this,"destStart","vec2"),this.tG=new Su.DS.$T(this,"destEnd","vec2"),this.sG=new Su.DS.$T(this,"srcStart","vec2"),this.iG=new Su.DS.$T(this,"srcEnd","vec2"),this.eG=new Su.DS.$T(this,"srcOriginStart","vec2"),this.nG=new Su.DS.$T(this,"srcOriginEnd","vec2"),this.rG=new Su.DS.$T(this,"pixelSize","vec2"),this.hG=new Su.DS.$T(this,"seconds","float"),this.oG=new Su.DS.$T(this,"devicePixelRatio","float"),this.aG=new Su.DS.$T(this,"layerScale","float"),this.lG=new Su.DS.$T(this,"layerAngle","float"),this.uG=new Su.DS.$T(this,"layoutStart","vec2"),this.cG=new Su.DS.$T(this,"layoutEnd","vec2"),this.fG=new Su.DS.$T(this,"zNear","float"),this.dG=new Su.DS.$T(this,"zFar","float"),this.pG=!!(this.rG.mG()||this.hG.mG()||this.ZT.mG()||this.QT.mG()||this.tG.mG()||this.sG.mG()||this.iG.mG()||this.eG.mG()||this.nG.mG()||this.oG.mG()||this.aG.mG()||this.lG.mG()||this.uG.mG()||this.cG.mG());const o=i.parameters||[];this.gG=[],this.fM=this.rG.mG()||this.sG.mG()||this.iG.mG()||this.eG.mG()||this.nG.mG(),this.yG=!1,this.SG=!1,this.VT.wG(1,1,1,1),this.YT.wG(1,1,1,1),this.jT.bG(0),this.ZT.bG(1),this.KT.bG(2),this.HT.vG(0,0),this.UT.vG(1,1),this.JT.MG(0),this.zT.vG(0,0),this.qT.vG(0,0),this.QT.vG(0,0),this.tG.vG(1,1),this.sG.vG(0,0),this.iG.vG(0,0),this.eG.vG(0,0),this.nG.vG(0,0),this.rG.vG(0,0),this.oG.MG(1),this.fG.MG(t.Jw()),this.dG.MG(t.qw()),this.aG.MG(1),this.lG.MG(0),this.hG.MG(0),this.uG.vG(0,0),this.cG.vG(0,0),this.XT.MG(1);for(const t of o){const s=t[0],i=t[2],e=new Su.DS.$T(this,s,i);"color"===i?e.xG(0,0,0):e.MG(0),this.gG.push(e)}this.FT?this._G(n.TG):(this.GG(n.TG,!0),this.CG(n.IG,!0));const a=n.PG;e.useProgram(a?a.IM:null)}Jn(){this.OT.deleteProgram(this.IM),this.IM=null,this.qv.hb(this),this.OT=null,super.Jn()}AG(){return this.OT}EG(){return this.IM}OG(){return this.gG.length}FG(t){return t<0||t>=this.gG.length?null:this.gG[t].DG()}kG(t){for(let s=0,i=t.length;s<i;++s)if(!this.gG[s].LG(t[s]))return!1;return!0}NG(t){for(let s=0,i=t.length;s<i;++s)this.gG[s].BG(t[s])}$G(t,s,i,e,n,r,h,o,a,l){return!(this.ZT.mG()||this.rG.mG()&&!this.rG.WG(n,r)||this.QT.mG()&&!this.QT.WG(t.Ka(),t.Qa())||this.tG.mG()&&!this.tG.WG(t.tl(),t.sl())||this.oG.mG()&&!this.oG.VG(h)||this.aG.mG()&&!this.aG.VG(o)||this.lG.mG()&&!this.lG.VG(a)||this.sG.mG()&&!this.sG.WG(s.Ka(),s.Qa())||this.iG.mG()&&!this.iG.WG(s.tl(),s.sl())||this.eG.mG()&&!this.eG.WG(i.Ka(),i.Qa())||this.nG.mG()&&!this.nG.WG(i.tl(),i.sl())||this.uG.mG()&&!this.uG.WG(e.Ka(),e.Qa())||this.cG.mG()&&!this.cG.WG(e.Qa(),e.sl())||this.hG.mG()&&!this.hG.VG(l))}jG(t,s,i,e,n,r,h,o,a,l){this.ZT.mG()||(this.rG.mG()&&this.rG.HG(n,r),this.QT.mG()&&this.QT.HG(t.Ka(),t.Qa()),this.tG.mG()&&this.tG.HG(t.tl(),t.sl()),this.oG.mG()&&this.oG.UG(h),this.aG.mG()&&this.aG.UG(o),this.lG.mG()&&this.lG.UG(a),this.sG.mG()&&this.sG.HG(s.Ka(),s.Qa()),this.iG.mG()&&this.iG.HG(s.tl(),s.sl()),this.eG.mG()&&this.eG.HG(i.Ka(),i.Qa()),this.nG.mG()&&this.nG.HG(i.tl(),i.sl()),this.uG.mG()&&this.uG.HG(e.Ka(),e.Qa()),this.cG.mG()&&this.cG.HG(e.Qa(),e.sl()),this.hG.mG()&&this.hG.UG(l))}GG(t,s){this.yG&&!s||this.FT||(this.BT.mG()&&this.BT.JG(t),this.yG=!0)}zG(){this.yG=!1}CG(t,s){this.SG&&!s||this.FT||(this.WT.mG()&&this.WT.JG(t),this.SG=!0)}qG(){this.SG=!1}_G(t){if(!this.FT)throw new Error("not device transform shader");this.BT.JG(t);const s=this.qv,i=s.Vg()/2,e=s.Kg()/2,n=s.nb(i,e,s.Ww(s.Kg()),i,e,0,s.Kg());this.WT.JG(n)}YG(t){this.VT.mG()&&this.VT.XG(t[0],t[1],t[2],t[3])}static ZG(){return Mu}static KG(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static QG(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static tC(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static sC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static iC(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static eC(t){return["#version 300 es",Su.DS.CT.KG(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static nC(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static rC(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static hC(t){return["#version 300 es",Su.DS.CT.KG(t),"in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static oC(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+Su.DS.CT.KG(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision highmedp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\nuniform lowp vec4 color;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= color;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static aC(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static lC(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static uC(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static cC(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static fC(t){return["#version 300 es",Su.DS.CT.KG(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static dC(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static pC(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static mC(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {","\thighmedp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static gC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static yC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static SC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static wC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static bC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const xu=self.Cs,_u=self.ls,Tu=_u.ds,Gu=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);xu.DS.$T=class{constructor(t,s,i){if(!Gu.has(i))throw new Error("invalid uniform type");this.wx=t,this.OT=this.wx.AG(),this.Yn=s,this.Jc=i,this.vC="color"===this.Jc,this.MC=this.OT.getUniformLocation(this.wx.EG(),s),this.xC=!!this.MC;const e=Gu.get(i);this._C=new Float32Array(e),this.TC=new Float32Array(e)}Jn(){this.wx=null,this.OT=null,this.MC=null}mG(){return this.xC}DG(){return this.Jc}GC(){return this.vC}MG(t){this.mG()&&(this._C[0]=t,this.TC.set(this._C),this.OT.uniform1f(this.MC,t))}bG(t){this.mG()&&(this._C[0]=t,this.TC.set(this._C),this.OT.uniform1i(this.MC,t))}vG(t,s){this.mG()&&(this._C[0]=t,this._C[1]=s,this.TC.set(this._C),this.OT.uniform2f(this.MC,t,s))}xG(t,s,i){this.mG()&&(this._C[0]=t,this._C[1]=s,this._C[2]=i,this.TC.set(this._C),this.OT.uniform3f(this.MC,t,s,i))}wG(t,s,i,e){this.mG()&&(this._C[0]=t,this._C[1]=s,this._C[2]=i,this._C[3]=e,this.TC.set(this._C),this.OT.uniform4f(this.MC,t,s,i,e))}CC(t){t=Math.fround(t);const s=this._C;s[0]!==t&&(s[0]=t,this.OT.uniform1f(this.MC,t))}IC(t){const s=this._C;s[0]!==t&&(s[0]=t,this.OT.uniform1i(this.MC,t))}PC(t,s){t=Math.fround(t),s=Math.fround(s);const i=this._C;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.OT.uniform2f(this.MC,t,s))}AC(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this._C;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.OT.uniform3f(this.MC,t,s,i))}XG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this._C;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.OT.uniform4f(this.MC,t,s,i,e))}JG(t){const s=this._C;Tu.F(s,t)||(xu.Sh(s,t,0),this.OT.uniformMatrix4fv(this.MC,!1,t))}LG(t){const s=this.TC;return this.GC()?s[0]===Math.fround(t.No())&&s[1]===Math.fround(t.Bo())&&s[2]===Math.fround(t.$o()):s[0]===Math.fround(t)}BG(t){const s=this.TC;this.GC()?(s[0]=t.No(),s[1]=t.Bo(),s[2]=t.$o()):s[0]=t}VG(t){return this.TC[0]===Math.fround(t)}WG(t,s){const i=this.TC;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}UG(t){this.TC[0]=t}HG(t,s){const i=this.TC;i[0]=t,i[1]=s}}}{const Cu=self.Cs,Iu=self.ls,Pu=Iu.ws,Au=Iu.ds,Ru=0,Eu=1,Ou=2,Fu=3,Du=4,ku=5,Lu=6,Nu=7,Bu=8,$u=9,Wu=10,Vu=11,ju=12,Hu=13,Uu=14,Ju=15,zu=16,qu=17,Yu=18,Xu=19,Zu=20,Ku=21,Qu=22,tc=23,sc=24,ic=25,ec=26,nc=27,rc=28,hc=29;Cu.DS.RC=class{constructor(t){this.EC=t,this.IG=Au.create(),this.TG=Au.create(),this.aT=null,this.lT=null,this.OC=!1,this.FC=Pu.v(1,1,1,1),this.PG=null,this.DC=new Cu.Rect,this.clearColor=Cu.Un(Cu._o,0,0,0,0)}},Cu.DS.kC=class{constructor(t){const s=new ArrayBuffer(96);this.Jc=0,this.LC=t,this.OT=t.EC.g_(),this.NC=0,this.BC=0,this.$C=null,this.WC=new Float32Array(s,0,16),this.VC=new Float32Array(s,64,4),this.jC=new Float32Array(s,80,4),this.HC=[]}UC(t,s){this.Jc=1,this.NC=t,this.BC=s}JC(){const t=this.OT;t.drawElements(t.TRIANGLES,this.BC,t.UNSIGNED_SHORT,this.NC)}zC(t){this.Jc=2,this.$C=t}qC(){const t=this.OT,s=this.$C;t.bindTexture(t.TEXTURE_2D,s?s.A_():null)}YC(t){this.Jc=3,t.jo(this.VC,0)}XC(){const t=this.VC,s=this.LC;Pu.S(s.FC,t),s.PG.YG(t)}ZC(t){this.Jc=21,t.jo(this.VC,0)}KC(){const t=this.VC,s=this.LC.PG;s.YT.mG()&&s.YT.XG(t[0],t[1],t[2],t[3])}QC(t,s){this.Jc=4,this.NC=t,this.BC=s}tI(){this.OT.blendFunc(this.NC,this.BC)}sI(t,s,i,e){this.Jc=5;const n=this.VC;n[0]=t,n[1]=s,n[2]=i,n[3]=e}iI(){const t=this.VC;this.OT.viewport(t[0],t[1],t[2],t[3])}eI(t){this.Jc=6,Au.S(this.WC,t)}nI(){const t=this.LC,s=t.EC.hw,i=t.PG,e=this.WC;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.GG(e,!0):n.zG()}Au.S(t.TG,e)}rI(t){this.Jc=7,Au.S(this.WC,t)}hI(){const t=this.LC,s=t.EC.hw,i=t.PG,e=this.WC;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.CG(e,!0):n.qG()}Au.S(t.IG,e)}oI(t){this.Jc=8,this.$C=t}aI(){const t=this.OT,s=this.$C,i=this.LC;s?(i.aT=s.uT(),i.lT=s.cT(),i.OC&&i.lT?t.bindFramebuffer(t.FRAMEBUFFER,i.lT):t.bindFramebuffer(t.FRAMEBUFFER,i.aT)):(i.aT=null,i.lT=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}lI(t){this.Jc=9,t.jo(this.WC,0)}uI(t,s,i,e){this.Jc=9;const n=this.WC;n[0]=t,n[1]=s,n[2]=i,n[3]=e}cI(){const t=this.OT,s=this.WC,i=this.LC.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.zo(e,n,r,h)||(t.clearColor(e,n,r,h),i.Po(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}fI(t){this.Jc=15,t.jo(this.WC,0)}dI(){const t=this.WC;this.LC.DC.set(t[0],t[1],t[2],t[3])}pI(t,s){this.Jc=10,this.NC=t,this.BC=1,this.WC[0]=s}mI(){const t=this.OT,s=this.LC,i=s.EC.lw;t.useProgram(i.IM),i.GG(s.TG,!1),i.CG(s.IG,!1);const e=s.DC;i.HT.mG()&&i.HT.PC(e.Ka(),e.Qa()),i.UT.mG()&&i.UT.PC(e.tl(),e.sl());const n=this.WC[0];if(i.JT.mG()&&i.JT.CC(n),i.VT.mG()){const t=s.FC;i.VT.XG(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.NC/4,this.BC),t.useProgram(s.PG.IM)}gI(t){this.Jc=11,this.$C=t}yI(){const t=this.OT,s=this.LC,i=this.$C;if(s.PG=i,t.useProgram(i.IM),i.GG(s.TG,!1),i.CG(s.IG,!1),i.VT.mG()){const t=s.FC;i.VT.XG(t[0],t[1],t[2],t[3])}}SI(){this.Jc=12}wI(){const t=this.LC.PG,s=this.OT,i=this.WC,e=this.VC,n=this.jC;if(t.ZT.mG()){const t=this.LC.EC,i=this.$C;t.bI!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.A_():null),t.bI=i,s.activeTexture(s.TEXTURE0))}t.rG.mG()&&t.rG.PC(i[0],i[1]),t.QT.mG()&&t.QT.PC(i[2],i[3]),t.tG.mG()&&t.tG.PC(i[4],i[5]),t.oG.mG()&&t.oG.CC(this.BC),t.aG.mG()&&t.aG.CC(i[6]),t.lG.mG()&&t.lG.CC(i[7]),t.sG.mG()&&t.sG.PC(i[12],i[13]),t.iG.mG()&&t.iG.PC(i[14],i[15]),t.eG.mG()&&t.eG.PC(n[0],n[1]),t.nG.mG()&&t.nG.PC(n[2],n[3]),t.uG.mG()&&t.uG.PC(e[0],e[1]),t.cG.mG()&&t.cG.PC(e[2],e[3]),t.hG.mG()&&t.hG.CC(this.NC)}vI(){this.Jc=13}MI(){const t=this.LC.PG.gG,s=this.HC;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.GC()?e.AC(n.No(),n.Bo(),n.$o()):e.CC(n)}}xI(t){this.Jc=14,this.$C=t}_I(){const t=this.OT,s=this.$C,i=this.LC.aT;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}TI(t,s,i){this.Jc=17;const e=this.WC,n=this.LC.EC;e[0]=t.Vg(),e[1]=t.Kg(),e[2]=s?s.Vg():n.Vg(),e[3]=s?s.Kg():n.Kg(),e[4]=t.pT()?1:0,e[5]="stretch"===i;const r=this.HC;Cu.bh(r),r.push(t.uT()),r.push(s?s.uT():null)}GI(){const t=this.WC,s=this.HC,i=this.OT,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}CI(t){this.Jc=18,this.$C=t}II(){this.$C.AI(),this.$C=null}RI(t){this.Jc=19,this.$C=t}EI(){this.$C.OI(),this.$C=null}FI(t,s,i){this.Jc=20;const e=this.WC;e[0]=t,e[1]=s,e[2]=i}DI(){const t=this.LC.PG,s=this.WC;t.rG.mG()&&t.rG.PC(s[0],s[1]),t.XT.mG()&&t.XT.CC(s[2])}kI(t,s,i,e,n,r,h){this.Jc=16;const o=this.WC;t.jo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}LI(){const t=this.LC.PG,s=this.WC;t.sG.mG()&&t.sG.PC(s[0],s[1]),t.rG.mG()&&t.rG.PC(s[4],s[5]),t.zT.mG()&&t.zT.PC(s[6],s[7]),t.qT.mG()&&t.qT.PC(s[8],s[9])}NI(t,s,i,e,n,r,h){this.Jc=29;const o=this.WC;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}BI(){const t=this.LC.PG,s=this.WC;t.rG.mG()&&t.rG.PC(s[0],s[1]),t.zT.mG()&&t.zT.PC(s[2],s[3]),t.XT.mG()&&t.XT.CC(s[4]),t.qT.mG()&&t.qT.PC(s[5],s[6])}$I(t){this.Jc=22,this.NC=t?1:0}WI(){const t=this.OT,s=0!==this.NC;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}VI(t){this.Jc=23,this.NC=t?1:0}jI(){const t=this.OT;0===this.NC?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}HI(t){this.Jc=24,this.NC=t?1:0}UI(){const t=this.OT,s=this.LC,i=s.EC,e=0!==this.NC;s.OC=e,t.activeTexture(t.TEXTURE2),e?(s.lT&&t.bindFramebuffer(t.FRAMEBUFFER,s.lT),t.bindTexture(t.TEXTURE_2D,i.eT())):(t.bindTexture(t.TEXTURE_2D,null),s.lT&&t.bindFramebuffer(t.FRAMEBUFFER,s.aT)),t.activeTexture(t.TEXTURE0)}JI(){this.Jc=25}zI(){const t=this.OT;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}qI(){this.Jc=26}YI(){const t=this.OT;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}XI(){this.Jc=27}ZI(){const t=this.OT;t.disable(t.STENCIL_TEST)}KI(t,s,i,e,n){this.Jc=28,this.NC=t?1:0;const r=this.WC;r[0]=s,r[1]=i,r[2]=e,r[3]=n}QI(){const t=this.OT,s=this.WC;1===this.NC?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}tP(){switch(this.Jc){case 1:return void this.JC();case 2:return void this.qC();case 3:return void this.XC();case 4:return void this.tI();case 5:return void this.iI();case 6:return void this.nI();case 7:return void this.hI();case 8:return void this.aI();case 9:return void this.cI();case 10:return void this.mI();case 11:return void this.yI();case 12:return void this.wI();case 13:return void this.MI();case 14:return void this._I();case 15:return void this.dI();case 16:return void this.LI();case 17:return void this.GI();case 18:return void this.II();case 19:return void this.EI();case 20:return void this.DI();case 21:return void this.KC();case 22:return void this.WI();case 23:return void this.jI();case 24:return void this.UI();case 25:return void this.zI();case 26:return void this.YI();case 27:return void this.ZI();case 28:return void this.QI();case 29:return void this.BI()}}}}{let oc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},ac=function(t){return t*(4/3)},lc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};fillOrStrokeRect=oc,ptToPx=ac,getOffsetParam=lc;const uc=self.Cs,cc=4096,fc=4,dc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),pc={timeout:60},mc=new uc._o(0,0,0,1),gc=new Set(["left","center","right"]),yc=new Set(["top","center","bottom"]),Sc=new Set(["word","cjk","character"]),wc=new Set(["ltr","rtl"]),bc=new Set;uc.sP&&uc.sP.addEventListener("fontload",(t=>{const s=t.font.Pc();for(const t of bc)(t.iP()||uc.Ke(t.eP(),s))&&t.nP()}));let vc=!1,Mc=!1;uc.DS.Jv=class{constructor(t,s){s=Object.assign({},pc,s),this.qv=t,this.rP="Arial",this.hP=16,this.oP=1,this.aP=0,this.lP=!1,this.uP=!1,this.cP="black",this.fP=!1,this.Lg=null,this.dP=!0,this.pP=null,this.mP=new Set,this.gP="left",this.yP="top",this.Bc="",this.SP=null,this.wP=uc.Un(uc.Dg),this.bP="word",this.vP="ltr",this.MP=!1,this.xP=!1,this._P=!1,this.TP=-1,this.GP=0,this.CP=0,this.IP=0,this.Py=0,this.Ay=0,this.PP=1,this.AP=null,this.RP=null,this.EP=null,this.OP=null,this.FP=-1,this.DP=-1,this.kP="",this.LP="",this.NP="",this.BP=1,this.$P=1,this.WP=t=>this.VP(t),this.r_=null,this.jP=new uc.Rect,this.HP=1,this.UP=new uc.Ff((()=>{this.JP(),this.zP(8,8)}),s.timeout),this.qP=null,this.YP=!1,bc.add(this)}Jn(){this.pP=null,this.mP.clear(),this.Lg=null,this.SP=null,this.AP=null,this.RP=null,this.EP=null,this.OP=null,this.WP=null,this.UP.Jn(),this.qP=null,this.JP(),this.wP.Pu(),this.wP=null,this.qv=null,this.YP=!0,bc.delete(this)}XP(){this._P=!0}ZP(){this.XP(),this.xP=!0}nP(){this.ZP(),this.MP=!0}KP(t){if(t=!!t,this.fP===t)return;this.fP=t;const s=this.fP?"alphabetic":"top";this.RP&&(this.RP.textBaseline=s),this.EP&&(this.EP.textBaseline=s),this.nP()}iP(){return this.fP}$g(t){this.Lg!==t&&(this.Lg=t,this.wP.$g(t),this.Lg&&this.Lg.MS()&&this.Lg.xS().then((()=>this.XP())),this.nP())}QP(t){t=!!t,this.dP!==t&&(this.dP=t,this.XP())}tA(t){t||(t="serif"),this.rP!==t&&(this.rP=t,this.nP())}eP(){return this.rP}sA(t){t<.1&&(t=.1),this.hP!==t&&(this.hP=t,this.nP())}iA(){return this.hP}eA(t){this.oP!==t&&(this.oP=t,this.nP())}nA(t){this.aP!==t&&(this.aP=t,this.ZP())}rA(){return this.aP}hA(t){t=!!t,this.lP!==t&&(this.lP=t,this.nP())}oA(){return this.lP}aA(t){t=!!t,this.uP!==t&&(this.uP=t,this.nP())}lA(){return this.uP}uA(t){t=Math.floor(t),this.TP!==t&&(this.TP=t,this.XP())}cA(){return this.TP}fA(t,s){let i=[];(this.lP||s.Uy("b"))&&i.push("bold"),(this.uP||s.Uy("i"))&&i.push("italic");const e=s.Hy("size"),n=(e?parseFloat(e.Ig):this.hP)*this.oP;t?i.push(n+"pt"):i.push(n*this.dA()+"pt");let r=this.rP;const h=s.Hy("font");return h&&h.Ig&&(r=h.Ig,this.pP&&!this.mP.has(r)&&(this.pP(r),this.mP.add(r))),r&&(dc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}DM(t){t instanceof uc._o&&(t=t.ta()),this.cP!==t&&(this.cP=t,this.XP())}pA(t,s,i){mc.Ao(t,s,i),this.DM(mc)}mA(t){if(!gc.has(t))throw new Error("invalid horizontal alignment");this.gP!==t&&(this.gP=t,this.ZP())}gA(){return this.gP}yA(t){if(!yc.has(t))throw new Error("invalid vertical alignment");this.yP!==t&&(this.yP=t,this.ZP())}SA(){return this.yP}wA(t){if(!Sc.has(t))throw new Error("invalid word wrap mode");this.bP!==t&&(this.bP=t,this.nP())}bA(){return this.bP}vA(t){if(!wc.has(t))throw new Error("invalid text direction");this.vP!==t&&(this.vP=t,this.RP&&(this.RP.direction=this.vP),this.EP&&(this.EP.direction=this.vP),this.nP())}MA(){return this.vP}Vc(t){this.Bc!==t&&(this.Bc=t,this.nP())}xA(){return this.Bc}dA(){return this.HP*this.PP*self.devicePixelRatio}_A(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.CP===t&&this.IP===s&&this.PP===i)return;const e=this.CP;this.CP=t,this.IP=s,this.PP=i;const n=self.devicePixelRatio;this.Py=this.CP*this.PP*n,this.Ay=this.IP*this.PP*n;const r=Math.max(this.Py,this.Ay),h=Math.min(this.qv.m_(),4096);let o=1;r>h&&(o=h/r,this.Py=Math.min(this.Py*o,h),this.Ay=Math.min(this.Ay*o,h)),this.HP=o,this.CP!==e?this.nP():this.ZP()}Vg(){return this.Py}Kg(){return this.Ay}TA(){return this.PP}GA(){return this.CA(),this.wP.Cy()}IA(){return this.CA(),this.wP.Iy()+this.wP.Bg()*(this.aP+4)-this.aP}PA(){this.CA();let t=0;for(const s of this.wP.Ng())for(const i of s.ny())t+=i.hy();return t}fT(){return this.UP.Bf(),this.AA(),this.r_}RA(t,s){this.CA();const i=this.dA(),e=this.wP.Ng();for(const n of e){const e=n.ty()*i;if(s>=n.Wy()-n.Kg()*i+e&&s<n.Wy()+e)for(const s of n.ny())if(t>=s.By()&&t<s.By()+s.Vg()*i)return s}return null}*EA(t){this.CA();const s=this.wP.Ng();for(const i of s)for(const s of i.ny()){const i=s.Hy("tag");i&&uc.Ke(i.Ig,t)&&(yield s)}}OA(t,s){for(const i of this.EA(t)){if(0===s)return i;--s}return null}FA(t){let s=0;for(const i of this.EA(t))++s;return s}AA(){(!this.r_||this._P||this.xP||this.MP)&&(this.YP||this.Py<=0||this.Ay<=0||(this._P=!1,this.DA()))}DA(){this.YP||(this.CA(),this.zP(Math.max(uc.vr(Math.ceil(this.Py)),128),Math.max(uc.vr(Math.ceil(this.Ay)),64)),this.kA(),this.LA(),this.UP.Bf())}zP(t,s){this.AP||(this.AP=uc.co(16,16));let i=!1;this.FP===t&&this.DP===s||(this.FP=t,this.DP=s,this.AP.width=t,this.AP.height=s,i=!0),this.RP||(this.RP=this.AP.getContext("2d"),i=!0),i?(this.RP.textBaseline=this.fP?"alphabetic":"top",this.RP.direction=this.vP,this.RP.font=this.kP,this.RP.fillStyle=this.NP,this.RP.strokeStyle=this.NP,this.RP.globalAlpha=this.BP,this.RP.lineWidth=this.$P):this.RP.clearRect(0,0,t,s)}NA(){this.EP||(this.EP=uc.co(16,16).getContext("2d"),this.OP=uc.co(16,16).getContext("2d"),this.EP.textBaseline=this.fP?"alphabetic":"top",this.OP.textBaseline="top",this.EP.direction=this.vP,this.OP.direction=this.vP)}BA(t){this.LP!==t&&(this.LP=t,this.EP.font=t,this.OP.font=t)}$A(){if(!vc){vc=!0,this.NA();const t=this.EP.measureText("test");Mc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Mc}CA(){this.WA(),this.VA()}WA(){this.MP&&(this.NA(),!this.fP||this.SP&&this.SP.toString()===this.Bc||(this.SP=new uc.pn(this.Bc,{dg:!0})),this.wP.Dg(this.fP?this.SP.Gg():this.Bc,this.WP,this.CP,this.bP,0),this.MP=!1)}VA(){this.xP&&(this.jA(),this.xP=!1)}VP(t){const s=t.qg()?t.yy().join(""):" ";this.BA(this.fA(!0,t));const i=t.Hy("size"),e=(i?parseFloat(i.Ig):this.hP)*this.oP,n=this.EP.measureText(s);let r=0;if(this.fP&&this.$A()){const t=this.OP.measureText(s);r=n.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:n.width,height:ac(e),fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,zg:r}}HA(t){this.kP!==t&&(this.kP=t,this.RP.font=t)}UA(t){this.NP!==t&&(this.NP=t,this.RP.fillStyle=t,this.RP.strokeStyle=t)}JA(t){this.BP!==t&&(this.BP=t,this.RP.globalAlpha=t)}zA(t){this.$P!==t&&(this.$P=t,this.RP.lineWidth=t)}jA(){const t=this.dA(),s=(4+this.aP)*t;let i=0;const e=this.wP.Ng();if(0===e.length)return;for(const t of e){t.Ny(NaN),t.$y(NaN);for(const s of t.ny())s.Ny(NaN),s.$y(NaN)}const n=this.fP&&this.$A();let r=e[0].Kg()*t;if("center"===this.yP){const h=e.reduce(((i,e)=>i+e.Kg()*t+s),0)-s;i=Math.max(this.Ay/2-h/2,0),n&&(r=e[0].sy()*t)}else if("bottom"===this.yP){const r=e.reduce(((i,e)=>i+e.Kg()*t+s),0)-this.aP*t,h=n?e.at(-1).ty()*t:0;i=this.Ay-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.Kg()*t,a=i;if(this.fP){if(i+=0===n?r:o,n>0&&i>this.Ay-4*t)break}else if(n>0&&i>=this.Ay-o)break;a>=0&&this.qA(h,i,t),this.fP||(i+=o),i+=s}}qA(t,s,i){let e=0;"center"===this.gP?e=Math.floor((this.Py-t.Vg()*i)/2):"right"===this.gP&&(e=this.Py-t.Vg()*i),t.Ny(e),t.$y(s);for(const n of"ltr"===this.vP?t.ny():t.ky())this.YA(n,e,s,i),e+=n.Vg()*i}YA(t,s,i,e){const n=t.Hy("offsetx");s+=n?lc(n.Ig,t.Kg())*e:0;const r=t.Hy("offsety");if(i+=r?lc(r.Ig,t.Kg())*e:0,t.Xg()){const s=t.Hy("iconoffsety");i+=s?lc(s.Ig,t.Kg())*e:.2*t.Kg()*e}t.Ny(s),t.$y(i)}kA(){this.RP.imageSmoothingEnabled=this.dP,this.RP.imageSmoothingQuality="high",this.GP=0;const t=this.dA(),s=this.wP.Ng();for(const i of s)this.XA(i,t)}XA(t,s){const i=t.By(),e=t.Wy();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.vP?t.ny():t.ky())this.ZA(i,s,t.Kg())}ZA(t,s,i){const e=this.RP,n=t.By(),r=t.Wy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.Vg()*s;const a=t.Kg()*s,l=t.Kg()/16,u=(4+this.aP)*s;let c=t.qg()?t.yy():null;if(-1!==this.TP){if(this.GP>=this.TP)return;t.qg()&&this.GP+c.length>this.TP&&(c=c.slice(0,this.TP-this.GP),o=this.VP(t).width*s),this.GP+=t.hy()}const f=t.Hy("background"),d=t.Uy("u"),p=t.Uy("s");if(t.qg()&&uc.bm(c)&&!f&&!d&&!p||t.Uy("hide"))return;const m=t.Hy("color"),g=t.Hy("opacity");this.JA(g?parseFloat(g.Ig)/100:1),f&&(this.UA(f.Ig),e.fillRect(n,r-a,o,a+u));const y=t.Hy("linethickness"),S=y?parseFloat(y.Ig):1,w=t.Uy("stroke");if(w&&this.zA(.5*l*S*this.dA()),t.qg()){const s=c.join("");if(this.HA(this.fA(!1,t)),!w){this.zA(.5*l*S*this.dA());const i=t.Hy("outlineback");i&&(this.UA(i.Ig),this.KA(!0,s,n,r,o))}if(this.UA(m?m.Ig:this.cP),this.KA(w,s,n,r,o),!w){this.zA(.5*l*S*this.dA());const i=t.Hy("outline");i&&(this.UA(i.Ig),this.KA(!0,s,n,r,o))}}else if(t.Xg()&&t.Vg()>0){const s=t.Qy(this.Lg);s&&e.drawImage(s,n,r-a,o,a)}if(this.UA(m?m.Ig:this.cP),d&&oc(e,w,n,r+s*h,o,s*h*S),p){const t=s*l,i=r-a/4+t/2;e.fillRect(n,i-t*S/2,o,t*S)}}KA(t,s,i,e,n){"rtl"===this.vP&&(i+=n),t?"Gecko"===uc.Ks.ni?this.RP.strokeText(s,i,e,n):this.RP.strokeText(s,i,e):"Gecko"===uc.Ks.ni?this.RP.fillText(s,i,e,n):this.RP.fillText(s,i,e)}LA(){this.qv.QA()||(this.r_||(this.r_=this.qv.iT(this.AP.width,this.AP.height,{t_:!0,s_:"high"})),this.qv.tR(this.AP,this.r_),this.jP.set(0,0,this.Py/this.r_.Vg(),this.Ay/this.r_.Kg()),this.qP&&this.qP())}sR(){return this.jP}JP(){this.r_&&(this.qv.QA()||this.qv.hT(this.r_),this.r_=null)}static kM(){for(const t of bc)t.JP()}static iR(){return bc.values()}}}{const xc=self.Cs;class _c{constructor(t){this.OT=t.g_(),this.eR=t.y_(),this.nR=t.rR(),this.hR=null,this.Nf=!1,this.oR=!1,this.aR=0,1===this.eR?this.hR=this.nR.createQueryEXT():this.hR=this.OT.createQuery()}Jn(){this.lR(),this.OT=null,this.nR=null,this.oR=!1}lR(){this.hR&&(1===this.eR?this.nR.deleteQueryEXT(this.hR):this.OT.deleteQuery(this.hR),this.hR=null)}AI(){if(this.Nf)throw new Error("query already active");1===this.eR?this.nR.beginQueryEXT(this.nR.TIME_ELAPSED_EXT,this.hR):this.OT.beginQuery(this.nR.TIME_ELAPSED_EXT,this.hR),this.Nf=!0}OI(){if(!this.Nf)throw new Error("query not active");1===this.eR?this.nR.endQueryEXT(this.nR.TIME_ELAPSED_EXT):this.OT.endQuery(this.nR.TIME_ELAPSED_EXT),this.Nf=!1}uR(){if(!this.hR||this.oR||this.Nf)return;let t=!1;t=1===this.eR?this.nR.getQueryObjectEXT(this.hR,this.nR.QUERY_RESULT_AVAILABLE_EXT):this.OT.getQueryParameter(this.hR,this.OT.QUERY_RESULT_AVAILABLE);const s=this.OT.getParameter(this.nR.GPU_DISJOINT_EXT);t&&!s&&(1===this.eR?this.aR=this.nR.getQueryObjectEXT(this.hR,this.nR.QUERY_RESULT_EXT):this.aR=this.OT.getQueryParameter(this.hR,this.OT.QUERY_RESULT),this.aR/=1e9,this.oR=!0),(t||s)&&this.lR()}cR(){return this.oR}fR(){if(!this.oR)throw new Error("no result available");return this.aR}}xc.DS.dR=class{constructor(t){this.qv=t,this.Ow=t.Fv(),this.Nf=!1,this.pR=null,this.mR=!1,this.gR=null,this.yR=[]}Jn(){for(const t of this.yR)t instanceof _c&&t.Jn();xc.bh(this.yR),this.pR=null,this.gR=null,this.qv=null}AI(){if(this.Nf)throw new Error("query already active");const t=this.qv.SR();t.length>0?(this.mR=!0,this.pR=t.at(-1),this.pR.wR(),this.pR.yR.push(this)):(this.mR=!1,this.pR=null),this.Nf=!0,t.push(this),this.bR()}OI(){if(!this.Nf)throw new Error("query not active");if(this.qv.SR().pop()!==this)throw new Error("can only end most nested query");this.Nf=!1,this.wR(),this.pR&&(this.pR.bR(),this.pR=null)}bR(){this.gR=xc.Un(_c,this.qv),this.yR.push(this.gR),this.gR.AI()}wR(){this.gR.OI(),this.gR=null}uR(){for(const t of this.yR)t.uR()}vR(){return this.mR}cR(){return this.yR.every((t=>t.cR()))}fR(){return this.yR.reduce(((t,s)=>t+s.fR()),0)}Fv(){return this.Ow}}}{const Tc=self.Cs;Tc.DS.MR=class{constructor(t,s=1e3){this.qv=t,this.xR=s,this._R=[],this.qv.TR(this)}Jn(){this.Pu(),this.qv.GR(this),this.qv=null}Pu(){for(const t of this._R)t.Jn();Tc.bh(this._R)}CR(){const t=new Tc.DS.dR(this.qv);return this._R.push(t),this._R.length>this.xR&&this._R.shift().Jn(),t}IR(t){for(const s of this._R){if(s.Fv()>=t)return;if(s.vR())return;s.uR()}}PR(t,s){if(s<=t)return NaN;let i=0;for(const e of this._R){if(e.Fv()>=s)break;if(!(e.Fv()<t)){if(!e.cR())return NaN;i+=e.fR()}}return i}AR(t){for(let s=0,i=this._R.length;s<i;++s){const i=this._R[s];if(!(i.Fv()<t))return void(s>0&&this._R.splice(0,s));i.Jn()}}}}{let Gc=function(){zc=-1;for(const t of Jc)t.RR()&&(t.resolve(),Jc.delete(t));Jc.size>0&&(zc=self.requestAnimationFrame(Gc))};CheckPendingPolls=Gc;const Cc=self.Cs,Ic=self.assert,Pc=self.ls,Ac=Pc.Ss,Rc=Pc.ws,Ec=Pc.ds,Oc={powerPreference:"default",ER:!0,alpha:!1,depth:!1,OR:!1,FR:2,failIfMajorPerformanceCaveat:!1},Fc=new Set(["default","low-power","high-performance"]),Dc=8e3,kc=12e3,Lc=8e3,Nc=7996,Bc=262144,$c=new Cc.Il(0,0,1,0,1,1,0,1),Wc=Ec.create(),Vc=Ec.create(),jc=new Cc.Il,Hc=new Cc.Rect;let Uc=null;Cc.ks&&(self.DR=function(){Uc?Uc.loseContext():console.warn("WEBGL_lose_context not supported")},self.kR=function(){Uc?Uc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Jc=new Set;let zc=-1;Cc.DS.LR=class extends Cc.DS.ZS{constructor(t,s){if(super(s),s=Object.assign({},Oc,s),!Fc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.FR>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.OT=e,this.NR=e.getContextAttributes(),this.BR=e.getParameter(e.VERSION),this.eR=n,this.$R=Rc.create(),this.WR=!1,this.VR=Ec.create(),this.jR=!!s.depth,this.HR=!(!s.depth||!s.OR),this.UR=this.jR,this.JR=!1,this.zR=null,this.qR=!0,this.YR=0,this.XR=0,this.kT=null,this.LT=null,this.ZR=null,this.NT=null,this.KR=new Float32Array(8e3*this.Rv()),this.QR=new Uint16Array(12e3),this.tE=new Float32Array(16e3),this.sE=new Float32Array(32e3),this.iE=0,this.eE=0,this.nE=0,this.rE=0,this.hE=null,this.oE=null,this.aE=[],this.lE=0,this.uE=0,this.cE=null,this.fE=0,this.LC=Cc.Un(Cc.DS.RC,this),this.dE=Cc.Un(Cc._o,1,1,1,1),this.pE=null,this.bI=null,this.mE=0,this.gE=0,this.yE=new Cc.Rect,this.SE=Cc.Un(Cc.Rect,0,0,-1,-1),this.wE=0,this.bE=-1,this.vE=0,this.ME=0,this.xE=0,this._E="(unavailable)",this.TE="(unavailable)",this.GE=[],this.CE=!1,this.IE=null,this.PE=null,this.AE=null,this.RE=null,this.EE=null,this.OE=null,this.FE=null,this.DE=0,this.kE=!!s.ER,this.nR=null,this.LE=new Set,this.NE=[],this.kw(this.QR)}$v(){return!0}async Bw(){super.Bw();const t=this.OT,s=this.Rv();this.dE.Po(1,1,1,1),this.pE=null,this.bI=null,this.iE=0,this.nE=0,this.rE=8e3*s-4*s,Cc.bh(this.aE),this.lE=0,this.uE=0,this.hE=null,this.cE=null,this.yE.set(0,0,1,1),this.fE=0;const i=this.LC;i.PG=null,i.aT=null,i.lT=null,Rc.set(i.FC,1,1,1,1),i.clearColor.Po(0,0,0,0),i.DC.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.mE=t.ONE,this.gE=t.ONE_MINUS_SRC_ALPHA,this.BE(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.jR?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.UR=this.jR,this.JR=!1,this.NT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.NT),t.bufferData(t.ARRAY_BUFFER,this.sE.byteLength,t.DYNAMIC_DRAW),this.kT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.kT),t.bufferData(t.ARRAY_BUFFER,this.KR.byteLength,t.DYNAMIC_DRAW),this.LT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.LT),t.bufferData(t.ARRAY_BUFFER,this.tE.byteLength,t.DYNAMIC_DRAW),this.ZR=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.ZR),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.QR,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.bE=t.getParameter(t.MAX_TEXTURE_SIZE);const e=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.vE=e[0],this.ME=e[1];const n=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this.xE=n&&r?Math.min(n.precision,r.precision):0,this.ME>2048&&(this.ME=2048),this.GE=t.getSupportedExtensions();const h=t.getExtension("WEBGL_debug_renderer_info");if(h&&(this._E=t.getParameter(h.UNMASKED_VENDOR_WEBGL),this.TE=t.getParameter(h.UNMASKED_RENDERER_WEBGL)),this.IE=t.getExtension("KHR_parallel_shader_compile"),Cc.ks&&(Uc=t.getExtension("WEBGL_lose_context")),this.kE&&(1===this.y_()?this.nR=t.getExtension("EXT_disjoint_timer_query"):this.nR=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.PE=t.getExtension("EXT_texture_filter_anisotropic"),this.PE?this.DE=t.getParameter(this.PE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.DE=0,this.y_()<2&&this.jR&&this.HR&&(this.RE=t.getExtension("WEBGL_depth_texture"),!this.RE))throw new Error("no depth texture support");this.y_()<2&&(this.EE=t.getExtension("EXT_frag_depth"),this.OE=t.getExtension("OES_standard_derivatives"),this.FE=t.getExtension("EXT_shader_texture_lod"));const o=Cc.DS.CT,a=o.QG(!1);let l=o.sC(),u=a,c=o.uC(),f=o.aC(),d=o.nC(),p=o.QG(!0),m=!1;this.jR&&(this.y_()<2?this.EE&&(l=o.iC(),c=o.cC(),d=o.rC(),m=!0):(u=o.tC(),l=o.eC(this.$E()),c=o.fC(this.$E()),f=o.lC(),d=o.hC(this.$E()),p=o.tC(!0)));const g=o.oC(this.y_(),m,this.OE&&this.FE,this.$E()),y=this.y_()>=2?o.tC():a,S=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.dC(),a,"<fill>"],[o.pC(),a,"<lineargradient>"],[o.mC(),a,"<penumbra>"],[o.yC(),a,"<hardellipse>"],[o.SC(),a,"<hardellipseoutline>"],[o.wC(),a,"<smoothellipse>"],[o.bC(),a,"<smoothellipseoutline>"],[o.gC(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(S.map((t=>this.WE({src:t[0],PT:t[1],name:t[2]}))));this.aw=w[0],this.oE=w[1],this.lw=w[2],this.fw=w[3],this.dw=w[4],this.pw=w[5],this.mw=w[6],this.gw=w[7],this.yw=w[8],this.Sw=w[9],this.ww=w[10],this.uw=w[11],this.cw=w[12],this.lb()}async WE(t){const s=await Cc.DS.CT.ET(this,t);return this.rb(s),s}VE(){this.hE=null}_A(t,s,i){if(this.Py===t&&this.Ay===s&&!i)return;this.Ov();const e=this.OT,n=this.LC;this.Py=t,this.Ay=s,this.jE(0,0,t,s),this.tb(this.VR,t/s),this.HE(this.VR),this.oE&&(e.useProgram(this.oE.EG()),this.oE._G(this.tw),this.hE=this.oE,this.LC.PG=this.oE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.pE=null,this.bI=null,this.jR&&this.qR&&this.UE(this.Py,this.Ay),this.cE&&this.cE.rT(this.Py,this.Ay),e.bindFramebuffer(e.FRAMEBUFFER,null),this.cE=null,n.aT=null,n.lT=null}UE(t,s){const i=this.OT;this.zR&&this.YR===t&&this.XR===s||(this.HR?(this.zR&&i.deleteTexture(this.zR),this.zR=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.zR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.y_()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.RE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.RE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.zR&&i.deleteRenderbuffer(this.zR),this.zR=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.zR),i.renderbufferStorage(i.RENDERBUFFER,this.eR>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.YR=t,this.XR=s)}JE(t,s){this.jR&&(this.qR=!1,this.UE(t,s))}zE(){this.jR&&(this.qR=!0,this.UE(this.Py,this.Ay))}jE(t,s,i,e){const n=this.$R;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.qE().sI(t,s,i,e),Rc.set(n,t,s,i,e),this.uE=0)}Yw(t){super.Yw(t),this.tb(this.VR,this.Py/this.Ay)}Uw(t){super.Uw(t),this.tb(this.VR,this.Py/this.Ay)}zw(t){super.zw(t),this.tb(this.VR,this.Py/this.Ay)}HE(t){Ec.F(this.tw,t)||(this.qE().eI(t),Ec.S(this.tw,t),this.uE=0,this.WR=!0)}YE(){let t,s,i;const e=this.cE;null===e?(t=this.VR,s=this.Vg(),i=this.Kg()):(t=e.dT(),s=e.Vg(),i=e.Kg()),this.HE(t),this.jE(0,0,s,i)}XE(t){Ec.F(this.sw,t)||(this.qE().rI(t),Ec.S(this.sw,t),this.uE=0,this.WR=!0)}ZE(){this.WR=!1}KE(){return this.WR}oT(){return this.LC}qE(){const t=this.aE;return this.lE===t.length&&t.push(new Cc.DS.kC(this.LC)),t[this.lE++]}Ov(){0!==this.lE&&(this.QA()||(this.QE(),this.tO(),this.lE=0,this.iE=0,this.eE=0,this.nE=0,this.uE=0))}QE(){const t=this.OT;this.nE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.NT),t.bufferSubData(t.ARRAY_BUFFER,0,this.sE.subarray(0,this.nE))),this.iE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.kT),t.bufferSubData(t.ARRAY_BUFFER,0,this.KR.subarray(0,this.iE)),t.bindBuffer(t.ARRAY_BUFFER,this.LT),t.bufferSubData(t.ARRAY_BUFFER,0,this.tE.subarray(0,this.eE)))}tO(){const t=this.aE;for(let s=0,i=this.lE;s<i;++s)t[s].tP()}sO(){return this.dE.Wo()}iO(t,s,i,e){const n=this.dE;n.zo(t,s,i,e)||(n.Po(t,s,i,e),this.qE().YC(n),this.uE=0,this.Mw=null)}eO(t){const s=this.dE;s.Wo()!==t&&(s.ko(t),this.qE().YC(s),this.uE=0,this.Mw=null)}DM(t){const s=this.dE;s.equals(t)||(s.set(t),this.qE().YC(s),this.uE=0,this.Mw=null)}nO(){this.iO(1,1,1,1)}rO(){return this.dE}hO(t){t!==this.pE&&(this.qE().zC(t),this.pE=t,this.uE=0)}v_(){this.pE=null}FM(t){const s=this.Nb(t);this.oO(s[0],s[1])}aO(t){const s=this.Wb(t);this.oO(s.kb,s.Lb)}oO(t,s){t===this.mE&&s===this.gE||(this.qE().QC(t,s),this.mE=t,this.gE=s,this.uE=0,this.Mw=null)}lO(){return this.mE===this.OT.ONE&&this.gE===this.OT.ONE_MINUS_SRC_ALPHA}uO(){this.oO(this.OT.ONE,this.OT.ONE_MINUS_SRC_ALPHA)}cO(){this.oO(this.OT.SRC_ALPHA,this.OT.ONE_MINUS_SRC_ALPHA)}fO(){this.oO(this.OT.ONE,this.OT.ZERO)}Rect(t){this.dO(t.Ka(),t.Qa(),t.tl(),t.sl())}dO(t,s,i,e){this.Av(t,s,i,s,i,e,t,e)}pO(){let t=this.iE;t>=this.rE&&(this.Ov(),t=0),1===this.uE?this.aE[this.lE-1].BC+=6:(this.qE().UC(t,6),this.uE=1)}mO(t){t.ql(this.KR,this.iE,this.Tw+this.Gw),this.iE+=12}Il(t){this.pO(),this.mO(t),$c.jo(this.tE,this.eE),this.eE+=8}Av(t,s,i,e,n,r,h,o){this.pO();const a=this.KR;let l=this.iE;const u=this.Tw+this.Gw;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=n,a[l++]=r,a[l++]=u,a[l++]=h,a[l++]=o,a[l++]=u,this.iE=l,$c.jo(this.tE,this.eE),this.eE+=8}ev(t,s){this.pO(),this.mO(t),s.nl(this.tE,this.eE),this.eE+=8}gO(t,s){this.pO(),this.mO(t),s.jo(this.tE,this.eE),this.eE+=8}yO(t,s,i,e,n,r,h,o,a,l,u,c,f){this.pO();const d=this.KR;let p=this.iE;const m=this.Tw+this.Gw;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.iE=p,f.nl(this.tE,this.eE),this.eE+=8}Zb(t,s,i,e,n,r,h,o,a,l,u,c,f){this.pO();const d=this.KR;let p=this.iE;const m=this.Tw+this.Gw;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.iE=p,f.jo(this.tE,this.eE),this.eE+=8}SO(t,s,i){const e=this.KR,n=this.tE;if(i.length%3!=0)throw new Error("invalid index buffer length");for(let r=0,h=i.length;r<h;){const h=i[r++],o=i[r++],a=i[r++],l=3*h,u=3*o,c=3*a,f=2*h,d=2*o,p=2*a;this.pO();let m=this.iE,g=this.eE;e[m++]=t[l+0],e[m++]=t[l+1],e[m++]=t[l+2],e[m++]=t[u+0],e[m++]=t[u+1],e[m++]=t[u+2],e[m++]=t[c+0],e[m++]=t[c+1],e[m++]=t[c+2],e[m++]=t[c+0],e[m++]=t[c+1],e[m++]=t[c+2],n[g++]=s[f+0],n[g++]=s[f+1],n[g++]=s[d+0],n[g++]=s[d+1],n[g++]=s[p+0],n[g++]=s[p+1],n[g++]=s[p+0],n[g++]=s[p+1],this.iE=m,this.eE=g}}wO(t,s){this.Ub(0),Ec.S(Wc,this.tw),Ec.S(Vc,this.sw),this.YE();const[i,e]=this.bO(this.cE),n=this.nb(0,0,this.Ww(e),0,0,0,e);if(this.XE(n),"crop"===t&&this.cE&&s){const t=this.Py/2,i=this.Ay/2,e=s.Vg(),n=s.Kg(),r=this.cE.Vg(),h=this.cE.Kg(),o=Math.min(r,e),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Hc.set(-t,i-u,-t+o,i-a-u),jc.Yl(Hc),Hc.set(0,l,o,a+l),Hc.wt(e,n),this.ev(jc,Hc)}else{const t=i/2,s=e/2;this.dO(-t,s,t,-s)}this.HE(Wc),this.XE(Vc)}vO(t){this.yE.equals(t)||(this.yE.S(t),this.qE().fI(t),this.uE=0)}MO(){}xO(t,s,i,e){this.nE>=7996&&this.Ov();let n=this.nE;const r=this.Tw+this.Gw;2===this.uE&&this.fE===r?this.aE[this.lE-1].BC++:(this.qE().pI(n,r),this.uE=2,this.fE=r);const h=this.sE;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.nE=n}ub(t){this.hE!==t&&(this.qE().gI(t),this.hE=t,this.uE=0,this.Mw=null)}_O(){return this.hE}TO(){this.ub(this.oE)}GO(t){this.qE().ZC(t),this.uE=0}CO(t,s,i=1){this.qE().FI(t,s,i),this.uE=0}IO(t,s,i,e,n,r,h){if(this.hE!==this.uw)throw new Error("must set tilemap fill mode first");this.qE().kI(t,s,i,e,n,r,h),this.uE=0}PO(t,s,i,e,n,r,h){if(this.hE!==this.cw)throw new Error("must set tile randomization mode first");this.qE().NI(t,s,i,e,n,r,h),this.uE=0}AO(t,s,i,e,n,r,h,o,a,l,u){const c=this.hE;if(u%=10800,!c.pG||c.$G(s,i,e,n,r,h,o,a,l,u))return;const f=this.qE();f.SI(),c.jG(s,i,e,n,r,h,o,a,l,u);const d=f.WC;d[0]=r,d[1]=h,s.jo(d,2),d[6]=a,d[7]=l,i.jo(d,12);const p=f.VC;n.jo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.jo(f.jC,0),f.NC=u,f.BC=o,c.ZT.mG()?f.$C=t?t.fT():null:f.$C=null,this.uE=0}RO(t){const s=this.hE;if(0===t.length||s.kG(t))return;const i=this.qE();i.vI(),s.NG(t),Cc.Th(i.HC,t),this.uE=0}EO(t,s,i,e){this.qE().uI(t,s,i,e),this.uE=0}Pu(t){this.qE().lI(t),this.uE=0}OO(){}Ev(){super.Ev(),this.OT.flush()}FO(){this.jR&&this.cE&&this.cE.yT()&&(this.qE().$I(this.UR),this.uE=0)}DO(t){t=!!t,this.UR!==t&&this.jR&&(this.UR=t,this.qE().VI(t),this.uE=0)}kO(){return this.UR}eT(){return this.zR}nT(){return this.HR}LO(t){if(t=!!t,this.HR&&this.JR!==t){if(t&&this.kO())throw new Error("depth still enabled");this.JR=t,this.qE().HI(t),this.uE=0}}NO(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.SE.Za(t,s,i,e)||(this.SE.Ha(t,s,i,e),s=(n||this.bO(this.BO())[1])-s-e,this.qE().KI(!0,t,s,i,e),this.uE=0)}$O(){-1!==this.SE.tl()&&(this.SE.set(0,0,-1,-1),this.qE().KI(!1,0,0,0,0),this.uE=0)}WO(){for(const t of this.LE)t.IR(this.Ow)}QA(){return!this.OT||this.OT.isContextLost()||this.CE}kM(){super.$w(),Cc.DS.n_.kM(),Cc.DS.W_.kM(),Cc.DS.Jv.kM();for(const t of this.LE)t.Pu();this.GE=[],this.nR=null,this.IE=null,this.AE=null,this.PE=null,this.RE=null,this.EE=null,this.OE=null,this.FE=null,this.DE=0,this._E="(unavailable)",this.TE="(unavailable)",this.hE=null,this.oE=null,this.zR=null;for(const t of this.bw.values())t.kM()}async LM(){this.CE=!0,await this.Bw(),this.CE=!1;for(const t of this.bw.values())t.LM(this);this._A(this.Py,this.Ay,!0)}VO(t,s){if(this.QA())throw new Error("context lost");this.Ov();const i=Cc.Un(Cc.DS.n_,this);return i.p_(t,s),i}async jO(t,s){if(this.QA())throw new Error("context lost");if(s=Object.assign({},s),Cc.Ri.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.Yx&&"clamp-to-edge"!==s.Yx||s.Xx&&"clamp-to-edge"!==s.Xx,n=Cc.br(i.width)&&Cc.br(i.height);return this.S_()||n||!e?s.i_=!1:Cc.Ri.Di?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Cc.vr(i.width),resizeHeight:Cc.vr(i.height)}),s.i_=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Cc.df((()=>this.VO(i,s)))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Cc.uo(t);t=s}return await Cc.df((()=>this.VO(t,s)))}iT(t,s,i){this.Ov();const e=Cc.Un(Cc.DS.n_,this);return e.M_(t,s,i),e}tR(t,s,i){this.Ov(),s.C_(t,i)}hT(t){t&&(t.E_(),t.O_()>0||(this.Ov(),t===this.pE&&(this.OT.bindTexture(this.OT.TEXTURE_2D,null),this.pE=null),t===this.bI&&(this.OT.activeTexture(this.OT.TEXTURE1),this.OT.bindTexture(this.OT.TEXTURE_2D,null),this.OT.activeTexture(this.OT.TEXTURE0),this.bI=null),t.I_()))}HO(t){let s=this.Py,i=this.Ay,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Ov();const n=Cc.Un(Cc.DS.W_,this);return n.tT(s,i,Object.assign({N_:e},t)),this.cE=null,this.LC.aT=null,this.LC.lT=null,n}UO(t,s=!0){t!==this.cE&&(t&&t.ST()&&t.rT(this.Py,this.Ay),this.qE().oI(t),this.cE=t,this.uE=0,s&&this.YE())}BO(){return this.cE}bO(t){return t?[t.Vg(),t.Kg()]:[this.Py,this.Ay]}JO(t,s="stretch"){this.eR<2||this.cE&&this.cE.wT()>0?(this.fO(),this.nO(),this.zO(t,s)):(this.qE().TI(t,this.cE,s),this.uE=0)}zO(t,s="stretch"){const i=t.fT();if(!i)throw new Error("not a texture-backed render target");this.hO(i),this.wO(s,i)}qO(t){this.eR<2||(this.qE().xI(t.uT()),this.uE=0)}YO(t){this.UO(null),this.Ov();const s=t.fT();s===this.pE&&(this.OT.bindTexture(this.OT.TEXTURE_2D,null),this.pE=null),s===this.bI&&(this.OT.activeTexture(this.OT.TEXTURE1),this.OT.bindTexture(this.OT.TEXTURE_2D,null),this.OT.activeTexture(this.OT.TEXTURE0),this.bI=null),t.I_()}async _T(t,s,i){this.Ov();const e=this.cE;let n,r,h;t?(n=t.Vg(),r=t.Kg(),h=t.uT()):(n=this.Vg(),r=this.Kg(),h=null);let o=0,a=0,l=n,u=r;if(i){o=Cc.Zn(Math.floor(i.Ka()),0,n-1),a=Cc.Zn(Math.floor(i.Qa()),0,r-1);let t=i.width();t=0===t?n-o:Cc.Zn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Cc.Zn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.OT;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.cE=null,this.LC.aT=null,this.LC.lT=null,this.UO(e)};let d;if(!s&&this.y_()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.RT((()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED)),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}XO(){this.DO(!0),this.qE().JI(),this.uE=0,this.wE=1}ZO(){this.DO(!1),this.qE().qI(),this.uE=0,this.wE=2}KO(){return 2===this.wE}QO(){this.DO(!0),this.qE().XI(),this.uE=0,this.wE=0}tF(t){this.sF()&&(this.qE().CI(t),this.uE=0)}iF(t){this.sF()&&(this.qE().RI(t),this.uE=0)}RT(t){const s=new Promise((s=>Jc.add({resolve:s,RR:t})));return-1===zc&&(zc=self.requestAnimationFrame(Gc)),s}Wv(){return this.Py*this.Ay*(this.NR.alpha?4:3)}Vv(){let t=0;for(const s of Cc.DS.W_.TT())s.fT()||(t+=s.D_());return t}jv(){let t=0;for(const s of Cc.DS.n_.k_())t+=s.D_();return t}eF(){return this.BR}y_(){return this.eR}nF(){return"webgl"+this.y_()}S_(){return this.y_()>=2}m_(){return this.bE}rF(){return this.vE}hF(){return this.ME}oF(){return 0!==this.xE}aF(){return this.xE}lF(){return this._E}uF(){return this.TE}cF(){if(this.y_()>=2)return"webgl2";{const t=[];return this.EE&&t.push("EXT_frag_depth"),this.OE&&t.push("OES_standard_derivatives"),this.FE&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}fF(){return this.GE}sF(){return!!this.nR}rR(){return this.nR}AT(){return this.IE}$E(){return!!this.AE}T_(){return this.PE}G_(){return this.DE}TR(t){this.LE.add(t)}GR(t){this.LE.delete(t)}SR(){return this.NE}g_(){return this.OT}BE(t){this.Db([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}dF(){return this.Uv()}}}{const qc=self.Cs,Yc={pF:null,mF:null,gF:null,getTime:null,yF:null};qc.DS.SF=class{constructor(t){t=Object.assign({},Yc,t),this.wF=t.pF,this.bF=t.mF,this.vF=t.gF,this.MF=t.getTime,this.xF=t.yF,this._F=null,this.TF=new Set}GF(t){this.TF.add(t)}CF(t){this.TF.delete(t)}kM(){this._F=null;for(const t of this.TF)t.kM()}IF(t){return this.wF?this.wF(t):[t.Vg(),t.Kg()]}BO(t){return this.bF(t)}PF(t,s){this.vF(t,s)}AF(){return this.MF()}Op(t){this.xF(t)}RF(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this._F||this._F.Vg()===s&&this._F.Kg()===i||(t.hT(this._F),this._F=null),null===this._F&&(this._F=t.VO(null,{width:s,height:i,Zx:"nearest",t_:!1})),this._F}}}{const Xc=self.Cs,Zc=self.assert,Kc=self.ls,Qc=Kc.ds,tf=Xc.Un(Xc.Rect),sf=Xc.Un(Xc.Rect),ef=Xc.Un(Xc.Rect),nf=Xc.Un(Xc.Rect),rf=Qc.create(),hf=Qc.create(),of={EF:null,OF:null,FF:null,DF:!1},af={kF:null,LF:!1,NF:!1,BF:!1,$F:!1,WF:!1,VF:!1};Xc.DS.jF=class{constructor(t,s){s=Object.assign({},of,s),this.Vp=t,this.HF=s.EF,this.UF=s.OF,this.JF=s.FF,this.zF=null,this.qF=[],this.YF=[],this.XF=[],this.ZF=!1,this.AM=0,this.KF=!1,this.QF=!1,this.tD=!1,this.sD=!1,this.iD=!1,this.eD=!1,this.WR=!1,this.nD=!1,this.rD=!1,this.hD=!1,this.oD=!1,this.aD=!1,this.lD=0,this.uD=[null,null,null],this.cD=!!s.DF,this.fD=0,this.dD=0,this.pD=0,this.mD=0,this.gD=null,this.yD=null,this.SD=Xc.Un(Xc.Rect),this.wD=Xc.Un(Xc.Rect),this.bD=Xc.Un(Xc.Rect),this.vD=Xc.Un(Xc.Rect),this.MD=Xc.Un(Xc.Rect),this.xD=1,this._D=1,this.TD=0,this.GD=0,this.CD=null,this.ID=null,this.PD=0,this.AD=0,this.RD=0,this.ED=0,this.OD=!1,this.X_=Qc.create(),this.FD=Qc.create(),this.Vp.GF(this)}Jn(){this.Vp.CF(this),Xc.bh(this.XF),Xc.bh(this.qF),Xc.bh(this.YF),this.gD=null,this.yD=null,this.HF=null,this.UF=null,this.JF=null}kM(){this.ZF=!0,Xc.bh(this.XF),Xc.bh(this.qF),Xc.bh(this.YF)}DD(){return this.ZF}kD(t,s){if(s=Object.assign({},af,s),Xc.bh(this.XF),this.fD=0,this.dD=0,this.KF=!1,this.QF=!1,this.tD=!1,this.sD=!1,this.iD=!1,this.eD=!1,this.lD=0,this.aD=!!s.$F,this.oD=!!s.VF,this.ZF=!1,Xc.Th(this.qF,t),0===t.length)return;if(s.kF){if(s.kF.length!==t.length)throw new Error("incorrect indexMap length");Xc.Th(this.YF,s.kF)}else{Xc.bh(this.YF);for(let s=0,i=t.length;s<i;++s)this.YF.push(s)}for(const s of t)this.fD+=s.gM(),this.dD+=s.yM(),s.MM()&&(this.KF=!0),s._M()&&(this.QF=!0),s.xM()&&(this.tD=!0),s.SM()&&(this.sD=!0),s.CM()&&(this.iD=!0);this.eD=this.LD(t[0].pM());const i=this.ND(t[0],s),e=this.BD(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.hD=!0);this.hD=!1;let n=0;i&&(this.lD=1,this.XF.push(Xc.Un(Xc.DS.jF.WD.$D,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.lD=Math.max(this.lD,t),this.XF.push(Xc.Un(Xc.DS.jF.WD.VD,this,n,t,s)),n=t}else this.lD=1,this.XF.push(Xc.Un(Xc.DS.jF.WD.jD,this,-1,1,s)),n=1;e&&this.XF.push(Xc.Un(Xc.DS.jF.WD.HD,this,n,0))}ND(t,s){return!!(s.LF||t.wM()||s.BF&&!t.vM()||t._M()&&!this.oD||0!==this.fD||0!==this.dD)||(t.pM().$v()?t.xM()&&(s.WF||s.$F)||t.TM()&&s.$F:t.xM()&&!this.eD&&s.WF)}BD(t,s){return!!s.NF||(t.pM().$v()?t.xM()||t.SM():(t.xM()||t.SM())&&this.UD())}LD(t){return t.sb()&&this.tD&&!this.sD}JD(t,s,i){t.sb()&&null===s&&(s=t.zD()),this.CD=s,this.gD=i.qD||null,this.yD=i.YD||null,this.AM=i.XD||0,this.xD=i.devicePixelRatio||1,this._D=i.ZD||1,this.TD=i.KD||0,this.GD="number"==typeof i.time?i.time:this.Vp.AF(),this.WR=!1,t.ZE(),this.KF&&this.QD();let e=!1;if(this.tk()&&(this.sk(t,i),e=!0,this.ID=this.Vp.RF(t,this.pD,this.mD),tf.S(this.wD),tf.bl(),t.sb()&&t.ik(this.CD),t.ek(this.CD.fT(),this.ID,tf.Ka(),tf.Qa(),tf.width(),tf.height())),this.hD)this.nk(t,i);else if(e||this.sk(t,i),0!==this.bD.width()||0!==this.bD.height()){t.uO(),t.nO(),t.jb(0),t.Ub(0),this.zF=i.rk||null,this.PD=i.hk||0,this.AD=i.ak||0,this.RD=i.lk||0,this.ED=i.uk||0,this.OD=!!i.ck,this.fk(t),this.uD[0]=s,this.uD[1]=this.lD>=1?this.dk():null,this.uD[2]=2===this.lD?this.dk():null;for(const s of this.XF){const i=this.pk(s.mk()),e=this.pk(s.gk());t.sb()?s.yk(t,i,e):s.Sk(t,i,e)}t.hO(null),this.uD[1]&&this.wk(this.uD[1]),this.uD[2]&&this.wk(this.uD[2]),this.uD.fill(null),this.bk(t),this.CD=null,this.ID=null,this.gD=null,this.yD=null,this.zF=null}}sk(t,s){const[i,e]=this.Vp.IF(t);this.vk(t,i,e),this.Mk(s)}vk(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.pD===s&&this.mD===i||this.xk(t,s,i,0,0,this.X_,this.FD),this.pD=s,this.mD=i}xk(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.tb(r,s/i);const l=t.nb(o,a,t.Ww(i),o,a,0,i);Qc.S(h,l)}Mk(t){this.SD.S(t._k),t.Tk?this.wD.S(t.Tk):this.wD.set(0,0,this.pD,this.mD),this.bD.S(this.wD),this.bD.wt(this.pD,this.mD);const s=this._D*this.xD;this.wD.cl(this.fD*s,this.dD*s),this.MD.S(this.wD),this.MD.wt(this.pD,this.mD),this.wD.vl(0,0,this.pD,this.mD),this.vD.S(this.wD),this.vD.wt(this.pD,this.mD)}fk(t){if(this.nD=t.kO(),this.rD=t.KO(),this.oD)t.DO(!1),this.QF&&t.LO(!0);else{if(tf.S(this.wD),t.$v()){const t=this._D*this.xD;tf.cl(Math.max(this.fD,1)*t,Math.max(this.dD,1)*t),tf.bl(),tf.Zn(0,0,this.pD,this.mD)}else tf.bl();t.NO(tf.Ka(),tf.Qa(),tf.width(),tf.height(),this.mD)}}Gk(t){t.nO(),this.oD||(this.rD&&t.QO(),t.DO(!1),this.QF&&t.LO(!0)),t.sb()&&t.Ck(!0)}bk(t){t.LO(!1),this.rD&&t.ZO(),t.DO(this.nD),this.oD||t.$O(),t.sb()&&t.Ck(!1),this.WR=t.KE()}Ik(){this.MD.Zn(0,0,1,1)}pk(t){return t<0?null:this.uD[t]}dk(){return this.Vp.BO(this)}Pk(){return this.CD}wk(t){this.Vp.PF(t,this)}Ak(t){return this.qF[t]}Rk(t){this.zF?this.zF(this,t,(()=>this.HF(t,this))):this.HF(t,this),this.hD||this.Gk(t)}Ek(t){if(this.oD)return!0;if(0!==this.PD||0!==this.AD||0!==this.RD||0!==this.ED)return!1;const[s,i]=t.bO(t.BO());return s===this.pD&&i===this.mD}Ok(t,s){let i=this.X_,e=this.FD;if(s&&!this.Ek(t)){let s,n;i=rf,e=hf,0!==this.RD&&0!==this.ED?[s,n]=[this.RD,this.ED]:[s,n]=t.bO(t.BO()),this.xk(t,s,n,this.PD,this.AD,i,e),this.oD||t.$O()}t.HE(i),t.XE(e)}QD(){this.Vp.Op(this)}Fk(t,s){return this.JF(this.YF[t],s)}Dk(t,s){let i=this.MD,e=this.vD,n=this.bD;t.$v()&&(sf.S(i),sf.pl(1),i=sf,ef.S(e),ef.pl(1),e=ef,nf.S(n),nf.pl(1),n=nf),this.kk(t,s,e,n,i,1/this.pD,1/this.mD)}Lk(t,s){let i=this.vD,e=this.bD,n=1/this.pD,r=1/this.mD;if(this.UF){let{Nk:t,Bk:s,$k:h}=this.UF(this.gD);t||(tf.set(0,0,0,0),t=tf),s||(s=this.pD),h||(h=this.mD),i=t,e=t,n=1/s,r=1/h}else t.$v()&&(ef.S(i),ef.pl(1),i=ef,nf.S(e),nf.pl(1),e=nf);let h=this.MD;t.$v()&&(h=sf,h.S(this.MD),h.pl(1)),this.kk(t,s,i,e,h,n,r),t.sb()&&this.iD&&t.Wk(this.aD)}Vk(t){return this.tD?t.sb()?this.tk()?this.ID:this.CD.fT():this.CD:null}kk(t,s,i,e,n,r,h){t.AO(this.Vk(t),n,i,e,this.SD,r,h,this.xD,this._D,this.TD,this.GD),t.RO(this.Fk(s,t))}nk(t,s){const i=this.qF[0],e=t.kO(),n=i._M();n&&(t.DO(!1),t.LO(!0),this.MD.set(0,0,1,1),this.bD.set(0,0,1,1)),t.ub(i),t.FM(this.AM),t.UO(this.CD);let r=0,h=1;if(this.bD.set(0,0,1,1),i.TM()&&this.UF){const{Nk:t,Bk:s,$k:i}=this.UF(this.gD);t&&this.bD.S(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Vp.IF(t);r=1/s,h=1/i}s._k?this.SD.S(s._k):this.SD.set(0,0,0,0),t.AO(this.Vk(t),this.MD,this.bD,this.bD,this.SD,r,h,this.xD,this._D,this.TD,this.GD),t.RO(this.Fk(0,t)),t.sb()&&this.iD&&t.Wk(this.aD),t.jb(0),this.Rk(t),n&&(t.LO(!1),t.DO(e))}tk(){return this.eD}UD(){return!this.eD}jk(){return this.tD}Hk(){return!!this.hD&&!this.tk()}Uk(){return this.oD}Jk(){return this.gD}zk(){return this.yD}qk(){return this.AM}Yk(){return this.OD}KE(){return this.WR}Xk(){return this.wD}Zk(){return this.vD}Kk(){return this.cD}async Qk(t,s,i){}}}{const lf=self.Cs;lf.DS.jF.WD=class{constructor(t,s,i,e=-1){this.tL=t,this.sL=s,this.iL=i,this.IS=e}eL(){return this.tL}mk(){return this.sL}gk(){return this.iL}nL(){return this.IS}EG(){return this.eL().Ak(this.nL())}Sk(t,s,i){}yk(t,s,i){}}}{const uf=self.Cs;uf.DS.jF.WD.$D=class extends uf.DS.jF.WD{constructor(t,s,i,e){super(t,s,i,e)}Sk(t,s,i){const e=this.eL();t.uO(),t.lb(),t.UO(i,e.Yk()),t.EO(0,0,0,0),e.Rk(t),e.Ik()}yk(t,s,i){const e=this.eL();t.uO(),t.lb(),t.UO(i,!1),t.EO(0,0,0,0),e.Rk(t),e.Ik()}}}{const cf=self.Cs,ff=cf.Un(cf.Rect),df=cf.Un(cf.Il);cf.DS.jF.WD.HD=class extends cf.DS.jF.WD{constructor(t,s,i,e){super(t,s,i,e)}Sk(t,s,i){const e=this.eL();t.lb(),t.UO(i),e.Ok(t,!0),t.FM(e.qk()),t.hO(s.fT()),df.Yl(e.Xk()),ff.S(e.Zk()),ff.pl(1),t.ev(df,ff),e.Kk()&&t.qO(s)}yk(t,s,i){const e=this.eL();t.lb(),t.UO(i,!1),e.Ek(t)?df.Yl(e.Zk()):(t.Ck(!1),e.Ok(t,!0),df.Yl(e.Xk())),t.rL(null),t.FM(e.qk()),t.hO(s.fT()),e.Uk()?t.wO():t.ev(df,e.Zk())}}}{const pf=self.Cs;pf.DS.jF.WD.jD=class extends pf.DS.jF.WD{constructor(t,s,i,e){super(t,s,i,e)}Sk(t,s,i){const e=this.eL();t.UO(i,e.Yk()),t.EO(0,0,0,0),t.fO(),t.ub(this.EG()),e.Lk(t,this.nL()),e.Rk(t),e.Ik()}yk(t,s,i){const e=this.eL();t.UO(i,!1),t.EO(0,0,0,0),t.fO(),t.ub(this.EG()),e.Lk(t,this.nL()),e.Rk(t),e.Ik()}}}{const mf=self.Cs,gf=mf.Un(mf.Rect),yf=mf.Un(mf.Il);mf.DS.jF.WD.VD=class extends mf.DS.jF.WD{constructor(t,s,i,e){super(t,s,i,e)}Sk(t,s,i){const e=this.eL();t.UO(i);const n=0===this.gk();n?t.FM(e.qk()):(t.EO(0,0,0,0),t.fO()),t.ub(this.EG()),e.Dk(t,this.nL()),t.hO(s.fT()),e.Ok(t,n),yf.Yl(e.Xk()),gf.S(e.Zk()),gf.pl(1),t.ev(yf,gf),e.Kk()&&t.qO(s)}yk(t,s,i){const e=this.eL();t.UO(i,!1),0===this.gk()?(t.FM(e.qk()),t.rL(null),e.Ek(t)?yf.Yl(e.Zk()):(t.Ck(!1),e.Ok(t,!0),yf.Yl(e.Xk()))):(t.EO(0,0,0,0),t.fO(),yf.Yl(e.Zk())),t.ub(this.EG()),e.Dk(t,this.nL()),t.hO(s.fT()),e.Uk()?t.wO():t.ev(yf,e.Zk())}}}{let Sf=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};SortZOrderList=Sf;const wf=self.Cs,bf=self.Ns;let vf=null;const Mf=new Set,xf=[],_f=[];let Tf=!1,Gf=!1,Cf=!1;const If=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.hL=class{constructor(t){vf=t,Object.defineProperties(this,{oL:{value:vf.lL().aL(),writable:!1},uL:{value:vf.fL().cL(),writable:!1},dL:{value:{},writable:!1},pL:{value:{},writable:!1},mL:{value:vf.gL(),writable:!1},yL:{value:vf.SL(),writable:!1},wL:{value:new Date(vf.bL()),writable:!1},storage:{value:new self.vL(vf),writable:!1},ML:{value:vf.xL(),writable:!1},_L:{value:vf.TL(),writable:!1},GL:{value:vf.CL(),writable:!1},Zx:{value:vf.IL(),writable:!1},PL:{value:vf.AL(),writable:!1},RL:{value:new self.EL(t),writable:!1},OL:{value:new self.FL(t),writable:!1}}),vf.DL().addEventListener("keydown",(t=>{Mf.has(t.key)?t.stopPropagation():Mf.add(t.key)})),vf.DL().addEventListener("keyup",(t=>Mf.delete(t.key))),vf.Sf().addEventListener("window-blur",(()=>Mf.clear())),vf.xL()&&(self.alert=t=>(Tf||(Tf=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}kL(t){Object.defineProperties(this.dL,t)}LL(t){Object.defineProperties(this.pL,t)}addEventListener(t,s){vf.DL().addEventListener(t,s)}removeEventListener(t,s){vf.DL().removeEventListener(t,s)}NL(t,...s){bf.ue(t);const i=vf.BL(),e=i.$L(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Gu())return e.WL();if(s.length<e.VL())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.VL()} expected)`);const n=e.jL();let r=n.HL();const h=i.UL();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.HL())t.has(s)||(r.push(s),t.add(s));for(const s of i.JL())t.has(s)||(r.push(s),t.add(s))}return n.zL(r,e.qL(),e.YL(),e.WL(),...s)}XL(t){const s=vf.KL().ZL();if(!s)throw new Error("not in a function which returns a value");switch(s.QL()){case 1:"number"==typeof t&&s.tN(t);break;case 2:"string"==typeof t&&s.tN(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.tN(t)}}signal(t){bf.ue(t),vf.BL().sN(t)}iN(t){return bf.ue(t),vf.BL().eN(t)}nN(){return[vf.TL(),vf.CL()]}get rN(){return vf.hN()}get oN(){return vf.aN()}get lN(){return vf.uN()}get cN(){return vf.fN()}get dN(){return vf.pN()}get mN(){return vf.gN()}set mN(t){bf.he(t),vf.yN(t)}get SN(){return Gf||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),Gf=!0),vf.wN()}get framesPerSecond(){return vf.wN()}get bN(){return vf.vN()}get MN(){return vf.xN()}get _N(){return vf.TN()}get GN(){return vf.CN()}set GN(t){if(!If.has(t))throw new Error("invalid framerate mode");vf.IN(t)}get PN(){return vf.AN()}set PN(t){bf.he(t),vf.RN(t)}get EN(){return vf.ON()}set EN(t){vf.FN(t)}get DN(){return vf.lL().kN()}get LN(){return vf.lL().NN()}random(){return vf.BN()}get layout(){const t=vf.$N();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.WN()}VN(t){const s=vf.jN();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.HN(t),!i)throw new Error("invalid layout");return i.WN()}UN(){return vf.jN().JN().map((t=>t.WN()))}zN(t){const s=vf.jN();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.HN(t),!i)throw new Error("invalid layout");s.qN()||s.YN(i)}get keyboard(){const t=vf.XN().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get ZN(){const t=vf.XN().ZN;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get KN(){const t=vf.XN().KN;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get QN(){const t=vf.XN().QN;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}tB(t,s){bf.ue(t),bf.ue(s),vf.sB(t,s)}iB(t){bf.he(t);const s=vf.eB(t);return s?s.nB():null}rB(t,s){bf.Ee(s);const i=vf.hB();for(const s of t){const t=vf.oB(s),i=t.aB();xf.push([i.lB().nL(),i.uB()]),_f.push(t)}if(0===xf.length)return;xf.sort(Sf),_f.sort(((t,i)=>s(t.nB(),i.nB())));let e=!1;for(let t=0,s=xf.length;t<s;++t){const s=_f[t],n=i.cB(xf[t][0]),r=xf[t][1],h=n.fB();h[r]!==s&&(h[r]=s,s.aB().dB(n,!0),n.pB(s),e=!0)}e&&vf.mB(),wf.bh(xf),wf.bh(_f)}async gB(t,s){Cf||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),Cf=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await vf.yB("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return vf.yB("runtime","alert",{message:t+(vf.xL()?" [via Web Worker]":"")})}SB(t){return bf.he(t),vf.wB(t)}bB(t){vf.vB(t)}async MB(t,s,i){bf.ce(t),bf.ie(s),bf.$e(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=vf.xB();if(!e)return;vf.mB();const n=await e._B(t||"image/png",s,i.x,i.y,i.width,i.height);return await vf.TB(wf.PB.IB.CB.GB,null),n}}}{const Pf=self.Cs,Af=self.Ns;let Rf=null;self.AB=class{constructor(t){Rf=t,Object.defineProperties(this,{RB:{value:!0,writable:!1}})}EB(t){const s=self.DB.OB(t);if(!s)throw new Error("invalid IImageInfo");s.kB(Rf.LB())}NB(t){return Rf.io(t)}BB(t){return Rf.eo(t)}$B(t){return Rf.no(t)}WB(t){return Rf.ro(t)}VB(t){return Rf.jB(t)}HB(t){return"flat"===Rf.UB()&&Pf.Kh(t)&&(t=t.toLowerCase()),Rf.JB(t)}get zB(){return Rf.qB()}async YB(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}XB(...t){return Rf.ZB(...t)}KB(t){return Rf.QB(t)}t$(t){return Rf.s$(t)}}}{const Ef=self.Cs,Of=self.Ns;let Ff=null;self.i$=class{constructor(t){Ff=t,Object.defineProperties(this,{runtime:{value:Ff.LB(),writable:!1}})}e$(t,s){const i=Ff.LB(),e=i.oB(t),n=i.oB(s);return Ff.n$(e,n)}r$(t,s){const i=Ff.LB(),e=i.oB(t);for(const t of s){const s=i.oB(t);if(Ff.n$(e,s))return t}return null}h$(t){const s=Ff.LB().oB(t),i=Ff.o$(s);return i?i.nB():null}a$(t,s){if(Of.he(t),Of.he(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Ff.l$(t,s)}u$(){return Ff.c$()}f$(t,s){const i=Ff.LB();let e;e=Array.isArray(t)?t.map((t=>i.d$(t))):[i.d$(t)];const n=Ef.Rect.Xa(s),r=[];return Ff.p$(null,e,n,r),r.map((t=>t.nB()))}}}{const Df=self.Cs,kf=self.Ns;let Lf=null;const Nf=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Bf=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),$f=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.EL=class{constructor(t){Lf=t,Object.defineProperties(this,{m$:{value:Df.Ks.oi,writable:!1},os:{value:Nf.get(Df.Ks.Qs)||"unknown",writable:!1},g$:{value:Df.Ks.ti,writable:!1},browser:{value:Bf.get(Df.Ks.si)||"unknown",writable:!1},y$:{value:Df.Ks.ii,writable:!1},S$:{value:$f.get(Df.Ks.ni)||"unknown",writable:!1}})}get w$(){let t=Lf.b$();return Lf.v$()?t="nwjs":Lf.M$()?t="windows-webview2":"cordova"===t?t="Android"===Df.Ks.Qs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get EC(){return Lf.xB().x$()}get _$(){return Lf.xB().T$()}get G$(){return Lf.xB().C$()}get I$(){return Lf.xB().P$()}get A$(){return Lf.xB().R$()}get E$(){return Lf.xB().O$()}get F$(){return Lf.xB().D$()}get k$(){return Lf.xB().L$()}get devicePixelRatio(){return Lf.N$()}}}{const Wf=self.Cs,Vf=self.Ns;self.vL=class{constructor(t){this.B$=t.$$()}getItem(t){return Vf.ue(t),this.B$.getItem(t)}setItem(t,s){return Vf.ue(t),this.B$.setItem(t,s)}removeItem(t){return Vf.ue(t),this.B$.removeItem(t)}clear(){return this.B$.clear()}keys(){return this.B$.keys()}}}{const jf=self.Cs,Hf=self.Ns,Uf=jf.Is();self.W$=class{#t;constructor(){const t=jf.j$.V$(Uf);this.#t=t,Object.defineProperties(this,{runtime:{value:t.LB().H$(),writable:!1},id:{value:t.U$(),writable:!1},J$:{value:t.z$(),writable:!1},q$:{value:t.Y$(),writable:!1},X$:{value:t.Z$(),writable:!1},K$:{value:t.Q$(),writable:!1},tW:{value:t.sW(),writable:!1},iW:{value:t.eW(),writable:!1},nW:{value:t.rW(),writable:!1},hW:{value:t.oW(),writable:!1}}),t.LB().aW(this,t)}static lW(t){if(!t)return null;const s=jf.j$.uW(t);return s?s.cW():null}fW(){return this.#t.pW().dW()}mW(){return this.#t.gW().nB()}}}{const Jf=self.Cs,zf=self.Ns,qf=Jf.Is();self.yW=class{#t;constructor(){const t=Jf.j$.V$(qf);this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},runtime:{value:t.LB().H$(),writable:!1},SW:{value:t.wW().cW(),writable:!1}}),t.LB().aW(this,t)}addEventListener(t,s){zf.ue(t),zf.Ee(s),this.#t.DL().addEventListener(t,s)}removeEventListener(t,s){zf.ue(t),zf.Ee(s),this.#t.DL().removeEventListener(t,s)}bW(){return[...this.vW()]}MW(){return Jf.$h(this.vW())}xW(){return[...this._W()]}TW(){return Jf.$h(this._W())}GW(t){const s=this.#t,i=s.LB().IW(t),e=s.PW(i);return e?e.nB():null}*vW(){for(const t of this.#t.AW())yield t.nB()}*_W(){for(const t of this.#t.EW().RW())yield t.nB()}OW(t){zf.Ee(t);const s=this.#t;if(s.FW()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.DW(t)}Gi(t,s,i,e,n){if(zf.se(s),zf.se(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.LB(),o=h.$N().lB(t);if(!o)throw new Error("invalid layer");const a=h.kW(r,o,s,i,e,n);e&&o.LW(a);const l=h.BL();return l.NW(!0),a.BW(),l.NW(!1),l.$W()||h.jN().WW()||h.VW(),a.nB()}}}{const Yf=self.Cs,Xf=self.Ns,Zf=new WeakMap,Kf=["above","below","top-sublayer","bottom-sublayer"];self.jW=class{constructor(t){Zf.set(this,t);const s=[],i=t.HW(),e=i.UW().length;for(let t=0;t<e;++t)s.push(new self.JW(i,t));Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},index:{value:t.nL(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){Xf.ue(t),Xf.Ee(s),Zf.get(this).DL().addEventListener(t,s)}removeEventListener(t,s){Xf.ue(t),Xf.Ee(s),Zf.get(this).DL().removeEventListener(t,s)}get width(){return Zf.get(this).Vg()}set width(t){Xf.he(t),Zf.get(this).Yg(t)}get height(){return Zf.get(this).Kg()}set height(t){Xf.he(t),Zf.get(this).jg(t)}zW(t,s){Xf.he(t),Xf.he(s);const i=Zf.get(this);i.Yg(t),i.jg(s)}getSize(){const t=Zf.get(this);return[t.Vg(),t.Kg()]}set scale(t){Xf.he(t),Zf.get(this).qW(t)}get scale(){return Zf.get(this).YW()}set angle(t){Xf.he(t),Zf.get(this).XW(t)}get angle(){return Zf.get(this).ZW()}set scrollX(t){Xf.se(t),Zf.get(this).KW(t)}get scrollX(){return Zf.get(this).QW()}set scrollY(t){Xf.se(t),Zf.get(this).tV(t)}get scrollY(){return Zf.get(this).sV()}scrollTo(t,s){Xf.se(t),Xf.se(s);const i=Zf.get(this);i.KW(t),i.tV(s)}iV(){const t=Zf.get(this);return[t.QW(),t.sV()]}eV(t){const s=Zf.get(this);let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.lB(t),i?i.nV():null}rV(){return Zf.get(this).hV().map((t=>t.nV()))}*oV(){for(const t of Zf.get(this).oV())yield t.nV()}aV(t,s,i){const e=Zf.get(this),n=self.lV;Xf.ue(t),Xf.$e(s,n);const r=s?e.LB().uV(s):null,h=Kf.indexOf(i);if(h<0)throw new Error("invalid location");e.cV(t,r,h)}fV(t,s,i){const e=Zf.get(this),n=e.LB(),r=self.lV;Xf.Be(t,r);const h=n.uV(t);if(!h)throw new Error("invalid layer");Xf.$e(s,r);const o=s?n.uV(s):null,a=Kf.indexOf(i);if(a<0)throw new Error("invalid location");e.dV(h,o,a)}pV(t){const s=Zf.get(this),i=self.lV;Xf.Be(t,i);const e=s.LB().uV(t);if(!e)throw new Error("invalid layer");const n=e.LB();s.mV(e),n.BL().$W()||n.VW()}gV(){const t=Zf.get(this),s=t.LB();t.yV(),s.BL().$W()||s.VW()}SV(t,s){Xf.he(t),Xf.he(s),Zf.get(this).wV(t,s)}bV(){return Zf.get(this).vV()}set j(t){Xf.ue(t);const s=Zf.get(this);if("perspective"===t)s.MV();else{if("orthographic"!==t)throw new Error("invalid projection");s.xV()}}get j(){return Zf.get(this)._V()?"orthographic":"perspective"}}}{const Qf=self.Cs,td=self.Ns,sd=new WeakMap,id=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ed=new Map([...id.entries()].map((t=>[t[1],t[0]]))),nd=new Set(["2d","3d"]),rd=Qf.Un(Qf._o);self.lV=class{constructor(t){sd.set(this,t);const s=[],i=t.HW(),e=i.UW().length;for(let t=0;t<e;++t)s.push(new self.JW(i,t));Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},layout:{value:t.HN().WN(),writable:!1},effects:{value:s,writable:!1}}),t.LB().aW(this,t)}get TV(){const t=sd.get(this).GV();return t?t.nV():null}*CV(){for(const t of sd.get(this).CV())yield t.nV()}*IV(){for(const t of sd.get(this).PV())yield t.nV()}*AV(){for(const t of sd.get(this).PV())for(const s of t.RV())yield s.nV()}get index(){return sd.get(this).nL()}get isVisible(){return sd.get(this).EV()}set isVisible(t){sd.get(this).OV(t)}get FV(){return sd.get(this).DV()}get kV(){return sd.get(this).LV()}set kV(t){sd.get(this).NV(t)}get BV(){return sd.get(this).$V()}set BV(t){sd.get(this).WV(!!t)}get VV(){return sd.get(this).jV()}get opacity(){return sd.get(this).sO()}set opacity(t){t=Qf.Zn(+t,0,1),isNaN(t)||sd.get(this).eO(t)}set scale(t){td.he(t),sd.get(this).HV(t)}get scale(){return sd.get(this).UV()}set JV(t){td.he(t),sd.get(this).zV(t)}get JV(){return sd.get(this).qV()}set angle(t){td.he(t),sd.get(this).XW(t)}get angle(){return sd.get(this).YV()}set XV(t){td.he(t),sd.get(this).ZV(t)}get XV(){return sd.get(this).KV()}set QV(t){td.he(t),sd.get(this).tj(t)}get QV(){return sd.get(this).sj()}set ij(t){td.he(t),sd.get(this).ZM(t)}get ij(){return sd.get(this).XM()}set renderingMode(t){if(!nd.has(t))throw TypeError("invalid rendering mode");sd.get(this).ej("3d"===t)}get renderingMode(){return sd.get(this).nj()?"3d":"2d"}set rj(t){sd.get(this).hj(t)}get rj(){return sd.get(this).oj()}set aj(t){sd.get(this).lj(t)}get aj(){return sd.get(this).uj()}set XD(t){td.ue(t);const s=id.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");sd.get(this).FM(s)}get XD(){return ed.get(sd.get(this).cj())}set backgroundColor(t){if(td.Te(t),t.length<3)throw new Error("expected 3 elements");rd.Ao(t[0],t[1],t[2]);const s=sd.get(this),i=s.fj();i.Uo(rd)||(i.Lo(rd),s.LB().mB())}get backgroundColor(){const t=sd.get(this).fj();return[t.No(),t.Bo(),t.$o()]}set scrollX(t){td.se(t);const s=sd.get(this);s.dj(!0),s.KW(t)}get scrollX(){return sd.get(this).QW()}set scrollY(t){td.se(t);const s=sd.get(this);s.dj(!0),s.tV(t)}get scrollY(){return sd.get(this).sV()}scrollTo(t,s){td.se(t),td.se(s);const i=sd.get(this);i.dj(!0),i.KW(t),i.tV(s)}iV(){const t=sd.get(this);return[t.QW(),t.sV()]}pj(){sd.get(this).dj(!1)}getViewport(){return sd.get(this).mj().il()}gj(t,s,i=0){td.se(t),td.se(s),td.se(i);const e=sd.get(this),n=e.LB();return e.yj(t-n.C$(),s-n.P$(),i)}Sj(t,s,i=0){td.se(t),td.se(s),td.se(i);const e=sd.get(this),n=e.LB(),[r,h]=e.wj(t,s,i);return[r+n.C$(),h+n.P$()]}bj(t,s,i=0){return td.se(t),td.se(s),td.se(i),sd.get(this).vj(t,s,i)}Mj(t,s,i=0){return td.se(t),td.se(s),td.se(i),sd.get(this).xj(t,s,i)}get _j(){return sd.get(this).Tj()}}}{let hd=function(t){let s=ld.get(t);return s||(s=od.Un(od.Event.Sf),ld.set(t,s),s)};GetDispatcher=hd;const od=self.Cs,ad=self.Ns,ld=new WeakMap,ud=od.Is();self.Gj=class{#t;constructor(){const t=od.j$.V$(ud);this.#t=t;const s={runtime:{value:t.LB().H$(),writable:!1},objectType:{value:t.Cj().dW(),writable:!1},SW:{value:t.wW().cW(),writable:!1}};t.Ij(s),t.Pj(s),Object.defineProperties(this,s),t.LB().aW(this,t)}static Aj(){return od.j$.Rj()}Ej(){const t=ld.get(this);t&&(t.Jn(),ld.delete(this))}addEventListener(t,s,i){ad.ue(t),ad.Ee(s),hd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ad.ue(t),ad.Ee(s),hd(this).removeEventListener(t,s,i)}dispatchEvent(t){hd(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.LB();s.Oj(t),s.BL().$W()||s.jN().WW()||s.BL().Fj()||s.VW()}Dj(){const t=this.#t.kj();return t?t.map((t=>t.nB())):[]}*Lj(){const t=this.#t;if(t.Nj())for(const s of t.Bj())yield s.nB()}get uid(){return this.#t.$j()}get Wj(){return this.#t.Vj()}get jj(){return this.#t.Hj()}set mN(t){ad.he(t),this.#t.yN(t)}get mN(){return this.#t.Uj()}Jj(){this.#t.zj()}get oN(){const t=this.#t;return t.LB().aN(t)}qj(...t){ad.Te(t);const s=new Set(t),i=this.#t.Yj();return s.isSubsetOf(i)}Xj(t){ad.Be(t,Set),this.#t.Zj(t)}Kj(){return new Set(this.#t.Yj())}signal(t){ad.ue(t);const s=this.#t;s.LB().BL().Qj(s,t)}iN(t){ad.ue(t);const s=this.#t;return s.LB().BL().tH(s,t)}}}{const cd=self.Cs,fd=self.Ns,dd=cd.Is();self.sH=class extends self.Gj{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=cd.j$.V$(dd),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.iH,this.#h=t?.eH}Ej(){this.nH(!1),this.rH(!1),super.Ej()}hH(){return cd.j$.oH()}aH(t){const s=this.#t;s.LB().lH(t,s)}uH(t){const s=this.#t;return s.LB().TB(t,s)}cH(t,s){if(fd.ue(t),fd.Ee(s),!this.#r)throw new Error("no DOM component id set");this.#t.LB().fH(this.#r,t,s)}dH(t){fd.Te(t);for(const[s,i]of t)this.cH(s,i)}pH(t,s){if(fd.ue(t),!this.#r)throw new Error("no DOM component id set");this.#t.LB().Wc(this.#r,t,s)}mH(t,s){if(fd.ue(t),!this.#r)throw new Error("no DOM component id set");return this.#t.LB().yB(this.#r,t,s)}gH(t,s){if(!this.#t.LB().xL())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.pH(t,s)}nH(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.LB();if(t){if(!this.#i)if(this.#t.LB().yH()){const t=globalThis.SH,s=this.SW;this.#i=()=>{const i=performance.now();this.wH(),t.bH(s,performance.now()-i)}}else this.#i=()=>this.wH();s.Sf().addEventListener("tick",this.#i)}else s.Sf().removeEventListener("tick",this.#i)}vH(){return this.#s}wH(){}rH(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.LB();if(t){if(!this.#n)if(this.#t.LB().yH()){const t=globalThis.SH,s=this.SW;this.#n=()=>{const i=performance.now();this.MH(),t.bH(s,performance.now()-i)}}else this.#n=()=>this.MH();s.Sf().addEventListener("tick2",this.#n)}else s.Sf().removeEventListener("tick2",this.#n)}xH(){return this.#e}MH(){}_H(){return[]}TH(){return null}GH(t){}CH(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.LB().IH(this.#h)}PH(t,s){if(fd.ue(t),fd.Ee(s),!this.#h)throw new Error("no wrapper component id set");this.#t.LB().AH(this.#h,t,s)}RH(t){fd.Te(t);for(const[s,i]of t)this.PH(s,i)}EH(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.OL.OH(this.#h,t,s)}FH(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.OL.DH(this.#h,t,s)}}}{let pd=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=md.j$.V$(Md),i=s.aB();this.#t=s,this.#s=i,vd.set(this,s);const e=[],n=i.kH();if(n){const t=i.Cj().HW().UW().length;for(let s=0;s<t;++s)e.push(new self.JW(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.HN().WN()}get LH(){return this.#s.lB().nV()}get x(){return this.#s.UM()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.UM()===t||(s.JM(t),s.NH())}get y(){return this.#s.qM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.qM()===t||(s.YM(t),s.NH())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.UM()===t&&i.qM()===s||(i.BH(t,s),i.NH())}$H(){const t=this.#s;return[t.UM(),t.qM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.WH(t,s),i.NH()}set VH(t){t=+t;const s=this.#s;isNaN(t)||s.jH()===t||(s.HH(t),s.NH())}get VH(){return this.#s.jH()}set UH(t){t=+t;const s=this.#s;isNaN(t)||s.JH()===t||(s.zH(t),s.NH())}get UH(){return this.#s.JH()}qH(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.jH()===t&&i.JH()===s||(i.HH(t),i.zH(s),i.NH())}YH(){const t=this.#s;return[t.jH(),t.JH()]}get ij(){return this.#s.XM()}set ij(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.XM()===t||(i.ZM(t),s.LB().mB())}get XH(){return this.#s.ZH()}get width(){return this.#s.Vg()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.Vg()===t||(s.Yg(t),s.NH())}get height(){return this.#s.Kg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Kg()===t||(s.jg(t),s.NH())}zW(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Vg()===t&&i.Kg()===s||(i._A(t,s),i.NH())}getSize(){const t=this.#s;return[t.Vg(),t.Kg()]}get angle(){return this.#s.ZW()}set angle(t){t=md.Kn(+t);const s=this.#s;isNaN(t)||s.ZW()===t||(s.XW(t),s.NH())}get KH(){return md.tr(this.angle)}set KH(t){this.angle=md.Qn(t)}Kl(t){return t?(this.#s.QH(wd,bd,!1),wd.il()):this.#s.tU().il()}sU(t){return t?(this.#s.QH(wd,bd,!1),bd.Jl()):this.#s.iU().Jl()}eU(){return this.#s.nU()}get isVisible(){return this.#s.DV()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.DV()!==t&&(i.OV(t),s.LB().mB())}get opacity(){return this.#s.sO()}set opacity(t){t=md.Zn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.sO()===t||(i.eO(t),s.LB().mB())}set rU(t){if(gd.Te(t),t.length<3)throw new Error("expected 3 elements");Td.Ao(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.hU().Uo(Td)||(i.oU(Td),s.LB().mB())}get rU(){const t=this.#s.hU();return[t.No(),t.Bo(),t.$o()]}set XD(t){gd.ue(t);const s=xd.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.FM(s),i.LB().mB()}get XD(){return _d.get(this.#s.cj())}aU(){this.#s.lU()}uU(){this.#s.cU()}fU(t){gd.Be(t,Sd);const s=this.#t,i=s.LB().uV(t);if(!i)throw new Error("invalid layer");s.aB().dU(i)}pU(t,i){gd.Be(t,s),this.#s.mU(vd.get(t),i)}get zIndex(){return this.#s.uB()}get gU(){return this.#s.yU()}set gU(t){this.#s.SU(!!t)}_l(t,s){return gd.se(t),gd.se(s),this.#s.wU(+t,+s)}e$(t){gd.Be(t,s);const i=this.#t,e=vd.get(t);return i.LB().fL().n$(i,e)}h$(){const t=this.#t,s=t.LB().fL().o$(t);return s?s.nB():null}getParent(){const t=this.#t.bU();return t?t.nB():null}vU(){const t=this.#t.MU();return t?t.nB():null}*xU(){for(const t of this.#t.xU())yield t.nB()}_U(){return this.#t.TU()}GU(t){const s=this.#t.CU(t);return s?s.nB():null}*children(){for(const t of this.#t.children())yield t.nB()}*IU(){for(const t of this.#t.IU())yield t.nB()}PU(t,i){gd.Be(t,s),gd.Se(i),i||(i={});const e=this.#t,n=vd.get(t);e.AU(n,i)}removeChild(t){gd.Be(t,s);const i=this.#t,e=vd.get(t);i.RU(e)}EU(){const t=this.#t;t.OU()&&t.bU().RU(t)}FU(){const t=this.#s;return{DU:t.kU(),LU:t.NU(),BU:t.$U(),WU:t.VU(),jU:t.HU(),UU:t.JU(),zU:t.qU(),YU:t.XU(),ZU:t.KU()}}QU(t,s){gd.he(t),gd.he(s),this.#s.tJ(t,s)}sJ(){const t=this.#s;t.iJ(),t.NH()}eJ(t,s,i){gd.he(t),gd.he(s),gd.ye(i);const e=this.#s;e.nJ(t,s,i)&&e.NH()}rJ(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.hJ()){const a=o.oJ().Nx(t,s);null!==a&&(i=a.UM(),e=a.qM(),n=a.XM(),r=a.KM(),h=a.tx())}return{x:i,y:e,ij:n,aJ:r,lJ:h}}uJ(){const t=this.#s;if(!t.hJ())return[0,0];const s=t.oJ();return[s.Cx(),s.Ix()]}}};MakeIWorldInstanceClass=pd;const md=self.Cs,gd=self.Ns,yd=self.Gj,Sd=self.lV,wd=md.Un(md.Rect),bd=md.Un(md.Il),vd=new WeakMap,Md=md.Is(),xd=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),_d=new Map([...xd.entries()].map((t=>[t[1],t[0]]))),Td=md.Un(md._o);self.cJ=pd(self.Gj),self.fJ=pd(self.sH)}{const Gd=self.Cs,Cd=self.Ns;self.dJ=class extends self.cJ{#t;constructor(){super(),this.#t=self.Gj.Aj()}pJ(){return this.#t.gJ().mJ()}focus(){this.#t.gJ().yJ()}blur(){this.#t.gJ().SJ()}wJ(t,s){Cd.ue(t),this.#t.gJ().bJ(t,s)}}}{let Id=function(t){let s=Rd.get(t);return s||(s=Pd.Un(Pd.Event.Sf),Rd.set(t,s),s)};GetDispatcher=Id;const Pd=self.Cs,Ad=self.Ns,Rd=new WeakMap,Ed=Pd.Is();self.vJ=class{#t;constructor(){const t=Pd.j$.V$(Ed);this.#t=t;const s={runtime:{value:t.LB().H$(),writable:!1},behavior:{value:t.xJ().MJ(),writable:!1},_J:{value:t.GJ().TJ(),writable:!1}};Object.defineProperties(this,s),t.LB().aW(this,t)}static Aj(){return Pd.j$.Rj()}get CJ(){return this.#t.IJ().nB()}Ej(){const t=Rd.get(this);t&&(t.Jn(),Rd.delete(this))}addEventListener(t,s,i){Ad.ue(t),Ad.Ee(s),Id(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ad.ue(t),Ad.Ee(s),Id(this).removeEventListener(t,s,i)}dispatchEvent(t){Id(this).dispatchEvent(t)}}}{const Od=self.Cs,Fd=self.Ns,Dd=Od.Is();self.PJ=class{constructor(){const t=Od.j$.V$(Dd),s={runtime:{value:t.LB().H$(),writable:!1},behavior:{value:t.xJ().MJ(),writable:!1},name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{const kd=self.Cs,Ld=self.Ns,Nd=kd.Is();self.AJ=class{#s;constructor(){const t=kd.j$.V$(Nd);this.#s=t;const s={runtime:{value:t.LB().H$(),writable:!1},id:{value:t.U$(),writable:!1}};Object.defineProperties(this,s),t.LB().aW(this,t)}bW(){return this.#s.RW().map((t=>t.nB()))}static lW(t){if(!t)return null;const s=kd.j$.RJ(t);return s?s.MJ():null}}}{const Bd=self.Cs,$d=self.Ns,Wd=Bd.Un(Bd._o);self.JW=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.UW()[this.index].Pc()}get isActive(){return this.#t.EJ(this.index)}set isActive(t){t=!!t;const s=this.#t;s.EJ(this.index)!==t&&(s.OJ(this.index,t),s.FJ(),s.LB().mB())}setParameter(t,s){$d.he(t),t=Math.floor(+t);const i=this.#t,e=i.DJ(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Bd._o){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Wd.Ao(s[0],s[1],s[2]),s=Wd}else if("number"!=typeof s)throw new TypeError("expected number");i.kJ(this.index,t,s)&&i.EJ(this.index)&&i.LB().mB()}getParameter(t){$d.he(t),t=Math.floor(+t);const s=this.#t.DJ(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof Bd._o?[s.No(),s.Bo(),s.$o()]:s}}}{const Vd=self.Cs,jd=self.Ns;self.LJ=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1}})}get speed(){return this.#t.NJ()}get BJ(){return this.#t.$J()}get WJ(){return this.#t.VJ()}get jJ(){return this.#t.HJ()}get UJ(){return this.#t.JJ()}get frameCount(){return this.#t.zJ()}qJ(){return this.#t.YJ().map((t=>t.XJ()))}*frames(){for(const t of this.#t.YJ())yield t.XJ()}}}{const Hd=self.Cs,Ud=self.Ns;self.DB=class{#s;constructor(t){this.#s=t}static OB(t){return t.#s}get width(){return this.#s.Vg()}get height(){return this.#s.Kg()}getSize(){const t=this.#s;return[t.Vg(),t.Kg()]}ZJ(t){return t.KJ(this)}QJ(){return this.#s.sR().il()}}}{const Jd=self.Cs,zd=self.Ns;self.tz=class extends self.DB{#s;constructor(t){super(t.sz()),this.#s=t,Object.defineProperties(this,{duration:{value:t.iz(),writable:!1},VH:{value:t.jH(),writable:!1},UH:{value:t.JH(),writable:!1}})}YH(){const t=this.#s;return[t.jH(),t.JH()]}ez(){return this.#s.nz()}rz(t){return this.hz(t)[0]}oz(t){return this.hz(t)[1]}hz(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.az(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.lz(t)}return i?[i.UM(),i.qM()]:this.YH()}uz(){const t=this.#s.cz();return t?t.pu():0}fz(t){return this.dz(t)[0]}pz(t){return this.dz(t)[1]}dz(t){zd.he(t),t=Math.floor(t);const s=this.#s.cz();if(!s||t<0||t>=s.pu())return[0,0];const i=s.du();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.mz()}}}{let qd=function(t){const s=Zd.get(t);if(s.gz())throw new Error("timeline/tween was released and is no longer valid");return s};GetTimelineState=qd;const Yd=self.Cs,Xd=self.Ns,Zd=new WeakMap;self.yz=class{constructor(t){Zd.set(this,t),t.LB().aW(this,t)}pause(){qd(this).Sz()}resume(){qd(this).wz()}stop(){qd(this).Bf()}qj(t){return qd(this).bz(t)}set time(t){Xd.he(t),qd(this).vz(t)}get time(){return qd(this).AF()}set totalTime(t){Xd.he(t),qd(this).Mz(t)}get totalTime(){return qd(this).xz()}set BJ(t){qd(this)._z(!!t)}get BJ(){return qd(this).Tz()}set UJ(t){qd(this).Gz(!!t)}get UJ(){return qd(this).Cz()}set playbackRate(t){Xd.he(t),qd(this).Iz(t)}get playbackRate(){return qd(this).Pz()}get progress(){const t=qd(this);return t.AF()/t.xz()}get tags(){return qd(this).Az()}get finished(){return qd(this).Rz()}get Ez(){return qd(this).IsPlaying()}get Oz(){return qd(this).Fz()}get Dz(){return Zd.get(this).gz()}}}{let Kd=function(t){const s=sp.get(t);if(s.gz())throw new Error("timeline was released and is no longer valid");return s};GetTimelineState=Kd;const Qd=self.Cs,tp=self.Ns,sp=new WeakMap;let ip=null;self.kz=class extends self.yz{constructor(t){super(t),sp.set(this,t);const s={name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{let ep=function(t){const s=hp.get(t);if(s.gz())throw new Error("tween was released and is no longer valid");return s};GetTweenState=ep;const np=self.Cs,rp=self.Ns,hp=new WeakMap,op=new WeakMap;let ap=null;self.Lz=class extends self.yz{constructor(t,s,i){super(t),ap||(ap=i.Nz),hp.set(this,t),s&&op.set(this,s)}stop(){const t=ep(this);op.get(this).Bz(t)}$z(t){rp.ue(t);const s=self.Vu.oc(ap(t));ep(this).Wz(s)}get CJ(){const t=ep(this).Vz();return t?t.nB():null}get jz(){return ep(this).Uz()}set jz(t){ep(this).Jz(!!t)}get value(){const t=ep(this);if("value"!==t.zz())throw new Error("not a value tween");return t.Yz("value").qz()}}}{const lp=self.Cs,up=self.Ns;self.Xz=class extends self.W${constructor(){super()}}}{const cp=self.Cs,fp=self.Ns,dp=cp.Is();self.Zz=class extends self.Xz{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=cp.j$.V$(dp),!t?.iH)throw new Error("no DOM component ID specified");this.#i=t.iH,this.Kz("elem-focused",(t=>t.Qz())),this.Kz("elem-blurred",(t=>{t&&t.tq()}))}sq(t){const s=this.#s++;return this.#r.set(s,t),s}iq(t){this.#r.delete(t)}Kz(t,s){this.#t.LB().fH(this.#i,t,(t=>{const i=this.#r.get(t.elementId);s(i,t)}))}eq(t){fp.Te(t);for(const[s,i]of t)this.eq(s,i)}}}{const pp=self.Cs,mp=self.Ns,gp=new WeakMap,yp=pp.Is();self.nq=class extends self.yW{#t;constructor(){super(),this.#t=pp.j$.V$(yp)}rq(){}hq(){return this.#t.sz().oq()}aq(t){}lq(t){}uq(){}cq(t){}}}{const Sp=self.Cs,wp=self.Ns,bp=new WeakMap,vp=Sp.Is();self.fq=class extends self.fJ{#t;#n=null;#s=null;constructor(t){super(t),this.#t=Sp.j$.V$(vp)}Ej(){if(super.Ej(),this.#n){const t=this.#t.LB().Sf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}pq(){if(this.#n)return;this.#n=()=>this.mq(),this.#s=()=>this.gq();const t=this.#t.LB().Sf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}mq(){}gq(){}yq(t){}}}{const Mp=self.Cs,xp=self.Ns,_p=Mp.Un(Mp.Rect),Tp=new WeakMap,Gp=Mp.Is();self.Sq=class extends self.fq{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=Mp.Un(Mp.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.iH)throw new Error("no DOM component ID specified");super(t);const s=Mp.j$.V$(Gp);Tp.set(this,s),this.#t=this.SW.sq(this);const i=s.LB().xB();this.#o=i.wq(),this.#a=i.bq(),this.nH(!0)}Ej(){super.Ej(),this.SW.iq(this.#t),this.vq("destroy"),this.#t=-1,Tp.delete(this)}Mq(){if(Tp.get(this).LB().xL())throw new Error("not valid in worker mode");return this.xq("get-element")}vq(t,s){s||(s={}),s.elementId=this.#t,this.pH(t,s)}xq(t,s){return s||(s={}),s.elementId=this.#t,this.gH(t,s)}_q(t,s){return s||(s={}),s.elementId=this.#t,this.mH(t,s)}Tq(t){t||(t={});const s=Tp.get(this).aB();t.elementId=this.#t,t.isVisible=s.DV(),t.htmlIndex=s.lB().Gq(),t.htmlZIndex=s.Cq(),Object.assign(t,this.Iq()),this.#s=!!t.isVisible,this.gH("create",t),this.Pq(!0)}Aq(t){t=!!t,this.#s!==t&&(this.#s=t,this.vq("set-visible",{isVisible:t}))}wH(){this.Pq(!1)}Rq(){const t=Tp.get(this).LB().xB().Eq();return"Android"===Mp.Ks.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}Pq(t){const s=Tp.get(this);if(s.Oq())return;const i=s.aB(),e=i.lB(),n=i.tU();let[r,h]=e.wj(n.Ka(),n.Qa()),[o,a]=e.wj(n.tl(),n.sl());const l=s.LB().xB(),u=l.R$(),c=l.O$();if(!i.DV()||!e.DV())return void this.Aq(!1);if(!this.Rq()&&(o<=0||a<=0||r>=u||h>=c))return void this.Aq(!1);_p.set(r,h,o,a);const f=l.wq(),d=l.bq(),p=e.Gq(),m=i.Cq();if(!t&&_p.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.Aq(!0);this.#h.S(_p),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.Aq(!0);let g=null;this.#e&&(g=e.Fq()+this.#i),this.vq("update-position",{left:Math.round(this.#h.Ka()),top:Math.round(this.#h.Qa()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}Dq(){this.xq("focus",{focus:!0})}kq(){this.xq("focus",{focus:!1})}Qz(){this.#r=!0}tq(){this.#r=!1}Lq(){return this.#r}Nq(t,s){this.Bq("set-css-style",{prop:Mp.vo(t),val:s})}$q(t,s){this.Bq("set-attribute",{name:t,val:s})}Wq(t){this.Bq("remove-attribute",{name:t})}Vq(){this.#c||(this.#c=!0,Promise.resolve().then((()=>{this.#c=!1,this.vq("update-state",this.Iq())})))}Iq(){}jq(){return this.#t}}}{const Cp=self.Cs,Ip=self.Ns;self.Hq=class extends self.AJ{constructor(){super()}}}{const Pp=self.Cs,Ap=self.Ns;self.Uq=class extends globalThis.PJ{constructor(){super()}rq(){}}}{const Rp=self.Cs,Ep=self.Ns,Op=new WeakMap,Fp=Rp.Is();self.Jq=class extends self.vJ{#e=!1;#s=!1;#t=!1;constructor(){super(),Op.set(this,Rp.j$.V$(Fp))}Ej(){super.Ej(),this.nH(!1),this.rH(!1),this.zq(!1),Op.delete(this)}hH(){return Rp.j$.oH()}qq(){}aH(t){const s=Op.get(this);s.LB().lH(t,s.IJ(),s.GJ())}uH(t){const s=Op.get(this);return s.LB().TB(t,s.IJ(),s.GJ())}nH(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=Op.get(this).LB();t?s.Yq(this):s.Xq(this)}vH(){return this.#e}wH(){}rH(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Op.get(this).LB();t?s.Zq(this):s.Kq(this)}xH(){return this.#s}MH(){}zq(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Op.get(this).LB();t?s.Qq(this):s.tY(this)}sY(){return this.#t}iY(){}_H(){return[]}TH(){return null}GH(t){}}}{const Dp=self.Cs,kp=self.Ns;let Lp=null;self.FL=class{constructor(t){Lp=t}bB(t){Lp.vB(t)}OH(t,s,i){kp.ue(t),kp.ue(s),kp.Ge(i),Lp.eY(t,s,i)}DH(t,s,i){return kp.ue(t),kp.ue(s),kp.Ge(i),Lp.nY(t,s,i)}rY(t){return kp.ce(t),new self.hY(Lp,t)}set oY(t){Lp.aY(!!t)}get oY(){return Lp.lY()}uY(t){Lp.cY(!!t)}fY(t){kp.se(t);const s=Lp.dY(t);return s?s.dW():null}}}{const Np=self.Cs,Bp=self.Ns;self.hY=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.BL(),e=t.UL();this.#s=e,this.#h=e.pY();const n=t.KL();this.#i=n.mY(),this.#r=n.gY(e);const r=i.yY().gY();this.#n=r,s&&r.SY(s),t.wY(!1)}bY(){const t=this.#t.BL(),s=this.#h,i=this.#n;t.vY(s),this.#s.MY(this.#i,this.#r),t.xY(s),i._Y(i.nL()+1)}get TY(){return this.#n.GY()}release(){const t=this.#t,s=t.KL(),i=t.BL().yY();t.wY(!0),i.CY(),s.CY()}}}{const $p=self.Cs,Wp=self.Ns;let Vp=null,jp=null;self.IY=class{constructor(t,s){jp=t,Vp=s}PY(){Vp.uO()}AY(t){Vp.aO(t)}RY(){Vp.gb()}EY(){Vp.lb()}OY(){Vp._b()}setColor(t){Vp.iO(t[0],t[1],t[2],t[3])}FY(t,s,i,e){Vp.iO(t,s,i,e)}DY(){Vp.nO()}kY(t){Vp.eO(t)}LY(t){Vp.Ub(t)}NY(){Vp.Jb()}rect(t){Vp.dO(t.left,t.top,t.right,t.bottom)}BY(t,s,i,e){Vp.dO(t,s,i,e)}$Y(t){Vp.Il($p.Il.zl(t))}WY(t,s,i,e,n,r,h,o){Vp.Av(t,s,i,e,n,r,h,o)}VY(t,s){Vp.ev($p.Il.zl(t),$p.Rect.el(s))}jY(t,s){Vp.gO($p.Il.zl(t),$p.Il.zl(s))}HY(t,s,i,e,n,r,h,o,a,l,u,c,f){Vp.yO(t,s,i,e,n,r,h,o,a,l,u,c,$p.Rect.el(f))}UY(t,s,i,e,n,r,h,o,a,l,u,c,f){Vp.Zb(t,s,i,e,n,r,h,o,a,l,u,c,$p.Il.zl(f))}JY(t,s,i){Vp.SO(t,s,i)}zY(t){Vp.Pv(t)}line(t,s,i,e){Vp.ey(t,s,i,e)}qY(t,s,i,e,n,r){Vp.Kb(t,s,i,e,n,r)}YY(t,s,i,e){Vp.nv(t,s,i,e)}XY(t){Vp.av($p.Rect.el(t))}ZY(t){Vp.lv($p.Il.zl(t))}KY(t){Vp.mv(t)}QY(){Vp.gv()}tX(t){Vp.bv(t)}sX(){Vp._v()}iX(t){Wp.$e(t,self.eX);const s=t?jp.uV(t):null;Vp.hO(s)}nX(t,s){const i=self.DB.OB(t);if(!i)throw new Error("invalid IImageInfo");return i.rX(Vp,{Yx:s?.Yx??"clamp-to-edge",Xx:s?.Xx??"clamp-to-edge",Zx:s?.Zx??"trilinear",t_:s?.t_??!0})}hX(t){const s=self.DB.OB(t);if(!s)throw new Error("invalid IImageInfo");s.JP()}KJ(t){const s=self.DB.OB(t);if(!s)throw new Error("invalid IImageInfo");const i=s.fT();return self.eX.oX(jp,i)}aX(t,s,i){Wp.he(t),Wp.he(s);const e=Vp.iT(t,s,{Yx:i?.Yx??"clamp-to-edge",Xx:i?.Xx??"clamp-to-edge",Zx:i?.Zx??"trilinear",t_:i?.t_??!0});return self.eX.oX(jp,e)}lX(t,s,i){Wp.Be(s,self.eX);const e=jp.uV(s);Vp.tR(t,e,{i_:i?.i_??!0})}deleteTexture(t){Wp.Be(t,self.eX);const s=jp.uV(t);Vp.hT(s)}uX(){const t=Vp.Uv();return new self.cX(jp,t)}fX(){jp.xB().dX(Vp)}pX(t){Wp.Be(t,globalThis.lV),jp.uV(t).mX(Vp)}}}{const Hp=self.Cs,Up=self.Ns,Jp=new WeakMap,zp=new WeakMap;self.eX=class{constructor(t,s){Jp.set(this,{runtime:t,texture:s}),zp.set(s,this),t.aW(this,s),Object.defineProperties(this,{width:{value:s.Vg(),writable:!1},height:{value:s.Kg(),writable:!1}})}static oX(t,s){if(!s)return null;return zp.get(s)||new self.eX(t,s)}}}{let qp=function(t){return Zp.get(t).gX};getActual=qp;const Yp=self.Cs,Xp=self.Ns,Zp=new WeakMap;self.cX=class{constructor(t,s){Zp.set(this,{runtime:t,gX:s}),t.aW(this,s)}release(){qp(this).Jn()}set yX(t){Xp.ue(t),qp(this).tA(t)}get yX(){return qp(this).eP()}set SX(t){Xp.he(t),qp(this).sA(t)}get SX(){return qp(this).iA()}set lineHeight(t){Xp.he(t),qp(this).nA(t)}get lineHeight(){return qp(this).rA()}set wX(t){qp(this).hA(t)}get wX(){return qp(this).oA()}set bX(t){qp(this).aA(t)}get bX(){return qp(this).lA()}setColor(t){Xp.Te(t),this.vX(t[0],t[1],t[2])}vX(t,s,i){qp(this).pA(t,s,i)}MX(t){Xp.ue(t),qp(this).DM(t)}set xX(t){qp(this).mA(t)}get xX(){return qp(this).gA()}set verticalAlign(t){qp(this).yA(t)}get verticalAlign(){return qp(this).SA()}set _X(t){qp(this).wA(t)}get _X(){return qp(this).bA()}set TX(t){qp(this).vA(t)}get TX(){return qp(this).MA()}set text(t){Xp.ue(t),qp(this).Vc(t)}get text(){return qp(this).xA()}zW(t,s,i){Xp.he(t),Xp.he(s),Xp.he(i),qp(this)._A(t,s,i)}ZJ(){const{runtime:t,gX:s}=Zp.get(this),i=s.fT();return self.eX.oX(t,i)}QJ(){return qp(this).sR().il()}GX(t){Xp.Ee(t),qp(this).qP=t}CX(){qp(this).JP()}get IX(){return qp(this).GA()}get PX(){return qp(this).IA()}}}{let Kp=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return im.get(i)||""},Qp=function(t){return new Promise(((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)}))};GetTypeFromFileExtension=Kp,AddScript=Qp;const tm=self.Cs,sm=new Set(["local","remote"]),im=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);tm.AX=class extends tm.jn{constructor(t,s){super();const i=s.exportType;this.Nc=t,this.RX="folders",this.EX=new Map,this.OX="cordova"===i,this.FX=!!s.isiOSCordova,this.DX=!!s.isFileProtocol,this.kX=s.swClientId,this.LX=s.supportedAudioFormats||{},this.NX=new Map,this.BX=!1,this.$X=s.scriptFolder,this.WX="",this.VX="",this.jX="",this.HX=s.fileMap||new Map,this.UX=new Map;const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.JX=e?"remote":"local",this.zX=new Map,this.qX=[],this.YX=[],this.XX=!1,this.ZX=0,this.KX=0,this.QX=0,this.tZ=!1,this.sZ=tm.Un(tm.Qd,(()=>this.iZ()),50),this.eZ=tm.Un(tm.Hd,Math.max(tm.hardwareConcurrency,8)),this.nZ=tm.Un(tm.Hd,20),this.rZ=new self.AB(this)}Jn(){for(const t of this.zX.values())t.Jn();this.zX.clear(),tm.bh(this.YX),this.Nc=null}LB(){return this.Nc}hZ(t){this.RX=t}UB(){return this.RX}oZ(){return this.$X}aZ(t){this.WX=t}qB(){return this.WX}lZ(t){this.VX=t}uZ(){return this.VX}cZ(t){this.jX=t}fZ(){return this.jX}dZ(){return this.DX}no(t,s){return s=s||this.JX,tm.Kh(t)?("flat"===this.RX&&(t=t.toLowerCase()),this.OX&&this.DX?this.pZ(t):"playable-ad-single-file"===this.Nc.b$()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.eZ.Bu((()=>tm.no(t))):this.nZ.Bu((()=>tm.no(t)))):tm.no(t)}ro(t){return tm.Kh(t)?("flat"===this.RX&&(t=t.toLowerCase()),this.OX&&this.DX?this.mZ(t):"playable-ad-single-file"===this.Nc.b$()?tm.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.JX?this.eZ.Bu((()=>tm.ro(t))):this.nZ.Bu((()=>tm.ro(t)))):tm.ro(t)}io(t){return tm.Kh(t)?("flat"===this.RX&&(t=t.toLowerCase()),this.OX&&this.DX?this.gZ(t):"playable-ad-single-file"===this.Nc.b$()?tm.ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.JX?this.eZ.Bu((()=>tm.io(t))):this.nZ.Bu((()=>tm.io(t)))):tm.io(t)}async eo(t){const s=await this.io(t);return JSON.parse(s)}yZ(t,s){return"flat"===this.RX&&(t=t.toLowerCase()),this.Nc.yB("runtime","cordova-fetch-local-file",{filename:t,as:s})}gZ(t){return this.yZ(t,"text")}async pZ(t){const s=await this.yZ(t,"buffer"),i=Kp(t);return new Blob([s],{type:i})}async SZ(t){"flat"===this.RX&&(t=t.toLowerCase());let s=this.EX.get(t);if(s)return s;const i=await this.pZ(t);return s=URL.createObjectURL(i),this.EX.set(t,s),s}mZ(t){return this.yZ(t,"buffer")}JB(t){"flat"===this.RX&&(t=t.toLowerCase());let s=this.WX+t;return"Gecko"===tm.Ks.ni&&"preview"===this.Nc.b$()&&(s=this.wZ(s)),s}jB(t){return tm.Zh(t)?Promise.resolve(t):this.OX&&this.DX?this.SZ(t):"playable-ad-single-file"===this.Nc.b$()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.RX&&(t=t.toLowerCase()),Promise.resolve(t))}bZ(t){if(tm.Zh(t)||"preview"!==this.Nc.b$()||!this.kX||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.kX),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}vZ(t){return this.jB(t)}MZ(t){if(t.xZ&&!sm.has(t.xZ))throw new Error("invalid load policy");let s=this.zX.get(t.url);return s||(s=tm.Un(tm._Z,this,{url:t.url,size:t.size||0,xZ:t.xZ||this.JX}),this.zX.set(s.TZ(),s),this.XX||(this.ZX+=s.Ou(),this.YX.push(s.GZ().then((()=>this.CZ(s.Ou()))))),s)}IZ(t){this.zX.delete(t.TZ())}async PZ(){try{await Promise.all(this.YX),this.QX=1}catch(t){console.error("Error loading: ",t),this.tZ=!0,this.iZ()}}AZ(){this.XX=!0}RZ(){return this.tZ}CZ(t){this.KX+=t,this.sZ.pp()}iZ(){const t=tm.Un(tm.Event,"loadingprogress");this.QX=tm.Zn(this.KX/this.ZX,0,1),t.progress=this.QX,this.Nc.Sf().dispatchEvent(t)}kN(){return this.QX}NN(){return this.Nc.OZ().EZ()}FZ(t){tm.Th(this.qX,t),this.qX.length&&this.YX.push(this.DZ())}async DZ(){const t=[],s=[];for(const[i,e,n]of this.qX)this.ZX+=n,t.push(this.kZ(i,e,s).then((()=>this.CZ(n))));await Promise.all(t),this.Nc.xL()&&s.length>0&&await this.Nc.yB("runtime","load-webfonts",{webfonts:s})}async kZ(t,s,i){try{let e=await this.jB(s);"Gecko"===tm.Ks.ni&&(t=`'${t}'`),("Gecko"===tm.Ks.ni&&"preview"===this.Nc.b$()||"playable-ad-single-file"===this.Nc.b$())&&(e=this.wZ(e));const n=new FontFace(t,`url('${e}')`);this.Nc.xL()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.Nc.xL()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}LZ(t){return!!this.LX[t]}NZ(t,s){this.BX=!!s;for(const[s,i,e]of t)this.NX.set(s,{fileName:s,BZ:i.map((t=>({type:t[0],$Z:t[1],fullName:s+t[1],fileSize:t[2]}))),WZ:e})}VZ(t){"flat"===this.RX&&(t=t.toLowerCase());const s=this.NX.get(t);if(!s)return null;let i=null;for(const t of s.BZ)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.LZ(t.type))return t;return i}jZ(t){const s=this.VZ(t);return s?{url:this.JB(s.fullName),type:s.type}:null}HZ(){if(this.BX){const t=[];for(const s of this.NX.values()){if(s.WZ)continue;const i=this.VZ(s.fileName);i&&t.push({UZ:s.fileName,url:this.JB(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}JZ(t){return"preview"===this.Nc.b$()&&(t=new URL(t,location.href).toString()),this.HX.get(t)||null}wZ(t){let s=this.UX.get(t);if(s)return s;const i=this.JZ(t);return i?(s=URL.createObjectURL(i),this.UX.set(t,s),s):t}aL(){return this.rZ}async ZB(...t){const s=await Promise.all(t.map((t=>this.jB(t))));if(this.Nc.xL())if(1===t.length){const s=t[0];await import((tm.Kh(s)?"./":"")+s)}else{const s=t.map((t=>`import "${tm.Kh(t)?"./":""}${t}";`)).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map((t=>Qp(t))))}async QB(t){if(WebAssembly.compileStreaming){const s=await this.jB(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await tm.ro(t);return await WebAssembly.compile(s)}}async s$(t){const s=await this.jB(t);return await this.Nc.yB("runtime","add-stylesheet",{url:s})}}}{const em=self.Cs;em.zZ=class extends em.jn{constructor(t,s){super(),this.qZ=t,this.Nc=t.LB(),this.YZ=s.url||"",this.XZ=s.size,this.ZZ=s.xZ,this.KZ=s.blob||null,this.QZ=!!this.KZ,this.SS=null}Jn(){this.SS=null,this.qZ=null,this.Nc=null,this.KZ=null}TZ(){return this.YZ}Ou(){return this.XZ}GZ(){return"local"===this.ZZ||this.KZ?(this.QZ=!0,Promise.resolve()):(this.SS||(this.SS=this.qZ.no(this.YZ,this.ZZ).then((t=>(this.QZ=!0,this.SS=null,this.KZ=t,t))).catch((t=>{console.error("Error loading resource: ",t),this.SS=null}))),this.SS)}tK(){return this.QZ}sK(){return this.KZ?Promise.resolve(this.KZ):this.SS?this.SS:this.qZ.no(this.YZ,this.ZZ)}}}{const nm=self.Cs,rm=new nm.Hd,hm=new Set;nm._Z=class extends nm.zZ{constructor(t,s){super(t,s),this.iK=null,this.eK=null,this.Hp=0,this.nK=-1,this.rK=-1,hm.add(this)}Jn(){if(0!==this.Hp)throw new Error("released image asset which still has texture references");this.qZ.IZ(this),this.iK=null,hm.delete(this),super.Jn()}static hK(){for(const t of hm)t.iK=null,t.eK=null,t.Hp=0}rX(t,s){return s=s||{},this.Hp++,this.eK?Promise.resolve(this.eK):(this.iK||(s.Kx=this.Nc.xB().oK(),this.iK=this.aK(t,s)),this.iK)}async aK(t,s){try{const i=await this.sK();return 0===this.Hp?(this.iK=null,null):await rm.Bu((async()=>{const e=await t.jO(i,s);return this.iK=null,0===this.Hp?(t.hT(e),null):(this.eK=e,this.nK=e.Vg(),this.rK=e.Kg(),this.eK)}))}catch(t){throw console.error("Failed to load texture: ",t),t}}JP(){if(this.Hp<=0)throw new Error("texture released too many times");this.Hp--,0===this.Hp&&this.eK&&(this.eK.pM().hT(this.eK),this.eK=null)}lK(){return this.Hp}fT(){return this.eK}Vg(){return this.nK}Kg(){return this.rK}async uK(){const t=await this.sK();return nm.Ri.ImageBitmap?await createImageBitmap(t):await nm.uo(t)}}}{let om=function(t,s){return t.aB().cK()-s.aB().cK()};SortByInstLastCachedZIndex=om;const am=self.Cs,lm=self.assert;am.fK=class extends am.jn{constructor(t,s,i){super(),this.dK=t,this.Pa=s,this.Aa=i,this.pK=[],this.mK=!0,this.gK=new Set,this.yK=!1}Jn(){am.bh(this.pK),this.gK.clear(),this.dK=null}Bf(){am.bh(this.pK),this.mK=!0,this.gK.clear(),this.yK=!1}SK(){this.mK=!1}Au(){return!this.pK.length||!(this.pK.length>this.gK.size)&&(this.wK(),!0)}bK(t){if(this.gK.has(t))return this.gK.delete(t),void(0===this.gK.size&&(this.yK=!1));this.pK.push(t),this.mK=1===this.pK.length}Zf(t){this.gK.add(t),this.yK=!0,this.gK.size>=50&&this.wK()}wK(){this.yK&&(this.pK.length!==this.gK.size?(am.Ah(this.pK,this.gK),this.gK.clear(),this.yK=!1):this.Bf())}vK(){this.mK||(this.pK.sort(om),this.mK=!0)}MK(t){this.wK(),this.vK(),this.pK.length&&t.push(this.pK)}}}{const um=self.Cs;um.xK=class extends um.jn{constructor(t,s){super(),this._K=t,this.TK=s,this.GK=um.Un(um.Cu)}Jn(){this.GK.Jn(),this.GK=null}CK(t,s,i){let e=this.GK.Js(t,s);return e||(i?(e=um.Un(um.fK,this,t,s),this.GK.Set(t,s,e),e):null)}IK(t){return Math.floor(t/this._K)}PK(t){return Math.floor(t/this.TK)}AK(t,s,i){if(s)for(let e=s.Ka(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i._l(e,n))continue;const s=this.CK(e,n,!1);s&&(s.Zf(t),s.Au()&&this.GK.Ru(e,n))}if(i)for(let e=i.Ka(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s._l(e,n)||this.CK(e,n,!0).bK(t)}RK(t,s){let i=this.IK(t.Ka());const e=this.PK(t.Qa()),n=this.IK(t.tl()),r=this.PK(t.sl());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.CK(i,t,!1);e&&e.MK(s)}}EK(t){let s=t.Ka();const i=t.Qa(),e=t.tl(),n=t.sl();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.CK(s,t,!1);i&&i.SK()}}}}{let cm=function(t,s){return t.aB().cK()-s.aB().cK()},fm=function(t,s){return t.aB().XM()-s.aB().XM()};SortByInstLastCachedZIndex=cm,SortByInstZElevation=fm;const dm=self.Cs,pm=self.assert,mm=new dm.Rect,gm=new dm.Il,ym=[],Sm=new dm.Rect,wm=new dm.Rect,bm=self.ls,vm=bm.Ss,Mm=bm.ws,xm=bm.ds,_m=xm.create(),Tm=vm.create(),Gm=Mm.create(),Cm=vm.create(),Im=vm.create(),Pm=vm.create(),Am=dm.Un(dm.Ia),Rm=dm.Un(dm.Rect),Em=[],Om=[],Fm=[],Dm={name:"",FK:-1,DK:!1,isVisible:!0,kV:!0,BV:!1,backgroundColor:[1,1,1,1],rj:!0,kK:[1,1],opacity:1,aj:!1,LK:!1,NK:!1,BK:!1,JV:1,XD:0,ij:0,$K:[],WK:[],VK:[]};dm.jK=class extends dm.jn{constructor(t,s,i){super(),i=Object.assign({},Dm,i),this.HK=t,this.Nc=t.LB(),this.UK=s,this.Yn=i.name,this.IS=-1,this.JK=!!i.BV,this.zK=-1,this.qK=i.FK,this.YK=!!i.DK,this.XK=!!i.isVisible,this.ZK=!!i.kV,this.KK=dm.Un(dm._o),this.KK.Sa(i.backgroundColor),this.QK=!!i.rj,this.tQ=i.kK[0],this.sQ=i.kK[1],this.RM=dm.Un(dm._o,1,1,1,i.opacity),this.iQ=dm.Un(dm._o),this.eQ=!!i.aj,this.nQ=!!i.LK,this.rQ=!!i.NK,this.hQ=!!i.BK,this.oQ=i.JV,this.AM=i.XD,this.aQ=null,this.lQ=1,this.EM=i.ij,this.uQ=0,this.cQ=0,this.fQ=0,this.dQ=!1,this.$R=dm.Un(dm.Rect),this.pQ=dm.Un(dm.Rect),this.mQ=dm.Un(dm.Rect),this.gQ=!0,this.X_=xm.create(),this.yQ=!0,this.FD=xm.create(),this.SQ=!0,this.wQ=dm.Un(dm.DS.BS),this.bQ=!0,this.vQ=[],this.MQ=i.$K,this.xQ=[],this._Q=[],this.TQ=new Map,this.pK=[],this.GQ=!1,this.CQ=!1,this.IQ=!1;const e=this.Nc.xB();this.PQ=dm.Un(dm.AQ,this,i.WK),this.tL=dm.Un(dm.DS.jF,e.RQ(),{EF:(t,s)=>{const i=s.Jk(),n=i.BO();t.DM(i.EQ()),t.zO(n),t.qO(n),e.OQ(n)},FF:t=>this.HW().FQ(t)}),this.DQ=!0,this.kQ=!0,this.LQ=null,this.NQ=[],this.BQ=!1,this.$Q=dm.Un(dm.Rect,0,0,-1,-1),this.WQ=dm.Un(dm.Rect,0,0,-1,-1),this.VQ=new self.lV(this),this.jQ(),this.HQ()&&(this.LQ=dm.Un(dm.xK,this.Nc.TL(),this.Nc.CL())),this.UQ=i.VK.map((t=>dm.jK.JQ(this.HK,this,t)))}zQ(){for(const t of this.MQ){const s=this.Nc.qQ(t[1]);this.HK.YQ(s),s.XQ()||(s.ZQ(t),s.KQ(this.IS)),this.xQ.push(t),this.TQ.set(t[2],t)}dm.Th(this.vQ,this.xQ),this.MQ=null}static JQ(t,s,i){return dm.Un(dm.jK,t,s,{name:i[0],FK:i[2],isVisible:i[3],kV:i[13],BV:i[19],backgroundColor:i[4].map((t=>t/255)),rj:i[5],kK:[i[6],i[7]],opacity:i[8],aj:i[9],LK:i[17],NK:i[18],BK:i[10],JV:i[11],XD:i[12],ij:i[16],$K:i[14],WK:i[15],VK:i[20]})}Jn(){for(const t of this.UQ)t.Jn();dm.bh(this.UQ);for(const t of this.pK)this.Nc.Oj(t);dm.bh(this.pK),this.PQ.Jn(),this.PQ=null,this.tL.Jn(),this.tL=null,this.VQ=null,this.UK=null,this.HK=null,this.Nc=null}QQ(t){return this.TQ.get(t)}t0(t){const s=this.HK.s0();let i=0;const e=this.xQ;for(let n=0,r=e.length;n<r;++n){const r=e[n],h=this.Nc.qQ(r[1]);let o=!0;if(!h.i0()||s){const s=this.Nc.e0(r,this,!0);t.push(s),h.n0()&&(o=!1,this._Q.push(s.$j()))}o&&(e[i]=e[n],++i)}dm.wh(e,i),this.Nc.VW(),this.pB()}r0(t,s){if(!t.wW().Y$())throw new Error("instance is not of world type");const i=t.aB();if(i.lB()!==this)throw new Error("instance added to wrong layer");this.pK.push(t),0!==i.XM()&&(this.IQ=!0),s&&this.HQ()&&t.aB().NH(),this.pB(t)}h0(t){this.pK.includes(t)||(this.pK.push(t),0!==t.aB().XM()&&(this.IQ=!0),this.pB(t))}o0(t,s){const i=t.aB();if(i.lB()!==this)throw new Error("instance added to wrong layer");this.pK.unshift(t),0!==i.XM()&&(this.IQ=!0),this.pB(t),s&&this.HQ()&&t.aB().NH()}a0(t,s){const i=this.pK.indexOf(t);i<0||(s&&this.HQ()&&t.aB().l0(),this.pK.splice(i,1),this.pB(t),this.u0())}c0(){this.IQ=!0}u0(){0===this.pK.length&&(this.IQ=!1)}f0(t){if(t){const t=new Set;for(const s of this.pK){const i=s.aB().cK();i>=0&&t.add(i)}let s=-1;for(const i of this.pK){const e=i.aB();if(!(e.cK()>=0)){for(++s;t.has(s);)++s;e.d0(s)}}}this.pK.sort(cm)}p0(){}m0(){for(const t of this.pK)t.Cj().n0()||this.Nc.Oj(t);this.Nc.VW(),dm.bh(this.pK),this.IQ=!1,this.pB()}g0(t,s,i,e,n,r){const h=this.Nc.BL(),o=this.Nc.y0(),a=t.S0(),l=[];for(const u of this.xQ){const c=u[0],f=c[0],d=c[1];if(!s._l(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.w0(p))continue}let m=n;if(!m){const t=this.Nc.hB();this.HN()===t?m=this:(m=t.b0(this.Pc()),m||(m=t.cB(this.nL())))}const g=this.Nc.e0(u,m,!1,void 0,void 0,!1,r);m.LW(g);const y=g.aB();y.WH(i,e),y.NH(),h.NW(!0),g.BW(),h.NW(!1),l.push(g)}return l}FW(){return this.pK.length}HN(){return this.HK}Pc(){return this.Yn}v0(t){this.IS=t}nL(){return this.IS}M0(t){this.zK=t}Gq(){return this.zK}$V(){return this.JK}WV(t){t=!!t,this.JK!==t&&(this.JK=t,this.HK.x0(),this.Nc.mB())}_0(){let t=-1;const s=this.GV();return t=s?s.PV().indexOf(this):this.HN().T0().indexOf(this),t}G0(){return this.qK}LB(){return this.Nc}C0(){return this.YK}I0(){for(const t of this.CV())if(t.C0())return!0;return!1}N$(){return this.Nc.N$()}HW(){return this.PQ}eL(){return this.P0(),this.tL}P0(){const t=this.A0();if(!this.DQ&&t===this.kQ&&!this.tL.DD())return;const s=this.HW().R0();this.tL.kD(s.map((t=>t.EG())),{kF:s.map((t=>t.nL())),LF:!t,VF:!0}),this.DQ=!1,this.kQ=t}FJ(){this.HW().FJ(),this.DQ=!0}HQ(){return this.hQ&&!this.rQ}E0(){return this.LQ}O0(){this.BQ=!1}DV(){for(const t of this.F0())if(!t.EV())return!1;return!0}EV(){return this.XK}OV(t){t=!!t,this.XK!==t&&(this.XK=t,this.Nc.mB())}NV(t){this.ZK=!!t}LV(){return this.ZK}jV(){for(const t of this.F0())if(!t.LV())return!1;return!0}dj(t){if(t=!!t,this.dQ!==t){if(this.dQ=t,t){const t=this.HN();this.cQ=t.QW(),this.fQ=t.sV()}this.D0(),this.Nc.mB()}}k0(){return this.dQ}KW(t){const s=this.HN(),i=s.L0(),e=s.N0();t>e&&(t=e),t<i&&(t=i),this.cQ!==t&&(this.cQ=t,this.k0()&&(this.D0(),this.Nc.mB()))}tV(t){const s=this.HN(),i=s.B0(),e=s.$0();t>e&&(t=e),t<i&&(t=i),this.fQ!==t&&(this.fQ=t,this.k0()&&(this.D0(),this.Nc.mB()))}QW(){return this.k0()?this.cQ:this.HN().QW()}sV(){return this.k0()?this.fQ:this.HN().sV()}mj(){return this.W0(),this.$R}V0(){return this.W0(),this.pQ}j0(){return this.W0(),this.mQ}vV(){const t=this.HN();return[t.H0(),t.U0()]}Ww(t){return this.Nc.Ww(t)}J0(t,s){const i=this.V0();if(0===t)s.S(i);else{let e=i.hl(),n=i.ol();const r=this.z0(t),h=i.width()/r,o=i.height()/r,[a,l]=this.vV();if(.5!==a||.5!==l){const s=this.q0(),i=this.Nc,r=this.Ww()/s;let h=(a-.5)*i.Y0()/r,o=(l-.5)*i.X0()/r;const u=this.ZW();0!==u&&(Am.set(h,o),Am.rotate(u),h=Am.Oa(),o=Am.Da());const c=dm.mr(s,0,t);e+=dm.Ct(h,0,c),n+=dm.Ct(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}sO(){return this.RM.Wo()}eO(t){t=dm.Zn(t,0,1),this.RM.Wo()!==t&&(this.RM.ko(t),this.jQ(),this.Nc.mB())}jQ(){this.iQ.S(this.RM),this.iQ.Zo()}EQ(){return this.iQ}A0(){return this.RM.zo(1,1,1,1)}qV(){return this.oQ}zV(t){this.oQ!==t&&(this.oQ=t,this.D0(),this.Nc.mB())}KV(){return this.tQ}sj(){return this.sQ}Z0(t,s){this.tQ===t&&this.sQ===s||(this.tQ=t,this.sQ=s,this.D0(),this.Nc.mB())}ZV(t){this.Z0(t,this.sj())}tj(t){this.Z0(this.KV(),t)}ZM(t){this.EM!==t&&(this.EM=t,this.Nc.mB())}XM(){return this.EM}XW(t){t=dm.Kn(t),this.uQ!==t&&(this.uQ=t,this.D0(),this.Nc.mB())}ZW(){return dm.Kn(this.HK.ZW()+this.uQ)}YV(){return this.uQ}K0(){return this.pK.length>0}fB(){return this.pK}Q0(){return this.t1()&&this.rQ?(dm.Th(Fm,this.fB()),Fm.sort(((t,s)=>this.s1(t,s))),Fm):this.fB()}i1(t){dm.On(t,this.Q0());for(const s of this.UQ)s.DV()&&s.sO()>0&&s.i1(t)}s1(t,s){const i=this.HN().e1(),e=i[0],n=i[1],r=i[2],h=t.aB(),o=s.aB(),a=h.UM()-e,l=h.qM()-n,u=h.XM()-r,c=o.UM()-e,f=o.qM()-n,d=o.XM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}fj(){return this.KK}oj(){return this.QK}hj(t){t=!!t,this.QK!==t&&(this.QK=t,this.Nc.mB())}uj(){return this.eQ}lj(t){t=!!t,this.eQ!==t&&(this.eQ=t,this.Nc.mB())}ej(t){t=!!t,this.nQ!==t&&(this.nQ=t,this.D0(),this.Nc.mB())}nj(){return this.nQ}n1(){return!this.LB().h1()||!this.nQ}t1(){return!this.n1()}o1(){return this.t1()&&this.HN().a1()}l1(){if(!this.o1())return!1;for(const t of this.UQ)if(!t.l1())return!1;return!0}FM(t){this.AM!==t&&(this.AM=t,this.Nc.mB())}cj(){return this.AM}u1(){return!this.UK}GV(){return this.UK}c1(t){this.UK=t}PV(){return this.UQ}f1(){return this.UQ.length>0}d1(t,s=!0){s?this.UQ.push(t):this.UQ.unshift(t)}m1(t,s,i){let e=this.UQ.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.UQ.splice(e,0,t)}g1(t){const s=this.UQ.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.UQ.splice(s,1)}S1(){for(const t of this.UQ)if(t.w1())return!0;return!1}*RV(){for(const t of this.UQ)yield*t.RV();yield this}*CV(){let t=this.GV();for(;t;)yield t,t=t.GV()}*F0(){yield this,yield*this.CV()}b1(t){for(const s of this.CV())if(s===t)return!0;return!1}v1(t){return this===t||this.tQ===t.tQ&&this.sQ===t.sQ&&this.lQ===t.lQ&&this.oQ===t.oQ&&this.uQ===t.uQ&&this.QW()===t.QW()&&this.sV()===t.sV()}M1(){return{parallaxX:this.KV(),parallaxY:this.sj(),scale:this.UV(),scaleRate:this.qV(),angle:this.YV(),hasOwnScroll:this.k0(),scrollX:this.QW(),scrollY:this.sV()}}_1(t){this.Z0(t.parallaxX,t.parallaxY),this.HV(t.scale),this.zV(t.scaleRate),this.XW(t.angle),this.dj(t.hasOwnScroll),this.KW(t.scrollX),this.tV(t.scrollY),this.W0()}T1(t){0!==t.size&&dm.Ah(this.pK,t)>0&&(this.u0(),this.pB())}pB(t){this.GQ=!1,this.BQ=!1,t&&!t.Cj().wW().Z$()||(this.CQ=!1)}G1(){if(!this.GQ){if(this.pK.sort(fm),this.HQ())for(let t=0,s=this.pK.length;t<s;++t){const s=this.pK[t].aB();s.d0(t),this.LQ.EK(s.C1())}else for(let t=0,s=this.pK.length;t<s;++t)this.pK[t].aB().d0(t);this.GQ=!0}}I1(){if(this.CQ)return;const t=this.HK.P1(this.Gq()).map((t=>[...t.RV()])).flat();let s=0;for(const i of t){for(const t of i.fB())t.Cj().wW().Z$()&&t.aB().A1(s++);i.R1()}}R1(){this.CQ=!0}E1(){return{isVisible:this.DV(),opacity:this.sO(),isInteractive:this.LV()}}O1(t,s,i){const e=t.aB(),n=s.aB();if(e.lB()!==this||n.lB()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.uB();let h=n.uB();return r!==h+(i?1:-1)&&(dm.Gh(this.pK,r),r<h&&h--,i&&h++,h===this.pK.length?this.pK.push(t):this.pK.splice(h,0,t),this.pB(t),!0)}F1(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.aB().cK()<h.aB().cK()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}D1(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.F1(i,n))}return i%2==1&&s.push(t[i-1]),s}L1(t){for(;t.length>1;)t=this.D1(t);return t[0]}N1(){return this.G1(),dm.bh(ym),this.LQ.RK(this.mj(),ym),ym.length?1===ym.length?ym[0]:this.L1(ym):[]}w1(){return this.DV()&&this.sO()>0&&this.B1()}B1(){if(this.K0()||!this.oj())return!0;for(const t of this.UQ)if(t.B1())return!0;return!1}W1(){return this.uj()||!this.A0()||0!==this.cj()||this.PQ.V1()}j1(){if(this.W1())return!0;for(const t of this.UQ)if(t.j1())return!0;return!1}BO(){return this.aQ}z0(t){if(this.HK._V())return 1;{const s=this.H1();return s/(s-t)}}U1(t){const s=this.Nc.Tj();if(this.HK._V())return s;{const i=this.H1();return this.Ww()/Math.abs(i-t)*s}}D0(){this.SQ=!0,this.bQ=!0,this.gQ=!0}J1(t){return this.SQ&&(this.z1(t,this.FD,0,0,null),this.SQ=!1),this.FD}q0(t){return this.Ww(t)/this.q1()}H1(){return this.o1()?this.HN().e1()[2]:this.q0()}Y1(){if(this.o1()){const t=this.HN().e1();return[t[0],t[1],t[2]]}return this.X1()}X1(t=0,s=0,i=0){const e=this.Nc,n=this.HN(),r=e.Z1(),h=e.K1();let o=(this.QW()-r)*this.tQ+r,a=(this.sV()-h)*this.sQ+h;e.AL()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n._V()?this.Ww(i):this.q0(i),[f,d]=this.vV();if(.5!==f||.5!==d){const t=this.Ww(i)/c;let s=(f-.5)*e.Y0()/t,n=(d-.5)*e.X0()/t;const r=this.ZW();0!==r&&(Am.set(s,n),Am.rotate(r),s=Am.Oa(),n=Am.Da()),l+=s,u+=n}return[l,u,c]}z1(t,s,i,e,n){const r=this.Nc,h=this.HN();if(this.o1()){vm.S(Cm,h.e1()),vm.S(Im,h.Q1()),vm.S(Pm,h.t2());const t=r.Z1(),s=r.K1(),i=Im[0]-Cm[0],e=Im[1]-Cm[1],n=Im[2]-Cm[2];Cm[0]=(Cm[0]-t)*this.tQ+t,Cm[1]=(Cm[1]-s)*this.sQ+s,Cm[2]*=Math.max(this.tQ,this.sQ),Im[0]=Cm[0]+i,Im[1]=Cm[1]+e,Im[2]=Cm[2]+n}else{const[t,s,r]=this.X1(i,e,n);vm.set(Cm,t,s,r),vm.set(Im,t,s,r-100);const h=this.ZW();0===h?vm.set(Pm,0,1,0):vm.set(Pm,Math.sin(h),Math.cos(h),0)}t.eb(s,Cm,Im,Pm,n||r.X0())}s2(){this.yQ=!0,this.bQ=!0,this.gQ=!0}i2(t){return this.yQ&&(this.e2(t),this.yQ=!1),this.X_}e2(t){const s=this.Nc.xB(),[i,e]=this.vV();if(this.HK._V())t.ib(this.X_,s.n2(),s.h2());else if(.5===i&&.5===e)xm.S(this.X_,s.o2());else{const n=s.n2(),r=s.h2();t.tb(this.X_,n/r,i,e)}}mX(t,s=!0,i=0,e=0,n=0){s&&t.HE(this.i2(t));let r=null;0===i&&0===e&&0===n?r=this.J1(t):(this.z1(t,_m,i,e,n),r=_m),t.XE(r)}a2(t){this.mX(t),t.jb(this.XM())}l2(t){let s=null;if(t.$v()&&this.Nc.u2()){const i=this.Nc.xB().c2(this);i&&(s=i.CR(),t.tF(s))}return s}f2(t){if(t.sb()&&this.Nc.u2()){const s=2*(this.nL()+1);t.d2(s,s+1)}}$x(t,s,i){const e=this.Nc.xB(),n=this.W1();let r=null;const h=this.l2(t);if(this.f2(t),n){const s={Zx:this.Nc.IL(),L_:!0,m2:!!t.sb()&&this.Nc.g2()};"low"===e.S2()&&(s.width=e.n2(),s.height=e.h2()),r=this.Nc.w2(s),this.aQ=r,t.UO(r),this.oj()&&t.EO(0,0,0,0)}else this.aQ=s,t.UO(s);if(this.oj()||t.Pu(this.KK),this.HK.b2(t,this.aQ,this.UQ,n&&this.oj()),this.f2(t),this.mX(t),t.jb(this.XM()),t.DO(this.t1()),this.q1()>Number.EPSILON){this.G1();const s=this.HQ()&&0===this.XM()&&!this.IQ;this.o1()?this.v2(t):s?this.M2(t):this._2(t,this.Q0())}t.jb(0),t.Ub(0),n&&(t.DO(!1),this.T2(t,r,s,i)),h&&t.iF(h),this.aQ=null}_2(t,s){const i=this.mj(),e=this.aQ,n=this.HN()._V(),r=this.HN().G2();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.aB();l.DV()&&l.C2(i,r,n)&&this.I2(a,l,t,e)}}v2(t){const s=this.aQ,i=this.P2(),e=Em,n=Om,r=this.Q0();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.aB();if(!l.DV()||!l.A2(i)){++h;continue}(!a.R2()||l.E2()>0)&&n.push(a);const u=a.aB().ZH();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.aB();if(s.DV()&&s.A2(i)){if(s.ZH()!==u)break;t.R2()?(s.E2()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].O2()){this.F2(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.aB();r.D2(!0),this.I2(e,r,t,s),r.D2(!1)}}else{this.I2(a,l,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.aB();r.lB().I2(e,r,t,s)}}h=c,dm.bh(e),dm.bh(n)}}F2(t,s){const i=this.aQ;t.XO();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.aB();n.L2(!0),this.N2(e,n,t)}t.ZO();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.aB();this.I2(n,r,t,i),r.L2(!1)}t.QO()}M2(t){const s=this.LQ,i=this.WQ,e=this.$Q,n=this.mj();let r;i.set(s.IK(n.Ka()),s.PK(n.Qa()),s.IK(n.tl()),s.PK(n.sl())),this.BQ&&i.equals(e)?r=this.NQ:(r=this.N1(),this.BQ=!0,e.S(i)),this._2(t,r),r!==this.NQ&&dm.Th(this.NQ,r)}I2(t,s,i,e){s.V1()?this.B2(t,s,i,e):this.N2(t,s,i)}N2(t,s,i){const e=s.W2();i.Gb()!==e&&e.OM(),t.$x(i)}B2(t,s,i,e){this.V2(t,s,i,e,null)&&this.mX(i)}V2(t,s,i,e,n){const r=s.kH().eL();return r.JD(i,e,{qD:t,XD:s.cj(),devicePixelRatio:this.Nc.j2(),time:t.H2(),ZD:this.Nc.U2()*this.q1(),KD:this.ZW(),_k:s.tU(),Tk:r.Hk()?null:this.J2(s),rk:n&&n.rk,hk:n&&n.hk,ak:n&&n.ak,lk:n&&n.lk,uk:n&&n.uk,ck:n&&n.ck}),i.jb(this.XM()),r.KE()}T2(t,s,i,e){const n=this.PQ.R0(),r=this.Nc;0===n.length?(t.UO(i),t.lb(),e&&0===this.AM&&this.A0()?t.JO(s):(t.FM(this.AM),t.DM(this.iQ),t.zO(s)),t.qO(s),r.OQ(s)):this.eL().JD(t,i,{qD:this,XD:this.cj(),devicePixelRatio:r.j2(),ZD:r.U2()*this.q1(),KD:this.ZW(),_k:this.mj(),Tk:null,DF:!0})}UV(){return this.lQ}HV(t){this.lQ!==t&&(this.lQ=t,this.HK.z2(),this.D0(),this.Nc.mB())}Tj(){return this.q1()*this.Nc.Tj()}Fq(){return this.q1()*this.Nc.Fq()}q1(){return(this.lQ*this.HK.YW()-1)*this.oQ+1}W0(){if(!this.gQ)return;this.gQ=!1;const t=this.Nc.Z1(),s=this.Nc.K1(),i=(this.QW()-t)*this.tQ+t,e=(this.sV()-s)*this.sQ+s,n=this.q1(),r=this.Nc.Y0()/n,h=this.Nc.X0()/n;let o=i-r/2,a=e-h/2;this.Nc.AL()&&(o=Math.round(o),a=Math.round(a));const l=this.pQ;l.set(o,a,o+r,a+h);const u=this.ZW();0!==u&&(mm.S(l),mm.offset(-l.hl(),-l.ol()),gm.Xl(mm,u),gm.Kl(mm),mm.offset(l.hl(),l.ol()),l.S(mm));const c=this.EM;this.J0(c,this.$R),this.o1()?this.q2(c,this.mQ):this.mQ.S(this.$R)}q2(t,s){const i=this.Nc.xB(),e=i.R$(),n=i.O$(),[r,h]=this.yj(0,0,t),[o,a]=this.yj(e,0,t),[l,u]=this.yj(e,n,t),[c,f]=this.yj(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}yj(t,s,i=0){return this.Y2(t,s,i,this.Fq())}vj(t,s,i=0){return this.Y2(t,s,i,this.Tj()*this.N$())}Y2(t,s,i,e){const n=this.Nc,r=n.pM(),h=this.q1(),o=n.Y0()/h,a=n.X0()/h,l=Gm;Mm.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.i2(r),c=this.J1(r),f=Tm;return dm.DS.NS(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}X2(t,s){const i=this.lQ,e=this.oQ,n=this.tQ,r=this.sQ,h=this.uQ;this.lQ=1,this.oQ=1,this.tQ=1,this.sQ=1,this.uQ=0,this.D0();const o=this.yj(t,s);return this.lQ=i,this.oQ=e,this.tQ=n,this.sQ=r,this.uQ=h,this.D0(),o}wj(t,s,i=0){return this.Z2(t,s,i,this.Fq())}xj(t,s,i=0){return this.Z2(t,s,i,this.Tj()*this.N$())}Z2(t,s,i,e){const n=this.Nc,r=n.pM(),h=this.q1(),o=n.Y0()/h,a=n.X0()/h,l=Gm;Mm.set(l,0,0,o,a);const u=this.i2(r),c=this.J1(r),f=Tm;return dm.DS.kS(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}K2(t,s){return t*=this.Tj()*this.N$(),0!==s&&(t*=this.z0(s)),t}J2(t){const s=t.tU(),i=t.ZH(),e=t.E2(),n=i+e,r=s.Ka(),h=s.Qa(),o=s.tl(),a=s.sl();if(this.o1()){if(this.Q2(r,h,i)||this.Q2(o,h,i)||this.Q2(o,a,i)||this.Q2(r,a,i))return null;if(e>0&&(this.Q2(r,h,n)||this.Q2(o,h,n)||this.Q2(o,a,n)||this.Q2(r,a,n)))return null}else if(n>=this.q0())return null;let[l,u]=this.xj(r,h,i),[c,f]=this.xj(o,a,i);if(0!==this.ZW()||e>0||this.o1()){const[t,s]=this.xj(o,h,i),[d,p]=this.xj(r,a,i);if(e>0){const[i,e]=this.xj(r,h,n),[m,g]=this.xj(o,h,n),[y,S]=this.xj(o,a,n),[w,b]=this.xj(r,a,n);let v=Math.min(l,c,t,d,i,m,y,w);c=Math.max(l,c,t,d,i,m,y,w),l=v,v=Math.min(u,f,s,p,e,g,S,b),f=Math.max(u,f,s,p,e,g,S,b),u=v}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return mm.set(l,u,c,f),mm}P2(){return this.bQ&&(this.t3(),this.bQ=!1),this.wQ}t3(){const t=this.Nc.pM(),s=this.i2(t),i=this.J1(t);this.wQ.JS(i,s)}Q2(t,s,i){return this.P2().qS(t,s,i)}s3(){return{d:this.C0(),s:this.UV(),a:this.YV(),v:this.EV(),i:this.LV(),html:this.$V(),bc:this.KK.toJSON(),t:this.oj(),sx:this.cQ,sy:this.fQ,hosp:this.dQ,px:this.KV(),py:this.sj(),c:this.RM.toJSON(),sr:this.qV(),fx:this.PQ.hx(),cg:this._Q}}i3(t){this.YK=!!t.d,this.lQ=t.s,this.uQ=t.a,this.XK=!!t.v,this.ZK=!t.hasOwnProperty("i")||t.i,this.JK=!!t.html,this.KK.Sa(t.bc),this.QK=!!t.t,t.hasOwnProperty("sx")&&(this.cQ=t.sx),t.hasOwnProperty("sy")&&(this.fQ=t.sy),t.hasOwnProperty("hosp")&&(this.dQ=!!t.hosp),this.tQ=t.px,this.sQ=t.py,this.RM.Sa(t.c),this.jQ(),this.oQ=t.sr,dm.Th(this._Q,t.cg),dm.Th(this.xQ,this.vQ);const s=new Set(this._Q);let i=0;for(let t=0,e=this.xQ.length;t<e;++t)s.has(this.xQ[t][2])||(this.xQ[i]=this.xQ[t],++i);dm.wh(this.xQ,i),this.PQ.ox(t.fx),this.DQ=!0}e3(){this.f0(!1),this.pB(),this.D0(),this.s2()}nV(){return this.VQ}LW(t,s=!1){if(this.pK.includes(t))s&&this.pK.sort(((t,s)=>t.aB().n3()-s.aB().n3()));else if(t.r3()){const s=[...t.IU()];s.push(t),s.sort(((t,s)=>t.aB().n3()-s.aB().n3()));for(const t of s)if(t.Nj())for(const i of t.Bj()){if(s.includes(i))continue;const t=[...i.IU()];t.push(i),t.sort(((t,s)=>t.aB().n3()-s.aB().n3())),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.wW().Y$()&&this.r0(t,!0)}else{if(t.wW().Y$()&&this.r0(t,!0),!t.Nj())return;for(const s of t.Bj()){const t=[...s.IU()];if(t.push(s),t.sort(((t,s)=>t.aB().n3()-s.aB().n3())),t&&t.length)for(const s of t)s.wW().Y$()&&this.r0(s,!0)}}}}}{let km=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},Lm=function(t,s){Zm!==t&&(t.a2(s),Zm=t)};vec3EqualsXYZ=km,MaybePrepareLayerDraw=Lm;const Nm=self.Cs,Bm=self.SH,$m=self.assert,Wm=Nm.Un(Nm.Rect),Vm=Nm.Un(Nm.Rect),jm=Nm.Un(Nm.Rect),Hm=Nm.Un(Nm._o),Um=self.ls,Jm=Um.Ss,zm=[],qm=[],Ym=[],Xm=[];let Zm=null;Nm.h3=class extends Nm.jn{constructor(t,s,i){super(),this.o3=t,this.Nc=t.LB(),this.Yn=i[0],this.a3=i[1],this.l3=i[2],this.Py=i[1],this.Ay=i[2],this.u3=!!i[3],this.c3=!!i[4],this.f3=i[5],this.d3=i[6],this.m3=i[7],this.g3=null,this.qK=i[8],this.IS=s,this.cQ=0,this.fQ=0,this.lQ=1,this.uQ=0,this.y3=new Set,this.S3=new Set,this.w3=new Set,this.b3=[],this.v3=[],this.M3=new Map,this.x3=new Map,this._3=[],this.T3=!1,this.G3=Jm.create(),this.C3=Jm.create(),this.I3=Jm.create(),this.P3=[],this.A3=[],this.R3=new Map,this.E3=new Map,this.O3=-1;const e=this.Nc.xB();this.PQ=Nm.Un(Nm.AQ,this,i[11]),this.tL=Nm.Un(Nm.DS.jF,e.RQ(),{EF:(t,s)=>{const i=s.Jk().BO();t.nO(),t.zO(i),t.qO(i),e.OQ(i)},FF:t=>this.HW().FQ(t)}),this.DQ=!0,this.F3=!1,this.aQ=null,this.D3={},this.L3=new Map,this.N3=!0,this.B3=new self.jW(this),this.W3=Nm.Un(Nm.Event.Sf);for(const t of i[9])this.P3.push(Nm.jK.JQ(this,null,t));this.V3();for(const t of this.oV())t.zQ();for(const t of i[10]){const s=this.Nc.qQ(t[1]);if(!s)throw new Error("missing nonworld object class");s.XQ()||s.ZQ(t),this._3.push(t),this.YQ(s)}}Jn(){for(const t of this.A3)t.Jn();Nm.bh(this.A3),this.w3.clear(),this.g3=null,this.o3=null,this.Nc=null}LB(){return this.Nc}Pc(){return this.Yn}G0(){return this.qK}nL(){return this.IS}HW(){return this.PQ}eL(){return this.P0(),this.tL}P0(){const t="low"===this.Nc.xB().S2();if(!this.DQ&&this.F3===t&&!this.tL.DD())return;const s=this.HW().R0();this.tL.kD(s.map((t=>t.EG())),{kF:s.map((t=>t.nL())),NF:t,VF:!0}),this.DQ=!1,this.F3=t}FJ(){this.HW().FJ(),this.DQ=!0}j3(){let t=this.A3[0].q1();for(let s=1,i=this.A3.length;s<i;++s){const i=this.A3[s];0===i.KV()&&0===i.sj()||(t=Math.min(t,i.q1()))}return t}H3(){return.5*this.Nc.Y0()/this.j3()}U3(){return.5*this.Nc.X0()/this.j3()}L0(){return this.J3()?-1/0:this.H3()}N0(){return this.J3()?1/0:this.Vg()-this.H3()}B0(){return this.J3()?-1/0:this.U3()}$0(){return this.J3()?1/0:this.Kg()-this.U3()}KW(t){const s=this.L0(),i=this.N0();t>i&&(t=i),t<s&&(t=s),this.cQ!==t&&(this.cQ=t,this.z3(),this.Nc.mB())}QW(){return this.cQ}tV(t){const s=this.B0(),i=this.$0();t>i&&(t=i),t<s&&(t=s),this.fQ!==t&&(this.fQ=t,this.z3(),this.Nc.mB())}sV(){return this.fQ}J3(){return this.u3}z2(){this.KW(this.QW()),this.tV(this.sV());for(const t of this.A3)t.k0()&&(t.KW(t.QW()),t.tV(t.sV()))}wV(t,s){this.f3===t&&this.d3===s||(this.f3=t,this.d3=s,this.q3()&&(this.Y3(),this.z3(),this.Nc.mB()))}H0(){return this._V()?.5:this.f3}U0(){return this._V()?.5:this.d3}G2(){const t=this.H0(),s=this.U0();return t<0||t>1||s<0||s>1}MV(){this.c3&&(this.c3=!1,this.Y3(),this.z3(),this.Nc.mB())}xV(){this.c3||(this.c3=!0,this.Y3(),this.z3(),this.Nc.mB())}_V(){return this.c3}q3(){return!this._V()}X3(t){t=!!t,this.T3!==t&&(this.T3=t,this.z3(),this.Nc.mB())}a1(){return this.T3}Z3(t,s,i,e,n,r,h,o,a){km(this.G3,t,s,i)&&km(this.C3,e,n,r)&&km(this.I3,h,o,a)||(Jm.set(this.G3,t,s,i),Jm.set(this.C3,e,n,r),Jm.set(this.I3,h,o,a),this.K3())}K3(){this.z3(),this.Nc.mB()}e1(){return this.G3}Q1(){return this.C3}t2(){return this.I3}YW(){return this.lQ}qW(t){this.lQ!==t&&(this.lQ=t,this.z3(),this.z2(),this.Nc.mB())}XW(t){t=Nm.Kn(t),this.uQ!==t&&(this.uQ=t,this.z3(),this.Nc.mB())}ZW(){return this.uQ}Vg(){return this.Py}Yg(t){!isFinite(t)||t<1||(this.Py=t)}Kg(){return this.Ay}jg(t){!isFinite(t)||t<1||(this.Ay=t)}Q3(){return this.g3}T0(){return this.P3}*oV(){for(const t of this.P3)yield*t.RV()}hV(){return this.A3}t5(){return this.A3.length}lB(t){return"number"==typeof t?this.cB(t):this.b0(t.toString())}cB(t){return t=Nm.Zn(Math.floor(t),0,this.A3.length-1),this.A3[t]}b0(t){return this.R3.get(t.toLowerCase())||null}s5(t){return!!this.b0(t)}i5(t){return this.E3.get(t)||null}Y3(){for(const t of this.A3)t.s2()}z3(){for(const t of this.A3)t.D0()}cV(t,s,i){if(this.s5(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.GV(),n=Nm.Un(Nm.jK,this,e,{name:t,FK:Math.floor(1e15*Math.random()),DK:!0});this.e5(n,s,i),this.LB().mB(),this.x0()}dV(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.n5(t),this.e5(t,s,i),this.LB().mB(),this.x0())}mV(t){if(this.n5(t)){const s=this.Nc.BL();s.NW(!0),t.Jn(),s.NW(!1),this.LB().mB(),this.x0()}}yV(){const t=new Set;for(const s of this.oV())s.C0()&&!s.I0()&&t.add(s);if(0===t.size)return;const s=this.Nc.BL();s.NW(!0);for(const s of t)this.n5(s),s.Jn();s.NW(!1),this.LB().mB(),this.x0()}e5(t,s,i){if(i>=2)if(s){if(s===t||s.b1(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);s.d1(t,2===i),t.c1(s)}else 2===i?this.P3.push(t):this.P3.unshift(t),t.c1(null);else{const e=s.GV();if(e){if(s.b1(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);e.m1(t,s,0===i),t.c1(e)}else{let e=this.P3.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.P3.splice(e,0,t),t.c1(null)}}}n5(t){const s=t.GV();if(s)return s.g1(t),!0;if(this.P3.length>1){const s=this.P3.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.P3.splice(s,1),!0}return!1}V3(){this.A3=[...this.oV()],this.R3.clear(),this.E3.clear();for(let t=0,s=this.A3.length;t<s;++t){const s=this.A3[t];s.v0(t),this.R3.set(s.Pc().toLowerCase(),s),this.E3.set(s.G0(),s)}}r5(){let t=0;for(const s of this.P3){for(const i of s.RV())i.M0(t);s.$V()&&t++}}h5(){return this.P3.at(-1).Gq()+1}async x0(){this.V3(),this.r5(),this.O3=this.h5()}o5(){return this.O3}a5(){this.O3=-1}P1(t){const s=[];for(const i of this.P3){const e=i.Gq();if(e===t)s.push(i);else if(e>t)break}return s}M1(){return{scrollX:this.QW(),scrollY:this.sV(),scale:this.YW(),angle:this.ZW(),vpX:this.H0(),vpY:this.U0()}}_1(t){this.KW(t.scrollX),this.tV(t.scrollY),this.qW(t.scale),this.XW(t.angle),this.wV(t.vpX,t.vpY)}l5(){let t=this.P3.filter((t=>t.w1()))[0];for(;t;){if(!t.oj())return Hm.Lo(t.fj()),Hm.ko(1),Hm;if(t.W1())return Hm.Po(0,0,0,0),Hm;t=t.PV().filter((t=>t.w1()))[0]}return Hm.Po(0,0,0,0),Hm}s0(){return this.N3}u5(){return[...this.y3]}YQ(t){if(t.Nj())for(const s of t.f5().c5())this.y3.add(s);else this.y3.add(t)}d5(){return[...this.S3]}p5(t,s){if(t===this||!s)return Promise.resolve();t&&(Nm.mo(this.S3,t.S3),t.S3.clear());const i=[];for(const t of this.y3)this.S3.has(t)||(i.push(t.m5(s)),this.S3.add(t));return Promise.all(i)}async g5(t){if(t.S0())throw new Error("cannot load textures for family");const s=this.Nc.pM();if(!s||s.QA()||this.S3.has(t))return;this.S3.add(t);const i=t.m5(s);this.y5(i),await i,t.S5(),this.Nc.mB()}y5(t){this.w3.add(t),t.then((()=>this.w3.delete(t))).catch((()=>this.w3.delete(t)))}w5(){return Promise.all([...this.w3])}b5(t){if(t.S0()||t.FW()>0)throw new Error("cannot unload textures");const s=this.Nc.pM();s&&this.S3.has(t)&&(this.S3.delete(t),t.v5(s))}M5(t,s){if(t!==this&&s)for(const s of this.S3)s.n0()||t.y3.has(s)||(s.v5(),this.S3.delete(s))}x5(){this.S3.clear()}async _5(t){const s=this.Nc,i=this.o3,e=s.BL();this.m3&&(this.g3=e.T5(this.m3),this.g3.G5()),i.C5(this),this.Py=this.a3,this.Ay=this.l3,this.cQ=s.TL()/2,this.fQ=s.CL()/2,this.z2(),this.Y3(),this.z3(),this.r5(),await this.Nc.xB().I5(this.h5(),!0),this.P5(t),this.Nc.A5(!0),this.R5(),this.N3||this.E5(),this.O5(this.b3),this.O5(this.v3),this.F5(),i.D5(),s.VW(),this.Nc.A5(!1);const n=this.Nc.k5();if(await Promise.all(n),Nm.bh(n),!s.L5()){for(const t of this.b3)t.N5();for(const t of this.v3)t.B5(this.M3,this.x3);for(const[t,s]of Object.entries(this.D3)){const i=this.Nc.dY(parseInt(t,10));i&&!i.S0()&&i.i0()&&Nm.bh(s)}for(const t of this.b3)t.W5();for(const t of this.v3)t.W5();for(const t of this.b3)t.OU()||t.V5();for(const t of this.v3)t.OU()||t.V5()}Nm.bh(this.b3),Nm.bh(this.v3),this.M3.clear(),this.x3.clear(),await Promise.all([...this.y3].map((t=>t.j5(this.Nc.pM())))),t&&(s.Sf().dispatchEvent(new Nm.Event("beforefirstlayoutstart")),await s.H5(new Nm.Event("beforeprojectstart"))),await this.U5(new Nm.Event("beforeanylayoutstart")),s.Sf().dispatchEvent(new Nm.Event("beforelayoutstart")),await this.H5(new Nm.Event("beforelayoutstart")),s.L5()||await s.TB(Nm.PB.IB.CB.J5,null,null),s.Sf().dispatchEvent(new Nm.Event("afterlayoutstart")),await this.H5(new Nm.Event("afterlayoutstart")),await this.U5(new Nm.Event("afteranylayoutstart")),t&&(s.Sf().dispatchEvent(new Nm.Event("afterfirstlayoutstart")),await s.H5(new Nm.Event("afterprojectstart"))),e.z5(i),await this.w5(),this.N3=!1}P5(t){for(const t of this.Nc.y0())if(!t.S0()&&t.Y$())for(const s of t.RW()){const t=s.aB(),i=t.lB(),e=Nm.Zn(i.nL(),0,this.A3.length-1),n=this.A3[e];t.dB(n,!0),n.h0(s)}if(!t)for(const t of this.A3)t.f0(!1)}R5(){for(const t of this.A3)t.t0(this.b3),t.p0()}E5(){let t=!1;for(const[s,i]of Object.entries(this.D3)){const e=this.Nc.dY(parseInt(s,10));if(e&&!e.S0()&&e.i0())for(const s of i){let i=null;if(e.Y$()&&(i=s.hasOwnProperty("instJson")?this.i5(s.instJson.w.l):this.i5(s.w.l),!i))continue;const n=this.Nc.e0(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.ox(s.instJson):n.ox(s),t=!0,this.v3.push(n),s.hasOwnProperty("instJson")&&(this.M3.set(n,s),this.x3.set(s.index,n))}}for(const t of this.A3)t.f0(!0),t.pB();t&&(this.Nc.VW(),this.Nc.q5())}O5(t){for(const s of t){if(!s.Nj())continue;const i=s.aB(),e=s.Vj();for(const n of s.Cj().f5().Y5()){if(n===s.Cj())continue;const r=n.RW();if(r.length>e)s.X5(r[e]);else{let e;e=i?this.Nc.e0(n,i.lB(),!0,i.UM(),i.qM(),!0):this.Nc.e0(n,null,!0,0,0,!0),this.Nc.VW(),n.Z5(),s.X5(e),t.push(e)}}}}F5(){for(const t of this._3)this.Nc.qQ(t[1]).Nj()||this.Nc.e0(t,null,!0)}K5(){const t=[],s=this._3;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.Nc.qQ(n[1]);r.n0()?r.Nj()&&r.f5().Q5()||t.push(this.Nc.e0(n,null,!0)):(s[i]=n,++i)}Nm.wh(s,i),this.Nc.VW(),this.O5(t)}g0(t,s,i,e,n,r,h){if(i)return i.g0(t,s,n,r,e,h);{const i=[];for(const o of this.A3)i.push(o.g0(t,s,n,r,e,h));return i.flat()}}async t4(){const t=this.o3;this.Nc.L5()||(await this.U5(new Nm.Event("beforeanylayoutend")),await this.H5(new Nm.Event("beforelayoutend")),await this.Nc.TB(Nm.PB.IB.CB.s4,null,null),await this.H5(new Nm.Event("afterlayoutend")),await this.U5(new Nm.Event("afteranylayoutend"))),t.i4(!0),this.Nc.BL().e4(),this.N3||this.n4();for(const t of this.A3)t.m0();for(const t of this.Nc.y0())if(!(t.n0()||t.Y$()||t.wW().z$()||t.S0())){for(const s of t.RW())this.Nc.Oj(s);this.Nc.VW()}t.i4(!1),t.$N()===this&&t.C5(null)}r4(t,s){const i=t.Cj().G0().toString();this.D3.hasOwnProperty(i)||(this.D3[i]=[]);const e=this.D3[i],n={index:s,instJson:t.hx(),sceneGraphJson:{children:[]}};e.push(n),this.L3.set(t,n)}h4(t){const s=this.L3.get(t);for(const i of t.o4()){const t=this.L3.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:Nm.l4.a4(i.aB())})}}n4(){this.L3.clear();let t=0;for(const s of this.A3){s.G1();for(const i of s.fB()){const s=i.Cj();!s.n0()&&s.i0()&&(this.r4(i,t),t++)}}for(const t of this.A3)for(const s of t.fB()){const t=s.Cj();!t.n0()&&t.i0()&&this.h4(s)}this.L3.clear()}u4(){this.D3={},this.N3=!0}BO(){return this.aQ}W1(){const t=this.Nc,s=t.pM().$v();return"low"===t.xB().S2()||s&&t.g2()||this.PQ.V1()||s&&t.h1()}c4(t){const s=this.Nc.xB();if(this.W1()){t.UO(null),t.EO(0,0,0,0);const i={Zx:this.Nc.IL(),L_:t.sb()||this.Nc.g2()||this.PQ.V1(),m2:!!t.sb()&&this.Nc.g2()};"low"===s.S2()&&(i.width=s.n2(),i.height=s.h2()),this.aQ=this.Nc.w2(i)}else this.aQ=null}f4(t){this.Nc.d4(t)&&(t.DO(!1),t.UO(null),t.lb(),t.JO(this.aQ))}m4(t){this.W1()&&(t.DO(!1),this.g4(t,this.aQ))}y4(t){t.UO(this.aQ),t.Pu(this.l5()),this.Nc.h1()&&t.FO();const s=this.P1(0);this.b2(t,this.aQ,s,!0),t.sb()&&t.d2(0,1),this.m4(t),this.aQ=null}S4(t,s){let i=null;this.Nc.d4(t)&&(i=this.aQ),t.UO(i),t.EO(0,0,0,0),this.Nc.h1()&&t.FO();const e=this.P1(s);this.b2(t,i,e,!0),this.f4(t),t.Ov(),this.Nc.xB().w4(s)}b2(t,s,i,e){const n=i.filter((t=>t.w1()));for(let i=0,r=n.length;i<r;){const h=n[i];if(h.l1()&&!h.j1()){zm.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.l1()||s.j1())break;zm.push(n[t])}if(zm.length>=2||1===zm.length&&zm[0].S1()){this.b4(t,s,zm),i+=zm.length,Nm.bh(zm);continue}Nm.bh(zm)}h.$x(t,s,e&&0===i),++i}}g4(t,s){const i=this.PQ.R0(),e=this.Nc;0===i.length?(t.UO(null),t.lb(),t.JO(s),t.qO(s),e.OQ(s)):(jm.set(0,0,e.Y0(),e.X0()),this.eL().JD(t,null,{qD:this,XD:3,devicePixelRatio:this.Nc.j2(),ZD:this.Nc.U2()*this.YW(),KD:this.ZW(),_k:jm,Tk:null,DF:!0}))}b4(t,s,i){i[0].oj()||(Hm.Lo(i[0].fj()),Hm.ko(1),t.Pu(Hm)),this.Nc.xB(),t.DO(!0);const e=qm,n=Ym,r=Xm;for(const t of i)t.G1(),t.i1(e);const h=i[0],o=h.l2(t);h.f2(t);for(let i=0,h=e.length;i<h;){const o=e[i],a=o.aB(),l=a.lB();if(!a.DV()||!a.A2(l.P2())){++i;continue}(!o.R2()||a.E2()>0)&&r.push(o);const u=o.aB().ZH();n.push(o);let c=i+1;for(;c<h;++c){const t=e[c],s=t.aB();if(s.DV()&&s.A2(s.lB().P2())){if(s.ZH()!==u)break;t.R2()?(s.E2()>0&&r.push(t),n.push(t)):r.push(t)}}if(1!==n.length||n[0].O2()){this.v4(t,s,n);for(let i=0,e=r.length;i<e;++i){const e=r[i],n=e.aB(),h=n.lB();n.D2(!0),Lm(h,t),h.I2(e,n,t,s),n.D2(!1)}}else{Lm(l,t),l.I2(o,a,t,s);for(let i=0,e=r.length;i<e;++i){const e=r[i];if(e===o)continue;const n=e.aB(),h=n.lB();Lm(h,t),h.I2(e,n,t,s)}}i=c,Nm.bh(n),Nm.bh(r)}o&&t.iF(o),Nm.bh(e),Zm=null}v4(t,s,i){t.XO();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.aB(),r=n.lB();n.L2(!0),Lm(r,t),r.N2(e,n,t)}t.ZO();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.aB(),h=r.lB();Lm(h,t),h.I2(n,r,t,s),r.L2(!1)}t.QO()}s3(){const t={sx:this.QW(),sy:this.sV(),s:this.YW(),a:this.ZW(),w:this.Vg(),h:this.Kg(),ortho:this._V(),vpX:this.H0(),vpY:this.U0(),fv:this.N3,persist:this.D3,fx:this.PQ.hx(),layers:{},dynamicLayers:[]};for(const s of this.A3)if(s.C0()){const i=s.GV();t.dynamicLayers.push({sid:s.G0(),name:s.Pc(),parentSid:i?i.G0():null,siblingIndex:s._0(),data:s.s3()})}else t.layers[s.G0().toString()]=s.s3();return t}i3(t){this.cQ=t.sx,this.fQ=t.sy,this.lQ=t.s,this.uQ=t.a,this.Py=t.w,this.Ay=t.h,this.c3=!!t.ortho,t.hasOwnProperty("vpX")&&(this.f3=t.vpX),t.hasOwnProperty("vpY")&&(this.d3=t.vpY),this.N3=!!t.fv,this.D3=t.persist,this.PQ.ox(t.fx),this.DQ=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.i5(t);e&&e.i3(i)}if(t.hasOwnProperty("dynamicLayers")){this.yV(),this.Nc.VW();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.V3(),this.s5(r)||this.i5(n))continue;let l,u;if(null===h)l=null,u=this.P3;else{if(l=this.i5(h),!l)continue;u=l.PV()}const c=Nm.Un(Nm.jK,this,l,{name:r,FK:n,DK:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({LH:c,M4:o}),c.i3(a)}for(const[t,i]of s){i.sort(((t,s)=>t.M4-s.M4));for(const s of i){const i=s.LH,e=s.M4;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.x0(),this.Y3(),this.z3()}WN(){return this.B3}DL(){return this.W3}x4(t){t.layout=this.WN();const s=this.Nc,i=s.yH()&&!s.BL().$W();i&&Bm._4(),this.W3.dispatchEvent(t),i&&Bm.T4()}H5(t){return t.layout=this.WN(),this.W3.Gf(t)}U5(t){return t.layout=this.WN(),this.Nc.H5(t)}G4(){this.C4(this.P3)}C4(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Pc()}`),this.C4(t.PV(),s+1)}}}{const Km=self.Cs;Km.I4=class extends Km.jn{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}Jn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,Km.bh(this.#i),this.#f.clear(),this.#a.clear(),Km.bh(this.#t)}ET(t){const s=Km.Un(Km.h3,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Pc().toLowerCase(),s),this.#a.set(s.G0(),s)}LB(){return this.#s}P4(t){this.#r=t}A4(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}R4(t){return this.#f.get(t.toLowerCase())||null}E4(t){return this.#a.get(t)||null}O4(t){return t=Km.Zn(Math.floor(t),0,this.#i.length-1),this.#i[t]}HN(t){return"number"==typeof t?this.O4(t):this.R4(t.toString())}JN(){return this.#i}C5(t){this.#e=t}$N(){return this.#e}F4(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}D4(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*L4(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}N4(t){return this.#e===t||this.#t.includes(t)}i4(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}WW(){return this.#h>0}YN(t){this.#d=t}D5(){this.#d=null}qN(){return!!this.#d}B4(){return this.#d}W4(){const t=this.$N();t&&t.Y3()}V4(){const t=this.$N();t&&t.z3()}}}{const Qm=self.Cs,tg=new RegExp("<(.+?)>","g");Qm.j4=class extends Qm.jn{constructor(t){super(),this.Nc=t,this.H4=Qm.Un(Qm.U4),this.J4=null,this.z4=[],this.q4=new Map,this.Y4=new Map,this.X4=new Map,this.Z4=[],this.K4=[],this.Q4=[],this.t6=!1,this.s6=!1,this.i6=!1,this.e6=()=>this.n6(),this.r6=()=>this.h6(),this.o6=()=>this.a6(),this.l6=()=>this.u6(),this.c6=t=>this.f6(t.CJ),this.d6=t=>this.p6(),this.m6=t=>this.g6(),this.y6=t=>this.S6(),this.w6=[],this.b6=0}Jn(){this.v6(),this.e6=null,this.r6=null,this.o6=null,this.l6=null,this.c6=null,this.m6=null;for(const t of this.z4)t.Sz(),t.Jn();Qm.bh(this.z4),this.z4=null,this.H4.Jn(),this.H4=null,Qm.bh(this.Z4),this.Z4=null,Qm.bh(this.K4),this.K4=null,Qm.bh(this.Q4),this.Q4=null,this.q4.clear(),this.q4=null,this.Y4.clear(),this.Y4=null,this.X4.clear(),this.X4=null,Qm.bh(this.w6),this.w6=null,this.Nc=null}M6(){const t=this.Nc.Sf();t.addEventListener("pretick",this.e6),t.addEventListener("tick2",this.r6),t.addEventListener("beforelayoutchange",this.o6),t.addEventListener("layoutchange",this.l6),t.addEventListener("instancedestroy",this.c6),t.addEventListener("beforeload",this.d6),t.addEventListener("afterload",this.m6),t.addEventListener("afterlayoutstart",this.y6)}v6(){const t=this.Nc.Sf();t.removeEventListener("pretick",this.e6),t.removeEventListener("tick2",this.r6),t.removeEventListener("beforelayoutchange",this.o6),t.removeEventListener("layoutchange",this.l6),t.removeEventListener("instancedestroy",this.c6),t.removeEventListener("beforeload",this.d6),t.removeEventListener("afterload",this.m6),t.removeEventListener("afterlayoutstart",this.y6)}ET(t){this.H4.Bu(t);const s=Qm._6.x6(t,this);this.Bu(s),this.T6(s),this.X4.set(s.Pc(),0)}G6(t){const s=this.C6(),i=t.Hj(),e=s.Js(i),n=Qm._6.G6(`${i}:${this.X4.get(i)}`,e,this);return this.I6(i),this.Bu(n),n}I6(t){this.X4.set(t,this.X4.get(t)+1)}P6(){for(const t of this.z4){if(t.A6())continue;const s=t.Hj();this.I6(s)}}R6(){for(const t of this.X4.keys())this.X4.set(t,0)}Bu(t){this.z4.push(t),this.q4.set(t.Pc().toLowerCase(),t)}Zf(t){t.E6(),t.A6()||(Qm.Ch(this.z4,t),Qm.Ch(this.Z4,t),Qm.Ch(this.K4,t),Qm.Ch(this.Q4,t),this.q4.delete(t.Pc().toLowerCase()),this.O6(t),t.gz()||t.Jn())}lH(t){this.Nc.lH(t,this.J4,null)}LB(){return this.Nc}C6(){return this.H4}F6(t){this.J4=t}D6(){return this.J4}*k6(){for(const t of this.z4)yield t}*L6(){for(const t of this.K4)yield t}N6(t,s){this.Y4.has(t)||this.Y4.set(t,new Set),this.Y4.get(t).add(s)}T6(t){for(const s of t.B6())this.N6(s,t)}O6(t){for(const[s,i]of this.Y4.entries())i.has(t)&&(i.delete(t),0===i.size&&this.Y4.delete(s))}W6(t){if(this.Y4.has(t))return this.Y4.get(t)}V6(t,s){if(s)for(const i of this.z4)if(s.every((t=>i.j6(t.CJ,t.trackId)))&&i.Pc().includes(t.Pc()))return i}H6(t){return this.q4.get(t.toLowerCase())||null}U6(t){for(const s of this.Z4)if(s.Pc()===t)return s;for(const s of this.K4)if(s.Pc()===t)return s;return null}*J6(t){if(tg.test(t)){let s;tg.lastIndex=0;const i=new Set;do{if(s=tg.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.H6(t);s&&(yield s)}i.clear()}else{const s=this.H6(t);s&&(yield s)}}*z6(t){for(const s of this.z4)s.bz(t)&&(yield s)}q6(t){this.Z4.includes(t)||this.Z4.push(t),this.Y6()}X6(t){Qm.Ch(this.K4,t),this.Z6()}K6(t){this.K4.includes(t)?(t.Q6(!0),t.t8(!1),t.s8(!1)):(t.Q6(!1),t.t8(!0),t.s8(!1),this.Z4.includes(t)||this.Z4.push(t)),this.Y6()}i8(t){t.Q6(!1),t.t8(!1),t.e8(),Qm.Ch(this.Z4,t),this.Z6()}n8(t){t.Q6(!1),t.t8(!1),this.K4.includes(t)&&(t.s8(!0),this.Q4.push(t),Qm.Ch(this.K4,t)),this.Z4.includes(t)&&t.s8(!0)}r8(t){t.Q6(!1),t.t8(!1),t.s8(!1),t.Iz(1),Qm.Ch(this.K4,t)}h8(t){this.n8(t),t.e8()}n6(){const t=this.LB();if(t.L5())return;if(!this.t6)return;if(this.s6)return;let s=0;for(t.yH()&&(s=performance.now()),this.i6=!0;this.Z4.length;){const t=this.Z4.pop();t.o8()?(t.a8(),this.Q4.push(t)):(t.l8(),this.K4.push(t)),0!==t.u8()&&(this.b6=1)}const i=this.Nc.c8(),e=this.Nc.f8(),n=this.Nc.gN();for(let t=this.K4.length-1;t>=0;t--){const s=this.K4[t];s&&s.d8(i,n,e)}this.i6=!1,t.yH()&&globalThis.SH.p8(performance.now()-s),0!==this.b6&&t.mB()}h6(){const t=this.LB();if(t.L5())return;if(!this.t6)return;if(this.s6)return;let s,i=0;t.yH()&&(i=performance.now());for(let t=0,i=this.Q4.length;t<i;t++){const i=this.Q4[t];s||(s=new Set),i.E6(),this.m8(i),s.add(i)}if(s){Qm.Ah(this.Q4,s),this.b6=0;for(let t=0,s=this.K4.length;t<s;t++)if(0!==this.K4[t].u8()){this.b6=1;break}}this.Z6(),t.yH()&&globalThis.SH.p8(performance.now()-i)}m8(t){t.gz()||t.g8()&&t.y8()&&t.S8()&&t.w8()}Y6(){this.t6||(this.t6=!0)}Z6(){this.Q4.length||this.K4.length||this.Z4.length||this.i6||(this.t6=!1)}a6(){for(this.s6=!0;this.Z4.length;)this.i8(this.Z4.pop());const t=new Set;for(const s of this.K4)s.a6()&&(s.E6(),t.add(s));Qm.Ah(this.K4,t),t.clear();for(const s of this.Q4)s.a6()&&(s.E6(),t.add(s));Qm.Ah(this.Q4,t),this.Z6();for(const t of this.z4)t.b8()}u6(){this.s6=!1}f6(t){const s=t.Cj(),i=this.W6(s);if(i)if(this.Nc.L5())this.w6.push(t);else for(const t of i)t.A6()||(t.gz()?this.Zf(t):t.g8()||(this.m8(t),this.Zf(t)))}p6(){for(const t of this.Z4.map((t=>t)))this.m8(t),this.Zf(t);for(const t of this.K4.map((t=>t)))this.m8(t),this.Zf(t)}g6(){for(const t of this.w6)this.f6(t);Qm.bh(this.w6);for(const t of this.z4)t.g6()}S6(){const t=this.Nc.jN().$N();if(t)for(const s of this.z4){const i=s.v8();i&&t.Pc()===i&&this.K6(s)}}s3(){return{timelinesJson:this.M8(),scheduledTimelinesJson:this.x8(),playingTimelinesJson:this._8(),markedForRemovalTimelinesJson:this.T8(),hasRuntimeListeners:this.t6,changingLayout:this.s6,isTickingTimelines:this.i6}}i3(t){t&&(this.R6(),this.G8(t.timelinesJson),this.C8(t.scheduledTimelinesJson),this.I8(t.playingTimelinesJson),this.P8(t.markedForRemovalTimelinesJson),this.t6=!t.hasRuntimeListeners,this.s6=!!t.changingLayout,this.i6=!!t.isTickingTimelines,this.P6(),this.Y6(),this.Z6())}M8(){return this.z4.map((t=>t.s3()))}G8(t){for(const s of t){let t=this.H6(s.name);if(t)t.i3(s);else{const i=this.A8(s);if(!i)continue;const e=this.H6(i);t=this.G6(e),t.i3(s)}t.E8()||this.Zf(t)}}A8(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}x8(){return this.O8(this.Z4)}C8(t){this.F8(t,this.Z4)}_8(){return this.O8(this.K4)}I8(t){this.F8(t,this.K4)}T8(){return this.O8(this.Q4)}P8(t){this.F8(t,this.Q4)}D8(t,s){if(!s)return!1;for(const i of s)if(i===t.Pc())return!0;return!1}O8(t){return t.map((t=>t.Pc()))}F8(t,s){const i=new Set;for(const e of s)this.D8(e,t)||i.add(e);if(Qm.Ah(s,i),t){const i=t=>s=>s.Pc()===t;for(const e of t){const t=this.H6(e);t&&(s.find(i(e))||s.push(t))}}}}}{const sg=self.Cs,ig=100,eg=.01,ng=25,rg=20,hg=5,og=[0,0],ag=[0,0],lg=[0,0],ug=[0,0,0,0,0],cg=new Array(4),fg=[{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0}],dg={x:0,y:0,t:0,vt:0};sg.k8=class{constructor(t,s){this.L8=!1,this.N8=t,this.B8=[];let i=null;if(i=s?this.N8.W8(s):sg.$h(this.N8.V8()),!i)return;const e=i.Yz("offsetX"),n=i.Yz("offsetY");if(!e||!n)return;this.j8=e,this.H8=n;const r=e.U8(),h=n.U8();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.J8(),s.z8()),e=h[t],n=(e.J8(),e.z8());i&&"cubic-bezier"===i.q8()&&n&&"cubic-bezier"===n.q8()?this.B8.push(sg.Un(sg.Y8,i,n,s,e,this.B8.length)):(i&&"line"===i.q8()&&n&&n.q8(),this.B8.push(sg.Un(sg.X8,s,e,this.B8.length)))}this.L8=!0}Jn(){for(const t of this.B8)t.Jn();sg.bh(this.B8),this.B8=null,this.N8=null,this.j8=null,this.H8=null}Z8(){return this.L8}K8(){return this.B8}Q8(t){const s="relative"===this.j8.t7()?t.UM():0,i="relative"===this.H8.t7()?t.qM():0;for(const t of this.B8)t.Q8(s,i)}kS(t,s,i){let e=NaN,n=this.B8.length;for(let i=0;i<n;i++){const n=this.B8[i];if("cubic-bezier"===n.DG()){const i=n.kS(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],lg[0]=i[2],lg[1]=n.nL())}}return lg}s7(t,s,i){const e=i.i7;sg.te(e[0])||(e[0]=0),sg.te(e[1])||(e[1]=1);let n=NaN,r=this.B8.length;for(let i=0;i<r;i++){const r=this.B8[i];if("cubic-bezier"===r.DG()){const i=r.e7(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],lg[0]=i[2],lg[1]=r.nL())}}return lg}n7(t,s){return this.B8[s].n7(t)}r7(t,s){return this.B8[s].r7(t)}},sg.Y8=class{constructor(t,s,i,e,n){this.IS=n;const r=t.h7("cubic-bezier"),h=i.h7("cubic-bezier"),o=s.h7("cubic-bezier"),a=e.h7("cubic-bezier");this.o7=t.a7(),this.l7=s.a7(),this.u7=t.a7()+r.c7(),this.f7=s.a7()+o.c7(),this.d7=i.a7()+h.p7(),this.m7=e.a7()+a.p7(),this.g7=i.a7(),this.y7=e.a7(),this.S7=0,this.w7=0,this.b7=0,this.v7=0,this.M7=0,this.x7=0,this._7=0,this.T7=0,this.G7=0,this.C7=0,this.I7=0,this.P7=0,this.A7=0,this.R7=0,this.E7=0,this.O7=0,this.F7=0,this.D7=0,this.k7=0,this.L7=0,this.N7=NaN,this.L8=!1,this.B7=100,this.W7=new Array(this.B7+1),this.W7[0]=0,this.V7=0,this.j7=[],this.H7=[];for(let t=0;t<100;t++)this.H7.push({x:0,y:0,t:0,vt:0});this.U7()}Jn(){sg.bh(this.W7),this.W7=null,sg.bh(this.j7),this.j7=null,sg.bh(this.H7),this.H7=null}DG(){return"cubic-bezier"}nL(){return this.IS}J7(){return Math.floor(this.V7/25)}z7(){return 1/this.J7()}Q8(t,s){this.q7=t,this.Y7=s,this.W7=new Array(this.B7+1),this.W7[0]=0,this.U7(),this.S7=this.o7+this.q7,this.w7=this.l7+this.Y7,this.b7=this.u7+this.q7,this.v7=this.f7+this.Y7,this.M7=this.d7+this.q7,this.x7=this.m7+this.Y7,this._7=this.g7+this.q7,this.T7=this.y7+this.Y7,this.G7=3*(this.b7-this.S7),this.C7=3*(this.v7-this.w7),this.I7=3*(this.M7-this.b7),this.P7=3*(this.x7-this.v7),this.A7=3*(this._7-this.M7),this.R7=3*(this.T7-this.x7),this.E7=3*(this.b7-this.S7),this.O7=3*(this.S7+this.M7-2*this.b7),this.F7=this._7-this.S7+3*(this.b7-this.M7),this.D7=3*(this.v7-this.w7),this.k7=3*(this.w7+this.x7-2*this.v7),this.L7=this.T7-this.w7+3*(this.v7-this.x7)}Map(t){if(!this.L8)return NaN;const s=this.X7(t);return ag[0]=this.Z7(s),ag[1]=this.K7(s),ag}kS(t,s){const i=this.Q7(100),e=this.t9(t,s,i),n=this.s9(t,s,i,e);return ug[0]=n.x,ug[1]=n.y,ug[2]=n.t,ug[3]=n.vt,ug}e7(t,s,i){const e=this.Q7(100),n=this.i9(t,s,e,i),r=this.s9(t,s,e,n);return ug[0]=r.x,ug[1]=r.y,ug[2]=r.t,ug[3]=r.vt,ug}n7(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.G7+e*this.I7+n*this.A7,h=i*this.C7+e*this.P7+n*this.R7,o=sg.sr(r,h);return og[0]=r/o,og[1]=h/o,og}r7(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.G7+e*this.I7+n*this.A7,h=i*this.C7+e*this.P7+n*this.R7;return Math.atan2(h,r)}X7(t){if(!this.L8)return;let s=t*this.W7[this.B7],i=0,e=this.B7,n=0;for(;i<e;)n=i+((e-i)/2|0),this.W7[n]<s?i=n+1:e=n;this.W7[n]>s&&n--;const r=this.W7[n];return r===s?n/this.B7:(n+(s-r)/(this.W7[n+1]-r))/this.B7}Z7(t){return this.L8?self.Vu.rc("cubicbezier")(t,this.o7+this.q7,this.u7+this.q7,this.d7+this.q7,this.g7+this.q7):NaN}K7(t){return this.L8?self.Vu.rc("cubicbezier")(t,this.l7+this.Y7,this.f7+this.Y7,this.m7+this.Y7,this.y7+this.Y7):NaN}Q7(t){if(t=t||100,this.j7.length>=t)return this.j7;this.j7=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.E7*i,h=this.O7*e,o=this.F7*n,a=this.D7*i,l=this.k7*e,u=this.L7*n,c=this.S7+r+h+o,f=this.w7+a+l+u;this.H7[s].x=c,this.H7[s].y=f,this.H7[s].t=i,this.H7[s].vt=0,this.j7[s]=this.H7[s]}return this.j7}t9(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.N7))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}else{for(let e=this.N7;e<this.N7+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}for(let e=this.N7;e>this.N7-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}}return this.N7=r,r}i9(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.N7))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}else{for(let h=this.N7;h<this.N7+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}for(let h=this.N7;h>this.N7-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}}return this.N7=r,r}s9(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;cg[0]=i[o];for(let i=1;i<=2;i++){const r=l+i*u,o=r**2,a=r**3,c=this.E7*r,f=this.O7*o,d=this.F7*a,p=this.D7*r,m=this.k7*o,g=this.L7*a,y=this.S7+c+f+d,S=this.w7+p+m+g,w=y-t,b=S-s,v=w*w+b*b;if(v<h){h=v,e=i,dg.x=y,dg.y=S,dg.t=r,dg.vt=v,n=dg;break t}const M=fg[i-1];M.x=y,M.y=S,M.t=r,M.vt=v,cg[i]=M}cg[3]=i[a],i=cg}while(r++<20);return n}U7(){this.L8=!0;let t=this.Z7(0),s=this.K7(0),i=0;for(let e=1;e<=this.B7;e++){const n=this.Z7(.01*e),r=this.K7(.01*e),h=t-n,o=s-r;i+=sg.sr(h,o),this.W7[e]=i,t=n,s=r}this.V7=i}},sg.X8=class{constructor(t,s,i){this.IS=i,this.e9=t.a7(),this.n9=s.a7(),this.q7=0,this.Y7=0}Jn(){}DG(){return"line"}nL(){return this.IS}Q8(t,s){this.q7=t,this.Y7=s}UM(){return this.e9+this.q7}qM(){return this.n9+this.Y7}}}{const pg=self.Cs,mg=0,gg=1;pg._6=class extends pg.jn{constructor(t,s,i){super(),this.Nc=i.LB(),this.r9=i,this.h9=s,this.Yn=t,this.o9=[],this.a9=0,this.l9=null,this.u9=0,this.c9(),this.f9=null,this.d9=null,this.p9=0,this.m9=0,this.g9=1,this.y9=0,this.S9=-1,this.w9=1,this.b9=!1,this.v9=!1,this.M9=!1,this.x9=!0,this._9=!1,this.T9=!1,this.G9=-1,this.C9=!1,this.I9=!1,this.P9=!1,this.A9=!1,this.R9=NaN,this.E9=[""],this.O9="",this.F9=!1,this.b6=0,this.D9=0,this.k9=null,this.L9=null}static x6(t,s){const i=s.C6(),e=i.N9(),n=i.Js(t[e]),r=pg.Un(pg._6,t[e],n,s);return r.B9(!0),r}static G6(t,s,i){return pg.Un(pg._6,t,s,i)}Jn(){if(this.gz())return;const t=this.Nc.Sf();this.r9.i8(this),this.r9.h8(this);for(const t of this.o9)t.Jn();pg.bh(this.o9),this.o9=null,this.Nc=null,this.r9=null,this.h9=null,this._9=!0,this.f9=null,this.d9=null,this.W9(t)}W9(t){const s=pg.Un(pg.Event,"timelinestatereleased");s.V9=this,t.dispatchEvent(s)}DG(){return 0}c9(){for(const t of this.h9.H9().j9())this.a9=this.o9.push(pg.U9.ET(this,t))}J9(){return this.r9}LB(){return this.Nc}V8(){return this.o9}z9(t,s,i,e){if(!this.D9)return;let n;for(let r=0;r<this.o9.length;r++){let h=this.o9[r];if(t!==h.Vz())continue;const o=h.Yz(i);o&&s.constructor===o.q9().constructor&&o.t7()===e.t7()&&(n||(n=[]),n.push(o))}return n}E8(){return!!this.o9.length}W8(t){for(const s of this.o9)if(pg.Ke(s.zz(),t))return s;return null}Y9(t){for(const s of this.o9)if(!s.X9()&&pg.Ke(s.Pc(),t))return s;return null}SY(t){this.Yn=t}Pc(){return this.Yn}Z9(){return this.h9}Hj(){return this.h9.Pc()}xz(){return this.h9.xz()}Mz(t){this.h9.Mz(t)}K9(){return this.h9.K9()}Q9(t){this.h9.Q9(t)}ttt(){return this.h9.ttt()}stt(t){this.h9.stt(t)}t7(){return this.h9.t7()}itt(t){this.h9.t7(t)}Wz(t){for(const s of this.V8())s.Wz(t)}Tz(){return this.h9.Tz()}_z(t){return this.h9._z(t)}Cz(){return this.h9.Cz()}Gz(t){return this.h9.Gz(t)}VJ(){return this.h9.VJ()}ett(t){return this.h9.ett(t)}Iz(t){return this.g9=t}Pz(){return this.g9}v8(){return this.h9.v8()}ntt(){return this.h9.ntt()}htt(){return this.h9.htt()}ott(){return this.y9}att(){return!this.IsPlaying()||this.g9>0}Rz(){return this.f9||(this.f9=new Promise((t=>{this.d9=t}))),this.f9}e8(){this.f9&&(this.d9(),this.f9=null,this.d9=null)}ltt(t){this.E9=pg._6.utt(t),this.F9=!0}Az(){return this.E9}ctt(){return this.F9&&(this.O9=this.E9.join(" ")),this.F9=!1,this.O9}bz(t){if(!this.E9)return!1;if(!this.E9.length)return!1;const s=pg._6.utt(t);return!!s&&!!s.length&&s.every(pg._6.ftt,this)}dtt(){pg.PB.ptt&&this.constructor===pg._6&&(pg.PB.ptt.CB.mtt(this),this.r9.lH(pg.PB.ptt.CB.gtt),this.r9.lH(pg.PB.ptt.CB.ytt),this.r9.lH(pg.PB.ptt.CB.Stt),this.r9.lH(pg.PB.ptt.CB.wtt),pg.PB.ptt.CB.btt())}vtt(){this.G9=this.Nc.Mtt()}w8(){this.P9||(this.P9=!0,pg.PB.ptt&&this.constructor===pg._6&&(pg.PB.ptt.CB.mtt(this),this.r9.lH(pg.PB.ptt.CB.xtt),this.r9.lH(pg.PB.ptt.CB._tt),this.r9.lH(pg.PB.ptt.CB.Ttt),this.r9.lH(pg.PB.ptt.CB.Gtt),pg.PB.ptt.CB.btt()))}Q6(t){this.b9=t}Ctt(){return this.G9===this.Nc.Mtt()}IsPlaying(t=!1){return!!this.Ctt()||!(!this.Itt()||t)||this.b9}Ptt(){return this.IsPlaying(!0)}Fz(){return this.Att()}Att(){return!(this.gz()||this.Itt()||this.Ptt()||this.y8())}t8(t){this.v9=t}Itt(){return this.v9}Rtt(t){this.x9=t;const s=this.Tz(),i=this.Cz();if(s||i){if(s&&!i);else if(!s&&i){const t=this.AF();1===this.y9&&(t<=0||t>=this.xz())&&(this.x9=!0)}}else{const t=this.AF();(t<=0||t>=this.xz())&&(this.x9=!0)}}y8(){return this.x9}gz(){return this._9}s8(t){this.T9=t}o8(){return this.T9}Ett(t){this.C9=t}Ott(){return this.C9}B9(t){this.I9=!!t}A6(){return this.I9}S8(){return this.M9}AF(){return this.p9}vz(t){const s=this.AF();this.Ftt(t),this.Rtt(!1),this.y8()||this.Ett(!0),(this.Ptt()||this.Itt()||!this.M9)&&(this.Ptt()||this.Itt()||this.M9?this.Ptt()?this.Sz():this.Itt()&&(this.r9.i8(this),this.Dtt()):this.Dtt()),this.ktt(),this.Ltt(this.AF(),!1,!0,!0,s),this.Ntt(),this.b6&&this.LB().mB(),this.Btt()}Ftt(t){pg.te(t)||(t=this.xz()),t<0?this.p9=0:t>=this.xz()?this.p9=this.xz():this.p9=t}$tt(t){pg.te(t)||(t=this.xz()),t<0?this.p9=0:t>=this.xz()?this.p9=this.xz():this.p9=t;for(const t of this.o9)t.Wtt()}Btt(){pg.PB.ptt&&this.constructor===pg._6&&(pg.PB.ptt.CB.mtt(this),this.r9.lH(pg.PB.ptt.CB.Vtt),this.r9.lH(pg.PB.ptt.CB.jtt),this.r9.lH(pg.PB.ptt.CB.Htt),pg.PB.ptt.CB.btt())}Utt(){if(this.Tz())return!0;if(this.Cz()&&1===this.y9){if(this.att()){if(this.AF()>=this.xz())return!1}else if(this.AF()<=0)return!1}else if(!this.Tz()&&!this.Cz())if(this.att()){if(this.AF()>=this.xz())return!1}else if(this.AF()<=0)return!1;return!0}wz(){this.gz()||this.Utt()&&this.Play(!0)}Play(t=!1){return!this.gz()&&!this.Itt()&&(this.Ptt()&&this.Ctt()?this.Jtt():!this.Ptt()&&!!(this.y8()||t||this.Ott())&&this.ztt())}Jtt(){return this.Ett(!1),this.r9.X6(this),this.r9.K6(this),this.Rz(),!0}ztt(){return this.Ett(!1),this.r9.K6(this),this.Rz(),!0}Sz(t=!1){this.gz()||(this.Rtt(t),this.r9.n8(this),this.y8()&&this.e8())}Bf(t=!0,s=!1){if(this.gz())return;if(!this.Ptt()&&this.Itt())return this.r9.i8(this);if(this.y8())return;this.Sz(!0),this.att()?this.Ftt(0):this.Ftt(this.xz());const i=this.AF();this.ktt(),s?this.qtt(i):this.Ltt(i,!1,!1,!0),t&&this.Btt(),this.Ntt(),this.b6&&t&&this.LB().mB()}Ytt(){this.Bf(!1,!0)}qtt(t){this.Ltt(t,!1,!1,!0,NaN,!1,!0)}a6(){return!!this.gz()||!(!this.LB().L5()&&this.Xtt())&&(this.r9.r8(this),this.LB().L5()||this.Ytt(),!0)}Dtt(){this.l8(!0)}a8(){this.l8(!1,!0),this.Q6(!1),this.t8(!1)}l8(t=!1,s=!1){if(!this.o8()||s)if(t){this.P9=!1,this.M9=!0,this.A9=!0,this.ktt();for(const t of this.o9)t.l8();this.Ntt()}else if(this.Q6(!0),this.t8(!1),this.dtt(),this.y8()){this.G9=-1,0!==this.y9&&(this.g9=Math.abs(this.g9)),this.y9=0,this.S9=-1,this.w9=1,this.x9=!1,this.P9=!1,this.M9=!0,this.A9=!0,this.att()?this.Ftt(0):this.Ftt(this.xz()),this.ktt();for(const t of this.o9)t.l8();this.Ntt()}else{-1!==this.S9&&(this.y9=this.S9),this.A9=!0,this.P9=!1,this.ktt();for(const t of this.o9)t.Ztt();this.Ntt()}}u8(){return this.b6}ktt(){this.D9=0;for(const t of this.o9)t.vR()&&(this.D9=1)}Ntt(){this.b6=0;for(const t of this.o9)t.Ktt(),0===this.b6&&1===t.u8()&&(this.b6=1),this.l9||1!==t.Qtt()||(this.l9||(this.l9=[]),this.u9=this.l9.push(t))}d8(t,s,i){if(this.htt()){if(0===t&&0===this.R9)return;this.R9=t,t=i}else{if(0===i&&0===this.R9)return;this.R9=i,t=i,s=1}const e=this.p9+this.m9,n=e+t*s*this.g9,r=this.h9.tst;n<0?(this.p9=0,this.m9=-n):n>=r?(this.p9=r,this.m9=this.p9-n):(this.p9=n,this.m9=0);let h=!1,o=!1;const a=this.Tz(),l=this.Cz();let u;a||l?a&&!l?this.g9>0?this.p9>=r&&(this.$tt(0),o=!0):this.p9<=0&&(this.$tt(r),o=!0):!a&&l?this.g9>0?this.p9>=r&&(this.Ftt(r),this.Iz(-1*this.Pz()),o=!0,1===this.y9?this.w9<this.VJ()?(this.w9++,this.y9=0):h=!0:0===this.y9&&(this.y9=1)):this.p9<=0&&(this.Ftt(0),this.Iz(-1*this.Pz()),o=!0,1===this.y9?this.w9<this.VJ()?(this.w9++,this.y9=0):h=!0:0===this.y9&&(this.y9=1)):a&&l&&(this.g9>0?this.p9>=r&&(this.Ftt(r),this.Iz(-1*this.Pz()),o=!0,this.y9++,pg.wrap(this.y9,0,2)):this.p9<=0&&(this.Ftt(0),this.Iz(-1*this.Pz()),o=!0,this.y9++,pg.wrap(this.y9,0,2))):this.g9>0?this.p9>=r&&(this.w9<this.VJ()?(this.w9++,this.$tt(0),o=!0):(this.Ftt(r),h=!0)):this.p9<=0&&(this.w9<this.VJ()?(this.w9++,this.$tt(r),o=!0):(this.Ftt(0),h=!0));const c=this.a9;if(h){for(u=0;u<c;u++)this.o9[u].sst();return this.Sz(!0),void this.vtt()}const f=this.u9;for(u=0;u<f;u++)this.l9[u].ist();if(1===this.D9)for(u=0;u<c;u++){const t=this.o9[u],s=t.est();this.p9-s<0&&e-s>0?(this.p9=s<0?0:s>=r?r:s,t.wc(s,!0,!1,o,this.A9,!1)):t.wc(this.p9,!0,!1,o,this.A9,!1)}else for(u=0;u<c;u++)this.o9[u].wc(this.p9,!0,!1,o,this.A9,!1);if(!this.IsPlaying()&&this.k9){const t=this.k9.AF()+this.k9.rst().nst().est(),s=this.p9-t;this.p9-=s,0!==this.m9&&(this.m9-=s),this.k9=null}for(u=0;u<f;u++)this.l9[u].hst();this.A9&&(this.A9=!1)}ost(t){this.k9=t}ast(){return this.k9}Ltt(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const t of this.o9)t.ist();for(const r of this.o9){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this.AF()-r.est(),s=n-r.est();t<0&&s>0&&(o=r.est(),this.Ftt(o))}r.wc(o,s,i,e,this.A9,h)}for(const t of this.o9)t.hst();this.A9&&r&&(this.A9=!1)}lst(){const t=this.h9.H9().ust(),s=pg.U9.ET(this,t);return this.a9=this.o9.push(s),s}E6(){if(!this.gz())for(const t of this.o9)t.cst()}b8(){for(const t of this.o9)t.b8()}fst(){for(const t of this.o9)t.dst()}pst(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.o9[i];if(!t)return;return t.mst(s),void this.r9.N6(s.Cj(),this)}for(const i of this.o9)if(i.X9()){if(t){if(i.zz()!==t)continue;i.mst(s),this.r9.N6(s.Cj(),this);break}if(!i.gst()){i.mst(s),this.r9.N6(s.Cj(),this);break}}}}j6(t,s){for(const i of this.o9)if(i.X9())if(s){if(s===i.zz()&&t===i.Vz())return!0}else if(t===i.Vz())return!0;return!1}g8(){return this.o9.some((t=>!t.X9()||t.yst()))}Xtt(){return this.o9.some((t=>{if(t.X9()){if(!t.yst())return!1;const s=t.Cj();return!!s&&s.n0()}return!1}))}Yz(t){for(const s of this.V8())for(const i of s.Sst())if(i.wst()===t)return i}bst(t){for(const s of this.o9)if(t===s.Vz())return s;return null}vst(t){let s=t?t.split(" "):[];const i=new Set(s.map((t=>t.toLowerCase().trim())));s=[...i.values()];for(const t of this.V8())for(const i of t.Mst())if(s.every((t=>i.xst(t))))return i}B6(){const t=[];for(const s of this.V8())t.push(s.Cj());return t.filter((t=>t))}g6(){for(const t of this.V8())t.g6()}s3(){return{tracksJson:this._st(),name:this.Yn,playheadTime:this.AF(),playbackRate:this.g9,pingPongState:this.y9,resumePingPongState:this.S9,currentRepeatCount:this.w9,isPlaying:this.b9,isScheduled:this.v9,initialStateSet:this.M9,finishedTriggers:this.P9,complete:this.x9,released:this._9,markedForRemoval:this.T9,completedTick:this.G9,implicitPause:this.C9,isTemplate:this.I9,tags:this.E9.join(" "),stringTags:this.O9,tagsChanged:this.F9,firstTick:this.A9}}i3(t){t&&(this.Tst(t.tracksJson),this.Yn=t.name,this.p9=t.playheadTime,this.g9=t.playbackRate,this.y9=t.pingPongState,this.S9=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.w9=t.currentRepeatCount,this.b9=!!t.isPlaying,this.v9=!!t.isScheduled,this.M9=!!t.initialStateSet,this.P9=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.x9=!!t.complete,this._9=!!t.released,this.T9=!!t.markedForRemoval,this.G9=t.completedTick,this.C9=!!t.implicitPause,this.I9=!!t.isTemplate,this.E9=t.tags.split(" "),this.O9=t.stringTags,this.F9=!!t.tagsChanged,this.A9=!!t.firstTick)}_st(){return this.o9.map((t=>t.s3()))}Tst(t){this.fst(),t.forEach(((t,s)=>{this.o9[s].i3(t)})),this.o9.filter((t=>t.yst()))}static ftt(t){const s=this.Az();return""===t?1===s.length&&""===s[0]:s.map((t=>t.toLowerCase())).includes(t.toLowerCase())}static utt(t){if(pg._e(t))return t.slice(0);if(pg.le(t))return t.split(" ");throw new Error("invalid tags")}Gst(){return this.L9||(this.L9=pg.Un(self.kz,this)),this.L9}}}{const yg=self.Cs,Sg=0,wg=1,bg=2;yg.U9=class extends yg.jn{constructor(t,s){super(),this.N8=t,this.Cst=s,this.Ist=s.H9(),this.Pst=NaN,this.Ast=NaN,this.Rst=null,this.Est=null,this.Ost=!1,this.mR=s.est()>0,this.Fst=!1,this.Dst=!1,this.kst=NaN,this.Lst=null,this.Nst=this.Cst.rst().Bst(),this.$st=[],this.Wst(),this.Vst=0,this.b6=0,this.jst=0}static ET(t,s){return yg.Un(yg.U9,t,s)}Jn(){this.Nst=null;for(const t of this.$st)t.Jn();yg.bh(this.$st),this.$st=null,this.N8=null,this.Rst=null,this.Est=null,this.Cst=null,this.Lst=null}Wst(){for(const t of this.Cst.Ust().Hst())this.$st.push(yg.Jst.ET(this,t))}cst(){for(const t of this.$st)t.cst()}b8(){for(const t of this.$st)t.b8();this.Rst=null,this.Est=null}zst(){return this.N8}LB(){return this.N8.LB()}Mst(){return this.Nst||(this.Nst=this.Cst.rst().Bst()),this.Nst}Sst(){return this.$st}Yz(t){for(let s=0;s<this.$st.length;s++){const i=this.$st[s];if(i.wst()===t)return i}}qst(){this.Rst||this.Vz()}Yst(){return!!this.Rst&&!this.Rst.Oq()}yst(){if(!this.X9())return!1;const t=this.Xst(),s=this.LB().eB(t);return!!s&&!s.Oq()}Cj(){if(!this.X9())return;const t=this.Zst();return-1!==t?this.LB().qQ(t):void 0}Kst(){return this.N8.V8().indexOf(this)}dst(){this.Rst=null,this.Pst=NaN,this.Est=null,this.Ast=NaN,this.Ost=!0}gst(){return!!this.Rst}Vz(){if(this.Ost)return;if(this.Rst&&this.Yst())return this.Rst;const t=this.Xst();return this.Rst=this.LB().eB(t),this.Rst}mst(t){if(this.Ost=!1,this.Rst!==t){this.b8(),this.Rst=t,this.Ast=t.Cj().nL(),this.Pst=t.$j(),this.Est=t.aB();for(const s of this.Qst()){const i=s.tit,e=s.sit;switch(i.iit()){case"instance-variable":{e.eit();const i=t.Cj(),n=i.nit(s.name),r=i.rit(n),h=i.hit(n);r===s.name&&h===s.type&&e.oit(n);break}case"behavior":{const i=s._J,n=this.Cj(),r=t.Cj(),h=e.GJ(r);if(i&&h){const t=i.Pc();n.ait(t),r.ait(t),e.eit(),e.lit(h.G0())}break}}}}}*Qst(){for(const t of this.$st){const s=t.q9(),i=this.Cj(),e={tit:t,sit:s};switch(t.iit()){case"world-instance":e.uit=t.wst();break;case"instance-variable":{const t=s.eit();e.name=i.rit(t),e.type=i.hit(t);break}case"effect":{const t=i.HW(),n=s.cit(t);e.fit=n;break}case"behavior":{const t=s.GJ(i);e._J=t;break}case"plugin":e.SW=i.wW()}yield e}}aB(){if(this.Est&&this.Yst())return this.Est;const t=this.Vz();return t&&(this.Est=t.aB()),this.Est}nst(){return this.Cst}Xst(){return isNaN(this.Pst)?this.Cst.Xst():this.Pst}dit(t){this.Cst.dit(t)}ttt(){return this.Cst.ttt()}stt(t){this.Cst.stt(t)}t7(){return this.Cst.t7()}zz(){return this.Cst.zz()}est(){return this.Cst.est()}pit(){return this.Cst.pit()}mit(t){this.Cst.mit(t)}itt(t){this.Cst.itt(t)}Wz(t){for(const s of this.Mst())s.Wz(t);for(const s of this.Sst())s.Wz(t)}git(){return this.Cst.git()}yit(t){this.Cst.yit(t)}Zst(){return isNaN(this.Ast)?this.Cst.Zst():this.Ast}Sit(t){this.Cst.Sit(t)}wit(t){this.Cst.wit(t)}bit(){const t=this.Vz();return t&&t.gJ().vit()?t.gJ().bit():this.Cst.bit()}Mit(t){this.Cst.Mit(t)}xit(){const t=this.Vz();return t&&t.gJ().vit()?t.gJ().xit():this.Cst.xit()}DG(){return this.Cst.DG()}Pc(){return this.Cst.Pc()}X9(){return 0===this.DG()}_it(){return 1===this.DG()}Tit(){return 2===this.DG()}Git(){return this.Vst}u8(){return this.b6}Qtt(){return this.jst}vR(){return this.mR}Wtt(){for(const t of this.$st)t.Wtt()}l8(){if(this.qst(),!this.Yst()&&this.X9())return;const t=this.zst().att(),s=t?0:this.pit();for(const t of this.$st)t.l8(s),0===this.Vst&&1===t.Git()&&(this.Vst=1),0===this.b6&&1===t.u8()&&(this.b6=1);this.jst=0,this.$st.some((t=>t.Qtt()))&&(this.jst=1),this.Lst=t?this.Cit(s):this.Iit(s),this.Fst=!1,this.Dst=!1,this.wc(s),this.Pit(this.Lst)}Ztt(){if(this.qst(),!this.Yst()&&this.X9())return;const t=this.N8.att(),s=this.N8.AF()-this.est();this.Lst=t?this.Cit(s):this.Iit(s);for(const t of this.$st)t.Ztt(s)}sst(){if(!this.zst().y8()&&(this.qst(),(this.Yst()||!this.X9())&&!this.mR)){const t=this.N8.AF();t>=this.est()+this.pit()?this.wc(this.pit(),!0,!1,!0,!1,!1,!0):t<=0&&this.wc(0,!0,!1,!0,!1,!1,!0)}}Ktt(){for(let t=0,s=this.$st.length;t<s;t++){const s=this.$st[t];s.Ktt(),0===this.Vst&&1===s.Git()&&(this.Vst=1),0===this.b6&&1===s.u8()&&(this.b6=1)}}ist(){const t=this.$st.length;for(let s=0;s<t;s++)this.$st[s].ist()}wc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.Rst||this.Vz();const o=this.Rst&&!this.Rst.Oq(),a=0===this.Cst.Jc;if((o||!a)&&!(r&&a&&this.Cj().n0()||(t-=this.est())<0)){this.Ait(t,s),this.Rit(t,s,n),!this.zst().IsPlaying()&&this.zst().ast()&&(t=this.zst().ast().AF());for(let s=0,n=this.$st.length;s<n;s++)this.$st[s].wc(t,i,e,h);this.Eit(t,s),0!==this.Vst&&(this.Est||(this.Est=this.Rst.aB()),this.Est&&this.Est.NH())}}hst(){const t=this.$st.length;for(let s=0;s<t;s++)this.$st[s].hst()}Ait(t,s){if(s&&this.mR&&!this.Fst){if(this.zst().att()){if(t<0)return}else if(t>this.pit())return;for(const t of this.$st)t.l8();this.Fst=!0}}Eit(t,s){if(s&&this.mR&&!this.Dst)if(this.zst().att()){if(t>=this.pit()){for(const t of this.$st)t.wc(this.pit(),!1,!0);this.Dst=!0}}else if(t<=0){for(const t of this.$st)t.wc(0,!1,!0);this.Dst=!0}}Rit(t,s,i){if(i)return;if(!s)return;if(!yg.PB.ptt)return;const e=this.zst();if(e.att()){const s=this.Lst.J8(),i=this.Lst.AF(),n=s?s.AF():e.xz();(t<=i||t>=n)&&(this.Lst=this.Ist.Oit(t,this.Cst),s&&this.Pit(this.Lst))}else{if(!this.Ist.Fit(t,this.Cst))return;this.Lst||(this.Lst=this.Ist.Fit(t,this.Cst));const s=this.Lst.Dit(),i=this.Lst.AF(),e=s?s.AF():0;(t>=i||t<=e)&&(this.Lst=this.Ist.Fit(t,this.Cst),this.Lst&&this.Pit(this.Lst))}}Cit(t){return this.Ist.kit(t,this.Cst)||this.Ist.Oit(t,this.Cst)}Iit(t){return this.Ist.kit(t,this.Cst)||this.Ist.Fit(t,this.Cst)}Pit(t){if(!yg.PB.ptt)return;const s=this.zst(),i=s.J9();yg.PB.ptt.CB.mtt(s),yg.PB.ptt.CB.Lit(t),i.lH(yg.PB.ptt.CB.Nit),i.lH(yg.PB.ptt.CB.Pit),s.IsPlaying()||s.ost(t),yg.PB.ptt.CB.btt(s),yg.PB.ptt.CB.Bit(t)}$it(){return this.Cst.rst().Wit()}Vit(){const t=this.Cst.Ust().jit(),s=yg.Jst.ET(this,t);return this.$st.push(s),s}Hit(t){this.Cst.rst().Uit(t)}Jit(t){for(const s of this.$st)s.Jit(t)}zit(){for(const t of this.$st)t.zit()}qit(){if(this.qst(),this.Yst()||!this.X9())for(const t of this.$st)t.qit()}Yit(){if(this.qst(),!this.Yst()&&this.X9())return;let t=!1;for(const s of this.$st){const i=s.Yit();!t&&i&&(t=!0)}if(t){const t=this.$it();t.vz(this.zst().AF()),t.Wz("noease"),t.yit(!0),t.ltt("")}}g6(){isNaN(this.kst)||this.Xit(this.kst),this.kst=NaN}s3(){const t=this.Vz(),s=t?t.$j():this.Xst();return{propertyTracksJson:this.Zit(),lastKeyframeDataItemJson:this.Kit(),initialStateOfNestedSet:this.Fst,endStateOfNestedSet:this.Dst,instanceUid:s,cleared:this.Ost}}i3(t){if(t){this.Qit(t.propertyTracksJson),this.tet(t.lastKeyframeDataItemJson),this.kst=t.instanceUid,this.Fst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Fst=t.initialStateOfNestedSet),this.Dst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Dst=t.endStateOfNestedSet),this.Ost=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.$st)0===this.Vst&&1===t.Git()&&(this.Vst=1),0===this.b6&&1===t.u8()&&(this.b6=1);this.jst=0,this.$st.some((t=>t.Qtt()))&&(this.jst=1)}}Kit(){return this.Cst.rst().iet(this.Lst)}Zit(){return this.$st.map((t=>t.s3()))}Qit(t){t.forEach(((t,s)=>{this.$st[s].i3(t)}))}Xit(t){if(!yg.te(t))return;const s=this.LB().eB(t);s&&this.zst().pst(this.Cst.zz(),s,this.Kst())}tet(t){const s=this.Cst.rst();this.Lst=s.eet(t)}}}{const vg=self.Cs;vg.Jst=class extends vg.jn{constructor(t,s){super(),this.net=t,this.ret=s,this.het=s.Ust(),this.Vst=0,this.b6=0,this.jst=0,this.oet=this.q9(),this.aet=this.ret.uet().let(),this.cet=null,this.fet=null}static ET(t,s){return vg.Un(vg.Jst,t,s)}Jn(){this.net=null,this.oet&&(this.oet.Jn(),this.oet=null),this.aet=null,this.ret=null,this.het=null}Git(){return this.Vst}u8(){return this.b6}Qtt(){return this.jst}det(){return!!this.fet}pet(t){this.fet=t}met(){return this.fet}yet(){return this.net}wet(){return this.ret}Ust(){return this.het}zst(){return this.net.zst()}LB(){return this.net.LB()}Vz(){return this.net.Vz()}q9(){if(this.oet)return this.oet;let t;switch(this.ret.iit()){case"behavior":t=new vg.Jst.bet(this);break;case"effect":t=new vg.Jst.vet(this),this.b6=1;break;case"instance-variable":t=new vg.Jst.Met(this);break;case"plugin":t=new vg.Jst.xet(this),this.b6=1;break;case"world-instance":t=new vg.Jst._et(this),this.b6=1,this.Vst=1;break;case"value":t=new vg.Jst.Tet(this);break;case"audio":t=new vg.Jst.Get(this)}return this.oet=t,this.oet}iit(){return this.ret.iit()}Cet(t){this.ret.Cet(t)}Iet(){return this.ret.Pet()}Aet(t){this.ret.Ret(t)}qz(){return this.q9().Eet()}wst(){return this.ret.Oet()}Fet(t){this.ret.Det(t)}ket(){return this.ret.DG()}Let(t){this.ret.Net(t)}Bet(){return this.Ust().$et(this.ret).DG()}Wet(){return this.ret.Wet()}Vet(t){this.ret.Vet(t)}jet(){return this.ret.jet()}Het(t){this.ret.Het(t)}git(){return this.ret.git()}yit(t){this.ret.yit(t)}ttt(){return this.ret.ttt()}stt(t){this.ret.stt(t)}t7(){return this.ret.t7()}itt(t){this.ret.itt(t)}Wz(t){for(const s of this.Uet())s.Wz(t)}Jet(){return this.ret.Jet()}Uet(){return this.aet||(this.aet=this.ret.uet().let()),this.aet}U8(){return this.ret.uet().U8()}zet(t){return this.het.zet(t,this.ret)}qet(t){return this.het.qet(t,this.ret)}Yet(t){let s,i=this.het.zet(t,this.ret);return i?s=this.het.Xet(t,this.ret):(i=this.het.qet(t,this.ret),s=this.het.Zet(t,this.ret)),{start:i,end:s}}*Ket(){for(const t of this.Uet())yield t.a7()}*Qet(){for(const t of this.Uet())yield t.AF()}cst(){this.q9().cst()}b8(){this.q9().b8()}tnt(){return this.q9().tnt()}Wtt(){this.q9().Wtt()}l8(t){this.q9().l8(),this.cet=this.snt(t),this.Ktt()}Ztt(t){this.q9().Ztt(),this.cet=this.snt(t)}Ktt(){const t=this.yet();if(this.jst=0,t.X9()){const s=this.zst(),i=t.Vz(),e=this.q9(),n=this.wst();if(e.int()){const t=s.z9(i,e,n,this);t&&t.length&&(this.jst=1)}else this.jst=0}}snt(t){const s=this.zst();return this.het.zet(t,this.ret)||(s.att()?this.het.qet(t,this.ret):this.het.Zet(t,this.ret))}ist(){this.oet.ist()}wc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.het.qet(t,this.ret);else{if(this.cet){const s=this.zst(),i=this.cet.J8(),e=this.cet.AF(),n=i?i.AF():s.xz();(t<=e||t>=n)&&(this.cet=this.het.qet(t,this.ret),h=!0)}else this.cet=this.het.qet(t,this.ret),h=!0;n=this.cet}n&&(r=n.J8()),this.oet.wc(t,n,r,s,i,e,h)}ent(t){if(this.cet){const s=this.zst(),i=this.cet.J8(),e=this.cet.AF(),n=i?i.AF():s.xz();(t<=e||t>=n)&&(this.cet=this.het.qet(t,this.ret))}else this.cet=this.het.qet(t,this.ret);const s=this.cet,i=s.J8();return this.oet.ent(t,s,i)}nnt(t,s,i){return this.oet.ent(t,s,i)}hst(){this.oet.hst()}static rnt(t,s){const i=s.wet();return s.het.qet(t,i)}static hnt(t,s){const i=s.wet();return s.het.Zet(t,i)}ont(){const t=this.ret.uet().ant();return this.cet=null,t}Jit(t){this.cet=null,this.ret.uet().lnt(t)}zit(){this.q9().zit()}qit(){if(this.q9().qit()){const t=this.het.$et(this.ret),s=this.q9().tnt();t.unt(s)}}Yit(){const t=this.q9().Yit();return t&&this.cnt(),this.q9().fnt(),t}cnt(){const t=this.zst().AF(),s=this.q9(),i=vg.Jst.rnt(t,this),e=this.ont();e.Net(i.DG()),e.vz(t),e.Wz(i.dnt()),e.yit(!0),e.pnt(s.mnt()),e.unt(s.tnt())}s3(){return{sourceAdapterJson:this.q9().s3()}}i3(t){t&&this.q9().i3(t.sourceAdapterJson)}}}{const Mg=self.Cs,xg=Mg.Jst;xg._et=class{constructor(t){this.gnt=t,this.ynt=null,this.Snt()}Jn(){this.ynt&&(this.ynt.Jn(),this.ynt=null),this.gnt=null}int(){return this.ynt.int()}Yz(){return this.gnt}cst(){this.ynt&&this.ynt.cst()}b8(){this.ynt&&this.ynt.b8()}Snt(){return this.ynt||(this.ynt=this.wnt()),this.ynt}eit(){}nL(){return this.eit()}bnt(){}Wtt(){this.Snt().Wtt()}l8(){this.Snt().l8()}Ztt(){this.Snt().Ztt()}ist(){this.ynt.vnt()}wc(t,s,i,e,n,r,h){let o;switch(this.gnt.Bet()){case"numeric":o=xg.Mnt.wc(t,s,i,this.gnt);break;case"angle":o=xg.xnt.wc(t,s,i,this.gnt);break;case"boolean":o=xg._nt.wc(t,s,i,this.gnt);break;case"color":o=xg.Tnt.wc(t,s,i,this.gnt);break;case"text":o=xg.Gnt.wc(t,s,i,this.gnt)}this.ynt.Cnt(t,o,s,i,e,n,r,h)}ent(t,s,i){switch(this.gnt.Bet()){case"numeric":return xg.Mnt.wc(t,s,i,this.gnt);case"angle":return xg.xnt.wc(t,s,i,this.gnt);case"boolean":return xg._nt.wc(t,s,i,this.gnt);case"color":return xg.Tnt.wc(t,s,i,this.gnt);case"text":return xg.Gnt.wc(t,s,i,this.gnt)}}hst(){this.ynt.Int()}zit(){this.Snt().Pnt()}fnt(){this.Snt().fnt()}tnt(){return this.Snt().tnt()}qit(){return this.Snt().qit()}Yit(){return this.Snt().Yit()}mnt(){const t=this.gnt,s=t.yet().zst().AF(),i=xg.rnt(s,t),e=i.J8();switch(t.Bet()){case"numeric":return xg.Mnt.wc(s,i,e,t);case"angle":return xg.xnt.wc(s,i,e,t);case"boolean":return xg._nt.wc(s,i,e,t);case"color":return xg.Tnt.wc(s,i,e,t);case"text":return xg.Gnt.wc(s,i,e,t)}}wnt(){const t=this.gnt;switch(t.Jet()?t.Bet():""){case"combo":case"boolean":case"text":case"string":return new xg.Rnt.Ant(this);case"numeric":case"number":case"angle":return"combo"===this.gnt.ket()?new xg.Rnt.Ant(this):new xg.Rnt.Ent(this);case"color":case"offsetColor":return new xg.Rnt.Ont(this);default:return new xg.Rnt.Ent(this)}}s3(){return{propertyAdapterJson:this.Snt().s3()}}i3(t){t&&this.Snt().i3(t.propertyAdapterJson)}}}{const _g=self.Cs,Tg=0;class Gg extends _g.Jst._et{constructor(t){super(t),this.Fnt=NaN}eit(){return this.gnt.wet().Pet()[0]}nL(){return this.Fnt?this.Fnt:super.nL()}bnt(){return this.gnt.yet().Vz()}oit(t){this.gnt.wet().Pet()[0]!==t&&(this.Fnt=t)}wc(t,s,i,e,n,r,h){this.Snt().Dnt(s.Eet())&&super.wc(t,s,i,e,n,r,h)}ent(t,s,i){if(this.Snt().Dnt(s.Eet()))return super.ent(t,s,i)}s3(){return Object.assign(super.s3(),{index:this.Fnt})}i3(t){t&&(super.i3(t),this.Fnt=t.index)}}_g.Jst.Met=Gg}{const Cg=self.Cs,Ig=0,Pg=1,Ag=2;class Rg extends Cg.Jst._et{constructor(t){super(t),this.qK=NaN}eit(){return this.gnt.wet().Pet()[1]}bnt(){const t=this.gnt.wet(),s=this.gnt.yet(),i=this.qK?this.qK:t.Pet()[0],e=s.Vz(),n=e.knt(i);return e.Lnt()[n].gJ()}GJ(t){const s=this.gnt.wet().Pet()[2];return t.Nnt(s)}lit(t){this.gnt.wet().Pet()[0]!==t&&(this.qK=t)}wc(t,s,i,e,n,r,h){const o=this.gnt.yet().Vz();this.GJ(o.Cj())&&super.wc(t,s,i,e,n,r,h)}ent(t,s,i){const e=this.gnt.yet().Vz();if(this.GJ(e.Cj()))return super.ent(t,s,i)}s3(){return Object.assign(super.s3(),{sid:this.qK})}i3(t){t&&(super.i3(t),this.qK=t.sid)}}Cg.Jst.bet=Rg}{const Eg=self.Cs,Og=0,Fg=1;class Dg extends Eg.Jst._et{constructor(t){super(t)}eit(){return this.gnt.wet().Pet()[1]}bnt(){const t=this.gnt.yet().aB().kH(),s=t.HW(),i=this.cit(s).nL();return t.EJ(i)?t.Bnt(i):null}cit(t){const s=this.gnt.wet().Pet()[0];return t.$nt(s)}wc(t,s,i,e,n,r,h){this.Wnt()&&super.wc(t,s,i,e,n,r,h)}ent(t,s,i){if(this.Wnt())return super.ent(t,s,i)}Wnt(){const t=this.gnt.yet().aB().kH(),s=t.HW(),i=this.cit(s);if(!i)return;const e=i.nL();return t.EJ(e)}}Eg.Jst.vet=Dg}{const kg=self.Cs,Lg=0;class Ng extends kg.Jst._et{constructor(t){super(t)}eit(){return this.gnt.wet().Pet()[0]}bnt(){return this.gnt.yet().Vz().gJ()}wc(t,s,i,e,n,r,h){const o=this.gnt.yet();o.Cj().wW()===o.Vz().Cj().wW()&&super.wc(t,s,i,e,n,r,h)}ent(t,s,i){const e=this.gnt.yet();if(e.Cj().wW()===e.Vz().Cj().wW())return super.ent(t,s,i)}Vnt(){const t=this.gnt.yet().Cj().wW();if(kg.PB.jnt&&t instanceof kg.PB.jnt&&("initial-frame"===this.gnt.wst()||"initial-animation"===this.gnt.wst()))switch(this.gnt.t7()){case"relative":case"absolute":return null}}}kg.Jst.xet=Ng}{const Bg=self.Cs;class $g extends Bg.Jst._et{constructor(t){super(t),this.Hnt=0,this.Unt=!1}int(){return!1}l8(){const t=this.gnt.Ust();let s=this.gnt.wet();s=t.$et(s),this.Hnt=s.a7()}Ztt(){}Eet(){return this.Unt||this.gnt.wc(0),this.Hnt}wc(t,s,i,e,n,r,h){this.Hnt=Bg.Jst.Mnt.wc(t,s,i,this.gnt),this.Unt=!0}zit(){}fnt(){}tnt(){return this.Hnt}qit(){return!1}Yit(){return!1}s3(){return{value:this.Hnt,init:this.Unt}}i3(t){t&&(this.Hnt=t.value,this.Unt=!t.hasOwnProperty("init")||t.init)}}Bg.Jst.Tet=$g}{const Wg=self.Cs,Vg=0,jg=0,Hg=1,Ug=1,Jg=2,zg=3;class qg extends Wg.Jst._et{constructor(t){super(t),this.Jnt=!1,this.znt=null,this.qnt=null,this.Ynt=null,this.N8=this.gnt.zst(),this.net=this.gnt.yet(),this.Xnt=this.gnt.Iet(),this.Znt=this.Xnt[0],this.Knt=this.Xnt[1],this.Xnt[3]?this.Qnt=this.Xnt[3]:this.Qnt=Math.random().toString(36).slice(2),this.trt=NaN,this.srt=NaN,this.irt=NaN,this.ert=null,this.nrt()}Jn(){super.Jn(),this.znt=null,this.qnt=null,this.Ynt=null,this.N8=null,this.net=null,this.Xnt=null,this.Znt=null,this.ert=null}nrt(){if(!self.Cs.PB.Audio)return;const t=this.gnt.LB().rrt(self.Cs.PB.Audio);t&&(this.znt=t.gW().gJ()),this.qnt=self.Cs.PB.Audio.hrt,this.Ynt=self.Cs.PB.Audio.ort}art(){if(this.ert)return;const t=this.gnt.yet().Yz("audioSource");t&&(this.ert=t.q9())}lrt(){const t=this.gnt.yet().Yz("volume");return t?t.q9().srt:this.srt}cst(){super.cst(),this.Jnt=!1,this.znt&&(this.Ynt&&(this.trt=this.Ynt.urt.call(this.znt,this.Qnt),this.srt=this.Ynt.crt.call(this.znt,this.Qnt)),this.qnt&&this.qnt.Sz.call(this.znt,this.Qnt))}frt(){return this.Qnt}drt(){return this.irt}prt(t){this.irt=t}l8(){super.l8(),this.trt=NaN,this.Jnt=!1}Ztt(){super.Ztt();const t=this.gnt.zst().AF();switch(this.trt=t-this.Knt,this.gnt.wst()){case"audioSource":break;case"volume":this.srt=this.gnt.ent(t)}this.Jnt=!1}wc(t,s,i,e,n,r,h){if(this.znt)switch(this.gnt.wst()){case"audioSource":{if(!this.N8.att())return;if(e)return void(this.qnt&&this.qnt.Sz.call(this.znt,this.Qnt));if(t<this.Knt)return void(this.Jnt=!1);const s=this.Ynt.mrt.call(this.znt,this.Qnt),i=this.N8.Pz();if(i!==s&&this.qnt.Iz.call(this.znt,this.Qnt,i),this.Jnt)return;if(!this.gnt.zst().IsPlaying())return;if(this.Jnt=!0,isNaN(this.trt)){const s=self.performance.now(),i=t-this.Knt;if("suspended"===this.znt.grt())return void(this.Jnt=!1);const e=i+(self.performance.now()-s)/1e3;if(this.qnt){let t=this.drt();isNaN(t)?(this.prt(0),t=0):this.prt(t),this.qnt.yrt.call(this.znt,this.Znt,t,this.Qnt,e)}}else{const t=this.trt;this.trt=NaN;const s=this.lrt();if(this.srt=NaN,"suspended"===this.znt.grt())return void(this.Jnt=!1);this.qnt&&(this.prt(s),this.qnt.yrt.call(this.znt,this.Znt,s,this.Qnt,t))}break}case"volume":this.art(),super.wc(t,s,i,e,n,r,h)}}ent(t,s,i){if(this.znt)switch(this.gnt.wst()){case"audioSource":return;case"volume":return this.art(),super.ent(t,s,i)}}Srt(t,s){return this.ert?this.ert.drt():0}wrt(t,s,i,e){this.ert&&this.ert.prt(this.Srt()+s),this.qnt&&this.ert&&this.qnt.prt.call(this.znt,this.ert.frt(),this.ert.drt())}brt(t,s,i){this.ert&&this.ert.prt(s),this.qnt&&this.ert&&this.qnt.prt.call(this.znt,this.ert.frt(),this.ert.drt())}vrt(){return!0}s3(){return{audioPlaybackStarted:this.Jnt,audioTag:this.Qnt,pauseTime:this.trt,pauseVolume:this.srt,volume:this.irt}}i3(t){t&&(this.Jnt=t.audioPlaybackStarted,this.Qnt=t.audioTag,this.trt=t.pauseTime,this.srt=t.pauseVolume,this.irt=t.volume,this.nrt())}}Wg.Jst.Get=qg}{const Yg=self.Cs;Yg.Jst.Rnt=class{constructor(t){this.oet=t,this.gnt=t.Yz(),this.Est=this.gnt.yet().aB(),this.Mrt=this.gnt.wst(),this.xrt=!1,this._rt=null,this.Trt=null}Jn(){this.oet=null,this.gnt=null,this.Est=null,this._rt=null,this.Trt=null}int(){return!1}cst(){}b8(){this.Est=null,this._rt=null,this.Trt=null}q9(){return this.oet}Yz(){return this.gnt}aB(){return this.Est||(this.Est=this.gnt.yet().aB()),this.Est}Grt(t){this.xrt=!!t}Crt(){return this.xrt}Wtt(){}l8(){}Ztt(){}Pnt(){this._rt=this.tnt()}fnt(){this._rt=null}tnt(){}qit(){}Yit(){}Dnt(t){return typeof this.Irt()==typeof t}vnt(){}Cnt(t,s,i,e,n,r,h,o){}Int(){}Prt(){return this.Rrt((()=>{const t=this.gnt.wet();return this.gnt.Ust().$et(t)}),(()=>{const t=this.gnt.wet();return this.gnt.Ust().Ert(t)})).Art()}Ort(){const t=this.gnt.zst().AF()-this.gnt.yet().est();return this.Rrt((()=>{const s=this.gnt.wet();return this.gnt.Ust().qet(t,s)}),(()=>{const s=this.gnt.wet(),i=this.gnt.Ust();return i.Zet(t,s)||i.Ert(s)})).Art()}Rrt(t,s){return this.gnt.zst().att()?t():s()}Frt(t,s){return"relative"===this.gnt.t7()?t():s()}Drt(t,s){return this.Crt()?(this.Grt(!1),t()):s()}krt(t){}Lrt(){return this.oet.nL()}Nrt(){return this.Trt||(this.Trt=this.oet.bnt()),this.Trt}Brt(t,s,i,e,n,r){switch(this.gnt.iit()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}s3(){return{firstAbsoluteUpdate:this.xrt,saveState:this._rt}}i3(t){t&&(this.xrt=t.firstAbsoluteUpdate,this._rt=t.saveState)}$rt(t,s=!1){const i=[];for(const e of t){const t=e.yet().est();for(const n of e.Uet())s&&0===n.AF()?i.push({time:t+n.AF(),value:n.Art()}):s||i.push({time:t+n.AF(),value:n.Art()})}return i.sort(((t,s)=>t.time-s.time))}Wrt(t,s,i){return this.Vrt(s,i)}Vrt(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}}}{const Xg=self.Cs,Zg=new Map,Kg=[0,0,0];class Qg extends Xg.Jst.Rnt{constructor(t){super(t)}Wtt(){}l8(){}Ztt(){}tnt(){const t=this.gnt.iit(),s=this.Nrt(),i=this.Lrt();switch(t){case"behavior":case"plugin":return this.jrt(s.Hrt(i));case"effect":return this.jrt(s[i]);case"world-instance":return this.jrt(this.Irt())}}qit(){const t=this.Prt();return!this.Urt(t,this.Irt())}Yit(){return!Xg.ee(this._rt)&&!this.Urt(this._rt,this.Irt())}Urt(t,s){return t=this.Jrt(t),s=this.Jrt(s),t.Uo(s)}Prt(){const t=super.Prt();return this.Jrt(t)}Ort(){const t=super.Ort();return this.Jrt(t)}krt(t){}jrt(t){return Xg.Le(t,Xg._o)?t.toArray().slice(0,3):t.slice(0,3)}Jrt(t){return Xg.Le(t,Xg._o)?t:new Xg._o(t[0],t[1],t[2],1)}Dnt(t){return!0}int(){return!0}vnt(){const t=this.gnt.zst(),s=this.gnt.Vz(),i=this.gnt.q9(),e=t.z9(s,i,this.Mrt,this.gnt);if(e&&e.length>1){Zg.has(s)||Zg.set(s,new Map);const t=Zg.get(s),i=this.gnt.iit();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.Mrt)||e.set(this.Mrt,{zrt:!1,color:new Xg._o(0,0,0,1)})}}qrt(t,s,i){const e=Zg.get(t).get(s).get(i);return e.zrt=!0,e.color}Cnt(t,s,i,e,n,r,h,o){const a=this.gnt.zst(),l=this.gnt.yet(),u=this.gnt.Vz(),c=this.gnt.q9(),f=this.gnt.iit(),d=this.Mrt,p=a.z9(u,c,d,this.gnt);if(p&&p.length>1){const t=this.$rt(p,!0),i=this.Wrt(a,a.AF(),t);if(i){const t=l.est(),e=i.time-t;if(0===e)this.qrt(u,f,this.Mrt).Ro(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.gnt.wc(e,!1,!0),h=Xg._o.Ma(t,r[0]),o=Xg._o.Ma(i,r[1]),a=Xg._o.Ma(n,r[2]);this.qrt(u,f,this.Mrt).Ro(h,o,a)}}}else this.Yrt(s[0],s[1],s[2])}Int(){const t=this.gnt.Vz();if(!Zg.has(t))return;const s=Zg.get(t),i=this.gnt.iit();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.Mrt))return;const n=e.get(this.Mrt),r=n.zrt,h=n.color;r&&this.Yrt(h.No(),h.Bo(),h.$o()),0===e.size&&s.delete(i),0===s.size&&Zg.delete(t)}Irt(){const t=this.gnt.iit(),s=this.Nrt(),i=this.Lrt();switch(t){case"behavior":case"plugin":return this.Jrt(s.Hrt(i));case"effect":return s[i].clone();case"world-instance":return this.aB().hU().clone()}}Yrt(t,s,i){const e=this.gnt.iit(),n=this.Nrt(),r=this.Lrt();switch(e){case"behavior":case"plugin":Kg[0]=t,Kg[1]=s,Kg[2]=i,n.Xrt(r,Kg);break;case"effect":n[r].Ao(t,s,i);break;case"world-instance":this.aB().Zrt(t,s,i)}}s3(){}i3(t){}}Xg.Jst.Rnt.Ont=Qg}{const ty=self.Cs,sy=ty.Jst;class iy extends ty.Jst.Rnt{constructor(t){super(t)}Wtt(){}l8(){}Ztt(){}tnt(){return this.Irt()}qit(){return this.Prt()!==this.tnt()}Yit(){return!ty.ee(this._rt)&&this._rt!==this.tnt()}int(){return!1}Cnt(t,s,i,e,n,r,h,o){const a=this.gnt,l=a.yet(),u=a.iit(),c=a.zst(),f=l.Vz(),d=a.q9(),p=this.Mrt,m=c.z9(f,d,p,a);if(m&&m.length>1){const i=this.$rt(m),e=t+l.est(),n=this.Wrt(c,e,i);n&&(s=n.value)}switch(a.Bet()){case"numeric":if(!sy.Mnt.Krt(this.Lrt(),this.Nrt(),s,u))return;break;case"angle":if(!sy.xnt.Krt(this.Lrt(),this.Nrt(),s,u))return;break;case"boolean":if(!sy._nt.Krt(this.Lrt(),this.Nrt(),s,u))return;break;case"color":if(!sy.Tnt.Krt(this.Lrt(),this.Nrt(),s,u))return;break;case"text":if(!sy.Gnt.Krt(this.Lrt(),this.Nrt(),s,u))return}this.Yrt(s)}Irt(){const t=this.gnt.iit(),s=this.Nrt(),i=this.Lrt();switch(t){case"behavior":case"plugin":return s.Hrt(i);case"effect":return s[i];case"instance-variable":return s.Qrt(i)}}Yrt(t){const s=this.gnt.iit(),i=this.Nrt(),e=this.Lrt();switch(s){case"behavior":case"plugin":i.Xrt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.tht(e,t)}}}ty.Jst.Rnt.Ant=iy}{const ey=self.Cs,ny=ey.Jst.Rnt,ry=new Map,hy=(t,s,i,e,n,r=!1,h=null,o=null)=>{ry.set(t,{sht:s,iht:i,eht:e,round:n,nht:r,init:h,reset:o})};hy("offsetX",((t,s,i,e)=>{"relative"===e.gnt.t7()?t.rht(s,i.zst().ntt()):t.rht(s)}),((t,s)=>t.JM(s)),(t=>t.UM()),!0),hy("offsetY",((t,s,i,e)=>{"relative"===e.gnt.t7()?t.hht(s,i.zst().ntt()):t.hht(s)}),((t,s)=>t.YM(s)),(t=>t.qM()),!0),hy("offsetWidth",((t,s,i,e,n)=>{if(0===s)return;const r="relative"===e.gnt.t7(),h=1===e.oht.DG();if((r||h)&&t.OU()&&t.$U()){if(isNaN(e.aht)){const s=[];let n=t.bU();for(;n;)s.push(n),n=n.bU();s.reverse();const r=(t,s)=>s.zst().bst(t.Vz()),o=(t,s)=>{const i=r(t,s);if(i)return i.bit();const e=t.Vz().gJ();return e.vit()?e.bit():t.uht().lht()},a=(t,s,i,e=0)=>{const n=r(t,s);if(!n)return e;const h=n.Yz(i);if(!h)return e;const o=h.wet().uet();if(!o)return e;const a=o.Ert();return a?a.Eet():e};let l;if(h)l=s[s.length-1].Vg();else{let t=s[0];l=t.uht().lht()*t.uht().cht(),l+=a(t,i,"offsetWidth"),l+=o(t,i)*a(t,i,"offsetScaleX");for(let e=1;e<s.length;e++)t=s[e],l*=t.uht().cht(),l+=a(t,i,"offsetWidth"),l+=o(t,i)*a(t,i,"offsetScaleX")}e.aht=0===l?Number.EPSILON:l}if(n)return;t.Ty(s/e.aht,!0)}else t.Ty(s)}),((t,s)=>t.Yg(s)),(t=>t.Vg()),!0),hy("offsetHeight",((t,s,i,e,n)=>{if(0===s)return;const r="relative"===e.gnt.t7(),h=1===e.oht.DG();if((r||h)&&t.OU()&&t.VU()){if(isNaN(e.aht)){const s=[];let n=t.bU();for(;n;)s.push(n),n=n.bU();s.reverse();const r=(t,s)=>s.zst().bst(t.Vz()),o=(t,s)=>{const i=r(t,s);if(i)return i.xit();const e=t.Vz().gJ();return e.vit()?e.xit():t.uht().fht()},a=(t,s,i,e=0)=>{const n=s.zst().bst(t.Vz());if(!n)return e;const r=n.Yz(i);if(!r)return e;const h=r.wet().uet();if(!h)return e;const o=h.Ert();return o?o.Eet():e};let l;if(h)l=s[s.length-1].Kg();else{let t=s[0];l=t.uht().fht()*t.uht().dht(),l+=a(t,i,"offsetHeight"),l+=o(t,i)*a(t,i,"offsetScaleY");for(let e=1;e<s.length;e++)t=s[e],l*=t.uht().dht(),l+=a(t,i),l+=o(t,i)*a(t,i,"offsetScaleY")}e.aht=0===l?Number.EPSILON:l}if(n)return;t.pht(s/e.aht,!0)}else t.pht(s)}),((t,s)=>t.jg(s)),(t=>t.Kg()),!0),hy("offsetAngle",((t,s,i,e,n)=>{t.mht(s)}),((t,s)=>t.XW(s)),(t=>t.ZW()),!1,!0),hy("offsetOpacity",((t,s,i,e,n)=>{s/=e.ght?e.ght:1;const r=t.sO()+s;if(0===e.yht)r>1?e.yht+=r-1:r<0&&(e.yht+=r),t.Sht(s);else{const i=t.sO()+s;s>0&&e.yht>0?i>1&&(e.yht+=i-1):s>0&&e.yht<0?(e.yht+=s,e.yht>0&&(t.Sht(e.yht),e.yht=0)):s<0&&e.yht>0?(e.yht+=s,e.yht<0&&(t.Sht(e.yht),e.yht=0)):s<0&&e.yht<0&&i<0&&(e.yht+=i)}}),((t,s)=>{t.eO(s)}),(t=>t.sO()),!1,!0,((t,s,i)=>{switch(t.yht=0,t.gnt.t7()){case"relative":{t.gnt.Ust();const s=t.gnt.wet().uet().let();let i=t.aB().sO(),e=i;for(const n of s){const s=n.AF();e=i+t.gnt.ent(s),e=ey.Zn(e,0,1)}t.wht=i-e,t.wht=Math.round(100*(t.wht+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].AF();e-=t.gnt.ent(n),e=ey.Zn(e,0,1)}t.bht=e,t.bht=Math.round(100*(t.bht+Number.EPSILON))/100;break}}const e="relative"===t.gnt.t7(),n=1===t.oht.DG();if((e||n)&&s.OU()&&s.qU()){const e=[];let n=s.bU();for(;n;)e.push(n),n=n.bU();e.reverse();const r=(t,s,i)=>{const e=s.zst().bst(t.Vz());if(!e)return 0;const n=e.Yz(i);if(!n)return 0;const r=n.wet().uet();if(!r)return 0;const h=r.Ert();return h?h.Eet():0};let h=e[0].uht().vht();h+=r(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)h+=r(e[t],i,"offsetOpacity");t.ght=0===h?1:h}}),(t=>{switch(t.gnt.t7()){case"relative":{t.yht=0;const s=t.aB();let i=s.sO();i=Math.round(100*(i+Number.EPSILON))/100,t.gnt.zst().att()?(s.eO(i+t.wht),t._C=0):(s.eO(i-t.bht),t._C=t.q9().mnt());break}}})),hy("offsetOriginX",((t,s)=>t.Mht(s)),((t,s)=>t.HH(s)),(t=>t.jH()),!1),hy("offsetOriginY",((t,s)=>t.xht(s)),((t,s)=>t.zH(s)),(t=>t.JH()),!1),hy("offsetZElevation",((t,s)=>t._ht(s)),((t,s)=>t.ZM(s)),(t=>t.XM()),!0),hy("offsetScaleX",((t,s,i,e)=>{if(0===s)return;const n=t.Vg()<0?-1:1;if("relative"===e.gnt.t7()&&t.OU()&&t.$U()){const r=i.bit()*n*s;isNaN(e.aht)&&ry.get("offsetWidth").sht(t,1,i,e,!0),t.Ty(r/e.aht,!0)}else t.Ty(i.bit()*n*s)}),((t,s,i)=>{t.Yg(i.bit()*s)}),((t,s)=>{const i=t.Vg()<0?-1:1;if(t.$U()){const e=t.bU(),n=s.zst().bst(e.Vz());let r=NaN;if(n)r=e.Vg()/n.bit();else{const t=e.Vz().gJ();r=t.vit()?e.Vg()/t.bit():1}return t.Vg()*i/(s.bit()*r)}return t.Vg()*i/s.bit()}),!1),hy("offsetScaleY",((t,s,i,e)=>{if(0===s)return;const n=t.Kg()<0?-1:1;if("relative"===e.gnt.t7()&&t.OU()&&t.VU()){const r=i.xit()*n*s;isNaN(e.aht)&&ry.get("offsetHeight").sht(t,1,i,e,!0),t.pht(r/e.aht,!0)}else t.pht(i.xit()*n*s)}),((t,s,i)=>{t.jg(i.xit()*s)}),((t,s)=>{const i=t.Kg()<0?-1:1;if(t.VU()){const e=t.bU(),n=s.zst().bst(e.Vz());let r=NaN;if(n)r=e.Kg()/n.xit();else{const t=e.Vz().gJ();r=t.vit()?e.Kg()/t.xit():1}return t.Kg()*i/(s.xit()*r)}return t.Kg()*i/s.xit()}),!1);class oy extends ey.Jst.Rnt{constructor(t){super(t),this._C=0,this.yht=0,this.wht=0,this.bht=0,this.ght=NaN,this.aht=NaN,this.Tht=void 0,this.Ght=void 0,this.Cht=null,this.Iht=null,this.Pht=null,this.Aht=null,this.Rht=null,this.Eht=null,this.Oht=null,this.Fht=null,this.Dht=!1,this.kht=!1,ey.Le(this.gnt.zst(),ey.Lht)?this.oht=new ey.Jst.Rnt.Nht(this):this.oht=new ey.Jst.Rnt.Bht(this);const s=this.gnt.wst();switch(this.gnt.iit()){case"world-instance":{const t=ry.get(s);this.Cht=t.eht,this.Iht=t.sht,this.Pht=t.iht,this.Dht=t.round,this.kht=t.nht,this.Rht=t.init,this.Aht=t.reset;break}case"audio":this.Eht=t.Srt,this.Oht=t.wrt,this.Fht=t.brt,this.Dht=!!t.vrt(),this.kht=!1}}Jn(){this.oht=null,this.Cht=null,this.Iht=null,this.Pht=null,this.Aht=null,this.Rht=null,this.Eht=null,this.Oht=null,this.Fht=null,super.Jn()}int(){return this.oht.int()}$ht(){return this._C}Wht(t){this._C=t}Wtt(){this.Aht&&this.Aht(this)}l8(){const t=this.oht.l8();if("number"==typeof t&&(this._C=t),this.Rht){const t=this.aB(),s=this.gnt.yet();this.Rht(this,t,s)}}Ztt(){const t=this.oht.Ztt();"number"==typeof t&&(this._C=t)}tnt(){return this.Irt()}qit(){return this.Prt()!==this.tnt()}Yit(){return!ey.ee(this._rt)&&this._rt!==this.tnt()}vnt(){this.oht.vnt()}Cnt(t,s,i,e,n,r,h,o){return this.oht.Cnt(t,s,i,e,n,r,h,o)}Int(){this.oht.Int()}Irt(){const t=this.Nrt(),s=this.Lrt(),i=this.aB(),e=this.gnt.yet();switch(this.gnt.iit()){case"behavior":case"plugin":return t.Hrt(s);case"effect":return t[s];case"instance-variable":return t.Qrt(s);case"world-instance":return this.Cht(i,e);case"audio":return this.Eht.call(this.q9(),i,e)}}Yrt(t,s,i){const e=this.Nrt(),n=this.Lrt(),r=this.aB(),h=this.gnt.yet();switch(this.gnt.iit()){case"behavior":e.Vht(n,t);break;case"effect":e[n]+=t;break;case"instance-variable":e.jht(n,t);break;case"plugin":e.Vht(n,t,this.q9().Vnt());break;case"world-instance":this.Iht(r,t,h,this);break;case"audio":this.Oht.call(this.q9(),r,t,h,this)}}Hht(t,s,i){let e=this.gnt.ttt();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.gnt.zst().AF();if(!this.gnt.zet(t))return}const n=this.Nrt(),r=this.Lrt(),h=this.aB(),o=this.gnt.yet();switch(this.gnt.iit()){case"behavior":n.Xrt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.tht(r,t);break;case"plugin":n.Xrt(r,t,this.q9().Vnt());break;case"world-instance":this.Pht(h,t,o);break;case"audio":this.Fht.call(this.q9(),h,t,o)}}Uht(t,s,i,e,n,r,h,o){this.oht.Uht(t,s,i,e,n,r,h,o)}Jht(t,s,i,e,n){"angle"===this.gnt.ket()&&(t=ey.tr(t));const r=(t.toString().split(".")[1]||"").length,h=this.Irt();let o;switch(o=0===r?this.Dht?Math.round(h):this.kht?"angle"===this.gnt.ket()?ey.Qn(Math.round(ey.tr(h))):Number(ey.toFixed(h,2)):h:this.Dht?Number(ey.toFixed(h,r)):(this.kht,h),this.Yrt(o-h,s,i),this.gnt.wst()){case"offsetWidth":case"offsetScaleX":{const t=this.aB(),s=t.Vg(),i=Number(ey.toFixed(s,2));t.Ty(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.aB(),s=t.Kg(),i=Number(ey.toFixed(s,2));t.pht(i-s);break}}}s3(){return Object.assign(super.s3(),{v:this._C,a:this.yht,fod:this.wht,bod:this.bht,of:this.ght,sf:this.aht,armorf:this.Tht,armandf:this.Ght})}i3(t){t&&(super.i3(t),this._C=t.v,this.yht=t.a,this.wht=ey.te(t.fod)?t.fod:0,this.bht=ey.te(t.bod)?t.bod:0,this.ght=ey.te(t.of)?t.of:NaN,this.aht=ey.te(t.sf)?t.sf:NaN,this.Tht=ey.te(t.armorf)?t.armorf:void 0,this.Ght=ey.te(t.armandf)?t.armandf:void 0)}}ey.Jst.Rnt.Ent=oy}{const ay=self.Cs;class ly{constructor(t){this.zht=!1,this.Hnt=0,this.qht=!1,this.Yht=!1,this.$st=t;for(let t=0,s=this.$st.length;t<s;t++)this.$st[t].pet(this)}Sst(){return this.$st}Xht(){this.zht=!0}Zht(){return this.zht}pnt(t){this.Hnt=t}Eet(){return this.Hnt}Kht(t){this.qht=t}Qht(){return this.qht}sst(t){this.Yht=t}tot(){return this.Yht}Bf(){this.zht=!1,this.Hnt=0,this.qht=!1,this.Yht=!1}}class uy{constructor(t){this.sot=t}Jn(){this.sot=null}DG(){return 0}l8(){const t=this.sot;return this.sot.Yz(),t.Frt((()=>t.Rrt((()=>0),(()=>t.q9().mnt()))),(()=>{}))}Ztt(){}int(){switch(this.sot,this.sot.Yz().t7()){case"relative":return!1;case"absolute":return!0}}vnt(){this.sot;const t=this.sot.Yz(),s=t.wst();switch(t.t7()){case"relative":break;case"absolute":if(t.det())t.met().Bf();else{const i=t.zst(),e=t.Vz(),n=t.q9(),r=i.z9(e,n,s,t);r&&r.length>1&&new ly(r)}}}Cnt(t,s,i,e,n,r,h,o){const a=this.sot,l=this.sot.Yz();switch(l.t7()){case"relative":{const h=a.$ht();a.Yrt(s-h,i,e),r&&this.Uht(t,i,e,n,h,s),a.Wht(s);break}case"absolute":{const t=l.zst(),i=l.yet();if(l.Vz(),l.q9(),l.det()){const e=l.met(),n=e.Sst(),r=a.$rt(n,!0),u=a.Wrt(t,t.AF(),r);if(u){const t=i.est(),n=u.time-t;if(0===n)e.sst(h),e.Kht(o),e.Xht(),e.pnt(e.Eet()+s);else{if(n<0)return;const t=l.ent(n);e.sst(h),e.Kht(o),e.Xht(),e.pnt(e.Eet()+(s-t))}}}else a.Hht(s,o,h);break}}}Int(){const t=this.sot,s=this.sot.Yz();switch(s.t7()){case"relative":break;case"absolute":if(s.det()){const i=s.met();i.Zht()&&t.Hht(i.Eet(),i.Qht(),i.tot())}}}Uht(t,s,i,e,n,r){const h=this.sot;e||(s&&t===s.AF()?h.Jht(s.a7(),s,i):i&&t===i.AF()?h.Jht(i.a7(),s,i):r-n==0&&h.Jht(s.a7(),s,i))}}ay.Jst.Rnt.Bht=uy}{const cy=self.Cs;class fy{constructor(t){this.sot=t}Jn(){this.sot=null}DG(){return 1}l8(){const t=this.sot;return t.Grt(!0),this.krt(t.Prt())}Ztt(){const t=this.sot;if(t.Prt()!==t.Ort())return t.Grt(!0),this.krt(t.Ort())}int(){return!1}vnt(){}Cnt(t,s,i,e,n,r,h,o){const a=this.sot,l=a.$ht();switch(a.Yz().t7()){case"relative":a.Yrt(s-l,i,e),r&&this.Uht(t,i,e,n,l,s,!1,h);break;case"absolute":a.Crt()?(a.Grt(!1),a.Yrt(l,i,e)):0===t&&0===a.Yz().zst().xz()?a.Hht(s,!0,!1):(a.Yrt(s-l,i,e),r&&this.Uht(t,i,e,n,l,s,this.iot(),h))}a.Wht(s)}Int(){}krt(t){return t-this.sot.tnt()}iot(){const t=this.sot,s=t.aB().Vz(),i=t.Yz().LB().J9();let e=0;for(const t of i.L6())0===t.DG()?t.j6(s)&&e++:1===t.DG()&&t.Vz()===s&&e++;return e<=1}Uht(t,s,i,e,n,r,h,o){const a=this.sot;e?s&&t===s.AF()?a.Jht(s.a7(),s,i,h,o):i&&t===i.AF()?a.Jht(i.a7(),s,i,h,o):i||a.Jht(s.a7(),s,i,h,o):s&&t===s.AF()?a.Jht(s.a7(),s,i,h,o):i&&t===i.AF()?a.Jht(i.a7(),s,i,h,o):r-n==0&&a.Jht(s.a7(),s,i,h,o)}}cy.Jst.Rnt.Nht=fy}{const dy=self.Cs,py=self.Vu;dy.Jst.Mnt=class{constructor(){}static Krt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Hrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Qrt(t)}return n!==i}static wc(t,s,i,e){if(!i){let t=e.wet();return t=e.Ust().Ert(t),t.a7()}let n=e.ttt();if("default"===n&&(n="continuous"),"combo"===e.ket()&&(n="discrete"),"discrete"===n)return s.a7();if("continuous"===n||"step"===n){const r=e.zst().K9();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.a7(),o=i.a7(),a=s.h7("cubic-bezier"),l=i.h7("cubic-bezier"),u=a&&a.eot()&&l&&l.not();if(!u&&h===o)return h;const c=s.AF(),f=i.AF();"step"===n&&0!==r&&(t=dy.Zn(t,c,f));const d=dy.normalize(t,c,f),p=s.dnt();let m;if(u){const t=f-c;m=py.rc(p)(t*d,0,1,t),m=py.rc("cubicbezier")(m,h,h+a.c7(),o+l.p7(),o)}else m=py.rc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.ket()?Math.floor(m):m}}}}{const my=self.Cs;my.Jst.xnt=class{constructor(){}static Krt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Hrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Qrt(t)}return n!==i}static wc(t,s,i,e){if(!i){let t=e.wet();return t=e.Ust().Ert(t),t.a7()}let n=e.ttt();if("default"===n&&(n="continuous"),"combo"===e.ket()&&(n="discrete"),"discrete"===n)return s.a7();if("continuous"===n||"step"===n){const r=e.zst().K9();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.AF(),o=i.AF(),a=s.a7(),l=i.a7();"step"===n&&0!==r&&(t=my.Zn(t,h,o));const u=s.h7("angle");if(!u){if(a===l)return a;const i=my.normalize(t,h,o),e=self.Vu.rc(s.dnt());return my.ur(a,l,e(i,0,1,1))}{const i=u.rot();if(a===l&&0===i)return a;const e=my.normalize(t,h,o),n=self.Vu.rc(s.dnt())(e,0,1,1);switch(u.hot()){case"closest":return my.ur(a,l,n,i);case"clockwise":return my.cr(a,l,n,i);case"anti-clockwise":return my.dr(a,l,n,i)}}}}}}{const gy=self.Cs;gy.Jst._nt=class{constructor(){}static Krt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Hrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Qrt(t)}return!!n!=!!i}static wc(t,s,i,e){if(!i){let t=e.wet();return t=e.Ust().Ert(t),t.a7()?1:0}return s.a7()?1:0}}}{const yy=self.Cs,Sy=[0,0,0],wy=[0,0,0],by=[0,0,0];yy.Jst.Tnt=class{constructor(){}static Krt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Hrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Qrt(t)}return Array.isArray(i)?(Sy[0]=i[0],Sy[1]=i[1],Sy[2]=i[2]):(by.ha(i),Sy[0]=Math.floor(255*by.No()),Sy[1]=Math.floor(255*by.Bo()),Sy[2]=Math.floor(255*by.$o())),Array.isArray(n)?(wy[0]=n[0],wy[1]=n[1],wy[2]=n[2]):(by.ha(n),wy[0]=Math.floor(255*by.No()),wy[1]=Math.floor(255*by.Bo()),wy[2]=Math.floor(255*by.$o())),Sy[0]!==wy[0]||Sy[1]!==wy[1]||Sy[2]!==wy[2]}static wc(t,s,i,e){if(!i){let t=e.wet();t=e.Ust().Ert(t);const s=t.a7();return Sy[0]=s[0],Sy[1]=s[1],Sy[2]=s[2],Sy}let n=e.ttt();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.a7();return Sy[0]=t[0],Sy[1]=t[1],Sy[2]=t[2],Sy}if("continuous"===n||"step"===n){const r=e.zst().K9();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.AF(),o=i.AF(),a=s.a7(),l=i.a7();"step"===n&&0!==r&&(t=yy.Zn(t,h,o));const u=yy.normalize(t,h,o),c=s.dnt(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],S=self.Vu.rc(c),w=o-h,b=w*u;return Sy[0]=f===m?f:S(b,f,m-f,w),Sy[1]=d===g?d:S(b,d,g-d,w),Sy[2]=p===y?p:S(b,p,y-p,w),Sy}}}}{const vy=self.Cs;vy.Jst.Gnt=class{constructor(){}static Krt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Hrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Qrt(t)}return n!==i}static wc(t,s,i,e){if(!i){let t=e.wet();return t=e.Ust().Ert(t),t.a7()}return s.a7()}}}{const My=self.Cs;My.U4=class{constructor(){this.oot=new Map}Jn(){for(const t of this.oot.values())t.Jn();this.oot.clear(),this.oot=null}Bu(t){const s=new My.aot(t),i=s.Pc();this.oot.set(i,s)}Js(t){return this.oot.get(t)}N9(){return 0}static lot(t,s,i,e){if(s)for(const n of s)My.U4.uot("create",n,t,i,e)}static cot(t,s,i,e){if(s)for(const n of s)My.U4.uot("create-including-disabled",n,t,i,e)}static fot(t,s,i,e){t.length?s.forEach(((s,i)=>{t[i].i3(s)})):s.forEach((s=>{My.U4.uot("load",s,t,i,e)}))}static uot(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.dot],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.i3(s),i.push(r);break;case"create":if("function"==typeof r.git&&!r.git())return r.Jn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const xy=self.Cs,_y=0,Ty=1,Gy=2,Cy=3,Iy=4,Py=5,Ay=6,Ry=7,Ey=8,Oy=9,Fy=10,Dy=11;xy.aot=class{constructor(t){this.Yn="",this.tst=NaN,this.pot=0,this.mot="default",this.got="default",this.yot=!1,this.Sot=!1,this.wot=1,this.Ist=null,this.bot="",this.vot=!1,this.Mot=!0,t&&(this.Yn=t[0],this.tst=t[1],this.pot=t[2],this.mot=t[3],this.got=t[4],this.yot=!!t[6],this.Sot=!!t[7],this.wot=t[8],this.bot=t[9],this.vot=!!t[10],this.Mot=!!t[11],this.Ist=new xy.xot(t[5],this))}Jn(){this.Ist.Jn(),this.Ist=null}H9(){return this.Ist||(this.Ist=new xy.xot(null,this)),this.Ist}Pc(){return this.Yn}SY(t){this.Yn=t}xz(){return this.tst}Mz(t){this.tst=t}K9(){return this.pot}Q9(t){this.pot=t}ttt(){return this.mot}stt(t){this.mot=t}t7(){return this.got}itt(t){this.got=t}Tz(){return this.yot}_z(t){this.yot=t}Cz(){return this.Sot}Gz(t){this.Sot=t}VJ(){return this.wot}ett(t){this.wot=t}v8(){return this.bot}ntt(){return this.vot}htt(){return this.Mot}s3(){return{trackDataJson:this.Ist.s3(),name:this.Yn,totalTime:this.tst,step:this.pot,interpolationMode:this.mot,resultMode:this.got,loop:this.yot,pingPong:this.Sot,repeatCount:this.wot,startOnLayout:this.bot,transformWithSceneGraph:!!this.vot,useSystemTimescale:this.Mot}}i3(t){t&&(this.H9().i3(t.trackDataJson),this.Yn=t.name,this.tst=t.totalTime,this.pot=t.step,this.mot=t.interpolationMode,this.got=t.resultMode,this.yot=t.loop,this.Sot=t.pingPong,this.wot=t.repeatCount,this.bot=t.startOnLayout,this.vot=!!t.transformWithSceneGraph,this.Mot=!!t.useSystemTimescale)}}}{const ky=self.Cs,Ly=0,Ny=1,By=2,$y=1,Wy=2,Vy=3,jy=4,Hy=5,Uy=6,Jy=7,zy=0,qy=1,Yy=8,Xy=0,Zy=1,Ky=9,Qy=10;class tS{constructor(t,s){this.Ist=s,this._ot=null,this.Tot=null,this.Pst=NaN,this.Ast=NaN,this.mot="default",this.got="default",this.fu=!1,this.Got=null,this.het=null,this.$c="",this.Cot=null,this.Iot=0,this.Pot=this.Ist.Z9().xz(),this.Jc=0,this.Yn="",t&&(t[0]&&(this._ot=t[0],this.Pst=t[0][2],this.Ast=t[0][1]),this.mot=t[1],this.got=t[2],this.fu=!!t[3],t[6]&&(this.$c=t[6]),t[7]&&(this.Cot=t[7],this.Iot=t[7][0],this.Pot=t[7][1]),t[8]&&(this.Tot=t[8]),t[8]&&(this.Tot=t[8]),t[9]&&(this.Jc=t[9]),t[10]&&(this.Yn=t[10]),this.Got=new ky.Aot(t[4],this),this.het=new ky.Rot(t[5],this))}Jn(){this._ot=null,this.Ist=null,this.Got&&(this.Got.Jn(),this.Got=null),this.het&&(this.het.Jn(),this.het=null),this.Cot=null}H9(){return this.Ist}rst(){return this.Got||(this.Got=new ky.Aot(null,this)),this.Got}Ust(){return this.het||(this.het=new ky.Rot(null,this)),this.het}Eot(){return this._ot}Zst(){return this.Ast}Sit(t){this.Ast=t}Xst(){return this.Pst}dit(t){this.Pst=t}ttt(){return this.mot}stt(t){this.mot=t}t7(){return this.got}itt(t){this.got=t}git(){return this.fu}yit(t){this.fu=!!t}zz(){return this.$c}est(){return this.Iot}pit(){return this.Pot}mit(t){this.Pot=t}bit(){return this.Tot[0]}wit(t){this.Tot||(this.Tot=[]),this.Tot[0]=t}xit(){return this.Tot||(this.Tot=[]),this.Tot[1]}Mit(t){this.Tot||(this.Tot=[]),this.Tot[1]=t}DG(){return this.Jc}Pc(){return this.Yn}s3(){return{keyframeDataJson:this.Got.s3(),propertyTrackDataJson:this.het.s3(),instanceData:this._ot,additionalInstanceData:this.Tot,instanceUid:this.Pst,objectClassIndex:this.Ast,interpolationMode:this.mot,resultMode:this.got,enabled:this.fu,id:this.$c,nestedData:this.Cot,type:this.Jc,name:this.Yn}}i3(t){t&&(this._ot=t.instanceData,this.Pst=t.instanceUid,this.Ast=t.objectClassIndex,this.mot=t.interpolationMode,this.got=t.resultMode,this.fu=t.enabled,this.$c=t.id,this.Jc=t.type?t.type:0,this.Yn=t.name?t.name:"",this.Pot=this.Ist.Z9().xz(),t.nestedData&&(this.Cot=t.nestedData,this.Iot=this.Cot[0],this.Pot=this.Cot[1]),t.additionalInstanceData&&(this.Tot=t.additionalInstanceData),this.rst().i3(t.keyframeDataJson),this.Ust().i3(t.propertyTrackDataJson))}}ky.xot=class{constructor(t,s){this.h9=s,this.Oot=[],ky.U4.lot(this.Oot,t,tS,this)}Jn(){this.h9=null;for(const t of this.Oot)t.Jn();ky.bh(this.Oot),this.Oot=null}Z9(){return this.h9}ust(){const t=new tS(null,this);return this.Oot.push(t),t}Fot(t){return t.rst().Bst()[0]}Dot(t){return t.rst().Bst().at(-1)}kit(t,s){const i=s.rst().Bst(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.AF()===t)return e}}kot(t,s){const i=s.rst().Bst(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.AF()>t)return e}}Fit(t,s){const i=s.rst().Bst(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.AF()>=t)return e}}Oit(t,s){const i=s.rst().Bst();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.AF()<=t)return e}}*j9(){for(const t of this.Oot)yield t}s3(){return{trackDataItemsJson:this.Oot.map((t=>t.s3()))}}i3(t){t&&ky.U4.fot(this.Oot,t.trackDataItemsJson,tS,this)}}}{const sS=self.Cs,iS=0,eS=0,nS=1,rS=2,hS=3,oS=4,aS=5,lS=6,uS=7,cS=8,fS=9;class dS{constructor(t,s){this.het=s,this.Lot="",this.Not=null,this.Mrt=null,this.Jc=null,this.Bot=NaN,this.$ot=NaN,this.mot="default",this.got="default",this.fu=!1,this.Wot=null,this.Vot=!0,t&&(this.Lot=t[0][0],this.Not=t[0].slice(1),this.Mrt=t[1],this.Jc=t[2],this.Bot=t[3],this.$ot=t[4],this.mot=t[5],this.got=t[6],this.fu=!!t[7],this.Wot=new sS.jot(t[8],this),this.Vot=t[9])}Jn(){this.Wot.Jn(),this.Wot=null,this.het=null,this.Not=null}Ust(){return this.het}uet(){return this.Wot||(this.Wot=new sS.jot(null,this)),this.Wot}iit(){return this.Lot}Cet(t){this.Lot=t}Pet(){return this.Not}Ret(t){this.Not=t}Oet(){return this.Mrt}Det(t){this.Mrt=t}DG(){return this.Jc}Net(t){this.Jc=t}Wet(){return this.Bot}Vet(t){this.Bot=t}jet(){return this.$ot}Het(t){this.$ot=t}ttt(){return this.mot}stt(t){this.mot=t}t7(){return this.got}itt(t){this.got=t}git(){return this.fu}yit(t){this.fu=!!t}Jet(){return!!this.Vot}s3(){return{propertyKeyframeDataJson:this.Wot.s3(),sourceAdapterId:this.Lot,sourceAdapterArguments:this.Not,property:this.Mrt,type:this.Jc,min:this.Bot,max:this.$ot,interpolationMode:this.mot,resultMode:this.got,enabled:this.fu,canHavePropertyKeyframes:this.Vot}}i3(t){t&&(this.Lot=t.sourceAdapterId,this.Not=t.sourceAdapterArguments,this.Mrt=t.property,this.Jc=t.type,this.Bot=t.min,this.$ot=t.max,this.mot=t.interpolationMode,this.got=t.resultMode,this.fu=t.enabled,this.Vot=t.canHavePropertyKeyframes,this.uet().i3(t.propertyKeyframeDataJson))}}sS.Rot=class{constructor(t,s){this.Cst=s,this.Hot=[],sS.U4.lot(this.Hot,t,dS,this)}Jn(){this.Cst=null;for(const t of this.Hot)t.Jn();sS.bh(this.Hot),this.Hot=null}nst(){return this.Cst}jit(){const t=new dS(null,this);return this.Hot.push(t),t}$et(t){return t.uet().let()[0]}Ert(t){return t.uet().let().at(-1)}zet(t,s){const i=s.uet().let(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.AF()===t)return e}}Xet(t,s){const i=s.uet().let(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.AF()>t)return e}}Zet(t,s){const i=s.uet().let(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.AF()>=t)return e}}qet(t,s){const i=s.uet().let();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.AF()<=t)return e}}*Hst(){for(const t of this.Hot)yield t}s3(){return{propertyTrackDataItemsJson:this.Hot.map((t=>t.s3()))}}i3(t){t&&sS.U4.fot(this.Hot,t.propertyTrackDataItemsJson,dS,this)}}}{const pS=self.Cs,mS=0,gS=1,yS=2,SS=3;class wS{constructor(t,s){if(this.Got=s,this.GD=-1,this.Uot="noease",this.Jot=!1,this.E9=null,this.zot=null,!t)return;this.GD=t[0],this.Uot=t[1],this.Jot=!!t[2];const i=t[3];this.E9=i?i.split(" "):[],this.zot=new Set(this.E9.map((t=>t.toLowerCase()))),this.qot=null,this.Yot=null}Jn(){this.Got=null,pS.bh(this.E9),this.E9=null,this.zot.clear(),this.zot=null,this.qot=null}rst(){return this.Got}J8(){return this.qot}Xot(t){this.qot=t}Dit(){return this.Yot}Zot(t){this.Yot=t}AF(){return this.GD}vz(t){this.GD=t,this.Got.Kot()}dnt(){return this.Uot}Wz(t){this.Uot=t}git(){return this.Jot}yit(t){this.Jot=!!t}Az(){return this.E9}ltt(t){this.E9=t?t.split(" "):[],this.zot=new Set(this.E9.map((t=>t.toLowerCase())))}Qot(){return this.zot}xst(t){return this.zot.has(t.toLowerCase())}s3(){return{time:this.GD,ease:this.Uot,enable:this.Jot,tags:this.E9}}i3(t){t&&(this.GD=t.time,this.Uot=t.ease,this.Jot=t.enable,this.E9=t.tags,this.zot=new Set(this.E9.map((t=>t.toLowerCase()))))}}pS.Aot=class{constructor(t,s){this.Cst=s,this.Nst=[],pS.U4.lot(this.Nst,t,wS,this),this.Kot()}Jn(){this.Cst=null;for(const t of this.Nst)t.Jn();pS.bh(this.Nst),this.Nst=null}Kot(){this.Nst.sort(((t,s)=>t.AF()-s.AF()));for(let t=0;t<this.Nst.length;t++){const s=this.Nst[t];s.Xot(this.Nst[t+1]),s.Zot(this.Nst[t-1])}}nst(){return this.Cst}tat(){return this.Nst.length}Bst(){return this.Nst}Wit(){const t=new wS(null,this);return this.Nst.push(t),this.Kot(),t}Uit(t){for(const s of this.Nst){if(!t(s))continue;const i=this.Nst.indexOf(s);-1!==i&&(s.Jn(),this.Nst.splice(i,1))}this.sat(),this.Kot()}sat(){this.Nst.sort(((t,s)=>t.AF()-s.AF()))}iet(t){return this.Nst.indexOf(t)}eet(t){return this.Nst[t]}*iat(){for(const t of this.Nst)yield t}*eat(){for(let t=this.Nst.length-1;t>=0;t--)yield this.Nst[t]}s3(){return{keyframeDataItemsJson:this.Nst.map((t=>t.s3()))}}i3(t){t&&(pS.U4.fot(this.Nst,t.keyframeDataItemsJson,wS,this),this.Kot())}}}{const bS=self.Cs,vS=0,MS=0,xS=1,_S=2,TS=1,GS=2,CS=3,IS=4,PS=5;class AS{constructor(t,s){this.Wot=s,this.Hnt=null,this.nat=null,this.Jc="",this.GD=NaN,this.Uot="noease",this.Jot=!1,this.rat=null,this.hat=void 0,this.oat="line",t&&(this.Hnt=t[0][0],this.nat=t[0][1],this.Jc=t[0][2],this.GD=t[1],this.Uot=t[2],this.Jot=!!t[3],this.oat=t[5],this.rat=null,t[4]&&(this.rat=new bS.aat(t[4],this)),this.qot=null,this.lat=null)}Jn(){this.Wot=null,this.rat&&(this.rat.Jn(),this.rat=null),this.qot=null,this.lat=null}uat(){return this.rat}Xot(t){this.qot=t}J8(){return this.qot}cat(t){this.lat=t}z8(){return this.lat}Eet(){return this.Hnt}pnt(t){"color"===this.Jc&&bS.te(t)?(this.Hnt[0]=bS.Ar(t),this.Hnt[1]=bS.Rr(t),this.Hnt[2]=bS.Er(t)):this.Hnt=t}Art(){return this.nat}unt(t){"color"===this.Jc&&bS.te(t)?(this.nat[0]=bS.Ar(t),this.nat[1]=bS.Rr(t),this.nat[2]=bS.Er(t)):this.nat=t}a7(){const t=this.Wot.wet().t7();return"relative"===t?this.Eet():"absolute"===t?this.Art():void 0}DG(){return this.Jc}Net(t){this.Jc=t}AF(){return this.GD}vz(t){this.GD=t,this.Wot.fat()}dnt(){return this.Uot}Wz(t){this.Uot=t}git(){return this.Jot}yit(t){this.Jot=!!t}q8(){return this.oat}h7(t){if(!this.rat)return;if(this.hat||null===this.hat)return this.hat;const s=this.rat.dat();if(!s)return this.hat=null,this.hat;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.zz()===t)return this.hat=i,this.hat}return this.hat=null,this.hat}s3(){const t=this.rat;return{addonDataJson:t?t.s3():t,value:this.Hnt,aValue:this.nat,type:this.Jc,time:this.GD,ease:this.Uot,enable:this.Jot}}i3(t){t&&(t.addonDataJson&&this.rat.pat(t.addonDataJson),this.Hnt=t.value,this.nat=t.aValue,this.Jc=t.type,this.GD=t.time,this.Uot=t.ease,this.Jot=t.enable)}}bS.jot=class{constructor(t,s){this.ret=s,this.aet=[],this.mat=[],bS.U4.lot(this.aet,t,AS,this),bS.U4.cot(this.mat,t,AS,this),this.fat()}Jn(){this.ret=null;for(const t of this.aet)t.Jn();bS.bh(this.aet),this.aet=null;for(const t of this.mat)t.Jn();bS.bh(this.mat),this.mat=null}fat(){let t=this.aet;t.sort(((t,s)=>t.AF()-s.AF()));for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.Xot(t[s+1]),s-1>=0&&i.cat(t[s-1])}t=this.mat,t.sort(((t,s)=>t.AF()-s.AF()));for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.Xot(t[s+1]),s-1>=0&&i.cat(t[s-1])}}ant(){const t=new AS(null,this);return this.aet.push(t),this.fat(),t}lnt(t){for(const s of this.aet){if(!t(s))continue;const i=this.aet.indexOf(s);-1!==i&&(s.Jn(),this.aet.splice(i,1))}this.gat(),this.fat()}gat(){this.aet.sort(((t,s)=>t.AF()-s.AF()))}wet(){return this.ret}yat(){return this.aet.length}Ert(){return this.aet[this.aet.length-1]}let(){return this.aet}U8(){return this.mat}*Sat(){for(const t of this.aet)yield t}*wat(){for(let t=this.aet.length-1;t>=0;t--)yield this.aet[t]}s3(){const t=this.aet,s=this.mat;return{propertyKeyframeDataItemsJson:t.map((t=>t.s3())),propertyKeyframeDataItemsIncludingDisabledJson:s.map((t=>t.s3()))}}i3(t){t&&(bS.U4.fot(this.aet,t.propertyKeyframeDataItemsJson,AS,this),bS.U4.fot(this.mat,t.propertyKeyframeDataItemsIncludingDisabledJson,AS,this),this.fat())}}}{const RS=self.Cs,ES=0,OS=1;class FS{constructor(t,s){this.rat=s,this.$c=t[0],this.bat=t[1]}Jn(){this.rat=null,this.bat=null}uat(){return this.rat}zz(){return this.$c}s3(){return{id:this.$c,data:this.bat}}i3(t){t&&(this.$c=t.id,this.bat=t.data)}}const DS=0,kS=1,LS=2,NS=3;class BS extends FS{constructor(t,s){super(t,s),this.vat=this.bat[0],this.Mat=!!this.bat[1],this.xat=this.bat[2],this._at=!!this.bat[3]}Jn(){super.Jn()}c7(){return this.vat}eot(){return this.Mat}p7(){return this.xat}not(){return this._at}s3(){return Object.assign(super.s3(),{startAnchor:this.vat,startEnable:!!this.Mat,endAnchor:this.xat,endEnable:!!this._at})}i3(t){t&&(super.i3(t),this.vat=t.startAnchor,this.Mat=!!t.startEnable,this.xat=t.endAnchor,this._at=!!t.endEnable)}}const $S=0,WS=1;class VS extends FS{constructor(t,s){super(t,s),this.Tat=this.bat[0],this.Gat=this.bat[1]}Jn(){super.Jn()}hot(){return this.Tat}rot(){return this.Gat}s3(){return Object.assign(super.s3(),{direction:this.Tat,revolutions:this.Gat})}i3(t){t&&(super.i3(t),this.Tat=t.direction,this.Gat=t.revolutions)}}RS.aat=class{constructor(t,s){this.Cat=s,this.Iat=[],RS.U4.lot(this.Iat,t,{dot:0,map:new Map([["cubic-bezier",BS],["angle",VS]])},this)}Jn(){this.Cat=null;for(const t of this.Iat)t.Jn();RS.bh(this.Iat),this.Iat=null}Pat(){return this.Cat}dat(){return this.Iat}*Aat(){for(const t of this.Iat)yield t}s3(){return{addonDataItemsJson:this.Iat.map((t=>t.s3()))}}i3(t){t&&RS.U4.fot(this.Iat,t.addonDataItemsJson,{dot:"id",map:new Map([["cubic-bezier",BS],["angle",VS]])},this)}}}{const jS=self.Cs,HS="start-value",US="current-state",JS=0,zS=1;let qS=0;jS.Lht=class extends jS._6{constructor(t,s){super("tween-"+qS++,t,s),this.$c="",this.Rat=!1,this.Eat="start-value",this.Rst=null,this.Oat=null,this.Fat=null,this.net=null,this.Dat=null}W9(t){const s=jS.Un(jS.Event,"tweenstatereleased");s.kat=this,t.dispatchEvent(s)}DG(){return 1}c9(){for(const t of this.h9.H9().j9())this.o9.push(jS.Lat.ET(this,t));this.net=this.o9[0]}lst(){const t=this.h9.H9().ust(),s=jS.Lat.ET(this,t);return this.o9.push(s),this.Nat(),s}Nat(){this.net=this.o9[0]}Yz(t){return this.net.Sst()[0]}Let(t){this.Bat=t}Vz(){const t=this.V8();if(!t||!t.length)return;const s=t[0];if(this.net=s,!s)return;const i=s.Vz();return s.Yst()?i:void 0}$at(t){this.Fat||(this.Fat=[]),this.Fat.push(t)}Wat(t){this.Oat||(this.Oat=[]),this.Oat.push(t)}Vat(t){if(!this.Fat)return;const s=this.Fat.indexOf(t);-1!==s&&this.Fat.splice(s,1)}jat(t){if(!this.Oat)return;const s=this.Oat.indexOf(t);-1!==s&&this.Oat.splice(s,1)}Hat(t,s){for(const i of this.o9)for(const e of i.$st){if(e.wst()!==s)continue;const i=e.Ust(),n=e.wet(),r=i.$et(n);r.pnt(t),r.unt(t)}}Uat(t){for(const s of this.o9)for(const i of s.$st)if(i.wst()===t)return i}Jat(t){for(const s of t){const t=this.Uat(s);this.Hat(t.tnt(),s)}if(this.att()){const t=this.xz()-this.AF();this.Mz(t);for(const s of this.o9)s.mit(t);this.Ftt(0)}else{const t=this.AF();this.Mz(t);for(const s of this.o9)s.mit(t);this.Ftt(t)}this.Dtt()}zat(t,s){const i=this.Uat(s),e=i.Ust(),n=i.wet(),r=e.Ert(n);r.vz(this.xz()),r.pnt(t),r.unt(t)}qat(t){this.$c=t}zz(){return this.$c}Yat(t){this.Eat=t}Xat(){return this.Eat}Jz(t){this.Rat=t}Uz(){return this.Rat}dtt(){if(this.Fat)for(const t of this.Fat)t(this);if(!this.y8())for(const t of this.o9)t.Yit()}vtt(){this.G9=this.Nc.Mtt()}w8(){if(!this.P9&&(this.P9=!0,this.Oat))for(const t of this.Oat)t(this)}vz(t){this.Zat(),super.vz(t)}$tt(t){jS.te(t)||(t=this.xz()),t<0?this.p9=0:t>=this.xz()?this.p9=this.xz():this.p9=t,this.net.Wtt()}l8(t){if(!this.S8()&&"current-state"===this.Xat())for(const t of this.o9)t.qit();super.l8(t)}Sz(t=!1){if(super.Sz(t),!this.y8())for(const t of this.o9)t.zit()}Bf(t=!0,s=!1){this.Zat(),super.Bf(t,s)}Zat(){for(const t of this.o9){const s=t=>{const s=t.AF(),i=this.xz();return 0!==s&&s!==i};t.Hit(s),t.Jit(s)}}a6(){if(this.gz())return!0;const t=this.Vz();return!(t&&t.Cj().n0()||(this.r9.r8(this),this.Ytt(),0))}d8(t,s,i){if(this.Rst||(this.Rst=this.Vz()),!this.Rst||this.Rst.Oq())return this.Sz(!0),void this.vtt();const e=this.Rst.gN();if(-1!==e&&(t=i*e),0===t&&0===this.R9)return;this.R9=t;const n=this.p9+this.m9+t*this.g9,r=this.h9.tst;n<0?(this.p9=0,this.m9=-n):n>=r?(this.p9=r,this.m9=this.p9-n):(this.p9=n,this.m9=0);let h=!1,o=!1;const a=this.Tz(),l=this.Cz();if(a||l?a&&!l?this.g9>0?this.p9>=r&&(this.$tt(0),this.Kat(jS.slt.tlt.CB.Qat),this.Kat(jS.slt.tlt.CB.ilt),o=!0):this.p9<=0&&(this.$tt(r),this.Kat(jS.slt.tlt.CB.Qat),this.Kat(jS.slt.tlt.CB.ilt),o=!0):!a&&l?this.g9>0?this.p9>=r&&(this.Ftt(r),this.Iz(-1*this.Pz()),o=!0,1===this.y9?this.w9<this.VJ()?(this.w9++,this.Kat(jS.slt.tlt.CB.Qat),this.Kat(jS.slt.tlt.CB.ilt),this.Kat(jS.slt.tlt.CB.elt),this.Kat(jS.slt.tlt.CB.nlt),this.IsPlaying()?this.y9=0:this.S9=0):(this.Kat(jS.slt.tlt.CB.elt),this.Kat(jS.slt.tlt.CB.nlt),h=!0):0===this.y9&&(this.Kat(jS.slt.tlt.CB.elt),this.Kat(jS.slt.tlt.CB.nlt),this.IsPlaying()?this.y9=1:this.S9=1)):this.p9<=0&&(this.Ftt(0),this.Iz(-1*this.Pz()),o=!0,1===this.y9?this.w9<this.VJ()?(this.w9++,this.Kat(jS.slt.tlt.CB.Qat),this.Kat(jS.slt.tlt.CB.ilt),this.Kat(jS.slt.tlt.CB.elt),this.Kat(jS.slt.tlt.CB.nlt),this.IsPlaying()?this.y9=0:this.S9=0):(h=!0,this.Kat(jS.slt.tlt.CB.elt),this.Kat(jS.slt.tlt.CB.nlt)):0===this.y9&&(this.Kat(jS.slt.tlt.CB.elt),this.Kat(jS.slt.tlt.CB.nlt),this.IsPlaying()?this.y9=1:this.S9=1)):a&&l&&(this.g9>0?this.p9>=r&&(this.Ftt(r),this.Iz(-1*this.Pz()),o=!0,0===this.y9&&(this.Kat(jS.slt.tlt.CB.elt),this.Kat(jS.slt.tlt.CB.nlt)),1===this.y9&&(this.Kat(jS.slt.tlt.CB.Qat),this.Kat(jS.slt.tlt.CB.ilt),this.Kat(jS.slt.tlt.CB.elt),this.Kat(jS.slt.tlt.CB.nlt)),this.IsPlaying()?(this.y9++,this.y9=jS.wrap(this.y9,0,2)):(this.S9=this.y9+1,this.S9=jS.wrap(this.S9,0,2))):this.p9<=0&&(this.Ftt(0),this.Iz(-1*this.Pz()),o=!0,0===this.y9&&(this.Kat(jS.slt.tlt.CB.elt),this.Kat(jS.slt.tlt.CB.nlt)),1===this.y9&&(this.Kat(jS.slt.tlt.CB.Qat),this.Kat(jS.slt.tlt.CB.ilt),this.Kat(jS.slt.tlt.CB.elt),this.Kat(jS.slt.tlt.CB.nlt)),this.IsPlaying()?(this.y9++,this.y9=jS.wrap(this.y9,0,2)):(this.S9=this.y9+1,this.S9=jS.wrap(this.S9,0,2)))):this.g9>0?this.p9>=r&&(this.w9<this.VJ()?(this.w9++,this.$tt(0),this.Kat(jS.slt.tlt.CB.Qat),this.Kat(jS.slt.tlt.CB.ilt),o=!0):(this.Ftt(r),h=!0)):this.p9<=0&&(this.w9<this.VJ()?(this.w9++,this.$tt(r),this.Kat(jS.slt.tlt.CB.Qat),this.Kat(jS.slt.tlt.CB.ilt),o=!0):(this.Ftt(0),h=!0)),this.IsPlaying()){if(h)return this.net.sst(),this.Sz(!0),void this.vtt();this.net.wc(this.p9,!0,!1,o,this.A9,!1),this.A9&&(this.A9=!1)}}Kat(t){const s=this.Vz(),i=s.rlt(jS.slt.tlt);i.hlt(this),this.Nc.lH(t,s,i.GJ()),i.olt()}s3(){const t=super.s3(),s=this.Z9();return Object.assign(t,{tweenDataItemJson:s.s3(),id:this.$c,destroyInstanceOnComplete:this.Rat,initialValueMode:this.Eat})}i3(t){t&&(this.Z9().i3(t.tweenDataItemJson),super.i3(t),this.$c=t.id,this.Rat=t.destroyInstanceOnComplete,this.Eat=t.initialValueMode,this.Nat())}static IsPlaying(t){return t.IsPlaying()}static Fz(t){return t.Fz()}static llt(t){return!!t.Cz()&&0===t.ott()}static ult(t){return!!t.Cz()&&1===t.ott()}static clt(t){const s=t.runtime.J9(),i=new jS.aot;if(t.json){i.i3(t.json.tweenDataItemJson);const e=new jS.Lht(i,s);return e.i3(t.json),e}{const e=new jS.Lht(i,s);jS._e(t.flt)||(t.flt=[t.flt]),e.qat(t.id),e.ltt(t.tags),e.Yat(t.dlt),e.Jz(t.plt),e._z(t.loop),e.Gz(t.mlt),e.Mz(t.time),e.Q9(0),e.stt("default"),e.itt(t.flt[0].glt),e.ett(t.WJ);const n=e.lst();n.dit(t.CJ.$j()),n.stt("default"),n.itt(t.flt[0].glt),n.yit(!0),n.Sit(t.CJ.Cj().nL());const r=t.CJ.gJ(),h=r.vit()?r.bit():t.CJ.aB().Vg(),o=r.vit()?r.xit():t.CJ.aB().Kg();n.wit(h),n.Mit(o);const a=n.$it();a.vz(0),a.Wz("noease"),a.yit(!0),a.ltt("");const l=n.$it();l.vz(t.time),l.Wz("noease"),l.yit(!0),l.ltt("");for(const s of t.flt){const i=n.Vit();i.Cet(s.ylt),i.Aet(s.Slt),i.Fet(s.uit),i.Let(s.type),i.Vet(NaN),i.Het(NaN),i.stt("default"),i.itt(s.glt),i.yit(!0);const e=i.ont();e.Net(s.valueType),e.vz(0),e.Wz(s.wlt),e.yit(!0),e.pnt(s.blt),e.unt(s.blt);const r=i.ont();r.Net(s.valueType),r.vz(t.time),r.Wz(s.wlt),r.yit(!0),r.pnt(s.vlt),r.unt(s.vlt),i.q9()}return e}}static dit(t,s){if(!isNaN(s))for(const i of t.V8())i.dit(s)}Mlt(t,s){return this.Dat||(this.Dat=jS.Un(self.Lz,this,t,s)),this.Dat}}}{const YS=self.Cs;YS.Lat=class extends YS.U9{constructor(t,s){super(t,s),this.xlt=null,this._lt=null}static ET(t,s){return YS.Un(YS.Lat,t,s)}Tlt(){1===this.$st.length?this.xlt=this.$st[0]:(this.xlt=this.$st[0],this._lt=this.$st[1])}Wst(){for(const t of this.Cst.Ust().Hst())this.$st.push(YS.Glt.ET(this,t));this.Tlt()}Vit(){const t=this.Cst.Ust().jit(),s=YS.Glt.ET(this,t);return this.$st.push(s),this.Tlt(),s}l8(){if(this.qst(),!this.Yst()&&this.X9())return;const t=this.zst().att()?0:this.pit();for(const s of this.$st)s.l8(t),0===this.Vst&&1===s.Git()&&(this.Vst=1),0===this.b6&&1===s.u8()&&(this.b6=1);this.jst=0,this.$st.some((t=>t.Qtt()))&&(this.jst=1),this.Lst=this.Cit(t),this.Fst=!1,this.Dst=!1,this.wc(t)}ist(){}wc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.Rst||this.Vz(),this.Rst)return!this.Rst.Oq()&&(!r||!this.Cj().n0())&&(this._lt?(this.xlt.wc(t,i,e,h),this._lt.wc(t,i,e,h)):this.xlt.wc(t,i,e,h),void(0!==this.xlt.Git()&&(this.Est||(this.Est=this.Rst.aB()),this.Est&&this.Est.NH())))}hst(){}i3(t){super.i3(t),this.Tlt()}}}{const XS=self.Cs;XS.Glt=class extends XS.Jst{constructor(t,s){super(t,s),this.Clt=!1}static ET(t,s){return XS.Un(XS.Glt,t,s)}wc(t,s=!1,i=!1,e=!1){let n,r;if(this.Clt)n=this.aet[0],r=this.aet[1];else if(s)n=this.het.qet(t,this.ret),r=n.J8();else{if(this.cet){const s=this.zst(),i=this.cet.J8(),e=this.cet.AF(),n=i?i.AF():s.xz();(t<=e||t>=n)&&(this.cet=this.het.qet(t,this.ret))}else this.cet=this.het.qet(t,this.ret);n=this.cet,r=n.J8()}this.oet.wc(t,n,r,s,i,e)}ont(){const t=this.ret.uet().ant();return this.cet=null,this.Clt=this.Uet().length<=2,t}Jit(t){this.cet=null,this.ret.uet().lnt(t),this.Clt=this.Uet().length<=2}s3(){return{sourceAdapterJson:this.q9().s3(),basic:this.Clt}}i3(t){t&&(this.q9().i3(t.sourceAdapterJson),this.Clt=t.basic)}}}{const ZS=self.Cs,KS=self.Vu,QS=0,tw=1,sw=2;ZS.bc=class extends ZS.jn{constructor(t,s=!0){super(),this.Yn=t[0],this.Ilt=t[2],this.Plt=[];for(const s of t[1]){const t=ZS.Alt.ET(this,s);this.Plt.push(t)}for(let t=0;t<this.Plt.length;t++){const s=this.Plt[t],i=this.Plt[t+1],e=this.Plt[t-1];s.Xot(i),s.cat(e)}this.Rlt=new Map,this.Elt=new Map,this.Olt(),s&&KS.Mc(this.Yn,((t,s,i,e)=>this.wc(t,s,i,e)),null,{transition:this})}static ET(t){return ZS.Un(ZS.bc,t)}Jn(){for(const t of this.Plt)t.Jn();ZS.bh(this.Plt),this.Plt=null,this.Rlt.clear(),this.Rlt=null,this.Elt.clear(),this.Elt=null}vc(t){this.Ilt=!!t}Flt(t){const s=this.Elt.get(t);if(s)return s;for(const s of this.Plt)if(s.Dlt()===t)return this.Elt.set(t,s),s}klt(t){for(let s=this.Plt.length-1;s>=0;s--){const i=this.Plt[s],e=i.Dlt();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.z8();if(!t)break;if(t.Dlt()!==s.Dlt())break;s=t}return s}}}}wc(t,s,i,e){let n=t/e;if(this.Ilt){const n=this.Flt(0),r=this.Flt(1),h=s+(s+i)*n.Llt(),o=(s+i)*r.Llt()-h;return 0===e?h+o:KS._c(t,h,o,e)}0===e&&(n=1);let r=this.klt(n),h=r.J8();if(!h){const t=r.z8(),s=r;r=t,h=s}const o=h.Dlt()-r.Dlt(),a=ZS.Xn(n,r.Dlt(),h.Dlt(),0,o);if(r.Nlt()||0===o){const t=s+(s+i)*r.Llt(),e=(s+i)*h.Llt()-t;return 0===o?1===a?t+e:t:KS._c(a,t,e,o)}const l=r.Dlt(),u=r.Llt(),c=r.Dlt()+r.Blt(),f=r.Llt()+r.$lt(),d=h.Dlt()+h.Wlt(),p=h.Llt()+h.Vlt(),m=h.Dlt(),g=h.Llt();let y=KS.rc("spline")(a,l,u,c,f,d,p,m,g,this.Rlt.get(r));return y+=r.Llt(),(1-y)*s+y*(s+i)}Olt(){this.Rlt.clear();for(let t=0;t<this.Plt.length-1;t++){const s=this.Plt[t];if(!s.eot())continue;const i=s,e=this.Plt[t+1];if(!e.not())continue;const n=i.Dlt(),r=i.Dlt()+i.Blt(),h=e.Dlt()+e.Wlt(),o=e.Dlt();this.Rlt.set(i,KS.Tc(n,r,h,o))}}}}{const iw=self.Cs,ew=0,rw=1,hw=2,ow=3,aw=4,lw=5,uw=6,cw=7,fw=8;iw.Alt=class extends iw.jn{constructor(t,s){super(),this.jlt=t,this.Hlt=s[0],this.Ult=s[1],this.Jlt=s[2],this.zlt=s[3],this.qlt=s[4],this.Ylt=s[5],this.Mat=s[6],this._at=s[7],this.Xlt=s[8],this.qot=null,this.lat=null}Jn(){this.jlt=null}static ET(t,s){return iw.Un(iw.Alt,t,s)}Xot(t){this.qot=t}J8(){return this.qot}cat(t){this.lat=t}z8(){return this.lat}Dlt(){return this.Hlt}Llt(){return this.Ult}Blt(){return this.Jlt}$lt(){return this.zlt}Wlt(){return this.qlt}Vlt(){return this.Ylt}eot(){return this.Mat}not(){return this._at}Nlt(){return"linear"===this.Xlt}Zlt(){return"cubic"===this.Xlt}}}{const dw=self.Cs;dw.Klt=class extends dw.jn{constructor(t){super(),this.Nc=t,this.Qlt=[]}Jn(){for(const t of this.Qlt)t.Jn();dw.bh(this.Qlt),this.Qlt=null}ET(t){this.Qlt.push(dw.bc.ET(t))}}}{const pw=self.Cs;pw.tut=class extends pw.jn{constructor(t){super(),this.Nc=t,this.sut=null,this.iut=null,this.c6=t=>this.f6(t.CJ)}Jn(){if(this.v6(),this.sut){for(const t of this.sut.values())t.clear();this.sut.clear()}this.sut=null,this.Nc=null}ET(t){if(this.sut||(this.sut=new Map),!t)return;const s=t[0][16][0],i=t[1];this.sut.has(i)||this.sut.set(i,new Map),this.sut.get(i).set(s,t)}M6(){const t=this.Nc.Sf();t&&t.addEventListener("instancedestroy",this.c6)}v6(){const t=this.Nc.Sf();t&&t.removeEventListener("instancedestroy",this.c6)}eut(){return!!this.sut&&0!==this.sut.size}nut(t,s){let i=0;if(i=t instanceof pw.rut?t.nL():t,!this.sut.has(i))return;const e=this.sut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}hut(t,s){this.iut||(this.iut=new WeakMap),this.iut.has(t)||this.iut.set(t,s)}out(t){if(!this.iut)return"";return this.iut.get(t)||""}f6(t){this.iut&&this.iut.has(t)&&this.iut.delete(t)}}}{const mw=self.Cs;mw.aut=class{constructor(t){this.Nc=t,this.lut=new mw.uut}Jn(){this.lut.Jn(),this.lut=null,this.Nc=null}LB(){return this.Nc}ET(t){this.lut.Bu(t)}cut(t){return this.lut.Js(t)}fut(){return this.lut.fut()}}}{const gw=self.Cs;gw.dut=class{constructor(t,s,i,e,n,r,h){this.Nc=n.LB(),this.mut=n,this.gut=t,this.yut=i,this.Sut=e,this.PS=s,this.J4=r,this.wut=h??r.Vz().$j(),this.but(),this.vut=this.xut?.Mut()??-1,this._ut=[],this.Tut=null,this.Gut=NaN,this.Cut=null,this.Iut=null,this.Put=null,this.Aut="",this.Rut=null,this.Eut="",this.Out="",this.Fut=0,this.Dut=!1,this._9=!1}Jn(){this._9||(gw.bh(this._ut),this._ut=null,this.Nc=null,this.mut=null,this.Sut=null,this.J4=null,this.Tut=null,this.Gut=NaN,this.Cut&&this.Cut.clear(),this.Cut=null,this.Iut=null,this.Put=null,this.Aut="",this.Rut=null,this.Eut="",this.Out="",this._9=!0)}zn(){return this._9}kut(){return this.mut}LB(){return this.Nc}Pc(){return this.gut}Lut(){return this.Sut}mz(){return this.PS}D6(){return this.J4||(this.J4=this.Nc.eB(this.wut).gJ()),this.J4}Nut(){return this.But(this.vut)}$ut(){const t=this.Nut();return t?t.mz():""}Wut(){const t=this.Nut();return t?t.Az():[]}Vut(t){const s=this.Wut();if(!s)return!1;if(!s.length)return!1;const i=gw.dut.utt(t);return!(!i||!i.length)&&i.every(gw.dut.ftt,s)}jut(t,s){const i=this.Wut();if(!i)return!1;if(!i.length)return!1;const e=gw.dut.utt(t);return!(!e||!e.length)&&e.every((t=>gw.dut.Hut.call(i,t,s)))}static ftt(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map((t=>t.trim().toLowerCase())).includes(t.trim().toLowerCase())}static utt(t){return t.trim().split(" ")}static Hut(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some((i=>gw.compare(i.trim(),s,t.trim())))}Uut(t){const s=this.Nut();if(s){if(gw.te(t)){const i=s.Jut(),e=i?i[t]:void 0;if(gw.te(e))return this.But(e)}if("string"==typeof t)for(const i of s.Jut()){const s=this.But(i);if(s.bz(t))return this.But(s.Mut())}}}zut(t){const s=this.Uut(t);return s?s.mz():""}qut(t){const s=this.Uut(t);return s?s.Az():""}Yut(t){const s=this.Nut();if(!s)return-1;const i=s.Jut();if(!i)return-1;const e=this.Uut(t);return e?i.indexOf(e.Mut()):-1}Xut(){const t=this.Nut();if(!t)return 0;const s=t.Jut();return s?s.length:0}But(t){return this.Sut.But(t)}Bf(){this.Kut().Zut(!0)}Zut(t){if(this.Qut()){for(const[t,s]of this.Qut().entries())s.Zut(!1);this.Qut().clear()}if(this.Cut=null,this.Tut=null,this.tct=null,this.Iut=null,this.Aut="",this.Rut=null,this.Eut="",this.Out="",this._ut=[],t){this.mut.sct(this);const t=this.xut.Mut();t!==this.vut&&this.ict(t)}else this.vut=this.xut.Mut()}ect(){const t=this.Sut.But(this.vut);return t?t.rct().nct():0}hct(t){return!(t<0)&&t===this.oct()}oct(){const t=this.Sut.But(this.vut);if(!t)return-1;let s=t.rct().act();return s?t.rct().lct().indexOf(s):-1}uct(t){const s=this.cct(t);return s?s.Pc():""}fct(t){let s;return gw.te(t)&&(s=this.cct(t)),"string"==typeof t&&(s=this.dct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Eet():""}pct(t,s){if(t.git())return t.Mut();{const i=t.rct().act();if(!i)return s.Mut();const e=i.mct();if(!gw.te(e))return s.Mut();const n=this.But(e);return n?this.pct(n,s):s.Mut()}}gct(t,s){if(t.git()){if("reference"===t.DG()){const s=t.yct(),i=t.Sct(),e=this.mut.cut(s);if(!e)return[-1,null];const n=e.wct(i);return n?this.gct(n,e):this.gct(e.bct(),e)}return[t.Mut(),s]}{const i=t.rct().act();if(!i)return[-1,null];const e=i.mct();if(!gw.te(e))return[-1,null];const n=s.But(e);return n?this.gct(n,s):[-1,null]}}vct(t,s){let i=this.But(t);if(i){if(!i.git()){const s=this.But(this.vut);t=this.pct(i,s)}if(gw.te(t)&&t!==this.vut)if(i=this.But(t),"reference"===i.DG()){const e=i.yct(),n=i.Sct(),r=this.mut.cut(e);let h=r.wct(n);if(h){const i=this.gct(h,r);if(-1===i[0])return;s(this.vut,t,i[1],i[0])}else s(this.vut,t)}else s(this.vut,t)}}Mct(t){let s;if(gw.te(t)&&(s=this.cct(t)),"string"==typeof t&&(s=this.dct(t)),!s)return;let i=s.mct();gw.te(i)&&this.vct(i,((t,s,i,e)=>{this._ut.push(t),this.ict(s,i,e)}))}xct(){const t=this._ct();if(!t)return;const s=t.mct();gw.te(s)&&this.vct(s,((t,s,i,e)=>{this._ut.push(t),this.ict(s,i,e)}))}Tct(t){const s=this.Sut.wct(t);if(!s)return;const i=s.Mut();gw.te(i)&&this.vct(i,((t,s,i,e)=>{this._ut.push(t),this.ict(s,i,e)}))}Gct(){const t=this._ut.pop();gw.te(t)?this.ict(t):this.Cct()&&(this.mut.sct(this.Cct(),!0,!1,!1),this.Cct().ict(this.Ict()),this.Kut().Pct(this.Cct()))}Act(t){if(!this.Nut())return;const s=this.Uut(t);if(s){if(!s.git())return;const t=s.Mut();if(!gw.te(t))return;this._ut.push(this.vut),this.ict(s.Mut())}}Rct(t){if(gw.te(t))return!!this.Sut.But(this.vut).rct().lct()[t];if("string"==typeof t){const s=this.Sut.But(this.vut).rct().lct();for(let i=0;i<s.length;i++)if(s[i].Pc()===t)return!0;return!1}return!1}Ect(){this.Dut=!0}Oct(){return this.Fut>0}Fct(){this.Fut++}Dct(){this.Fut--,0===this.Fut&&this.Dut&&this.mut.kct(this)}ict(t,s,i){const e=this.vut,n=this.D6().Vz();this.Fct(),this.mut.Lct(this),this.Nc.lH(gw.PB.Bct.CB.Nct,n),this.Nc.lH(gw.PB.Bct.CB.$ct,n),this.Nc.lH(gw.PB.Bct.CB.Wct,n),this.Nc.lH(gw.PB.Bct.CB.Vct,n),this.vut=t;let r=this.But(this.vut);if("dictionary"===r.DG()&&(this.Nc.lH(gw.PB.Bct.CB.jct,n),this.Nc.lH(gw.PB.Bct.CB.Hct,n),this.Nc.lH(gw.PB.Bct.CB.Uct,n),this.Nc.lH(gw.PB.Bct.CB.Jct,n)),this.mut.zct(),this.Dct(),!this.zn()&&(r=this.But(this.vut),"reference"===r.DG())){const t=s?s.Pc():r.yct();if(this.qct(r)){this._ut.pop();const t=this.Yct(r);this.mut.sct(t,!0,!0,!1),t.Xct(this,e),this.Kut().Pct(t)}else{const s="number"==typeof i?i:r.Sct();if(t){this._ut.pop();let i=r.Zct();if(i){let t=this.mut.Kct(i);for(;t;)i=gw.Gm(i),t=this.mut.Kct(i)}else{i=`${t}-ref`;let s=this.mut.Kct(i);for(;s;)i=gw.Gm(i),s=this.mut.Kct(i)}const n=this.mut.Qct(t,s,i,this.J4,!0);n.Xct(this,e),this.tft(r,n);const h=this.Kut();n.sft(h),h.Pct(n)}}}}_ct(){const t=this.Sut.But(this.vut);return t?t.rct().act():null}cct(t){const s=this.Sut.But(this.vut);if(!s)return null;const i=s.rct().lct();if(!i)return null;return i[t]||null}dct(t){const s=this.Sut.But(this.vut);if(!s)return null;return s.rct().ift(t)||null}but(t){if("number"==typeof t){let s=this.But(t);s||(s=this.Sut.bct()),this.xut=s}else if("number"==typeof this.yut){let t=this.But(this.yut);t||(t=this.Sut.bct()),this.xut=t}else{let t=this.Sut.wct(this.yut);t||(t=this.Sut.bct()),this.xut=t}}s3(){return this.Dut?null:{flowchartName:this.gut,flowchartTag:this.PS,startNodeTag:this.yut,currentNodeId:this.vut,previousNodeIds:this._ut,pluginUID:this.J4.Vz().$j(),reference:{previousFlowchartTag:this.Cct()?this.Cct().mz():"",previousStartNodeId:gw.te(this.Ict())?this.Ict():NaN,referencesJson:this.eft(),currentReferenceFlowchartTag:this.nft()?this.nft().mz():"",rootFlowchartTag:this.Kut()?this.Kut().mz():""}}}eft(){if(!this.rft())return null;const t=[];for(const[s,i]of this.Qut().entries())t.push({flowchartElementId:s.Mut(),flowchartStateTag:i.mz()});return t.length?t:null}i3(t){if(t){if(this.gut=t.flowchartName,this.PS=t.flowchartTag,this.yut=t.startNodeTag,this.vut=t.currentNodeId,this._ut=t.previousNodeIds,this.wut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Aut=s.previousFlowchartTag,this.Gut=s.previousStartNodeId,this.Rut=s.referencesJson,this.Eut=s.currentReferenceFlowchartTag,this.Out=s.rootFlowchartTag}this.but()}}Cct(){return"string"==typeof this.Aut&&this.Aut&&(this.Tut=this.mut.Kct(this.Aut),this.Aut=""),this.Tut}Ict(){return this.Gut}Xct(t,s){this.Tut=t,this.Gut=s}nft(){return"string"==typeof this.Eut&&this.Eut&&(this.Iut=this.mut.Kct(this.Eut),this.Eut=""),this.Iut}Pct(t){this.Iut=t,this.Iut===this&&(this.Iut=null)}Kut(){return"string"==typeof this.Out&&this.Out&&(this.Put=this.mut.Kct(this.Out),this.Out=""),this.Put?this.Put:this}sft(t){this.Put=t}rft(){return this.hft(),!!this.Cut}qct(t){return this.hft(),this.Cut&&this.Cut.has(t)}hft(){if(this.Rut){this.Cut&&this.Cut.clear(),this.Cut||(this.Cut=new Map);for(const t of this.Rut){const s=this.mut.Kct(t.flowchartStateTag),i=s.But(t.flowchartElementId);this.Cut.set(i,s)}this.Rut=null}}Qut(){return this.hft(),this.Cut}Yct(t){return this.hft(),this.Cut.get(t)}tft(t,s){this.Cut||(this.Cut=new Map),this.Cut.set(t,s)}}}{const yw=self.Cs;yw.oft=class{constructor(t){this.Nc=t,this.aft=new Map,this.lft=null,this.uft=[],this.cft=()=>this.g6(),this.fft=null}Jn(){yw.bh(this.uft),this.uft=null,this.aft.clear(),this.aft=null,this.lft=null,this.Nc=null,this.fft=null}LB(){return this.Nc}cut(t){return this.Nc.kut().cut(t)}Qct(t,s,i,e,n,r){const h=this.Nc.kut().cut(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.aft.has(i)){const t=this.aft.get(i);return void(t&&this.kct(t))}const o=new yw.dut(t,i,s,h,this,e,r);return this.aft.set(i,o),n&&this.sct(o,!0),o}kct(t){if(t.Ect(),t.Oct())return;const s=t.mz();this.aft.delete(s),t.Jn(),this.lft===t&&(this.lft=null)}dft(t){t.Bf()}Kct(t){return this.aft.get(t)}Lct(t){this.uft.push(t)}zct(){this.uft.pop()}sct(t,s=!1,i=!1,e=!0){if(e){const s=t.nft();t=s||t}t!==this.lft&&(this.pft(),this.mft(t,s,i))}gft(t){return"string"==typeof t?this.Kct(t):this.uft.length?this.uft[this.uft.length-1]:this.lft}pft(){if(!this.lft)return;if(this.lft.zn())return;const t=this.lft.D6().Vz();this.lft.Fct(),this.Lct(this.lft),this.Nc.lH(yw.PB.Bct.CB.yft,t),this.zct(),this.lft.Dct()}mft(t,s=!1,i=!1){if(this.lft=t,!this.lft)return;if(this.lft.zn())return;const e=this.lft.D6().Vz();this.lft.Fct(),this.Lct(this.lft),this.Nc.lH(yw.PB.Bct.CB.Sft,e),!0!==i&&"number"!=typeof i||this.lft.but(i),s&&(this.Nc.lH(yw.PB.Bct.CB.jct,e),this.Nc.lH(yw.PB.Bct.CB.Hct,e),this.Nc.lH(yw.PB.Bct.CB.Uct,e),this.Nc.lH(yw.PB.Bct.CB.Jct,e)),this.zct(),this.lft.Dct()}s3(){return{flowchartJsonObjects:[...this.aft.values()].map((t=>t.s3())),currentFlowchartTag:this.lft?this.lft.mz():null}}i3(t){if(!t)return;this.fft=t;const s=new Map;for(const t of this.fft.flowchartJsonObjects){const i=t.flowchartTag;if(this.aft.has(i)){const e=this.aft.get(i);e.i3(t),s.set(i,e)}else{const i=this.Qct(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.i3(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.aft.entries())s.has(t)||i.Jn();this.aft.clear(),this.aft=s,this.Nc.L5()?this.Nc.Sf().addEventListener("afterload",this.cft):this.g6()}g6(){this.Nc.Sf().removeEventListener("afterload",this.cft);const t=this.aft.get(this.fft.currentFlowchartTag);t&&this.sct(t,!0),this.fft=null}}}{const Sw=self.Cs;Sw.uut=class{constructor(){this.wft=new Map}Jn(){for(const t of this.wft.values())t.Jn();this.wft.clear(),this.wft=null}Bu(t){const s=new Sw.bft(t),i=s.Pc();this.wft.set(i,s)}Js(t){return this.wft.get(t)}fut(){return!!this.wft.size}static vft(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const ww=self.Cs,bw=0,vw=1;ww.bft=class{constructor(t){this.Yn=t[0],this.Mft=new ww.xft(t[1],this)}Jn(){this.Mft.Jn(),this.Mft=null}_ft(){return this.Mft}But(t){return this.Mft.But(t)}wct(t){return this.Mft.wct(t)}bct(){return this.Mft.bct()}Pc(){return this.Yn}}}{const Mw=self.Cs,xw=0,_w=1,Tw=2,Gw=3,Cw=4,Iw=5,Pw=6,Aw=7,Rw=8,Ew=8,Ow=9,Fw=10,Dw=11;class kw{constructor(t,s){this.Mft=s,this.Jc=t[7],this.Tft=t[0],this.PS=t[1],this.PS?this.E9=this.PS.trim().split(" ").map((t=>t.trim())):this.E9=[],this.Gft=t[2],this.Cft=null,this.Ift=null,this.Jot=!1,"dictionary"===this.Jc&&(this.Cft=t[3],this.Ift=t[4],this.Jot=t[8]),this.Pft=t[6],this.Aft=null,this.Rft=null,this.Eft=null,"reference"===this.Jc&&(this.Aft=t[8],this.Rft=t[9],this.Eft=t[10],this.Jot=t[11]),this.Oft=new Mw.Fft(t[5],this)}Jn(){this.Mft=null}_ft(){return this.Mft}rct(){return this.Oft}Mut(){return this.Tft}mz(){return this.PS}Az(){return this.E9}bz(t){if(!this.E9)return!1;if(!this.E9.length)return!1;const s=Mw.dut.utt(t);return!(!s||!s.length)&&s.every(Mw.dut.ftt,this.E9)}Dft(){return this.Pft}kft(t){this.Pft=!!t}Lft(){if("dictionary"===this.Jc)return!0;if("reference"===this.Jc)return!1;throw new Error(`unexpected flowchart node type: ${this.Jc}`)}Jut(){return this.Gft}Nft(){return this.Cft}Bft(){return this.Ift}DG(){return this.Jc}git(){return this.Jot}yct(){return this.Aft}Sct(){return this.Rft}Zct(){return this.Eft}}Mw.xft=class{constructor(t,s){this.Sut=s,this.$ft=[],this.Wft=new Map,this.Vft=new Map,this.jft=null,Mw.uut.vft(this.$ft,t,kw,this);for(const t of this.$ft){const s=t.Mut(),i=t.mz(),e=t.Az(),n=t.Dft();if(this.Wft.set(s,t),i)for(const s of e)this.Vft.has(s)||this.Vft.set(s,new Set),this.Vft.get(s).add(t);n&&(this.jft=t);const r=t.rct();for(const t of r.Hft()){const s=t.Mut();this.Wft.set(s,t)}}this.jft||this.Uft()}Jn(){this.Sut=null;for(const t of this.$ft)t.Jn();Mw.bh(this.$ft),this.$ft=null}Lut(){return this.Sut}But(t){return this.Wft.get(t)}wct(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.Vft.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce(((t,s)=>s.size<t.size?s:t))].filter((t=>s.every((s=>s.has(t)))))[0]}bct(){return this.jft}*Jft(){for(const t of this.$ft)yield t}Uft(){let t=0;for(const s of this.Jft())s.Dft()&&t++;if(0===t){for(const t of this.Jft())if(t.Lft()&&!t.Dft())return void t.kft(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.Jft())s.Lft()&&(s.Dft()&&t?t=!1:s.Dft()&&!t&&s.kft(!1))}}for(const t of this.Jft())if(t.Lft()&&t.Dft())return void(this.jft=t)}}}{const Lw=self.Cs,Nw=0,Bw=1,$w=2,Ww=3,Vw=4,jw=5;class Hw{constructor(t,s){this.Oft=s,this.Tft=t[0],this.Yn=t[1],this.Hnt=t[2],this.zft=t[3],this.Jot=t[4],this.qft=t[5]}Jn(){this.Oft=null}rct(){return this.Oft}Mut(){return this.Tft}Pc(){return this.Yn}Eet(){return this.Hnt}mct(){return this.zft}git(){return this.Jot}Yft(){return this.qft}}Lw.Fft=class{constructor(t,s){this.Xft=s,this.Zft=[],this.Kft=new Map,Lw.uut.vft(this.Zft,t,Hw,this),this.Qft=this.Zft.filter((t=>t.git()));for(const t of this.Qft)this.Kft.set(t.Pc(),t)}Jn(){this.Xft=null;for(const t of this.Zft)t.Jn();Lw.bh(this.Zft),this.Zft=null,Lw.bh(this.Qft),this.Qft=null}tdt(){return this.Xft}nct(){return this.Qft.length}lct(){return this.Qft}ift(t){return this.Kft.get(t)}act(){for(const t of this.Qft)if(t.Yft())return t}*Hft(){for(const t of this.Qft)yield t}}}{const Uw=self.Cs;Uw.sdt=class extends Uw.jn{constructor(t){super(),this.idt=t,this.edt=[],this.edt.push(Uw.Un(Uw.ndt,this)),this.IS=0,this.rdt=this.edt[0]}Jn(){for(const t of this.edt)t.Jn();Uw.bh(this.edt),this.rdt=null,this.idt=null}Cj(){return this.idt}EW(){return this.rdt}hdt(){return this.edt[this.IS-1]}Pu(){this.EW().Pu()}odt(){const t=this.edt,s=++this.IS;if(s===t.length){const s=Uw.Un(Uw.ndt,this);t.push(s),this.rdt=s}else{const i=t[s];i.Bf(),this.rdt=i}}adt(){const t=this.edt,s=++this.IS;s===t.length&&t.push(Uw.Un(Uw.ndt,this));const i=t[s];i.rd(t[s-1]),this.rdt=i}CY(){this.rdt=this.edt[--this.IS]}ldt(t){const s=this.edt;for(let i=0,e=s.length;i<e;++i)s[i].ldt(t)}}}{const Jw=self.Cs;Jw.ndt=class extends Jw.jn{constructor(t){super(),this.edt=t,this.idt=this.edt.Cj(),this.udt=this.idt.LB().KL(),this.cdt=!0,this.pK=[],this.fdt=[]}Jn(){this.ddt(),this.edt=null,this.idt=null,this.udt=null}ddt(){Jw.bh(this.pK),Jw.bh(this.fdt)}Cj(){return this.idt}pdt(){return this.cdt}mdt(){return this.cdt?!!this.idt.FW():!!this.pK.length}RW(){return this.cdt?this.idt.RW():this.pK}gdt(){return!!this.fdt.length}ydt(){return this.fdt}Sdt(){const t=this.RW();return t.length?t:this.fdt}Bf(){this.cdt=!0,Jw.bh(this.fdt)}Pu(){this.cdt=!0}rd(t){t.pdt()?this.Bf():(this.cdt=!1,Jw.Th(this.pK,t.pK),Jw.bh(this.fdt))}wdt(t){this.pK.push(t)}bdt(t){this.fdt.push(t)}vdt(t){this.cdt=!!t}Mdt(){return this.pK}xdt(){return this.fdt}_dt(t){this.cdt=!1,Jw.bh(this.pK),this.pK.push(t)}Tdt(t){this.cdt=!1,Jw.Th(this.pK,t)}Gdt(t){this.cdt=!1,Jw.bh(this.pK);for(const s of t)this.pK.push(s)}Cdt(t,s){for(const i of s)t.has(i)||this.fdt.push(i)}Idt(t){for(const s of t)this.pK.push(s);Jw.Ah(this.fdt,t)}Pdt(){Jw.bh(this.fdt)}Adt(t){if(t)if(this.udt.mY().UL().Rdt()){this.pdt()&&(Jw.bh(this.pK),Jw.Th(this.fdt,t.Cj().RW()),this.cdt=!1);const s=this.fdt.indexOf(t);-1!==s&&(this.pK.push(this.fdt[s]),this.fdt.splice(s,1))}else this._dt(t)}ldt(t){Jw.Ah(this.pK,t),Jw.Ah(this.fdt,t)}}}{const zw=self.Cs;zw.Edt=class extends zw.jn{constructor(t){super(),this.Odt=t,this.Nc=this.Odt.LB(),this.edt=[],this.edt.push(zw.Un(zw.Fdt,this,null)),this.IS=0,this.Ddt=[]}Jn(){for(const t of this.edt)t.Jn();zw.bh(this.edt),zw.bh(this.Ddt),this.Odt=null,this.Nc=null}BL(){return this.Odt}LB(){return this.Nc}mY(){return this.edt[this.IS]}kdt(){return this.edt}Ldt(){return this.IS}gY(t){const s=this.edt,i=++this.IS;if(i===s.length){const i=zw.Un(zw.Fdt,this,t);return s.push(i),i}{const e=s[i];return e.Bf(t),e}}CY(){--this.IS}Ndt(t){this.Ddt.push(t)}Bdt(){this.Ddt.pop()}ZL(){const t=this.Ddt;return 0===t.length?null:t.at(-1)}}}{const qw=self.Cs;qw.Fdt=class extends qw.jn{constructor(t,s){super(),this.edt=t,this.Nc=this.edt.LB(),this.$dt=s,this.Wdt=0,this.Vdt=0,this.jdt=!1,this.Hdt=!1,this.Udt=null,this.Jdt=0,this.zdt=0,this.qdt=null}Jn(){this.Bf(null),this.edt=null,this.Nc=null}Bf(t){this.$dt=t,this.Wdt=0,this.Vdt=0,this.jdt=!1,this.Hdt=!1,this.qdt=null}Ydt(t,s){this.$dt=t,this.Wdt=0,this.Vdt=s}Xdt(){this.Wdt=0,this.Vdt=0}UL(){return this.$dt}Zdt(t){this.$dt=t}Kdt(){return this.Wdt}Qdt(t){this.Wdt=t}tpt(){return this.Vdt}spt(t){this.Vdt=t}ipt(t){this.jdt=!!t}ept(){return this.jdt}npt(t){this.Hdt=!!t}rpt(){return this.Hdt}hpt(t){this.Udt=t}opt(){return this.Udt}apt(t,s){this.Jdt=t,this.zdt=s}QL(){return this.Jdt}tN(t){this.zdt=t}lpt(){return this.zdt}upt(){const t=this.$dt;return!!t.cpt()||this.Wdt<t.fpt()-1&&!!t.pY().length}dpt(t){this.qdt=t}ppt(){return this.qdt}}}{const Yw=self.Cs;Yw.mpt=class extends Yw.jn{constructor(t){super(),this.Odt=t,this.Nc=this.Odt.LB(),this.edt=[],this.IS=-1,this.rdt=null,this.gpt=[]}Jn(){Yw.bh(this.edt),this.Odt=null,this.Nc=null}ypt(t){this.gpt=t;const s=this.gpt.slice(0);this.edt.push(s),this.IS=0,this.rdt=s}BL(){return this.Odt}LB(){return this.Nc}Spt(){return this.rdt}gY(){const t=++this.IS,s=this.edt;t===s.length?s.push(this.gpt.slice(0)):Yw.Th(s[t],this.gpt),this.rdt=s[t]}CY(){this.rdt=this.edt[--this.IS]}}}{const Xw=self.Cs;Xw.wpt=class extends Xw.jn{constructor(t){super(),this.Odt=t,this.Nc=this.Odt.LB(),this.edt=[],this.IS=-1}Jn(){Xw.bh(this.edt),this.Odt=null,this.Nc=null}BL(){return this.Odt}LB(){return this.Nc}bpt(){return this.IS>=0}Spt(){return this.edt[this.IS]}gY(){if(++this.IS,this.IS===this.edt.length){const t=Xw.Un(Xw.vpt,this);return this.edt.push(t),t}{const t=this.edt[this.IS];return t.Bf(),t}}CY(){--this.IS}Mpt(t){const s=this.edt;for(let i=this.IS;i>=0;--i){const e=s[i];if(e.Pc()===t)return e}return null}xpt(){return this.edt.slice(0,this.IS+1)}}}{const Zw=self.Cs;Zw.vpt=class extends Zw.jn{constructor(t){super(),this._pt=t,this.Yn="",this.IS=0,this.Tpt=!1,this.Gpt=NaN}Bf(){this.Yn="",this.IS=0,this.Tpt=!1,this.Gpt=NaN}SY(t){this.Yn=t}Pc(){return this.Yn}_Y(t){this.IS=t}nL(){return this.IS}Sz(){this.Tpt=!0}GY(){return this.Tpt}Cpt(t){this.Gpt=t}Ipt(){return this.Gpt}}}{const Kw=self.Cs;Kw.Ppt=class extends Kw.jn{constructor(){super(),this.edt=[],this.IS=-1}Jn(){Kw.bh(this.edt)}Spt(){return this.edt[this.IS]}gY(){if(++this.IS,this.IS===this.edt.length){const t=[];return this.edt.push(t),t}return this.edt[this.IS]}CY(){--this.IS}}}{let Qw=function(t,s){return t.nL()-s.nL()},tb=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};SortSolArray=Qw,IsSolArrayIdentical=tb;const sb=self.Cs,ib=self.assert;sb.Apt=class extends sb.jn{constructor(t){super(),this.Nc=t,this.Rpt=[],this.Ept=new Map,this.Opt=[],this.Fpt=new Map,this.Dpt=new Map,this.kpt=new Map,this.Lpt=new Map,this.Npt=new Map,this.Bpt=new Map,this.$pt=0,this.Wpt=[],this.Vpt=[],this.jpt=[],this.Hpt=new Map,this.Upt=new Map,this.udt=sb.Un(sb.Edt,this),this.Jpt=sb.Un(sb.mpt,this),this._pt=sb.Un(sb.wpt,this),this.zpt=[],this.qpt=[],this.Ypt=[],this.Xpt=0,this.Zpt=0,this.Kpt=0,this.Qpt=[],this.tmt=[],this.smt=[],this.imt=new Map,this.emt=new Map,self.c3_callFunction=(t,s)=>this.nmt(t,s)}Jn(){this.e4(),this.udt.Jn(),this.udt=null,this.Jpt.Jn(),this.Jpt=null,sb.bh(this.qpt),sb.bh(this.Ypt),this.Nc=null,sb.bh(this.Rpt),this.Ept.clear()}ET(t){const s=sb.Un(sb.rmt,this,t);this.Rpt.push(s),this.Ept.set(s.Pc().toLowerCase(),s)}hmt(t){this.zpt.push(t)}omt(){for(const t of this.Upt.values())t.amt();for(const t of this.Hpt.values())t.omt();for(const t of this.Upt.values())t.omt();for(const t of this.Rpt)t.omt();for(const t of this.Rpt)t.G5();for(const t of this.zpt)t.omt(!1);sb.bh(this.zpt),this.Jpt.ypt(this.jpt)}LB(){return this.Nc}T5(t){return this.Ept.get(t.toLowerCase())||null}lmt(t){this.Opt.push(t),this.Fpt.set(t.umt(),t)}cmt(t){this.Dpt.set(t.G0(),t)}fmt(t){this.kpt.set(t.G0(),t)}dmt(t){this.Lpt.set(t.G0(),t)}pmt(t){switch(t.mmt()){case 0:this.Hpt.set(t.gmt().toLowerCase(),t);break;case 1:this.Upt.set(t.gmt().toLowerCase(),t)}}ymt(t){this.Bpt.set(t.G0(),t),t.n0()?this.Wpt.push(t):this.Vpt.push(t)}Smt(t){t.length>=2&&t.sort(Qw);let s=this.Npt.get(t.length);s||(s=[],this.Npt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(tb(t,e))return e}return s.push(t),t}wmt(t){return this.jpt.push(t.bmt()),this.$pt++}KL(){return this.udt}vmt(){return this.KL().mY()}UL(){return this.vmt().UL()}Mmt(){const t=this.vmt();return t.UL().xmt(t.Kdt())}_mt(){const t=this.vmt();return t.UL().Tmt(t.tpt())}Gmt(){return this.Jpt}yY(){return this._pt}Cmt(t){const s=[];for(t=t.Imt();t;)sb.On(s,t.Pmt()),t=t.Imt();return s}Amt(t){const s={};for(const i of this.Cmt(t))s[i.Rmt()]=i.Emt();return Object.create(Object.prototype,s)}Omt(t){return this.Bpt.get(t)||null}Fmt(t){return this.Dpt.get(t)||null}Dmt(t){return this.kpt.get(t)||null}kmt(t){return this.Lpt.get(t)||null}$L(t){return this.Hpt.get(t.toLowerCase())||null}Lmt(t,s){let i=this.Upt.get((t.Pc()+"."+s).toLowerCase());if(i)return i;if(!t.S0())for(const e of t.Nmt())if(i=this.Upt.get((e.Pc()+"."+s).toLowerCase()),i)return i;return null}Bmt(){return this.Wpt}$mt(){return this.Vpt}Wmt(t){for(const t of this.Wpt)t.Vmt();if(t)for(const t of this.Vpt)t.F_()&&t.Vmt()}jmt(t){return this.Fpt.get(t.toLowerCase())||null}Hmt(t){const s=this.Dpt.get(t);return s&&s.Umt()?s:null}Jmt(){return this.Opt}zmt(){for(const t of this.Opt)t.qmt()}Ymt(){for(const t of this.Rpt)t.Xmt()}Zmt(t){this.Ymt(),this.Xpt++;for(const s of t.L4()){const t=s.Q3();t&&(this.Nc.Kmt(s),t.tP(),this.Nc.Qmt())}this.Xpt--}async tgt(t){this.Ymt(),this.Xpt++;for(const s of this.sgt(t))await this.Nc.igt(s);this.Xpt--}*sgt(t){for(const s of t.L4()){const t=s.Q3();t&&(this.Nc.Kmt(s),yield*t.egt(),this.Nc.Qmt())}}ngt(t,s,i,e){let n=!1;if(!t.$N())return this.rgt(s,i,e);this.Zpt++;for(const r of t.L4()){const t=r.Q3();if(!t)continue;this.Nc.Kmt(r);for(const r of t.hgt()){const t=r.ngt(s,i,e);n=n||t}const h=t.ngt(s,i,e);n=n||h,this.Nc.Qmt()}return this.Zpt--,n}*ogt(t,s,i,e){let n=!1;if(!t.$N())return this.rgt(s,i,e);this.Zpt++;for(const r of t.L4()){const t=r.Q3();if(!t)continue;this.Nc.Kmt(r);for(const r of t.hgt()){const t=yield*r.ogt(s,i,e);n=n||t}const h=yield*t.ogt(s,i,e);n=n||h,this.Nc.Qmt()}return this.Zpt--,n}rgt(t,s,i){return this.qpt.push([t,s,i]),!1}agt(t,s,i){let e=null;const n=new Promise((t=>e=t));return this.Ypt.push([t,s,i,e]),n}*lgt(){if(this.Nc.ugt())throw new Error("should not be in breakpoint");const t=this.Nc.jN();for(;this.Ypt.length;){const[s,i,e,n]=this.Ypt.shift();n(yield*this.ogt(t,s,i,e))}}async cgt(){for(const t of this.lgt())await this.Nc.igt(t)}fgt(t,s,i,e){let n=!1;const r=t.$N(),h=r.Q3();if(!h)return;this.Zpt++,this.Nc.Kmt(r);const o=h.hgt();for(let t=0,r=o.length;t<r;++t){const r=o[t].fgt(s,i,e);n=n||r}const a=h.fgt(s,i,e);return n=n||a,this.Nc.Qmt(),this.Zpt--,n}*dgt(t,s,i,e){let n=!1;const r=t.$N(),h=r.Q3();if(!h)return;this.Zpt++,this.Nc.Kmt(r);const o=h.hgt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].dgt(s,i,e);n=n||r}const a=yield*h.dgt(s,i,e);return n=n||a,this.Nc.Qmt(),this.Zpt--,n}pgt(){return this.Zpt}mgt(){return this.pgt()>0}ggt(){return++this.Zpt}ygt(){--this.Zpt}Sgt(){return this.Xpt>0}$W(){return this.Sgt()||this.mgt()}z5(t){for(const[s,i,e]of this.qpt)this.ngt(t,s,i,e);sb.bh(this.qpt)}NW(t){t?this.Kpt++:this.Kpt--}Fj(){return this.Kpt>0}wgt(t){for(let s=0,i=t.length;s<i;++s)t[s].bgt().Pu()}vgt(t){for(let s=0,i=t.length;s<i;++s)t[s].bgt().odt()}vY(t){for(let s=0,i=t.length;s<i;++s)t[s].bgt().adt()}xY(t){for(let s=0,i=t.length;s<i;++s)t[s].bgt().CY()}JL(t){const s=new Set,i=this.udt.kdt(),e=this.udt.Ldt();for(let n=0;n<=e;++n){const e=i[n].ppt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}Mgt(t){const s=new Set([...t]),i=this.JL(s);if(i.size>0){for(const t of i)t.bgt().odt();return[...i]}return null}xgt(){const t=sb.Un(sb._gt,this);return this.Qpt.push(t),t}Tgt(){return this.Qpt}Ggt(){if(!this.Qpt.length)return;const t=this.vmt();let s=!1;this.Xpt++;for(let i=0,e=this.Qpt.length;i<e;++i){const e=this.Qpt[i];e.Cgt()&&e.Igt(t),e.Pgt()&&(s=!0)}s&&(this.Agt(),t.Bf(null)),this.Xpt--}async Rgt(){if(!this.Qpt.length)return;const t=this.vmt();let s=!1;this.Xpt++;for(let i=0,e=this.Qpt.length;i<e;++i){const e=this.Qpt[i];e.Cgt()&&await e.Egt(t),e.Pgt()&&(s=!0)}s&&(this.Agt(),t.Bf(null)),this.Xpt--}Agt(){const t=sb.Ph(this.Qpt,(t=>t.Pgt()));for(const s of t)s.Jn()}e4(){for(const t of this.Qpt)t.Jn();sb.bh(this.Qpt)}Ogt(t){for(const s of this.Qpt)s.ldt(t);for(const s of t){const t=this.emt.get(s);if(this.emt.delete(s),t)for(const{resolve:s}of t.Fgt.values())s(!0)}}Dgt(t){this.tmt.push({promise:t,kgt:this.pgt()})}Lgt(){sb.bh(this.tmt)}Ngt(){const t=this.pgt();this.tmt=this.tmt.filter((s=>s.kgt<=t))}Bgt(){const t=Promise.all(this.tmt.map((t=>t.promise)));return this.tmt=[],t}sN(t){const s=t.toLowerCase();this.smt.push(s),this.Nc.lH(sb.PB.IB.CB.$gt,null),this.smt.pop();for(const t of this.Nc.BL().Tgt())t.Wgt()&&t.Vgt()===s&&t.jgt();const i=this.imt.get(s);i&&(i.resolve(),this.imt.delete(s))}eN(t){const s=t.toLowerCase(),i=this.imt.get(s);if(i)return i.promise;{let t=null;const i=new Promise((s=>t=s));return this.imt.set(s,{promise:i,resolve:t}),i}}Hgt(){if(0===this.smt.length)throw new Error("not in a signal");return this.smt.at(-1)}Ugt(t){let s=this.emt.get(t);return s||(s={Jgt:[],Fgt:new Map},this.emt.set(t,s)),s}Qj(t,s){const i=this.Ugt(t),e=s.toLowerCase();i.Jgt.push(e),this.Nc.lH(t.wW().qgt().CB.zgt,t),i.Jgt.pop();for(const s of this.Nc.BL().Tgt())s.Ygt()&&s.Vgt()===e&&s.Xgt(t);const n=i.Fgt.get(e);n&&(n.resolve(!1),i.Fgt.delete(e)),0===i.Jgt.length&&0===i.Fgt.size&&this.emt.delete(t)}tH(t,s){const i=this.Ugt(t),e=s.toLowerCase(),n=i.Fgt.get(e);if(n)return n.promise;{let t=null;const s=new Promise((s=>t=s));return i.Fgt.set(e,{promise:s,resolve:t}),s}}Zgt(t){const s=this.Ugt(t);if(!s||0===s.Jgt.length)throw new Error("not in a signal");return s.Jgt.at(-1)}s3(){return{groups:this.Kgt(),cnds:this.Qgt(),acts:this.tyt(),vars:this.syt(),waits:this.iyt()}}i3(t){this.eyt(t.groups),this.nyt(t.cnds),this.ryt(t.acts),this.hyt(t.vars),this.oyt(t.waits)}Kgt(){const t={};for(const s of this.Jmt())t[s.G0().toString()]=s.ayt();return t}eyt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Hmt(t);e&&e.lyt(i)}}Qgt(){const t={};for(const[s,i]of this.kpt){const e=i.s3();e&&(t[s.toString()]=e)}return t}nyt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.kpt)i.i3(s.get(t)||null)}tyt(){const t={};for(const[s,i]of this.Lpt){const e=i.s3();e&&(t[s.toString()]=e)}return t}ryt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Lpt)i.i3(s.get(t)||null)}syt(){const t={};for(const[s,i]of this.Bpt)i.uyt()||!i.n0()&&!i.F_()||(t[s.toString()]=i.Eet());return t}hyt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Omt(t);e&&e.pnt(i)}}iyt(){return this.Qpt.filter((t=>!t.cyt())).map((t=>t.s3()))}oyt(t){this.e4();for(const s of t){const t=sb._gt.fyt(this,s);t&&this.Qpt.push(t)}}dyt(){return[...this.Nc.jN().L4()].map((t=>t.Q3())).filter((t=>t)).map((t=>t.pyt()))}myt(t){for(;t;){const s=t.Imt();if(s instanceof sb.gyt)return s;t=s}return null}nmt(t,s){Array.isArray(s)||(s=[]);const i=this.$L(t.toLowerCase());if(!i)return null;if(!i.Gu())return i.WL();const e=i.yyt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].bmt())}while(s.length<e.length)}const n=i.jL();return n.zL(n.HL(),!1,i.YL(),i.WL(),...s)}}}{const eb=self.Cs;eb.rmt=class extends eb.jn{constructor(t,s){super(),this.Odt=t,this.Nc=t.LB(),this.Yn=s[0],this.Syt=[],this.wyt=new Map,this.byt=new Map,this.vyt=new Map,this.Myt=!1,this.xyt=[],this._yt=[],this.Tyt=new Set;for(const t of s[1])this.Gyt(t,null,this.Syt);this.Cyt=this.Nc.yH()?{type:"sheet",name:this.Yn,Iyt:0,children:[]}:null}Jn(){this.Odt=null,this.Nc=null}Gyt(t,s,i){switch(t[0]){case 0:case 3:this.Pyt(t,s,i);break;case 1:this.Ayt(t,s,i);break;case 2:this.Ryt(t,s,i);break;case 4:this.Eyt(t,s);break;case 5:this.Oyt(t,s,i);break;case 6:this.Fyt(t,s);break;default:throw new Error("invalid event type")}}Pyt(t,s,i){const e=eb.Dyt.ET(this,s,t);if(e.Rdt()){i.push(e);const t=e.kyt();for(let s=0,i=t.length;s<i;++s)t[s].Lyt()&&this.Nyt(e,s)}else e.Lyt()?this.Nyt(e,0):i.push(e)}Eyt(t,s){const i=eb.gyt.Byt(this,s,t);this.Odt.pmt(i)}Fyt(t,s){const i=eb.gyt.$yt(this,s,t);this.Odt.pmt(i)}Ayt(t,s,i){const e=eb.Wyt.ET(this,s,t);i.push(e)}Ryt(t,s,i){const e=eb.Vyt.ET(this,s,t);i.push(e)}Oyt(t,s,i){const e=eb.jyt.ET(this,s,t);i.push(e)}Nyt(t,s){t.Rdt()||this.Odt.hmt(t);const i=t.xmt(s),e=i.Hyt(),n=i.Cj();if(i.Uyt()){let r=this.byt.get(n);r||(r=new Map,this.byt.set(n,r));const h=i.Jyt().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.wyt.get(n);r||(r={zyt:new Map,qyt:new Map},this.wyt.set(n,r));const h=i.GJ();let o;h?(o=r.qyt.get(h),o||(o=new Map,r.qyt.set(h,o))):o=r.zyt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}omt(){const t=this.Syt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof eb.Dyt&&t[s+1].Yyt();t[s].omt(e)}}Xyt(t){this.xyt.push(t)}G5(){eb.bh(this._yt),this.Zyt(this),this.Tyt.clear()}Zyt(t){const s=t._yt,i=t.Tyt;for(const e of this.xyt){const n=e.Kyt();e.Qyt()&&t!==n&&!i.has(n)&&(i.add(n),n.Zyt(t),s.push(n))}}hgt(){return this._yt}BL(){return this.Odt}LB(){return this.Nc}Pc(){return this.Yn}tSt(t,s){this.vyt.set(s,t)}sSt(t){return this.vyt.get(t)||null}Xmt(){this.Myt=!1}tP(){if(this.Myt)return;const t=this.Nc,s=t.iSt(),i=s?performance.now():0;this.Myt=!0;const e=this.BL(),n=e.vmt();for(const s of this.Syt)s.tP(n),e.wgt(s.pY()),e.Lgt(),t.VW();n.Bf(null),s&&(this.Cyt.Iyt+=performance.now()-i)}*egt(){if(this.Myt)return;this.Myt=!0;const t=this.Nc,s=this.BL(),i=s.vmt();for(const e of this.Syt)yield*e.egt(i),s.wgt(e.pY()),s.Lgt(),t.VW();i.Bf(null)}ngt(t,s,i){if(!s)return this.eSt(t,s,null,null);{const e=s.Cj();let n=!1,r=this.eSt(t,s,e,i);n=n||r;for(const h of e.Nmt())r=this.eSt(t,s,h,i),n=n||r}}eSt(t,s,i,e){const n=this.wyt.get(i);if(!n)return!1;const r=e?n.qyt.get(e):n.zyt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.nSt(s,t,i);o=o||e}return o}*ogt(t,s,i){if(!s)return yield*this.rSt(t,s,null,null);{const e=s.Cj();let n=!1,r=yield*this.rSt(t,s,e,i);n=n||r;for(const h of e.Nmt())r=yield*this.rSt(t,s,h,i),n=n||r}}*rSt(t,s,i,e){const n=this.wyt.get(i);if(!n)return!1;const r=e?n.qyt.get(e):n.zyt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.hSt()?this.nSt(s,t,i):yield*this.oSt(s,t,i),o=o||e}return o}fgt(t,s,i){const e=s.Cj(),n=this.byt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.nSt(null,s[0],s[1]);o=o||i}return o}*dgt(t,s,i){const e=s.Cj(),n=this.byt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.hSt()?this.nSt(null,i,e):yield*this.oSt(null,i,e),o=o||n}return o}nSt(t,s,i){const e=this.Nc,n=this.Odt,r=n.UL(),h=n.KL(),o=n.pgt();let a=!1;r&&n.vgt(r.HL()),n.vgt(s.HL());const l=o>1;l&&n.Gmt().gY();const u=h.gY(s);t&&(s.kyt()[i].Cj().EW()._dt(t),t.Nj()&&t.aSt());let c=!0;if(s.bU()){const t=s.lSt();for(let s=0,i=t.length;s<i;++s)if(!t[s].uSt(u)){c=!1;break}}return c&&(s.Rdt()?s.cSt(u,i):s.tP(u),a=u.ept()),h.CY(),l&&n.Gmt().CY(),n.xY(s.HL()),r&&n.xY(r.HL()),r||1!==o||(n.Lgt(),n.Fj()||e.VW()),a}*oSt(t,s,i){const e=this.Nc,n=this.Odt,r=n.UL(),h=n.KL(),o=n.pgt();let a=!1;r&&n.vgt(r.HL()),n.vgt(s.HL());const l=o>1;l&&n.Gmt().gY();const u=h.gY(s);t&&(s.kyt()[i].Cj().EW()._dt(t),t.Nj()&&t.aSt());let c=!0;if(s.bU()){const t=s.lSt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].fSt(u))){c=!1;break}}return c&&(s.Rdt()?yield*s.dSt(u,i):yield*s.egt(u),a=u.ept()),h.CY(),l&&n.Gmt().CY(),n.xY(s.HL()),r&&n.xY(r.HL()),r||1!==o||(n.Lgt(),n.Fj()||e.VW()),a}pyt(){return this.Cyt}}}{let nb=function(t,s){return!0};NoActions=nb;const rb=self.Cs,hb=[];function*ob(t,s){return!0}rb.Dyt=class extends rb.jn{constructor(t,s,i){super(),this.g3=t,this.Nc=t.LB(),this.pSt=s,this.mSt=null,this.udt=this.Nc.BL().KL(),this.gSt=[],this.ySt=[],this.SSt=!1,this.wSt=!1,this.bSt=!1,this.vSt=!1,this.MSt=!!i[2],this.xSt=!1,this._St=null,this.TSt=[],this.qnt=[],this.GSt=[],this.CSt=nb,this.ISt=ob,this.PSt=!1,this.ASt=!1,this.RSt="",this.ESt=!1,this.OSt=null,this.Cyt=null,this.qK=i[4],this.FSt=i[5],this.g3.tSt(this,this.FSt),this.DSt=this.Nc.yH()?{kSt:i[3][0],LSt:i[3][1],NSt:!1,BSt:!1,$St:!1,WSt:!1}:null,this.BL().cmt(this),3===i[0]&&this.VSt(i[1]);let e=0;for(const t of i[6]){const s=rb.jSt.ET(this,t,e++);this.TSt.push(s),this.HSt(s.Cj())}e=0;for(const t of i[7]){const s=rb.USt.ET(this,t,e++);this.qnt.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.g3.Gyt(s,this,this.GSt)}this.TSt.length&&(this.xSt=null===this.TSt[0].Cj()&&this.TSt[0].Hyt()===rb.PB.IB.CB.JSt),0===this.TSt.length&&(this.TSt=hb),0===this.qnt.length&&(this.qnt=hb),0===this.GSt.length&&(this.GSt=hb)}static ET(t,s,i){return rb.Un(rb.Dyt,t,s,i)}VSt(t){this.PSt=!0,this.ASt=!!t[0],this.ESt=this.ASt,this.RSt=t[1].toLowerCase(),this.OSt=[],this.BL().lmt(this),this.Nc.yH()&&(this.Cyt={type:"group",name:t[1],Iyt:0,children:[]})}zSt(t){this.OSt.push(t)}qSt(t,s){for(const i of t.f5().Y5())s.includes(i)||s.push(i)}YSt(t,s){if(t)if(s.includes(t)||s.push(t),t.S0())for(const i of t.XSt())i.Nj()&&this.qSt(i,s);else t.Nj()&&this.qSt(t,s)}HSt(t){this.YSt(t,this.gSt)}ZSt(t){this.YSt(t,this.ySt)}KSt(){this.gSt=this.Nc.y0()}omt(t){this.vSt=!!t,this.QSt(),this.twt();for(const t of this.TSt)t.omt();if(this.qnt.length>0){let t=!1;for(const s of this.qnt)s.omt(),s.swt()&&(t=!0);t?(this.CSt=this.iwt,this.ISt=this.ewt):(this.CSt=this.nwt,this.ISt=this.rwt)}const s=this.GSt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof rb.Dyt&&s[t+1].Yyt();s[t].omt(e)}this.DSt&&this.hwt(),this.Cyt&&this.owt().pyt().children.push(this.Cyt)}pyt(){return this.Cyt}owt(){let t=this.bU();for(;t;){if(t.Umt())return t;t=t.bU()}return this.g3}hwt(){const t=this.DSt;t.NSt=this.TSt.every((t=>t.hSt())),t.BSt=this.qnt.every((t=>t.hSt())),t.$St=this.GSt.every((t=>t.hSt())),t.WSt=t.NSt&&t.BSt&&t.$St}awt(){let t=this;do{t.hwt(),t=t.bU()}while(t)}QSt(){if(!this.Umt())return;let t=this.bU();for(this.bSt=!0;t;){if(!t.Umt()){this.bSt=!1;break}t=t.bU()}}lwt(){const t=this.Nc.y0();if(this.gSt===t)this.ySt=t;else{this.ySt=rb.Oh(this.gSt);let t=this.bU();for(;t;){for(const s of t.gSt)this.ZSt(s);t=t.bU()}const s=this.BL();this.gSt=s.Smt(this.gSt),this.ySt=s.Smt(this.ySt)}}twt(){if(!this.uwt())return;this._St=[];let t=this.bU();for(;t;)this._St.push(t),t=t.bU();this._St.reverse()}cwt(){this.wSt=!0,this.pSt&&this.pSt.cwt()}cpt(){return this.wSt}pY(){return this.gSt}HL(){return this.SSt||(this.SSt=!0,this.lwt()),this.ySt}fwt(t){return this.gSt.includes(t)}lSt(){return this._St}Q3(){return this.g3}BL(){return this.g3.BL()}LB(){return this.Nc}bU(){return this.pSt}dwt(t){this.mSt=t}Imt(){return this.mSt||this.pSt}pwt(){return this.FSt}mwt(){return this.DSt&&this.DSt.LSt}gwt(){return this.mwt()&&this.DSt.kSt}ywt(t){this.DSt.kSt=!!t,this.awt()}Umt(){return this.PSt}Swt(){return this.bSt}Yyt(){return this.xSt}wwt(){return this.vSt}umt(){return this.RSt}ayt(){return this.ESt}qmt(){this.lyt(this.ASt)}lyt(t){if(t=!!t,!this.PSt)throw new Error("not a group");if(this.ESt!==t){this.ESt=t;for(const t of this.OSt)t.bwt();if(this.OSt.length){const t=this.Nc.hB().Q3();t&&t.G5()}}}G0(){return this.qK}Rdt(){return this.MSt}Lyt(){return this.TSt.length&&this.TSt[0].Lyt()}vwt(){return this.mSt&&this.mSt instanceof rb.gyt}uwt(){return this.vwt()||this.TSt.some((t=>t.Lyt()))}kyt(){return this.TSt}fpt(){return this.TSt.length}xmt(t){if((t=Math.floor(t))<0||t>=this.TSt.length)throw new RangeError("invalid condition index");return this.TSt[t]}Mwt(t){return this.xmt(t)}xwt(t){let s=t.nL();if(0===s)return!0;--s;const i=t._wt()?t.Twt():t.Cj();for(;s>=0;--s){const t=this.TSt[s];if(i===t.Cj()||t._wt()&&t.Twt()===i)return!1}return!0}Gwt(){return this.qnt}Cwt(){return this.qnt.length}Tmt(t){if((t=Math.floor(t))<0||t>=this.qnt.length)throw new RangeError("invalid action index");return this.qnt[t]}Iwt(t){t=Math.floor(t);const s=this.qnt.find((s=>s.Pwt()===t));if(!s)throw new RangeError("invalid action debug index");return s}Awt(t){return(t=Math.floor(t))>=0&&t<this.qnt.length}Rwt(){return this.GSt}Pmt(){return this.GSt.filter((t=>t instanceof rb.Wyt))}uSt(t){t.Zdt(this);const s=this.TSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Qdt(e),n.$J())throw new Error("trigger cannot be used as sub-event to a loop");if(n.tP())i=!0;else if(!this.MSt)return!1}return!this.MSt||i}cSt(t,s){t.Zdt(this),t.Qdt(s),this.TSt[s].tP()&&(this.CSt(t,0)&&this.Ewt(t),t.ipt(!0))}*fSt(t){t.Zdt(this);const s=this.TSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Qdt(e),n.$J())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.hSt()?n.tP():yield*n.egt(),r)i=!0;else if(!this.MSt)return!1}return!this.MSt||i}*dSt(t,s){t.Zdt(this),t.Qdt(s);const i=this.TSt[s];let e;if(e=i.hSt()?i.tP():yield*i.egt(),e){let s;s=this.Owt()?this.CSt(t,0):yield*this.ISt(t,0),s&&(this.Fwt()?this.Ewt():yield*this.Dwt()),t.ipt(!0)}}tP(t){t.Zdt(this),this.xSt||t.npt(!1),this.MSt?this.kwt(t):this.Lwt(t)}*egt(t){(this.gwt()||this.Nc.Nwt())&&(yield this),t.Zdt(this),this.xSt||t.npt(!1),this.MSt?yield*this.Bwt(t):yield*this.$wt(t)}kwt(t){const s=this.TSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.Lyt())continue;t.Qdt(e);const r=n.tP();i=i||r}t.ipt(i),i&&(this.CSt(t,0)&&this.Ewt(t),this.vSt&&t.npt(!0))}*Bwt(t){const s=this.TSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.Lyt())continue;let r;t.Qdt(e),r=n.hSt()?n.tP():yield*n.egt(),i=i||r}if(t.ipt(i),i){let s;s=this.Owt()?this.CSt(t,0):yield*this.ISt(t,0),s&&(this.Fwt()?this.Ewt():yield*this.Dwt()),this.vSt&&t.npt(!0)}}Lwt(t){const s=this.TSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.Qdt(i),!e.tP())return void t.ipt(!1)}t.ipt(!0),this.CSt(t,0)&&this.Ewt(t),t.ept()&&this.vSt&&t.npt(!0)}*$wt(t){const s=this.TSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.Qdt(i),n=e.hSt()?e.tP():yield*e.egt(),!n)return void t.ipt(!1)}let i;t.ipt(!0),i=this.Owt()?this.CSt(t,0):yield*this.ISt(t,0),i&&(this.Fwt()?this.Ewt():yield*this.Dwt()),t.ept()&&this.vSt&&t.npt(!0)}nwt(t,s){const i=this.qnt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.spt(e),s.tP()}return!0}*rwt(t,s){const i=this.qnt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.spt(e),s.hSt()?s.tP():yield*s.egt()}return!0}iwt(t,s){const i=this.BL(),e=this.qnt;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.spt(n);const r=s.tP();if(s.Wwt()&&!0===r)return!1;s.Vwt()&&r instanceof Promise&&i.Dgt(r)}return!0}*ewt(t,s){const i=this.BL(),e=this.qnt;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.spt(n),r=s.hSt()?s.tP():yield*s.egt(),s.Wwt()&&!0===r)return!1;s.Vwt()&&r instanceof Promise&&i.Dgt(r)}return!0}jwt(t){this.CSt(t,t.tpt())&&this.Ewt()}*Hwt(t){(yield*this.ISt(t,t.tpt()))&&(yield*this.Dwt())}Ewt(){if(!this.GSt.length)return;const t=this.Umt()&&this.Nc.iSt(),s=t?performance.now():0,i=this.udt,e=i.gY(this);this.wSt?this.Uwt(e):this.Jwt(e),i.CY(),t&&(this.Cyt.Iyt+=performance.now()-s)}Uwt(t){const s=this.PSt,i=this.bSt,e=this.BL(),n=this.GSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.pY(),l=!i||!s&&r<o;l&&e.vY(a),h.tP(t),l?e.xY(a):e.wgt(a)}}Jwt(t){const s=this.GSt;for(let i=0,e=s.length;i<e;++i)s[i].tP(t)}*Dwt(){if(!this.GSt.length)return;const t=this.udt,s=t.gY(this);this.wSt?yield*this.zwt(s):yield*this.qwt(s),t.CY()}*zwt(t){const s=this.PSt,i=this.bSt,e=this.BL(),n=this.GSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.pY(),l=!i||!s&&r<o;l&&e.vY(a),yield*h.egt(t),l?e.xY(a):e.wgt(a)}}*qwt(t){const s=this.GSt;for(let i=0,e=s.length;i<e;++i)yield*s[i].egt(t)}MY(t,s){s.Xdt();const i=this.TSt;if(!this.Rdt())for(let e=t.Kdt()+1,n=i.length;e<n;++e){const t=i[e];if(s.Qdt(e),!t.tP())return!1}return this.CSt(s,0)&&this.Ewt(s),!0}*Ywt(t,s){s.Xdt();const i=this.TSt;if(!this.Rdt())for(let e=t.Kdt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.Qdt(e),n=t.hSt()?t.tP():yield*t.egt(),!n)return!1}let e;return e=this.Owt()?this.CSt(s,0):yield*this.ISt(s,0),e&&(this.Fwt()?this.Ewt():yield*this.Dwt()),!0}hSt(){return!this.gwt()&&!this.Nc.Nwt()&&this.DSt.WSt}Owt(){return!this.Nc.Nwt()&&this.DSt.BSt}Fwt(){return!this.Nc.Nwt()&&this.DSt.$St}Xwt(t){if(this.bU()){const s=this.lSt();for(let i=0,e=s.length;i<e;++i)if(!s[i].uSt(t))return!1}return!0}*Zwt(t){if(this.bU()){const s=this.lSt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].fSt(t)))return!1}return!0}Kwt(t,s,i){if(s.length>0)if(i){const i=s.map((t=>t.Js(0)));t.Gmt().gY(),this.mSt.Qwt(i)}else this.mSt.tbt(s);else i&&t.Gmt().gY()}sbt(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.Nc,l=this.udt,u=a.BL(),c=this.mSt,f=c.Vwt(),d=u.ggt()>1;if(this.Kwt(u,s,d),h&&(i?u.vY(t):u.vgt(t)),null!==e){if(e.ibt){const t=i?e.ibt.EW():e.ibt.bgt().hdt(),s=e.ebt.EW();s.Tdt(t.RW()),s.Pdt(),i||e.ebt.nbt()}else if(e.rbt){const t=e.rbt.EW();t.Tdt(e.hbt),t.Pdt()}e.obt&&(o=u.Mgt(t))}const p=l.gY(this);return i&&p.dpt(t),this.Xwt(p)&&(p.Zdt(this),f&&([r,n]=c.abt()),this.Lwt(p),f&&c.lbt(r)),l.CY(),d&&u.Gmt().CY(),null!==o&&u.xY(o),h&&u.xY(t),u.ygt(),f||u.Ngt(),n}*ubt(t,s,i,e){let n,r;(this.gwt()||this.Nc.Nwt())&&(yield this);const h=t.length>0;let o=null;const a=this.Nc,l=this.udt,u=a.BL(),c=this.mSt,f=c.Vwt(),d=u.ggt()>1;if(this.Kwt(u,s,d),h&&(i?u.vY(t):u.vgt(t)),null!==e){if(e.ibt){const t=i?e.ibt.EW():e.ibt.bgt().hdt(),s=e.ebt.EW();s.Tdt(t.RW()),s.Pdt(),i||e.ebt.nbt()}else if(e.rbt){const t=e.rbt.EW();t.Tdt(e.hbt),t.Pdt()}e.obt&&(o=u.Mgt(t))}const p=l.gY(this);return i&&p.dpt(t),(yield*this.Zwt(p))&&(p.Zdt(this),f&&([r,n]=c.abt()),yield*this.$wt(p),f&&c.lbt(r)),l.CY(),d&&u.Gmt().CY(),null!==o&&u.xY(o),h&&u.xY(t),u.ygt(),f||u.Ngt(),n}cbt(t,s){const i=this.HL(),e=i.length>0,n=this.Nc,r=this.udt,h=n.BL(),o=h.ggt()>1;o&&h.Gmt().gY(),this.mSt.Qwt(t),e&&(s?h.vY(i):h.vgt(i));const a=r.gY(this);this.Xwt(a)&&(a.Zdt(this),this.Lwt(a)),r.CY(),o&&h.Gmt().CY(),e&&h.xY(i),h.ygt(),h.Ngt()}*fbt(t,s){(this.gwt()||this.Nc.Nwt())&&(yield this);const i=this.HL(),e=i.length>0,n=this.Nc,r=this.udt,h=n.BL(),o=h.ggt()>1;o&&h.Gmt().gY(),this.mSt.Qwt(t),e&&(s?h.vY(i):h.vgt(i));const a=r.gY(this);(yield*this.Zwt(a))&&(a.Zdt(this),yield*this.$wt(a)),r.CY(),o&&h.Gmt().CY(),e&&h.xY(i),h.ygt(),h.Ngt()}zL(t,s,i,e,...n){let r,h;const o=t.length>0,a=this.Nc,l=this.udt,u=a.BL(),c=this.mSt,f=c.Vwt(),d=u.ggt()>1;d&&u.Gmt().gY(),n.length>0&&this.mSt.Qwt(n),o&&(s?u.vY(t):u.vgt(t));const p=l.gY(this);return p.apt(i,e),l.Ndt(p),a.wY(!1),this.Xwt(p)&&(p.Zdt(this),f&&([h,r]=c.abt()),this.Lwt(p),f&&c.lbt(h)),a.wY(!0),l.CY(),l.Bdt(),d&&u.Gmt().CY(),o&&u.xY(t),u.ygt(),f||u.Ngt(),r||p.lpt()}}}{const ab=self.Cs,lb=[];let ub=!1;ab.jyt=class extends ab.jn{constructor(t,s,i){super();const e=t.LB(),n=t.BL();this.g3=t,this.Odt=n,this.Nc=t.LB(),this.pSt=s;const r=e.dbt(i[1]);this.pbt=r,this.FSt=i[2],this.g3.tSt(this,this.FSt),this.DSt=e.yH()?{kSt:i[3][0],LSt:i[3][1]}:null}static ET(t,s,i){return ab.Un(ab.jyt,t,s,i)}omt(){const t=this.pbt,s=this.Nc.BL().Amt(this);this.pbt=t.bind(null,this.Nc.H$(),s)}bU(){return this.pSt}Imt(){return this.pSt}Q3(){return this.g3}pwt(){return this.FSt}mwt(){return this.DSt&&this.DSt.LSt}gwt(){return this.mwt()&&this.DSt.kSt}ywt(t){this.DSt.kSt=!!t}Yyt(){return!1}pY(){return lb}HL(){return this.pSt?this.pSt.HL():lb}tP(t){t.Zdt(this),this.Odt.Dgt(this.mbt())}async mbt(){try{await this.pbt()}catch(t){console.error(`Unhandled exception running script %c${this.Q3().Pc()}, event ${this.pwt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.SH&&self.SH.gbt(this),ub||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),ub=!0)}}*egt(t){t.Zdt(this),(this.gwt()||this.Nc.Nwt())&&(yield this),this.tP(t)}hSt(){return!this.gwt()&&!this.Nc.Nwt()}static ybt(){return ub}static Sbt(){ub=!0}}}{const cb=self.Cs,fb=self.assert;cb.gyt=class extends cb.jn{constructor(t,s,i){super(),this.g3=t,this.Nc=t.LB(),this.pSt=s,this.wbt=0,this.bbt="",this.vbt=0,this.Mbt=[],this.xbt=!0,this._bt="",this.idt=null,this.Tbt=!1,this.Gbt=[],this.Cbt=!1,this.Ibt=!1,this.Pbt=0,this.Abt=-1,this.Rbt=new Map,this.Ebt=cb.Dyt.ET(t,s,i),this.Ebt.dwt(this)}Obt(t){this.wbt=0,this.bbt=t[0],this.vbt=t[1],this.Mbt=t[2].map((t=>cb.Wyt.ET(this.g3,this,t))),this.xbt=t[3],this.Ibt=t[4],this.Cbt=t[5]}Fbt(t){this.wbt=1,this._bt=t[1],this.idt=this.Nc.qQ(t[2]),this.Ebt.HSt(this.idt),this.bbt=this.idt.Pc()+"."+this._bt,this.vbt=t[3],this.Mbt=t[4].map((t=>cb.Wyt.ET(this.g3,this,t))),this.xbt=t[5],this.Ibt=t[6],this.Cbt=t[7],this.idt.Dbt(this)}static Byt(t,s,i){const e=cb.Un(cb.gyt,t,s,i),n=i[1];return e.Obt(n),e}static $yt(t,s,i){const e=cb.Un(cb.gyt,t,s,i),n=i[1];return e.Fbt(n),e}amt(){if(this.idt&&this.idt.S0())for(const t of this.idt.XSt())if(t.kbt(this._bt)){this.Tbt=!0;break}}omt(){for(const t of this.Mbt)t.omt();this.Ebt.omt(!1)}mmt(){return this.wbt}Pmt(){return this.Mbt}yyt(){return this.Mbt}VL(){return this.Mbt.length}Lbt(t){this.Gbt.push(t)}Nbt(){return this.Gbt}tbt(t){const s=this.Mbt;for(let i=0,e=s.length;i<e;++i)s[i].pnt(t[i].Js(0))}Qwt(t){const s=this.Mbt;for(let i=0,e=s.length;i<e;++i)s[i].pnt(t[i])}Bbt(){return this.Mbt.map((t=>t.Eet()))}bU(){return this.pSt}Imt(){return this.pSt}gmt(){return this.bbt}$bt(){return this._bt}Wbt(){return this.Tbt}YL(){return this.vbt}Cj(){return this.idt}Gu(){return this.xbt}WL(){switch(this.vbt){case 0:return null;case 2:return"";default:return 0}}jL(){return this.Ebt}qL(){return this.Cbt}Vwt(){return this.Ibt}abt(){const t=this.Pbt++;let s;this.Abt=t;const i=new Promise((t=>s=t));return this.Rbt.set(t,{resolve:s,Vbt:0}),[t,i]}lbt(t){const s=this.Rbt.get(t);0===s.Vbt&&(s.resolve(),this.Rbt.delete(t)),this.Abt=-1}jbt(){return this.Rbt.get(this.Abt).Vbt++,this.Abt}Hbt(t){this.Abt=t,this.Rbt.get(t).Vbt--}Ubt(t,s){const i=new Map,e=[];for(const t of this.idt.EW().RW()){const s=t.Cj();if(s.kbt(this._bt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.Ebt.sbt(t,s,this.Cbt,{rbt:this.idt,hbt:e}),i.size>0)for(const[e,n]of i){const i=e.Jbt(this._bt).jL(),r=[...new Set([...t,...i.pY()])];i.sbt(r,s,this.Cbt,{rbt:e,hbt:n})}}*zbt(t,s){const i=new Map,e=[];for(const t of this.idt.EW().RW()){const s=t.Cj();if(s.kbt(this._bt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.Ebt.ubt(t,s,this.Cbt,{rbt:this.idt,hbt:e})),i.size>0)for(const[e,n]of i){const i=e.Jbt(this._bt).jL(),r=[...new Set([...t,...i.pY()])];yield*i.ubt(r,s,this.Cbt,{rbt:e,hbt:n})}}}}{const db=self.Cs,pb=[];db.Wyt=class extends db.jn{constructor(t,s,i){super();const e=t.BL();this.g3=t,this.Odt=e,this.Nc=t.LB(),this.pSt=s,this.Jpt=e.Gmt(),this.Yn=i[1],this.Jc=i[2],this.qbt=i[3],this.h_=!!i[4],this.Ybt=!!i[5],this.Xbt=s instanceof db.gyt,this.qK=i[6],this.Zbt=this.Nc.Rmt(i[8]),this.Kbt=t=>this.pnt(t),this.Qbt=()=>this.Eet(),this.tvt=!this.pSt||this.h_||this.Ybt,this.Hnt=this.qbt,this.svt=-1,this.ivt()&&(this.Hnt=this.Hnt?1:0),!this.evt()||this.F_()||this.uyt()||(this.svt=e.wmt(this)),e.ymt(this)}static ET(t,s,i){return db.Un(db.Wyt,t,s,i)}omt(){if(this.evt()&&!this.F_()&&!this.uyt()&&!this.nvt()){const t=this.Odt.myt(this);t&&t.Lbt(this)}}Pc(){return this.Yn}Rmt(){return this.Zbt}bU(){return this.pSt}Imt(){return this.bU()}n0(){return!this.bU()}evt(){return!this.n0()}nvt(){return this.Xbt}F_(){return this.h_}uyt(){return this.Ybt}Qi(){return 0===this.Jc}le(){return 1===this.Jc}ivt(){return 2===this.Jc}Yyt(){return!1}G0(){return this.qK}bmt(){return this.qbt}pY(){return pb}tP(t){!this.evt()||this.F_()||this.uyt()||this.pnt(this.bmt())}hSt(){return!0}*egt(t){this.tP(t)}pnt(t){this.Qi()?"number"!=typeof t&&(t=parseFloat(t)):this.le()?"string"!=typeof t&&(t=t.toString()):this.ivt()&&(t=t?1:0),this.tvt?this.Hnt=t:this.Jpt.Spt()[this.svt]=t}Eet(){return this.tvt?this.Hnt:this.Jpt.Spt()[this.svt]}rvt(){let t=this.Eet();return this.ivt()&&(t=!!t),t}Vmt(){this.Hnt=this.qbt}Emt(){return{configurable:!1,enumerable:!0,get:this.Qbt,set:this.Kbt}}}}{const mb=self.Cs,gb=self.assert,yb=[];mb.Vyt=class extends mb.jn{constructor(t,s,i){super();const e=t.BL();this.g3=t,this.Odt=e,this.Nc=t.LB(),this.pSt=s,this.hvt=null,this.ovt=i[1],this.Nf=!0}static ET(t,s,i){return mb.Un(mb.Vyt,t,s,i)}omt(){this.hvt=this.Odt.T5(this.ovt),this.g3.Xyt(this);let t=this.bU();for(;t;)t instanceof mb.Dyt&&t.Umt()&&t.zSt(this),t=t.bU();this.bwt(),this.Nc.yH()&&this.g3.pyt().children.push(this.hvt.pyt())}bU(){return this.pSt}pY(){return yb}Kyt(){return this.hvt}tP(t){const s=!!this.bU(),i=this.Nc.y0();s&&this.Odt.vgt(i),this.hvt.tP(),s&&this.Odt.xY(i)}*egt(t){const s=!!this.bU(),i=this.Nc.y0();s&&this.Odt.vgt(i),yield*this.hvt.egt(),s&&this.Odt.xY(i)}hSt(){return!1}Qyt(){return this.Nf}bwt(){let t=this.bU();for(;t;){if(t instanceof mb.Dyt&&t.Umt()&&!t.ayt())return void(this.Nf=!1);t=t.bU()}this.Nf=!0}}}{let Sb=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};WrapIndex=Sb;const wb=self.Cs,bb=self.assert;wb.avt=class extends wb.jn{constructor(t){super(),this.wx=t,this.Nc=t.LB()}omt(){}static lvt(t,s){const i=s[0],e=[Tb,xb,_b,Gb,vb,Mb];return wb.Un(e[i],t,s)}};class vb extends wb.avt{constructor(t,s){super(t),this.uvt=this.Nc.OZ(),this.pbt=this.Nc.dbt(s[1]),this.pbt!==wb.PB.IB.ort.random&&this.pbt!==wb.PB.IB.ort.cvt||this.wx.fvt()}dvt(){return this.uvt.pvt(this.pbt,this.uvt)}}class Mb extends wb.avt{constructor(t,s){super(t),this.mvt=null,this.bbt=s[1],this.wx.fvt()}omt(){const t=this.Nc.BL();this.mvt=t.$L(this.bbt),this.bbt=null;const s=this.wx.jL(),i=this.mvt.jL();this.gvt=[...new Set([...s.HL(),...i.HL()])],this.gvt=t.Smt(this.gvt)}dvt(){const t=this.mvt;if(t.Gu()){const s=t.jL();return wb.Dyt.prototype.zL.bind(s,this.gvt,t.qL(),t.YL(),t.WL())}{const s=t.WL();return()=>s}}}class xb extends wb.avt{constructor(t,s){super(t),this.idt=this.Nc.qQ(s[1]),this.pbt=this.Nc.dbt(s[2]),this.yvt=!!s[3],this.udt=this.Nc.BL().KL(),this.wx.Svt(this.idt)}dvt(){return this.idt.wW().pvt(this.pbt,this.idt.gW().gJ())}wvt(...t){const s=this.idt,i=s.EW().Sdt(),e=i.length;if(0===e)return this.yvt?"":0;const n=Sb(this.wx.bvt(),e);return this.udt.mY().hpt(s),this.pbt.apply(i[n].gJ(),t)}vvt(t,...s){const i=this.idt,e=i.RW(),n=e.length;if(0===n||"number"!=typeof t)return this.yvt?"":0;const r=Sb(t,n);return this.udt.mY().hpt(i),this.pbt.apply(e[r].gJ(),s)}}class _b extends wb.avt{constructor(t,s){super(t),this.idt=this.Nc.qQ(s[1]),this.Mvt=s[3],this.yvt=!!s[2],this.wx.Svt(this.idt)}xvt(){const t=this.idt.EW().Sdt(),s=t.length;return 0===s?this.yvt?"":0:t[Sb(this.wx.bvt(),s)]._vt(this.Mvt)}Tvt(){const t=this.idt,s=t.EW().Sdt(),i=s.length;if(0===i)return this.yvt?"":0;const e=s[Sb(this.wx.bvt(),i)],n=e.Cj().Gvt(t.Cvt());return e._vt(this.Mvt+n)}Ivt(t){const s=this.idt,i=s.RW(),e=i.length;if(0===e||"number"!=typeof t)return this.yvt?"":0;const n=i[Sb(t,e)];let r=0;return s.S0()&&(r=n.Cj().Gvt(s.Cvt())),n._vt(this.Mvt+r)}}class Tb extends wb.avt{constructor(t,s){super(t),this.idt=this.Nc.qQ(s[1]),this.Pvt=this.idt.Nnt(s[2]),this.Avt=this.idt.ait(s[2]),this.pbt=this.Nc.dbt(s[3]),this.yvt=!!s[4],this.udt=this.Nc.BL().KL(),this.wx.Svt(this.idt)}Rvt(...t){const s=this.idt,i=s.EW().Sdt(),e=i.length;if(0===e)return this.yvt?"":0;const n=Sb(this.wx.bvt(),e);this.udt.mY().hpt(s);const r=i[n];let h=0;return s.S0()&&(h=r.Cj().Evt(s.Cvt())),this.pbt.apply(r.Lnt()[this.Avt+h].gJ(),t)}Ovt(t,...s){const i=this.idt,e=i.RW(),n=e.length;if(0===n||"number"!=typeof t)return this.yvt?"":0;const r=Sb(t,n);this.udt.mY().hpt(i);const h=e[r];let o=0;return i.S0()&&(o=h.Cj().Evt(i.Cvt())),this.pbt.apply(h.Lnt()[this.Avt+o].gJ(),s)}}class Gb extends wb.avt{constructor(t,s){super(t),this.Fvt=null,this.Dvt=s[1]}omt(){this.Fvt=this.Nc.BL().Omt(this.Dvt)}kvt(){return this.Fvt}}}{let Cb=function(t){const s=self.Lvt[t];if(!s)throw new Error("invalid expression number");return s};GetExpressionFunc=Cb;const Ib=self.Cs,Pb=self.assert;Ib.Nvt=class extends Ib.jn{constructor(t,s,i){super(),this.wx=t,this.IS=i,this.Jc=s,this.Js=null,this.Bvt=!1,this.Ybt=!1}static ET(t,s,i){const e=s[0],n=[Ab,Rb,Nb,Ob,Db,Eb,kb,Ab,Ob,Ob,Bb,$b,Nb,Vb,Rb,Lb,Fb,Wb,jb,Hb,Ub,Jb];return Ib.Un(n[e],t,e,i,s)}omt(){}fvt(){this.Bvt=!0}Svt(t){this.Bvt||t&&(t.wW().z$()||(this.Bvt=!0))}$vt(){return this.Bvt}nL(){return this.IS}LB(){return this.wx.LB()}jL(){return this.wx.jL()}uyt(){return this.Ybt}Wvt(){return 4===this.Jc}};class Ab extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.Vvt=0;const n=e[1];this.jvt=n[0],this.Hvt=[],this.Uvt=null;for(let t=1,s=n.length;t<s;++t)this.Hvt.push(Ib.avt.lvt(this,n[t]));this.Hvt.length?this.Js=this.Jvt:(this.Js=Cb(this.jvt),this.Ybt=!0)}zvt(t){if(t<0||t>=this.Hvt.length)throw new RangeError("invalid numbered node");return this.Hvt[t]}omt(){for(const t of this.Hvt)t.omt();const t=Cb(this.jvt);this.Hvt.length?this.Uvt=t(this):this.Uvt=t}bvt(){return this.Vvt}Jvt(t){return this.Vvt=t,this.Uvt()}}class Rb extends Ab{constructor(t,s,i,e){super(t,s,i,e),this.Js=this.qvt,14===s&&(this.jL().KSt(),this.wx instanceof Ib.USt&&this.jL().cwt())}qvt(t){this.Vvt=t;const s=this.Uvt();return"string"==typeof s?s:""}Yvt(){return Cb(this.jvt)()}}class Eb extends Ab{constructor(t,s,i,e){super(t,s,i,e),t.Xvt()>=2?this.Js=this.nV:this.Js=this.lB,this.Ybt=!1}lB(t){this.Vvt=t;const s=this.Uvt();return this.LB().hB().lB(s)}nV(t){const s=this.lB(t);return s?s.nV():null}}class Ob extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.Zvt=e[1],this.Js=this.Kvt,this.Ybt=!0}Kvt(){return this.Zvt}}class Fb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.Qvt=e[1],this.Js=this.tMt,this.Ybt=!0}tMt(){return this.Qvt}}class Db extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.idt=this.LB().qQ(e[1]),t.Xvt()>=2?this.Js=this.dW:this.Js=this.Cj;const n=this.jL();n.HSt(this.idt),this.wx instanceof Ib.USt?n.cwt():n.bU()&&n.bU().cwt(),this.Ybt=!0}Cj(){return this.idt}dW(){return this.idt?this.idt.dW():null}}class kb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.HK=this.LB().jN().R4(e[1]),t.Xvt()>=2?this.Js=this.WN:this.Js=this.HN,this.Ybt=!0}HN(){return this.HK}WN(){return this.HK?this.HK.WN():null}}class Lb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.N8=this.LB().J9().H6(e[1]),t.Xvt()>=2?this.Js=this.Gst:this.Js=this.zst,this.Ybt=!0}zst(){return this.N8}Gst(){return this.N8?this.N8.Gst():null}}class Nb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.sMt=e[1],this.Js=this.iMt,this.Ybt=!0}iMt(){return this.sMt}}class Bb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.eMt=e[1];const n=this.wx.Cj();this.wx instanceof Ib.jSt&&this.wx.F_()?(this.Js=this.nMt,this.Ybt=!0):n&&n.S0()?(this.Js=this.rMt,this.fvt()):(this.Js=this.nMt,this.Ybt=!0)}nMt(){return this.eMt}rMt(t){t=t||0;const s=this.wx.Cj(),i=s.EW(),e=i.RW();let n=null;if(e.length)n=e[t%e.length].Cj();else if(i.gdt()){const s=i.ydt();n=s[t%s.length].Cj()}else{if(!(s.FW()>0))return 0;{const i=s.RW();n=i[t%i.length].Cj()}}return this.eMt+n.Gvt(s.Cvt())}}class $b extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.Dvt=e[1],this.Fvt=null,t.Xvt()>=2?this.Js=this.hMt:this.Js=this.oMt,this.Ybt=!0}omt(){this.Fvt=this.LB().BL().Omt(this.Dvt)}oMt(){return this.Fvt}hMt(){return null}}class Wb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.aMt=e[1],this.mvt=null,t.Xvt()>=2?this.Js=this.lMt:this.Js=this.uMt,this.Ybt=!0}omt(){this.mvt=this.LB().BL().$L(this.aMt),this.aMt=null}uMt(){return this.mvt}lMt(){return null}}class Vb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.cMt=[],this.fMt=[],this.Ybt=!0;for(let t=1,s=e.length;t<s;++t){const s=Ib.Nvt.ET(this.wx,e[t],0);this.cMt.push(s),this.fMt.push(0),s.uyt()||(this.Ybt=!1)}this.Js=this.dMt}omt(){for(const t of this.cMt)t.omt()}dMt(){const t=this.cMt,s=this.fMt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0);return s}}class jb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.pMt=e[1],this.Js=this.dnt,this.Ybt=!0}dnt(){return this.pMt}}class Hb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.mMt=e[1],this.Js=this.gMt,this.Ybt=!0}gMt(){return this.mMt}}class Ub extends Ab{constructor(t,s,i,e){super(t,s,i,e),this.Js=this.Hj,this.Ybt=!1}Hj(){return this.Uvt()}}class Jb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.Sut=this.LB().kut().cut(e[1]),this.Js=this.yMt,this.Ybt=!0}yMt(){return this.Sut.Pc()}}}{let zb=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0)};EvalParams=zb;const qb=self.Cs,Yb=self.assert,Xb=[],Zb=function(){};qb.jSt=class extends qb.jn{constructor(t,s,i){if(super(),this.Ebt=t,this.Nc=t.LB(),this.IS=i,this.pbt=this.Nc.dbt(s[1]),this.SMt=s[3]>0,this.wMt=2===s[3],this.bMt=!!s[4],this.vMt=!!s[5],this.h_=!!s[6],this.qK=s[7],this.MMt=this.Ebt.Rdt(),this.idt=null,this.Pvt=null,this.Avt=-1,this.uvt=null,this.tP=Zb,this.egt=Zb,this.Ws=[],this.xMt=[],this._Mt=!1,this.TMt=null,this.GMt=null,this.DSt=this.Nc.yH()?{kSt:s[8][0],CMt:s[8][1]}:null,-1===s[0]?this.uvt=this.Nc.OZ():(this.idt=this.Nc.qQ(s[0]),s[2]&&(this.Pvt=this.idt.Nnt(s[2]),this.Avt=this.idt.ait(s[2])),this.Ebt.bU()&&this.Ebt.bU().cwt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(qb.Nvt.ET(this,s,this.Ws.length)),this.xMt.push(0)}0===this.Ws.length&&(this.Ws=Xb,this.xMt=Xb),this.Ebt.BL().fmt(this)}static ET(t,s,i){return qb.Un(qb.jSt,t,s,i)}omt(){for(const t of this.Ws)t.omt(),t.$vt()&&(this._Mt=!0);this.wMt?(this.tP=this.IMt,this.egt=this.PMt):this.uvt?(this.AMt(),this.egt=this.RMt):this.idt.wW().z$()?(this.EMt(),this.egt=this.OMt):this.h_?(this.tP=this.FMt,this.egt=this.DMt):(this.tP=this.kMt,this.egt=this.LMt)}AMt(){const t=this.uvt,s=this.uvt;this.NMt(t,s,this.BMt)}EMt(){const t=this.idt.wW(),s=this.idt.gW().gJ();this.NMt(t,s,this.$Mt)}NMt(t,s,i){const e=this.pbt,n=this.vMt,r=this.Ws;if(0===r.length){const i=t.pvt(e,s);this.tP=n?function(){return qb.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.uyt())this.tP=t.WMt(e,s,i.Js(0));else{const r=t.pvt(e,s);this.tP=function(){return qb.xor(r(i.Js(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.uyt()&&h.uyt())this.tP=t.VMt(e,s,i.Js(0),h.Js(0));else{const r=t.pvt(e,s);this.tP=function(){return qb.xor(r(i.Js(0),h.Js(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.uyt()&&h.uyt()&&o.uyt())this.tP=t.jMt(e,s,i.Js(0),h.Js(0),o.Js(0));else{const r=t.pvt(e,s);this.tP=function(){return qb.xor(r(i.Js(0),h.Js(0),o.Js(0)),n)}}}else this.tP=i}G0(){return this.qK}Hyt(){return this.pbt}Cj(){return this.idt}GJ(){return this.Pvt}HMt(){return this.Pvt?this.Pvt.xJ():this.idt?this.idt.wW():null}Xvt(){const t=this.HMt();return t?t.UMt():1}jL(){return this.Ebt}LB(){return this.Nc}nL(){return this.IS}Pwt(){return this.nL()}Lyt(){return this.SMt}Uyt(){return this.wMt}JMt(){return this.vMt}$J(){return this.bMt}F_(){return this.h_}zMt(){return this.DSt.kSt}qMt(){return!!this.uvt}_wt(){return this.qMt()||this.idt.wW().z$()}Twt(){for(const t of this.Ws)if(t.Wvt())return t.Cj();return null}YMt(t){this.DSt.kSt=!!t,this.Ebt.awt()}XMt(){return this.DSt.CMt}hSt(){return!this.zMt()&&!this.Nc.Nwt()&&!this.XMt()}ZMt(){return this.TMt||(this.TMt=new Map),this.TMt}KMt(){return this.GMt||(this.GMt=new Map),this.GMt}BMt(){const t=this.xMt;return zb(this.Ws,t),qb.xor(this.pbt.apply(this.uvt,t),this.vMt)}*RMt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.xMt;zb(this.Ws,t);let s=this.pbt.apply(this.uvt,t);return qb.Mo(s)&&(s=yield*s),qb.xor(s,this.vMt)}return this.tP()}$Mt(){const t=this.xMt;zb(this.Ws,t);const s=this.idt.gW().gJ();return qb.xor(this.pbt.apply(s,t),this.vMt)}*OMt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.xMt;zb(this.Ws,t);const s=this.idt.gW().gJ();let i=this.pbt.apply(s,t);return qb.Mo(i)&&(i=yield*i),qb.xor(i,this.vMt)}return this.tP()}IMt(){return!0}*PMt(){return(this.zMt()||this.Nc.Nwt())&&(yield this),!0}QMt(){return this.Pvt?this.Pvt.xJ().UMt()>=2?this.Pvt.TJ():this.Pvt:this.idt.wW().UMt()>=2?this.idt.dW():this.idt}FMt(){const t=this.xMt;zb(this.Ws,t);const s=this.pbt.apply(this.QMt(),t);return this.idt.nbt(),s}*DMt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.xMt;zb(this.Ws,t);let s=this.pbt.apply(this.QMt(),t);return qb.Mo(s)&&(s=yield*s),this.idt.nbt(),s}return this.tP()}kMt(){const t=this.Ws,s=this.xMt,i=this.idt.EW();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.$vt()||(s[i]=e.Js(0))}return i.pdt()?this.txt(i):this.sxt(i)}*LMt(){return(this.zMt()||this.Nc.Nwt())&&(yield this),this.kMt()}ixt(t){const s=this.Ws,i=this.xMt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.$vt()&&(i[e]=n.Js(t))}}txt(t){const s=this.idt,i=s.S0(),e=s.Cvt(),n=this.Avt,r=n>=0,h=s.RW(),o=this._Mt,a=this.xMt,l=this.pbt,u=this.vMt,c=this.MMt&&!this.SMt;t.ddt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.ixt(s),r){const t=i?f.Cj().Evt(e):0;d=l.apply(f.Lnt()[n+t].gJ(),a)}else d=l.apply(f.gJ(),a);qb.xor(d,u)?t.wdt(f):c&&t.bdt(f)}return s.nxt(!0),t.vdt(!1),s.nbt(),t.mdt()}sxt(t){const s=this.idt,i=s.S0(),e=s.Cvt(),n=s.Nj(),r=this.Avt,h=r>=0,o=this._Mt,a=this.xMt,l=this.pbt,u=this.vMt,c=this.MMt&&!this.SMt,f=t.Mdt(),d=t.xdt(),p=c&&!this.Ebt.xwt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let S;if(o&&this.ixt(t),h){const t=i?s.Cj().Evt(e):0;S=l.apply(s.Lnt()[r+t].gJ(),a)}else S=l.apply(s.gJ(),a);qb.xor(S,u)?(y=!0,p?(f.push(s),n&&s.rxt()):(m[g]=s,n&&s.hxt(g),++g)):p?(m[g]=s,n&&s.oxt(g),++g):c&&(d.push(s),n&&s.axt())}qb.wh(m,g),n&&s.lxt(p,g);const S=y;return p&&!y&&(y=this.uxt(f)),s.nxt(S||c),c?y:t.mdt()}uxt(t){const s=this.idt,i=s.S0(),e=s.Cvt(),n=this._Mt,r=this.Avt,h=r>=0,o=this.xMt,a=this.pbt,l=this.vMt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.ixt(s),h){const t=i?u.Cj().Evt(e):0;c=a.apply(u.Lnt()[r+t].gJ(),o)}else c=a.apply(u.gJ(),o);if(qb.xor(c,l))return!0}return!1}cxt(t,s){return this.Ws[t].Js(s)}Jyt(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].Yvt()}s3(){if(!this.TMt||!this.TMt.size)return null;const t={};for(const[s,i]of this.TMt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map((t=>[t[0].$j(),t[1].$j(),t[2]]))),t[s]=e}return{ex:t}}i3(t){if(this.TMt&&(this.TMt.clear(),this.TMt=null),!t)return;const s=this.Nc,i=t.ex;if(i){const t=this.ZMt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=qb.Un(qb.Cu,n.map((t=>[s.eB(t[0]),s.eB(t[1]),t[2]])).filter((t=>t[0]&&t[1])))),t.set(e,i)}}}}}{let Kb=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0)};EvalParams=Kb;const Qb=self.Cs,tv=self.assert,sv=[],iv=function(){},ev=function*(){},nv=1,rv=2,hv=4,ov=8,av=16;Qb.USt=class extends Qb.jn{constructor(t,s,i){super(),this.Ebt=t;const e=t.LB();this.Nc=e,this.IS=i,this.qK=s.length>=4?s[3]:-1,this.fxt=s.length>=5?255&s[4]:0,this.dxt=s.length>=5?s[4]>>8:0,this.pbt=null,this.idt=null,this.Pvt=null,this.Avt=-1,this.uvt=null,this.pxt="",this.mxt=null,this.gxt=null,this.tP=iv,this.egt=iv,this.Ws=[],this.xMt=[],this._Mt=!1,this.TMt=null,this.GMt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.DSt=e.yH()||n?{kSt:r[0],CMt:r[1],index:r[2]}:null,-1===s[0])this.uvt=e.OZ(),this.pbt=e.dbt(s[1]);else if(-2===s[0])this.pxt=s[1];else if(n){const t=e.dbt(s[1]);this.pbt=t,this.tP=this.yxt,this.egt=this.Sxt,this.dxt|=8}else this.idt=e.qQ(s[0]),4&this.dxt?(this.pxt=s[1],this.mxt=e.qQ(s[2])):(s[2]&&(this.Pvt=this.idt.Nnt(s[2]),this.Avt=this.idt.ait(s[2])),this.pbt=e.dbt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(Qb.Nvt.ET(this,s,this.Ws.length)),this.xMt.push(0)}0===this.Ws.length&&(this.Ws=sv,this.xMt=sv),this.wxt()&&(this.Ebt.KSt(),this.Ebt.cwt()),this.Ebt.BL().dmt(this)}static ET(t,s,i){return Qb.Un(Qb.USt,t,s,i)}omt(){for(const t of this.Ws)t.omt(),t.$vt()&&(this._Mt=!0);if(this.uvt)this.AMt(),this.egt=this.RMt;else if(this.pxt)4&this.dxt?this.bxt():this.vxt(),this.pxt="",this.mxt=null;else if(this.tP===this.yxt){const t=this.pbt,s=this.Nc.BL().Amt(this.Ebt);this.pbt=t.bind(null,this.Nc.H$(),s)}else this.Pvt?this.Vwt()?(this.tP=this.Mxt,this.egt=this.xxt):(this.tP=this._xt,this.egt=this.Txt):this.idt.wW().z$()?(this.EMt(),this.egt=this.OMt):this.F_()?(this.tP=this.Gxt,this.egt=this.Cxt):this.Vwt()?(this.tP=this.Ixt,this.egt=this.Pxt):this.Axt()?(this.tP=this.Rxt,this.egt=this.Ext):this.Ws.length?this.Ws.every((t=>t.$vt()))?(this.tP=this.Oxt,this.egt=this.Fxt):this._Mt?(this.tP=this.Dxt,this.egt=this.kxt):this.Ws.every((t=>t.uyt()))?(Kb(this.Ws,this.xMt),this.tP=this.Lxt,this.egt=this.Nxt):(this.tP=this.Bxt,this.egt=this.$xt):(this.tP=this.Lxt,this.egt=this.Nxt)}AMt(){const t=this.uvt,s=this.uvt;this.NMt(t,s,this.BMt)}EMt(){const t=this.idt.wW(),s=this.idt.gW().gJ();this.NMt(t,s,this.$Mt)}vxt(){const t=this.Ebt.BL(),s=t.$L(this.pxt);if(s.Gu()){const i=!!(2&this.dxt);this.gxt=s.jL();let e=[...new Set([...this.Ebt.HL(),...this.gxt.HL()])];e=t.Smt(e);const n=!s.qL()&&this.Wxt()?{obt:!0}:null;if(this.tP=Qb.Dyt.prototype.sbt.bind(this.gxt,e,this.Ws,i,n),this.Nc.yH()){const t=this;this.egt=function*(){return(t.zMt()||t.Nc.Nwt())&&(yield t),yield*t.gxt.ubt(e,t.Ws,i,n)}}else this.egt=ev}else this.tP=iv,this.egt=ev}bxt(){const t=this.Ebt.BL(),s=t.Lmt(this.mxt,this.pxt);if(s.Gu()){const i=!!(2&this.dxt);this.gxt=s.jL();let e=[...new Set([...this.Ebt.HL(),...this.gxt.HL(),this.idt,s.Cj()])];e=t.Smt(e);const n=!this.idt.S0()&&!s.Cj().S0(),r=!this.idt.S0()&&s.Cj().S0(),h=this.idt.S0();let o=null;if(!s.qL()&&this.Wxt()&&(o=o||{},o.obt=!0),!r&&i||(o=o||{},o.ibt=this.idt,o.ebt=s.Cj()),n||r||h&&!s.Wbt()?this.tP=Qb.Dyt.prototype.sbt.bind(this.gxt,e,this.Ws,i,o):h&&(this.tP=Qb.gyt.prototype.Ubt.bind(s,e,this.Ws)),this.Nc.yH()){const t=this;n||r||h&&!s.Wbt()?this.egt=function*(){return(t.zMt()||t.Nc.Nwt())&&(yield t),yield*t.gxt.ubt(e,t.Ws,i,o)}:h&&(this.egt=function*(){return(t.zMt()||t.Nc.Nwt())&&(yield t),yield*s.zbt(e,t.Ws)})}else this.egt=ev}else this.tP=iv,this.egt=ev}NMt(t,s,i){const e=this.pbt,n=this.Ws;if(0===n.length)this.tP=t.pvt(e,s);else if(1===n.length){const i=n[0];if(i.uyt())this.tP=t.WMt(e,s,i.Js(0));else{const n=t.pvt(e,s);this.tP=function(){return n(i.Js(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.uyt()&&r.uyt())this.tP=t.VMt(e,s,i.Js(0),r.Js(0));else{const n=t.pvt(e,s);this.tP=function(){return n(i.Js(0),r.Js(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.uyt()&&r.uyt()&&h.uyt())this.tP=t.jMt(e,s,i.Js(0),r.Js(0),h.Js(0));else{const n=t.pvt(e,s);this.tP=function(){return n(i.Js(0),r.Js(0),h.Js(0))}}}else this.tP=i}G0(){return this.qK}Vwt(){return!!(8&this.dxt)}Wwt(){return!!(16&this.dxt)}Axt(){return 1===this.fxt}F_(){return 2===this.fxt}wxt(){return!!(1&this.dxt)}swt(){return this.Vwt()||this.Wwt()}Cj(){return this.idt}HMt(){return this.Pvt?this.Pvt.xJ():this.idt?this.idt.wW():null}Xvt(){const t=this.HMt();return t?t.UMt():1}jL(){return this.Ebt}Wxt(){let t=this.Ebt;do{if(t instanceof Qb.gyt&&t.qL())return!0;t=t.Imt()}while(t);return!1}LB(){return this.Nc}nL(){return this.IS}Pwt(){return this.DSt.index}zMt(){return this.DSt.kSt}YMt(t){this.DSt.kSt=!!t,this.Ebt.awt()}XMt(){return this.DSt.CMt}hSt(){return!this.zMt()&&!this.Nc.Nwt()&&!this.XMt()}ZMt(){return this.TMt||(this.TMt=new Map),this.TMt}KMt(){return this.GMt||(this.GMt=new Map),this.GMt}BMt(){const t=this.xMt;return Kb(this.Ws,t),this.pbt.apply(this.uvt,t)}*RMt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.xMt;return Kb(this.Ws,t),yield*this.pbt.apply(this.uvt,t)}return this.tP()}$Mt(){const t=this.xMt;return Kb(this.Ws,t),this.pbt.apply(this.idt.gW().gJ(),t)}*OMt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.xMt;return Kb(this.Ws,t),yield*this.pbt.apply(this.idt.gW().gJ(),t)}return this.tP()}Lxt(){const t=this.xMt,s=this.idt.EW().RW();for(let i=0,e=s.length;i<e;++i)this.pbt.apply(s[i].gJ(),t)}*Nxt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.xMt,s=this.idt.EW().RW();for(let i=0,e=s.length;i<e;++i)yield*this.pbt.apply(s[i].gJ(),t)}else this.Lxt()}Bxt(){const t=this.xMt;Kb(this.Ws,t);const s=this.idt.EW().RW();for(let i=0,e=s.length;i<e;++i)this.pbt.apply(s[i].gJ(),t)}*$xt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.xMt;Kb(this.Ws,t);const s=this.idt.EW().RW();for(let i=0,e=s.length;i<e;++i)yield*this.pbt.apply(s[i].gJ(),t)}else this.Bxt()}Oxt(){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.EW().RW();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(n);i.apply(r.gJ(),s)}}*Fxt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.EW().RW();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(n);yield*i.apply(r.gJ(),s)}}else this.Oxt()}Dxt(){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.EW().RW();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.$vt()||(s[i]=e.Js(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.$vt()&&(s[i]=e.Js(n))}i.apply(r.gJ(),s)}}*kxt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.EW().RW();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.$vt()||(s[i]=e.Js(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.$vt()&&(s[i]=e.Js(n))}yield*i.apply(r.gJ(),s)}}else this.Dxt()}Rxt(){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt,n=e.Vxt(),r=e.EW().RW();n.jxt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].Js(e);i.apply(n.gJ(),s)}n.Hxt(i)}*Ext(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt,n=e.Vxt(),r=e.EW().RW();n.jxt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].Js(e);yield*i.apply(n.gJ(),s)}n.Hxt(i)}else this.Rxt()}Uxt(){return this.Pvt?this.Pvt.xJ().UMt()>=2?this.Pvt.TJ():this.Pvt:this.idt.wW().UMt()>=2?this.idt.dW():this.idt}Gxt(){const t=this.xMt;return Kb(this.Ws,t),this.pbt.apply(this.Uxt(),t)}*Cxt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.xMt;Kb(this.Ws,t);let s=this.pbt.apply(this.Uxt(),t);return Qb.Mo(s)&&(s=yield*s),s}return this.Gxt()}_xt(){const t=this.idt,s=t.S0(),i=t.Cvt(),e=this.Ws,n=this._Mt,r=this.xMt,h=this.pbt,o=this.Avt,a=t.EW().RW();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.$vt()||(r[t]=s.Js(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.$vt()&&(r[s]=i.Js(t))}const u=s?l.Cj().Evt(i):0;h.apply(l.Lnt()[o+u].gJ(),r)}}*Txt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.idt,s=t.S0(),i=t.Cvt(),e=this.Ws,n=this._Mt,r=this.xMt,h=this.pbt,o=this.Avt,a=t.EW().RW();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.$vt()||(r[t]=s.Js(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.$vt()&&(r[s]=i.Js(t))}const u=s?l.Cj().Evt(i):0;yield*h.apply(l.Lnt()[o+u].gJ(),r)}}else this._xt()}Ixt(){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.EW().RW(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(r);n.push(i.apply(h.gJ(),s))}return Promise.all(n)}*Pxt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.EW().RW(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(r);n.push(yield*i.apply(h.gJ(),s))}return Promise.all(n)}return this.Ixt()}Mxt(){const t=this.idt,s=t.S0(),i=t.Cvt(),e=this.Ws,n=this.xMt,r=this.pbt,h=this.Avt,o=t.EW().RW(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].Js(t);const u=s?l.Cj().Evt(i):0;a.push(r.apply(l.Lnt()[h+u].gJ(),n))}return Promise.all(a)}*xxt(){if((this.zMt()||this.Nc.Nwt())&&(yield this),this.XMt()){const t=this.idt,s=t.S0(),i=t.Cvt(),e=this.Ws,n=this.xMt,r=this.pbt,h=this.Avt,o=t.EW().RW(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].Js(t);const u=s?l.Cj().Evt(i):0;a.push(yield*r.apply(l.Lnt()[h+u].gJ(),n))}return Promise.all(a)}return this.Mxt()}async yxt(){try{await this.pbt()}catch(t){console.error(`Unhandled exception running script %c${this.Ebt.Q3().Pc()}, event ${this.Ebt.pwt()}, action ${this.Pwt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.SH&&self.SH.gbt(this),Qb.jyt.ybt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Qb.jyt.Sbt())}}*Sxt(){return(this.zMt()||this.Nc.Nwt())&&(yield this),this.yxt()}s3(){return this.TMt&&this.TMt.size?{ex:Qb.wo(this.TMt)}:null}i3(t){if(this.TMt&&(this.TMt.clear(),this.TMt=null),!t)return;const s=t.ex;s&&(this.TMt=Qb.bo(s))}}}{let lv=function(t){return t instanceof Av?Pv.uV(t):t.Vz()},uv=function(t){return lv(t).aB()},cv=function(t){return Pv.uV(t)},fv=function(t){return cv(t).aB()},dv=function(t){return t instanceof Rv?Pv.uV(t):t},pv=function(t){return t instanceof Ev?Pv.uV(t):t},mv=function(t,s,i,e){s.$j()<i.$j()?t.Set(s,i,e):t.Set(i,s,e)},gv=function(t,s,i){s.$j()<i.$j()?t.Ru(s,i):t.Ru(i,s)},yv=function(t,s){t.Eu(s)},Sv=function(t,s,i){return s.$j()<i.$j()?t.Js(s,i):t.Js(i,s)},wv=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.aB(),h=Pv.fL(),o=Pv.Mmt(),a=o.jL().Rdt(),l=o.Cj(),u=o.JMt(),c=s.EW(),f=l!==s;let d;Lv=s,kv=f&&!u,Nv=!1;let p=0,m=0,g=!1;c.pdt()?(Ov.S(r.tU()),Ov.offset(i,e),h.Jxt(r.lB(),s,Ov,Dv),d=Dv):a?Pv.zxt()&&!c.xdt().length&&c.Mdt().length?d=c.Mdt():(d=c.xdt(),Nv=!0):d=c.Mdt(),n&&(p=r.UM(),m=r.qM(),r.WH(i,e),r.NH());for(const s of d)if(h.n$(t,s)){if(g=!0,u)break;f&&Bv.add(s)}return n&&(r.BH(p,m),r.NH()),_v.bh(Dv),g},bv=function(t){const s=Pv.UL().Rdt(),i=Lv.EW(),e=i.Mdt(),n=i.xdt();i.pdt()?(i.Gdt(Bv),s&&(_v.bh(n),i.Cdt(Bv,Lv.RW()))):s?Nv?i.Idt(Bv):(i.Cdt(Bv,e),i.Gdt(Bv)):i.Gdt(Bv),Lv.nbt()},vv=function(t,s){kv&&(s&&bv(t),Bv.clear(),Lv=null,kv=!1)},Mv=function(t,s){const i=Pv.eB(s);if(!i)return!1;const e=t.EW();if(!e.pdt()&&!e.Mdt().includes(i))return!1;if(t.S0()){if(i.Cj().qxt(t))return e.Adt(i),t.nbt(),!0}else if(i.Cj()===t)return e.Adt(i),t.nbt(),!0;return!1},xv=function(t,s){const i=t.EW();if(i.pdt()){i.vdt(!1),i.ddt();const e=t.RW();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.$j()===s?i.bdt(n):i.wdt(n)}return t.nbt(),!!i.Mdt().length}{const e=i.Mdt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.$j()===s?i.bdt(r):++n}return _v.wh(e,n),t.nbt(),!!e.length}};GetInst=lv,GetWorldInfo=uv,GetInst_SDKv2=cv,GetWorldInfo_SDKv2=fv,GetObjectClass=dv,GetLayer=pv,CollMemory_Add=mv,CollMemory_Remove=gv,CollMemory_RemoveInstance=yv,CollMemory_Get=Sv,DoOverlapCondition=wv,FinishCollisionConditionPicking=bv,FinishCollisionCondition=vv,PickByUID_Normal=Mv,PickByUID_Inverted=xv;const _v=self.Cs,Tv=new _v._o,Gv={},Cv={},Iv={};let Pv=null;_v.Yxt=function(t){Pv=t};const Av=self.Gj,Rv=self.yW,Ev=self.lV;Cv.Xxt=function(t,s){return _v.compare(this.aB().UM(),t,s)},Iv.Xxt=function(t,s){return _v.compare(this.x,t,s)},Cv.Zxt=function(t,s){return _v.compare(this.aB().qM(),t,s)},Iv.Zxt=function(t,s){return _v.compare(this.y,t,s)},Cv.Kxt=function(){return this.aB().nU()},Iv.Kxt=function(){return this.eU()},Gv.Qxt=function(){const t=uv(this),s=t.HN(),i=t.tU();return i.tl()<0||i.sl()<0||i.Ka()>s.Vg()||i.Qa()>s.Kg()},Gv.t_t=function(t,s,i){const e=dv(this).EW(),n=e.RW();if(!n.length)return!1;let r=n[0],h=r.aB(),o=r,a=_v.nr(h.UM(),h.qM(),s,i);for(let e=1,l=n.length;e<l;++e){r=n[e],h=r.aB();const l=_v.nr(h.UM(),h.qM(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return e.Adt(o),!0},Cv.JM=function(t){const s=this.aB();s.UM()!==t&&(s.JM(t),s.NH())},Iv.JM=function(t){this.x=+t},Cv.YM=function(t){const s=this.aB();s.qM()!==t&&(s.YM(t),s.NH())},Iv.YM=function(t){this.y=+t},Cv.s_t=function(t,s){const i=this.aB();i.i_t(t,s)||(i.BH(t,s),i.NH())},Iv.s_t=function(t,s){this.setPosition(t,s)},Gv.e_t=function(t,s){if(!(t=dv(t)))return;const i=lv(this),e=t.PW(i);if(!e)return;const[n,r]=e.n_t(s),h=i.aB();h.UM()===n&&h.qM()===r||(h.BH(n,r),h.NH())},Gv.r_t=function(t){if(0===t)return;const s=uv(this);s.WH(s.h_t()*t,s.o_t()*t),s.NH()},Cv.a_t=function(t,s){if(0===s)return;const i=this.aB();t=_v.Qn(t),i.WH(Math.cos(t)*s,Math.sin(t)*s),i.NH()},Iv.a_t=function(t,s){0!==s&&(t=_v.Qn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},Cv.UM=function(){return this.aB().UM()},Iv.UM=function(){return this.x},Cv.qM=function(){return this.aB().qM()},Iv.qM=function(){return this.y},Gv.aN=function(){return Pv.aN(lv(this))},Cv.l_t=function(t,s){return _v.compare(this.aB().Vg(),t,s)},Iv.l_t=function(t,s){return _v.compare(this.width,t,s)},Cv.u_t=function(t,s){return _v.compare(this.aB().Kg(),t,s)},Iv.u_t=function(t,s){return _v.compare(this.height,t,s)},Cv.Yg=function(t){const s=this.aB();s.Vg()!==t&&(s.Yg(t),s.NH())},Iv.Yg=function(t){this.width=t},Cv.jg=function(t){const s=this.aB();s.Kg()!==t&&(s.jg(t),s.NH())},Iv.jg=function(t){this.height=t},Cv._A=function(t,s){const i=uv(this);i.Vg()===t&&i.Kg()===s||(i._A(t,s),i.NH())},Iv._A=function(t,s){this.zW(t,s)},Cv.Vg=function(){return this.aB().Vg()},Iv.Vg=function(){return this.width},Cv.Kg=function(){return this.aB().Kg()},Iv.Kg=function(){return this.height},Gv.c_t=function(){return uv(this).tU().Ka()},Gv.f_t=function(){return uv(this).tU().Qa()},Gv.d_t=function(){return uv(this).tU().tl()},Gv.p_t=function(){return uv(this).tU().sl()},Gv.m_t=function(){const t=uv(this).tU();return(t.Ka()+t.tl())/2},Gv.g_t=function(){const t=uv(this).tU();return(t.Qa()+t.sl())/2},Gv.y_t=function(t,s){return _v.hr(uv(this).ZW(),_v.Qn(s))<=_v.Qn(t)},Gv.S_t=function(t){return _v.lr(uv(this).ZW(),_v.Qn(t))},Gv.w_t=function(t,s){const i=_v.Qn(t),e=_v.Qn(s),n=uv(this).ZW();return _v.lr(e,i)?_v.lr(n,i)&&!_v.lr(n,e):!(!_v.lr(n,i)&&_v.lr(n,e))},Cv.XW=function(t){const s=this.aB(),i=_v.Kn(_v.Qn(t));isNaN(i)||s.ZW()===i||(s.XW(i),s.NH())},Iv.XW=function(t){this.KH=t},Gv.b_t=function(t){if(isNaN(t)||0===t)return;const s=uv(this);s.XW(s.ZW()+_v.Qn(t)),s.NH()},Gv.v_t=function(t){if(isNaN(t)||0===t)return;const s=uv(this);s.XW(s.ZW()-_v.Qn(t)),s.NH()},Gv.M_t=function(t,s){const i=uv(this),e=i.ZW(),n=_v.ar(e,_v.Qn(s),_v.Qn(t));isNaN(n)||e===n||(i.XW(n),i.NH())},Gv.x_t=function(t,s,i){const e=uv(this),n=e.ZW(),r=s-e.UM(),h=i-e.qM(),o=Math.atan2(h,r),a=_v.ar(n,o,_v.Qn(t));isNaN(a)||n===a||(e.XW(a),e.NH())},Gv.__t=function(t,s){const i=uv(this),e=i.ZW(),n=t-i.UM(),r=s-i.qM(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.XW(h),i.NH())},Cv.ZW=function(){return _v.tr(this.aB().ZW())},Iv.ZW=function(){return this.KH},Gv.T_t=function(t,s){return _v.compare(_v.Tr(100*uv(this).sO(),6),t,s)},Cv.DV=function(){return this.aB().DV()},Iv.DV=function(){return this.isVisible},Gv.OV=function(t){const s=uv(this);t=2===t?!s.DV():0!==t,s.DV()!==t&&(s.OV(t),Pv.mB())},Gv.eO=function(t){const s=_v.Zn(t/100,0,1),i=uv(this);if(i.qU()){if(i.uht().G_t()===s)return}else if(i.sO()===s)return;i.eO(s),Pv.mB()},Gv.C_t=function(t){Tv.Qo(t);const s=uv(this);s.hU().Uo(Tv)||(s.oU(Tv),Pv.mB())},Gv.rO=function(){const t=uv(this).hU();return _v.Ir(t.No(),t.Bo(),t.$o(),t.Wo())},Gv.sO=function(){return _v.Tr(100*uv(this).sO(),6)},Gv.I_t=function(t){return!!(t=pv(t))&&uv(this).lB()===t},Gv.P_t=function(t){const s=dv(this).EW(),i=s.RW();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.aB(),h=e.aB(),o=r.lB().nL(),a=h.lB().nL();0===t?(o>a||o===a&&r.uB()>h.uB())&&(e=n):(o<a||o===a&&r.uB()<h.uB())&&(e=n)}return s.Adt(e),!0},Cv.A_t=function(t,s,i){const e=this.aB(),n=0===t?e.XM():e.ZH();return _v.compare(n,s,i)},Iv.A_t=function(t,s,i){const e=0===t?this.ij:this.XH;return _v.compare(e,s,i)},Cv.R_t=function(){this.aB().lU()},Iv.R_t=function(){this.aU()},Cv.E_t=function(){this.aB().cU()},Iv.E_t=function(){this.uU()},Gv.O_t=function(t){(t=pv(t))&&uv(this).dU(t)},Gv.F_t=function(t,s){const i=0===t;if(!(s=dv(s)))return;const e=lv(this),n=s.D_t(e);n&&e.aB().mU(n,i)},Cv.ZM=function(t){const s=this.aB();s.XM()!==t&&(s.ZM(t),Pv.mB())},Iv.ZM=function(t){this.ij=t},Gv.k_t=function(){return uv(this).lB().nL()},Gv.L_t=function(){return uv(this).lB().Pc()},Cv.N_t=function(){return this.aB().uB()},Iv.N_t=function(){return this.zIndex},Cv.B_t=function(){return this.aB().XM()},Iv.B_t=function(){return this.ij},Cv.$_t=function(){return this.aB().ZH()},Iv.$_t=function(){return this.XH},Gv.W_t=function(t){const s=lv(this),i=s.Cj().HW().$nt(t);if(!i)return;const e=i.nL();return s.aB().kH().EJ(e)},Gv.V_t=function(t,s){const i=lv(this),e=i.Cj().HW().$nt(s);if(!e)return;const n=e.nL(),r=1===t,h=i.aB().kH();h.EJ(n)!==r&&(h.OJ(n,r),h.FJ(),Pv.mB())},Gv.j_t=function(t,s,i){const e=lv(this),n=e.Cj().HW().$nt(t);if(!n)return;s=Math.floor(s);const r=n.EG().FG(s);if(!r)return;"color"===r?(Tv.Qo(i),i=Tv):"percent"===r&&(i/=100);const h=n.nL(),o=e.aB().kH();o.kJ(h,s,i)&&o.EJ(h)&&Pv.mB()};const Ov=_v.Un(_v.Rect),Fv=[],Dv=[];let kv=!1,Lv=null,Nv=!1;const Bv=new Set;function*$v(t){if(!t)return!1;const s=this.LB(),i=s.fL(),e=s.BL(),n=e.KL(),r=e.Mmt(),h=r.Cj(),o=r.ZMt(),a=r.KMt(),l=n.mY(),u=s.Mtt(),c=u-1,f=l.UL(),d=n.gY(f);let p=o.get("collmemory");p||(p=_v.Un(_v.Cu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.Sf().addEventListener("instancedestroy",(t=>yv(p,t.CJ))));const m=h.EW(),g=t.EW(),y=m.RW();let S=null;for(let s=0;s<y.length;++s){const n=y[s];g.pdt()?(i.Jxt(n.aB().lB(),t,n.aB().tU(),Fv),S=Fv,i.H_t(n,t,S)):S=g.RW();for(let s=0;s<S.length;++s){const r=S[s];if(i.n$(n,r)||i.U_t(n,r)){const s=Sv(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(mv(p,n,r,u),a){const s=f.pY();e.vY(s);const i=h.EW(),o=t.EW();if(i.vdt(!1),o.vdt(!1),h===t){const t=i.Mdt();_v.bh(t),t.push(n),t.push(r),h.nbt()}else{const s=i.Mdt(),e=o.Mdt();_v.bh(s),_v.bh(e),s.push(n),e.push(r),h.nbt(),t.nbt()}yield*f.Ywt(l,d),e.xY(s)}}else gv(p,n,r)}_v.bh(Fv)}return n.CY(),!1}Gv.J_t=function(t){const s=dv(this);t=dv(t);const i=s.LB();if(i.z_t())return $v.call(s,t);if(!t)return!1;const e=i.fL(),n=i.BL(),r=n.KL(),h=n.Mmt(),o=h.Cj(),a=h.ZMt(),l=h.KMt(),u=r.mY(),c=i.Mtt(),f=c-1,d=u.UL(),p=r.gY(d);let m=a.get("collmemory");m||(m=_v.Un(_v.Cu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.Sf().addEventListener("instancedestroy",(t=>yv(m,t.CJ))));const g=o.EW(),y=t.EW(),S=g.RW();let w=null;for(let s=0;s<S.length;++s){const i=S[s];y.pdt()?(e.Jxt(i.aB().lB(),t,i.aB().tU(),Fv),w=Fv,e.H_t(i,t,w)):w=y.RW();for(let s=0;s<w.length;++s){const r=w[s];if(e.n$(i,r)||e.U_t(i,r)){const s=Sv(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(mv(m,i,r,c),a){const s=d.pY();n.vY(s);const e=o.EW(),h=t.EW();if(e.vdt(!1),h.vdt(!1),o===t){const t=e.Mdt();_v.bh(t),t.push(i),t.push(r),o.nbt()}else{const s=e.Mdt(),n=h.Mdt();_v.bh(s),_v.bh(n),s.push(i),n.push(r),o.nbt(),t.nbt()}d.MY(u,p),n.xY(s)}}else gv(m,i,r)}_v.bh(Fv)}return r.CY(),!1},Gv.q_t=function(t){return t=dv(t),wv(lv(this),t,0,0)},Gv.Y_t=function(t,s,i){return t=dv(t),wv(lv(this),t,s,i)},Gv.X_t=function(){return!0},Gv.OU=function(){return uv(this).OU()},Gv.r3=function(){return uv(this).r3()},Gv.Z_t=function(t,s){const i=dv(this);t=dv(t);const e=i.LB(),n=this.EW().RW();if(0===n.length)return!1;const r=t.EW();let h=r.RW();if(r.pdt()){const s=[...e.K_t(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.pdt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.xU())s.Q_t(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.bU(),null===i)continue}else i=e.MU();i.Q_t(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.Gdt(a),t.nbt(),!0)},Gv.tTt=function(t,s){const i=dv(this);t=dv(t);const e=i.LB(),n=i.EW().RW();if(0===n.length)return!1;const r=t.EW();let h=r.RW();if(r.pdt()){const s=[...e.K_t(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.pdt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.r3()||!e.Q_t(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.IU())2===s&&i.r3()||i.Q_t(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.Gdt(a),t.nbt(),!0)},Gv.sTt=function(t,s,i){const e=dv(this);t=dv(t);const n=e.LB(),r=e.EW().RW();if(0===r.length)return!1;const h=t.EW();let o=h.RW();if(h.pdt()){const s=[...n.K_t(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.pdt()?null:new Set(o),l=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.CU(i);null!==s&&s.Q_t(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.Q_t(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.Tdt(l),t.nbt(),!0)},Gv.iTt=function(t,s,i){const e=lv(this);switch(t){case 0:default:return _v.compare(e.TU(),s,i);case 1:return _v.compare(e.eTt(),s,i)}},Gv.AU=function(t,s,i,e,n,r,h,o,a,l){t=dv(t);const u=lv(this),c=Pv._mt().Cj();for(const f of t.nTt(u,c)){if(!f.wW().rW())return;u.AU(f,{DU:s,LU:i,BU:e,WU:n,jU:r,zU:h,UU:o,YU:a,ZU:l})}},Gv.RU=function(t){t=dv(t);const s=lv(this),i=Pv._mt().Cj();for(const e of t.nTt(s,i))s.RU(e)},Gv.rTt=function(){const t=lv(this);t.OU()&&t.bU().RU(t)},Gv.hTt=function(){const t=lv(this).bU();return t?t.$j():-1},Gv.oTt=function(){return lv(this).TU()},Gv.aTt=function(){return lv(this).eTt()},Gv.lTt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=uv(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.iJ(),i.NH()):i.tJ(t,s)},Gv.nJ=function(t,s,i,e,n,r,h,o){const a=uv(this);a.nJ(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,ij:r,aJ:h,lJ:o})&&a.NH()},Gv.uTt=function(){const t=uv(this);return t.hJ()?t.oJ().Cx():0},Gv.cTt=function(){const t=uv(this);return t.hJ()?t.oJ().Ix():0},Gv.fTt=function(t){const s=uv(this);t=2===t?!s.DV():0!==t,s.DV()!==t&&s.OV(t)},Gv.bJ=function(t,s){this instanceof self.Gj?this.Nq(t,s):this.bJ(t,s)},Gv.dTt=function(t,s){this instanceof self.Gj?this.$q(t,""+s):this.dTt(t,""+s)},Gv.pTt=function(t){this instanceof self.Gj?this.Wq(t):this.pTt(t)},Gv.mTt=function(){this instanceof self.Gj?this.Dq():this.yJ()},Gv.gTt=function(){this instanceof self.Gj?this.kq():this.SJ()},Gv.yTt=function(){return this instanceof self.Gj?this.Lq():this.yTt()},Gv.STt=function(t){this instanceof self.Gj?this.wTt(0!==t):this.bTt(0!==t)},Gv.vTt=function(){return this instanceof self.Gj?this.xbt():this.MTt()},Cv.xTt=function(t,s,i){return _v.compare(this.Vz().Qrt(t),s,i)},Iv.xTt=function(t,s,i){return _v.compare(cv(this).Qrt(t),s,i)},Cv._Tt=function(t){return!!this.Vz().Qrt(t)},Iv._Tt=function(t){return!!cv(this).Qrt(t)},Gv.TTt=function(t,s){const i=dv(this),e=i.EW(),n=e.RW();if(!n.length)return!1;const r=i.S0();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],l=r?a.Cj().Gvt(i.Cvt()):0,u=a.Qrt(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.Adt(h),!0},Gv.GTt=function(t){const s=dv(this);return s.LB().Mmt().JMt()?xv(s,t):Mv(s,t)},Gv.bz=function(t){const s=new Set(_v.kh(t)),i=lv(this).Yj();return s.isSubsetOf(i)},Gv.CTt=function(){return lv(this).ITt()},Gv.PTt=function(){return lv(this).Yj().size},Gv.ATt=function(t){return lv(this).RTt(t)},Gv.ETt=function(t,s){const i=_v.kh(s);if(0===i.length)return;const e=lv(this),n=new Set(e.Yj());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)n.delete(t);e.Zj(n)},Gv.OTt=function(){Pv.Oj(lv(this))},Gv.FTt=function(){return!0},Gv.DTt=function(){return!0},Cv.kTt=function(t,s){this.Vz().tht(t,s)},Iv.kTt=function(t,s){cv(this).tht(t,s)},Cv.LTt=function(t,s){const i=this.Vz(),e=i.Qrt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.tht(t,e+s)},Iv.LTt=function(t,s){const i=cv(this),e=i.Qrt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.tht(t,e+s)},Cv.NTt=function(t,s){const i=this.Vz(),e=i.Qrt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.tht(t,e-s))},Iv.NTt=function(t,s){const i=cv(this),e=i.Qrt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.tht(t,e-s))},Cv.BTt=function(t,s){this.Vz().tht(t,s?1:0)},Iv.BTt=function(t,s){cv(this).tht(t,s?1:0)},Cv.$Tt=function(t){const s=this.Vz();s.tht(t,0===s.Qrt(t)?1:0)},Iv.$Tt=function(t){const s=cv(this);s.tht(t,0===s.Qrt(t)?1:0)},Gv.WTt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=lv(this),e="state";Pv.VTt(),i.p6(e),i.ox(s,e),Pv.jTt(e,{HTt:!0})},Gv.UTt=function(){return JSON.stringify(lv(this).hx("state"))},Gv.JTt=function(){return lv(this).Cj().Pc()},Gv.zTt=function(){const t=Pv.vmt().opt();let s=t.FW();for(const i of Pv.K_t(t))++s;return s},Gv.qTt=function(){return Pv.vmt().opt().EW().RW().length},Cv.Vj=function(){return this.Vz().Vj()},Iv.Vj=function(){return cv(this).Vj()},Cv.$j=function(){return this.Vz().$j()},Iv.$j=function(){return cv(this).$j()},Gv.zgt=function(t){const s=lv(this);return t.toLowerCase()===Pv.BL().Zgt(s)},Gv.Qj=function(t){const s=lv(this);Pv.BL().Qj(s,t)},Gv.YTt=function(t){const s=dv(this);return Pv.BL().xgt().XTt(s.EW().RW(),t),!0},Gv.ZTt=function(){return lv(this).Hj()},_v.KTt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.CB,S=s.hrt,w=s.ort,b=Object.assign({},Gv,i>=2?Iv:Cv);n&&(y.Xxt=b.Xxt,y.Zxt=b.Zxt,y.Kxt=b.Kxt,y.Qxt=b.Qxt,y.t_t=b.t_t,S.JM=b.JM,S.YM=b.YM,S.s_t=b.s_t,S.e_t=b.e_t,S.r_t=b.r_t,S.a_t=b.a_t,w.QTt=b.UM,w.tGt=b.qM,w.oN=b.aN),r&&(y.l_t=b.l_t,y.u_t=b.u_t,S.Yg=b.Yg,S.jg=b.jg,S._A=b._A,w.sGt=b.Vg,w.iGt=b.Kg,w.eGt=b.c_t,w.nGt=b.f_t,w.rGt=b.d_t,w.hGt=b.p_t,w.oGt=b.m_t,w.aGt=b.g_t),h&&(y.lGt=b.y_t,y.uGt=b.S_t,y.w_t=b.w_t,S.XW=b.XW,S.b_t=b.b_t,S.v_t=b.v_t,S.M_t=b.M_t,S.x_t=b.x_t,S.__t=b.__t,w.cGt=b.ZW),o&&(y.DV=b.DV,y.T_t=b.T_t,S.OV=b.OV,S.eO=b.eO,S.C_t=b.C_t,w.Opacity=b.sO,w.ColorValue=b.rO),a&&(y.I_t=b.I_t,y.P_t=b.P_t,y.A_t=b.A_t,S.R_t=b.R_t,S.E_t=b.E_t,S.O_t=b.O_t,S.F_t=b.F_t,S.ZM=b.ZM,w.k_t=b.k_t,w.L_t=b.L_t,w.N_t=b.N_t,w.B_t=b.B_t,w.$_t=b.$_t),l&&(y.W_t=b.W_t,S.V_t=b.V_t,S.j_t=b.j_t),d&&(y.X_t=b.X_t,y.OU=b.OU,y.r3=b.r3,y.Z_t=b.Z_t,y.tTt=b.tTt,y.sTt=b.sTt,y.iTt=b.iTt,S.AU=b.AU,S.RU=b.RU,S.rTt=b.rTt,w.hTt=b.hTt,w.oTt=b.oTt,w.aTt=b.aTt),p&&(S.lTt=b.lTt,S.nJ=b.nJ,w.uTt=b.uTt,w.cTt=b.cTt),u&&(y.DV=b.DV,S.OV=b.fTt,S.fGt=b.bJ,S.dGt=b.dTt,S.pGt=b.pTt),c&&(y.mGt=b.yTt,S.gGt=b.mTt,S.yGt=b.gTt),f&&(y.Gu=b.vTt,S.SGt=b.STt),m&&(y.J_t=b.J_t,y.q_t=b.q_t,y.Y_t=b.Y_t,s.wGt=vv),e||(y.xTt=b.xTt,y._Tt=b._Tt,y.TTt=b.TTt,y.GTt=b.GTt,y.bz=b.bz,S.kTt=b.kTt,S.LTt=b.LTt,S.NTt=b.NTt,S.BTt=b.BTt,S.$Tt=b.$Tt,S.ETt=b.ETt,y.FTt=b.FTt,y.DTt=b.DTt,S.OTt=b.OTt,S.WTt||(S.WTt=b.WTt),w.UTt||(w.UTt=b.UTt),w.zTt=b.zTt,w.qTt=b.qTt,w.bGt=b.Vj,w.vGt=b.$j,w.JTt=b.JTt,w.CTt=b.CTt,w.PTt=b.PTt,w.ATt=b.ATt,y.zgt=b.zgt,S.Qj=b.Qj,S.YTt=b.YTt),g&&(w.ZTt=b.ZTt)}}{const Wv=self.Cs;Wv._gt=class extends Wv.jn{constructor(t){super(),this.Odt=t,this.Jc="",this.GD=-1,this.MGt="",this.xGt=!1,this._Gt=null,this.Vdt=0,this.gSt=[],this.qdt=null,this.TGt=new Map,this.GGt=null,this.CGt=null,this.IGt=-1,this.Mbt=null,this.PGt=null,this.AGt=!1}Jn(){this.Jc="",this.GD=-1,this.MGt="",this._Gt=null,this.CGt=null,this.Mbt=null,this.PGt=null,this.IGt=-1,Wv.bh(this.gSt),this.qdt&&(this.qdt.clear(),this.qdt=null);for(const t of this.TGt.values())t.Jn();this.TGt.clear(),this.GGt=null}HM(){const t=this.Odt,s=t.LB().y0(),i=t.vmt();this._Gt=i.UL(),this.Vdt=i.tpt()+1;const e=t.myt(this._Gt);e&&(this.CGt=e,this.Mbt=e.Bbt(),this.PGt=e.Nbt().map((t=>t.Eet())),e.Vwt()&&(this.IGt=e.jbt()));for(const t of s){const s=t.EW();s.pdt()&&!this._Gt.fwt(t)||(this.gSt.push(t),this.TGt.set(t,Wv.Un(Wv.RGt,s)))}const n=t.JL();this.qdt=n.size>0?n:null}EGt(t){this.Jc="timer",this.HM(),this.GD=this.Odt.LB().fN()+t}OGt(t){this.Jc="walltimer",this.HM(),this.GD=this.Odt.LB().pN()+t}FGt(t){this.Jc="signal",this.HM(),this.MGt=t.toLowerCase()}XTt(t,s){this.Jc="instance-signals",this.HM(),this.MGt=s.toLowerCase(),this.GGt=new Set(t)}DGt(t){this.Jc="promise",this.HM(),t.then((()=>this.jgt())).catch((t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.jgt()}))}kGt(){return"timer"===this.Jc}LGt(){return"walltimer"===this.Jc}Wgt(){return"signal"===this.Jc}Ygt(){return"instance-signals"===this.Jc}cyt(){return"promise"===this.Jc}Vgt(){return this.MGt}NGt(){return this.xGt}jgt(){this.xGt=!0}Xgt(t){this.GGt.delete(t),0===this.GGt.size&&this.jgt()}Cgt(){return this.kGt()?this.GD<=this.Odt.LB().fN():this.LGt()?this.GD<=this.Odt.LB().pN():this.NGt()}BGt(t){t.Ydt(this._Gt,this.Vdt);for(const[t,s]of this.TGt.entries()){const i=t.EW();s.Ydt(i)}this.qdt&&t.dpt([...this.qdt]);const s=this.CGt;s&&(s.Qwt(this.Mbt),s.Nbt().map(((t,s)=>t.pnt(this.PGt[s]))),s.Vwt()&&s.Hbt(this.IGt))}Igt(t){this.BGt(t),this._Gt.jwt(t),this.CGt&&this.CGt.Vwt()&&this.CGt.lbt(this.IGt),this.Odt.wgt(this.gSt),this.AGt=!0}async Egt(t){this.BGt(t);for(const s of this._Gt.Hwt(t))await this.Odt.LB().igt(s);this.CGt&&this.CGt.Vwt()&&this.CGt.lbt(this.IGt),this.Odt.wgt(this.gSt),this.AGt=!0}Pgt(){return this.AGt}ldt(t){for(const s of this.TGt.values())s.ldt(t);if("instance-signals"===this.Jc){for(const s of t)this.GGt.delete(s);0===this.GGt.size&&this.jgt()}}s3(){const t={},s={wt:this.Jc,t:this.GD,st:this.MGt,s:this.xGt,ev:this._Gt.G0(),sm:this.gSt.map((t=>t.G0())),dsm:this.qdt?[...this.qdt].map((t=>t.G0())):null,sols:t};this._Gt.Awt(this.Vdt)&&(s.act=this._Gt.Tmt(this.Vdt).G0());for(const[s,i]of this.TGt)t[s.G0().toString()]=i.s3();return"instance-signals"===this.Jc&&(s.pi=[...this.GGt].map((t=>t.$j()))),s}static fyt(t,s){const i=t.LB(),e=t.Fmt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.kmt(s.act);if(!i)return null;n=i.nL()}const r=Wv.Un(Wv._gt,t);r.GD=s.t,s.hasOwnProperty("wt")?r.Jc=s.wt:r.Jc=-1===r.GD?"signal":"timer",r.MGt=s.st,r.xGt=s.s,r._Gt=e,r.Vdt=n;for(const t of s.sm){const s=i.dY(t);s&&r.gSt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.dY(t);s&&(r.qdt||(r.qdt=new Set),r.qdt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.dY(s);if(!h)continue;const o=Wv.Un(Wv.RGt,null);o.i3(t,n),r.TGt.set(h,o)}if("instance-signals"===r.Jc){r.GGt=new Set;for(const t of s.pi){const s=i.eB(t);s&&r.GGt.add(s)}}return r}}}{const Vv=self.Cs;Vv.RGt=class extends Vv.jn{constructor(t){super(),this.idt=null,this.$Gt=!0,this.pK=[],t&&(this.idt=t.Cj(),this.$Gt=t.pdt(),Vv.Th(this.pK,t.Mdt()))}Jn(){this.idt=null,Vv.bh(this.pK)}Ydt(t){t.vdt(this.$Gt),Vv.Th(t.Mdt(),this.pK)}ldt(t){Vv.Ah(this.pK,t)}s3(){return{sa:this.$Gt,insts:this.pK.map((t=>t.$j()))}}i3(t,s){const i=t.LB();this.$Gt=!!s.sa,Vv.bh(this.pK);for(const t of s.insts){const s=i.eB(t);s&&this.pK.push(s)}}}}{let jv=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};GetNextParamMap=jv;const Hv=self.Cs;Hv.WGt=class extends Hv.jn{constructor(t){super(),this.Nc=t.runtime,this.$c=t.id,this.Yn=t.name??"",this.VGt=!!t.J$,this.jGt=!!t.HGt,this.UGt=!!t.K$,this.JGt=!!t.zGt,this.qGt=!!t.tW,this.YGt=!!t.XGt,this.ZGt=!!t.hW,this.KGt=!!t.X$,this.QGt=!!t.iW,this.tCt=t.sCt,this.iCt=null,this.eCt=new Map,this.nCt=new Map,this.rCt=new Map,this.hCt=new Map,this.oCt=t.aCt,this.lCt=null}Jn(){this.Nc=null}LB(){return this.Nc}U$(){return this.$c}Pc(){return this.Yn}uCt(){}qgt(){return this.UMt()>=2?this.lCt.constructor:this.constructor}UMt(){return this.tCt}cCt(t=!1){let s=this.oCt;return t&&"function"!=typeof s&&this.UMt()>=2&&(s=globalThis.Xz),s}z$(){return this.VGt}Y$(){return this.jGt}Z$(){return this.KGt}eW(){return this.QGt}Q$(){return this.UGt}wM(){return this.JGt}sW(){return this.qGt}rW(){return this.YGt}oW(){return this.ZGt}pvt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.eCt.get(t);return i||(i=t.bind(s),this.eCt.set(t,i),i)}WMt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=jv(this.nCt,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}VMt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=jv(this.rCt,t),r=jv(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}jMt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=jv(this.hCt,t),h=jv(r,i),o=jv(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}fCt(t){if(!this.z$())throw new Error("must be single-global plugin");this.iCt=t}pW(){if(!this.z$())throw new Error("must be single-global plugin");return this.iCt}gW(){if(!this.z$())throw new Error("must be single-global plugin");return this.iCt.gW()}dCt(){const t=this.UMt();Hv.j$.pCt(this,t);const s=this.cCt(!0);if(s){if(this.lCt=new s,!(this.lCt instanceof self.W$))throw new TypeError("plugin class must derive from IPlugin")}else this.lCt=new self.W$;Hv.j$.mCt(t)}cW(){return this.lCt}}}{const Uv=self.Cs;Uv.gCt=class extends Uv.WGt{constructor(t,s){super(t),this.yCt=s,this.SCt=0,this.wCt=new Map,this.bCt("elem-focused",(t=>t.vCt())),this.bCt("elem-blurred",(t=>{t&&t.MCt()}))}Jn(){super.Jn()}xCt(t){const s=this.SCt++;return this.wCt.set(s,t),s}_Ct(t){this.wCt.delete(t)}bCt(t,s){this.Nc.fH(this.yCt,t,(t=>{const i=this.wCt.get(t.elementId);s(i,t)}))}}}{const Jv=self.Cs;Jv.TCt=class extends Jv.jn{constructor(t){super(),this.idt=t,this.Nc=t.LB(),this.GCt=t.wW()}Jn(){this.idt=null,this.Nc=null,this.GCt=null}Cj(){return this.idt}LB(){return this.Nc}wW(){return this.GCt}sz(){return this.idt.sz()}uCt(){}nxt(t){}jxt(t){}Hxt(t){}m5(t){}v5(){}S5(){}j5(t){}CCt(){}cCt(){return null}ICt(t,s,i){const e=Jv.Un(Jv.Event,t,s);e.PCt=this,i&&Object.assign(e,i),this.Cj().x4(e)}}}{const zv=self.Cs;zv.ACt=class extends zv.jn{constructor(t,s){super(),this.di=t,this.yCt=s,this.RCt=null,this.Nc=t.LB(),this.idt=this.di.Cj(),this.ECt=this.idt.Vxt(),this.e6=null,this.r6=null,this.vH=!1,this.xH=!1,this.Xf=null,this.YP=!1}Jn(){this.YP=!0,this.OCt(),this.FCt(),this.e6=null,this.r6=null,this.Xf&&(this.Xf.Jn(),this.Xf=null),this.di=null,this.Nc=null,this.idt=null,this.ECt=null}zn(){return this.YP}Vz(){return this.di}LB(){return this.Nc}Cj(){return this.idt}wW(){return this.ECt.wW()}Vxt(){return this.ECt}DCt(){return this.di.nB()}lH(t){return this.Nc.lH(t,this.di,null)}kCt(t){return this.Nc.kCt(t,this.di,null)}TB(t){return this.Nc.TB(t,this.di,null)}LCt(t,s){return this.Nc.LCt(t,this.di,s)}NCt(t,s){return this.Nc.NCt(t,this.di,s)}BCt(t){return this.Nc.BCt(t)}$Ct(t,s){this.Nc.fH(this.yCt,t,s)}WCt(t){for(const[s,i]of t)this.$Ct(s,i)}VCt(t,s){this.Nc.Wc(this.yCt,t,s)}jCt(t,s){return this.Nc.yB(this.yCt,t,s)}HCt(t,s){if(!this.Nc.xL())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.yCt,handler:t,data:s,responseId:null});this.VCt(t,s)}UCt(t){if(!t)throw new Error("cannot set empty component id");this.RCt=t}JCt(){if(!this.RCt)throw new Error("wrapper extension component id not set");return this.Nc.IH(this.RCt)}AH(t,s){if(!this.RCt)throw new Error("wrapper extension component id not set");this.Nc.AH(this.RCt,t,s)}zCt(t){for(const[s,i]of t)this.AH(s,i)}eY(t,s){if(!this.RCt)throw new Error("wrapper extension component id not set");this.Nc.eY(this.RCt,t,s)}nY(t,s){if(!this.RCt)throw new Error("wrapper extension component id not set");return this.Nc.nY(this.RCt,t,s)}d8(){}qCt(){}YCt(){if(!this.vH){if(!this.e6)if(this.Nc.yH()){const t=globalThis.SH,s=this.wW();this.e6=()=>{const i=performance.now();this.d8(),t.bH(s,performance.now()-i)}}else this.e6=()=>this.d8();this.Nc.Sf().addEventListener("tick",this.e6),this.vH=!0}}OCt(){this.vH&&(this.Nc.Sf().removeEventListener("tick",this.e6),this.vH=!1)}XCt(){return this.vH}ZCt(){if(!this.xH){if(!this.r6)if(this.Nc.yH()){const t=globalThis.SH,s=this.wW();this.r6=()=>{const i=performance.now();this.qCt(),t.bH(s,performance.now()-i)}}else this.r6=()=>this.qCt();this.Nc.Sf().addEventListener("tick2",this.r6),this.xH=!0}}FCt(){this.xH&&(this.Nc.Sf().removeEventListener("tick2",this.r6),this.xH=!1)}KCt(){return this.xH}QCt(){return[]}hx(){return null}ox(t){}Hrt(t){}Xrt(t,s){}Vht(t,s,i){if(0===s)return;const e=this.Hrt(t);if("number"!=typeof e)throw new Error("expected number");this.Xrt(t,e+s,i)}tIt(t,s,i,e){}sIt(t,...s){t.call(this,...s)}iIt(t,...s){return t.call(this,...s)}cCt(){return null}ICt(t,s,i){if(!this.di.eIt())return;const e=this.DCt(),n=zv.Un(zv.Event,t,s);n.CJ=e,i&&Object.assign(n,i),e.dispatchEvent(n)}wM(){return!1}}}{const qv=self.Cs;qv.nIt=class extends qv.ACt{constructor(t,s){super(t,s),this.Est=t.aB(),this.rIt=null,this.hIt=null}Jn(){if(this.rIt){const t=this.Nc.Sf();t.removeEventListener("renderercontextlost",this.rIt),t.removeEventListener("renderercontextrestored",this.hIt),this.rIt=null,this.hIt=null}this.Est=null,super.Jn()}oIt(){this.aIt()}lIt(){}uIt(){}aIt(){if(this.rIt)return;this.rIt=()=>this.hK(),this.hIt=()=>this.cIt();const t=this.Nc.Sf();t.addEventListener("renderercontextlost",this.rIt),t.addEventListener("renderercontextrestored",this.hIt)}hK(){this.lIt()}cIt(){this.uIt()}aB(){return this.Est}vit(){return!1}bit(){if(!this.vit())throw new Error("original size not known");const t=this.fIt();if(t)return t.Vg()}xit(){if(!this.vit())throw new Error("original size not known");const t=this.fIt();if(t)return t.Kg()}fIt(){return null}dIt(){const t=this.fIt();if(t){const s=t.fT();if(s)return[s.Vg(),s.Kg()]}return[100,100]}pIt(){const t=this.fIt();return t?t.sR():null}mIt(){const t=this.fIt();return t?t.gIt():null}yIt(){const t=this.fIt();return!!t&&t.SIt()}n_t(t){const s=this.di.aB();return[s.UM(),s.qM(),s.ZH()]}CCt(t,s,i){}wIt(t,s){}R2(){return!0}}}{const Yv=self.Cs,Xv=Yv.Un(Yv.Rect);Yv.bIt=class extends Yv.nIt{constructor(t,s){super(t,s),this.vIt=this.wW().xCt(this),this.MIt=!0,this.xIt=!1,this._It=!1,this.TIt=-.2,this.GIt=Yv.Un(Yv.Rect,0,0,-1,-1);const i=this.Nc.xB();this.CIt=i.wq(),this.IIt=i.bq(),this.PIt=-1,this.AIt=-1,this.RIt=!1,this.YCt()}Jn(){this.wW()._Ct(this.vIt),this.EIt("destroy"),this.vIt=-1,super.Jn()}mJ(){if(this.Nc.xL())throw new Error("not valid in worker mode");return this.OIt("get-element")}EIt(t,s){s||(s={}),s.elementId=this.vIt,this.VCt(t,s)}OIt(t,s){return s||(s={}),s.elementId=this.vIt,this.HCt(t,s)}FIt(t,s){return s||(s={}),s.elementId=this.vIt,this.jCt(t,s)}DIt(t){t||(t={});const s=this.aB();t.elementId=this.vIt,t.isVisible=s.DV(),t.htmlIndex=s.lB().Gq(),t.htmlZIndex=s.Cq(),Object.assign(t,this.kIt()),this.MIt=!!t.isVisible,this.HCt("create",t),this.LIt(!0)}fTt(t){t=!!t,this.MIt!==t&&(this.MIt=t,this.EIt("set-visible",{isVisible:t}))}d8(){this.LIt(!1)}NIt(){const t=this.Nc.xB().Eq();return"Android"===Yv.Ks.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}LIt(t){if(this.Vz().Oq())return;const s=this.aB(),i=s.lB(),e=s.tU();let[n,r]=i.wj(e.Ka(),e.Qa()),[h,o]=i.wj(e.tl(),e.sl());const a=this.Nc.xB(),l=a.R$(),u=a.O$();if(!s.DV()||!i.DV())return void this.fTt(!1);if(!this.NIt()&&(h<=0||o<=0||n>=l||r>=u))return void this.fTt(!1);Xv.set(n,r,h,o);const c=a.wq(),f=a.bq(),d=i.Gq(),p=s.Cq();if(!t&&Xv.equals(this.GIt)&&this.CIt===c&&this.IIt===f&&this.PIt===d&&this.AIt===p)return void this.fTt(!0);this.GIt.S(Xv),this.CIt=c,this.IIt=f,this.PIt=d,this.AIt=p,this.fTt(!0);let m=null;this._It&&(m=i.Fq()+this.TIt),this.EIt("update-position",{left:Math.round(this.GIt.Ka()),top:Math.round(this.GIt.Qa()),width:Math.round(this.GIt.width()),height:Math.round(this.GIt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}yJ(){this.OIt("focus",{focus:!0})}SJ(){this.OIt("focus",{focus:!1})}vCt(){this.xIt=!0}MCt(){this.xIt=!1}yTt(){return this.xIt}bJ(t,s){this.EIt("set-css-style",{prop:Yv.vo(t),val:s})}dTt(t,s){this.EIt("set-attribute",{name:t,val:s})}pTt(t){this.EIt("remove-attribute",{name:t})}BIt(){this.RIt||(this.RIt=!0,Promise.resolve().then((()=>{this.RIt=!1,this.EIt("update-state",this.kIt())})))}kIt(){}$It(){return this.vIt}}}{const Zv=self.Cs,Kv=self.AJ;Zv.WIt=class extends Zv.jn{constructor(t){super(),this.Nc=t.runtime,this.$c=t.id,this.Yn=t.name??"",this.VIt=Zv.Un(Zv.Du),this.jIt=Zv.Un(Zv.Du),this.tCt=t.sCt,this.oCt=t.aCt,this.HIt=null}Jn(){this.jIt.Jn(),this.VIt.Jn(),this.Nc=null}LB(){return this.Nc}U$(){return this.$c}Pc(){return this.Yn}uCt(){}UMt(){return this.tCt}cCt(t=!1){let s=this.oCt;return t&&"function"!=typeof s&&this.UMt()>=2&&(s=globalThis.Hq),s}UIt(t){this.VIt.Bu(t)}B6(){return this.VIt.$u()}r0(t){this.jIt.Bu(t)}a0(t){this.jIt.Ru(t)}RW(){return this.jIt.$u()}dCt(){const t=this.UMt();Zv.j$.pCt(this,t);const s=this.cCt(!0);if(s){if(this.HIt=new s,!(this.HIt instanceof Kv))throw new TypeError("behavior class must derive from IBehavior")}else this.HIt=new Kv;Zv.j$.mCt(t)}MJ(){return this.HIt}}}{const Qv=self.Cs;Qv.JIt=class extends Qv.jn{constructor(t){super(),this.Nc=t.LB(),this.Pvt=t,this.idt=t.Cj(),this.zIt=t.xJ(),this.zIt.UIt(this.idt)}Jn(){this.Nc=null,this.Pvt=null,this.idt=null,this.zIt=null}uCt(){}GJ(){return this.Pvt}Cj(){return this.idt}LB(){return this.Nc}xJ(){return this.zIt}}}{const tM=self.Cs;tM.qIt=class extends tM.jn{constructor(t,s){super(),this.YIt=t,this.yCt=s,this.di=t.IJ(),this.Nc=t.LB(),this.Pvt=t.GJ(),this.ECt=this.Pvt.Vxt(),this.vH=!1,this.xH=!1,this.sY=!1,this.Xf=null}Jn(){this.OCt(),this.FCt(),this.XIt(),this.Xf&&(this.Xf.Jn(),this.Xf=null),this.YIt=null,this.di=null,this.Nc=null,this.Pvt=null,this.ECt=null}xJ(){return this.Pvt.xJ()}ZIt(){return this.YIt}IJ(){return this.di}Cj(){return this.di.Cj()}aB(){return this.di.aB()}LB(){return this.Nc}GJ(){return this.Pvt}Vxt(){return this.ECt}DCt(){return this.YIt.DCt()}lH(t){return this.Nc.lH(t,this.di,this.Pvt)}kCt(t){return this.Nc.kCt(t,this.di,this.Pvt)}TB(t){return this.Nc.TB(t,this.di,this.Pvt)}KIt(){}d8(){}qCt(){}QIt(){}YCt(){this.vH||(this.Nc.Yq(this),this.vH=!0)}OCt(){this.vH&&(this.Nc.Xq(this),this.vH=!1)}XCt(){return this.vH}ZCt(){this.xH||(this.Nc.Zq(this),this.xH=!0)}FCt(){this.xH&&(this.Nc.Kq(this),this.xH=!1)}KCt(){return this.xH}tPt(){this.sY||(this.Nc.Qq(this),this.sY=!0)}XIt(){this.sY&&(this.Nc.tY(this),this.sY=!1)}sPt(){return this.sY}QCt(){return[]}$Ct(t,s){this.Nc.fH(this.yCt,t,s)}iPt(t,s){}hx(){return null}ox(t){}Hrt(t){}Xrt(t,s){}Vht(t,s){if(0===s)return;const i=this.Hrt(t);if("number"!=typeof i)throw new Error("expected number");this.Xrt(t,i+s)}tIt(t,s,i,e){}sIt(t,...s){t.call(this,...s)}iIt(t,...s){return t.call(this,...s)}cCt(){return null}ICt(t,s,i){if(!this.YIt.eIt())return;const e=this.DCt(),n=tM.Un(tM.Event,t,s);n.ePt=e,n.CJ=e.CJ,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let sM=function(t){if(t!==eM)throw new Error("invalid internal API token")};ValidateInternalAPIToken=sM;const iM=self.Cs;iM.PB={},iM.slt={};const eM=iM.Is();let nM=[],rM=[],hM=[],oM=null,aM=null,lM=null,uM=null;const cM=new Map,fM=new Map;iM.j$=class extends iM.jn{constructor(t,s){super(),this.Nc=t,this.nPt=[],this.uvt=null,this.rPt=[],this.hPt=new Map,this.oPt=null,this.aPt=null,this.lPt=new Set(s)}uPt(t){const s=t[19],i=this.Nc.dbt(t[0]);if(!i)throw new Error("missing plugin");iM.KTt(t,i,s);const e=s>=2?iM.WGt:i,n=iM.Un(e,{runtime:this.Nc,J$:t[1],HGt:t[2],K$:t[5],tW:t[8],zGt:t[9],XGt:t[13],hW:t[14],X$:t[17],iW:t[18],sCt:s,id:t[20],name:t[21],aCt:s>=2?i:null});n.uCt(),this.nPt.push(n),cM.set(i,n)}cPt(){this.uvt=iM.Un(iM.PB.IB,{runtime:this.Nc,J$:!0}),this.uvt.uCt()}fPt(t){const s=t[1],i=t[2],e=t[3],n=this.Nc.dbt(t[0]);if(!n)throw new Error("missing behavior");this.hPt.set(n,(()=>{const t=s>=2?iM.WIt:n,r=iM.Un(t,{runtime:this.Nc,id:i,name:e,sCt:s,aCt:s>=2?n:null});r.uCt(),this.rPt.push(r),fM.set(n,r),!this.oPt&&iM.slt.dPt&&r instanceof iM.slt.dPt?this.oPt=r:!this.aPt&&iM.slt.pPt&&r instanceof iM.slt.pPt&&(this.aPt=r),r.dCt()}))}mPt(t){const s=this.hPt.get(t);s&&(s(),this.hPt.delete(t))}static pCt(t,s=1){if(iM.j$.pCt!==oM)throw new Error("invalid method");1===s&&nM.push(t),rM.push(t)}static mCt(t=1){if(iM.j$.mCt!==aM)throw new Error("invalid method");1===t&&nM.pop(),rM.pop()}static Rj(){if(iM.j$.Rj!==lM)throw new Error("invalid method");if(0===nM.length)throw new Error("no init object set");return nM.at(-1)}static V$(t){if(iM.j$.V$!==uM)throw new Error("invalid method");if(sM(t),0===rM.length)throw new Error("no init object set");return rM.at(-1)}static gPt(t){hM.push(t)}static yPt(){hM.pop()}static oH(){if(0===hM.length)throw new Error("no init properties set");return hM.at(-1)}SPt(){for(const t of this.nPt)t.dCt()}static uW(t){return cM.get(t)||null}static RJ(t){return fM.get(t)||null}OZ(){return this.uvt}wPt(){return this.oPt}bPt(){return this.aPt}IH(t){return this.lPt.has(t)}},oM=iM.j$.pCt,aM=iM.j$.mCt,lM=iM.j$.Rj,uM=iM.j$.V$}{const dM=self.Cs,pM=new Set;dM.vPt=class extends dM.jn{constructor(){super(),this.MPt=0,this.YZ="",this.XZ=0,this.xPt=0,this._Pt=0,this.Py=0,this.Ay=0,this.TPt=!1,this.GPt=!1,this.CPt=null,this.IPt="",this.jP=dM.Un(dM.Rect),this.PPt=dM.Un(dM.Il),this.APt="",this.RPt=new self.DB(this),pM.add(this)}Jn(){this.JP(),this.CPt&&0===this.CPt.lK()&&this.CPt.Jn(),this.CPt=null,pM.delete(this),this.EPt()}static hK(){for(const t of pM)t.IPt="",t.jP.set(0,0,0,0),t.PPt.Yl(t.jP)}OPt(t){this.YZ=t[0],this.XZ=t[1],this.xPt=t[2],this._Pt=t[3],this.Py=t[4],this.Ay=t[5],this.TPt=t[6],this.GPt=!0}FPt(t,s){if(this.CPt)throw new Error("already loaded asset");this.YZ=s;const i={};return dM.Zh(s)&&(i.xZ="remote"),this.kB(t,i),this.CPt.GZ()}DPt(t,s){if(this.CPt)throw new Error("already loaded asset");this.YZ="",this.XZ=s.size,this.CPt=dM.Un(dM._Z,t.lL(),{blob:s,size:this.XZ,xZ:"local"})}kPt(t){if(t===this)throw new Error("cannot replace with self");this.MPt++,this.JP(),this.YZ=t.YZ,this.XZ=t.XZ,this.xPt=t.xPt,this._Pt=t._Pt,this.Py=t.Py,this.Ay=t.Ay,this.TPt=t.TPt,this.GPt=t.GPt,this.CPt=t.CPt,this.IPt=t.IPt,this.jP=t.jP,this.PPt=t.PPt,this.EPt()}TZ(){return this.YZ}Ou(){return this.XZ}LPt(){return this.xPt}NPt(){return this._Pt}SIt(){return this.TPt}Vg(){return this.Py}Kg(){return this.Ay}BPt(){return this.CPt.Vg()}$Pt(){return this.CPt.Kg()}kB(t,s){if(this.CPt)throw new Error("already got asset");s=Object.assign({},s,{url:this.TZ(),size:this.Ou()}),this.CPt=t.MZ(s)}tK(){return this.CPt&&this.CPt.tK()}async rX(t,s){if(!this.CPt)throw new Error("no asset");if(this.IPt)throw new Error("already loaded texture");const i=this.MPt;this.IPt="loading";const e=await this.CPt.rX(t,s);if(this.MPt!==i)return null;if(!e)return this.IPt="",null;this.IPt="loaded",this.GPt||(this.Py=e.Vg(),this.Ay=e.Kg(),this.GPt=!0);const n=this.TPt?this.Ay:this.Py,r=this.TPt?this.Py:this.Ay;return this.jP.set(this.xPt,this._Pt,this.xPt+n,this._Pt+r),this.jP.wt(e.Vg(),e.Kg()),this.PPt.Yl(this.jP),this.TPt&&this.PPt.su(),e}JP(){this.IPt&&(this.CPt&&this.CPt.JP(),this.IPt="",this.jP.set(0,0,0,0),this.PPt.Yl(this.jP))}fT(){return this.CPt&&"loaded"===this.IPt?this.CPt.fT():null}sR(){return this.jP}gIt(){return this.PPt}oq(){return this.RPt}WPt(){return this.CPt}async VPt(t){t||(t=await this.CPt.uK());const s=dM.co(this.Py,this.Ay),i=s.getContext("2d");return this.TPt?(i.rotate(Math.PI/-2),i.translate(-this.Ay,0),i.drawImage(t,this.xPt,this._Pt,this.Ay,this.Py,0,0,this.Ay,this.Py)):i.drawImage(t,this.xPt,this._Pt,this.Py,this.Ay,0,0,this.Py,this.Ay),s}async jPt(t){if(this.APt)return this.APt;const s=await this.VPt(t),i=await dM.fo(s);return this.APt=URL.createObjectURL(i),this.APt}EPt(){this.APt&&(URL.revokeObjectURL(this.APt),this.APt="")}}}{const mM=self.Cs;mM.HPt=class extends mM.jn{constructor(t){super(),this.Yn=t[0],this.UPt=t[1],this.bMt=!!t[2],this.wot=t[3],this.JPt=t[4],this.zPt=!!t[5],this.qK=t[6],this.qPt=t[7].map((t=>mM.Un(mM.YPt,t))),this.XPt=new self.LJ(this)}static ZPt(t,s){const i=mM.Un(mM.HPt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.qPt.push(mM.YPt.ZPt(t)),i}Jn(){for(const t of this.qPt)t.Jn();mM.bh(this.qPt)}KPt(t){for(const s of this.qPt)s.sz().kB(t)}QPt(t,s){return Promise.all(this.qPt.map((i=>i.sz().rX(t,s))))}tAt(){for(const t of this.qPt)t.sz().JP()}Pc(){return this.Yn}G0(){return this.qK}zJ(){return this.qPt.length}YJ(){return this.qPt}sAt(t){if((t=Math.floor(t))<0||t>=this.qPt.length)throw new RangeError("invalid frame");return this.qPt[t]}iAt(t,s){(s=Math.floor(s))<0?this.qPt.unshift(t):s>=this.qPt.length?this.qPt.push(t):this.qPt.splice(s,0,t)}eAt(t){if((t=Math.floor(t))<0||t>=this.qPt.length)throw new RangeError("invalid frame");this.qPt[t].Jn(),this.qPt.splice(t,1)}nAt(t){for(let s=0,i=this.qPt.length;s<i;++s)if(mM.Ke(this.qPt[s].mz(),t))return s;return-1}rAt(t){if("string"==typeof t){const s=this.nAt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}NJ(){return this.UPt}$J(){return this.bMt}VJ(){return this.wot}HJ(){return this.JPt}JJ(){return this.zPt}hAt(){return this.XPt}}}{const gM=self.Cs,yM=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();gM.YPt=class extends gM.jn{constructor(t){super(),this.oAt=gM.Un(gM.vPt),this.oAt.OPt(t),this.aAt=t[7],this.lAt=gM.Un(gM.Ia,t[8],t[9]),this.uAt=t[10].map((t=>gM.Un(gM.cAt,this,t))),this.fAt=new Map;for(const t of this.uAt)this.fAt.set(t.Pc().toLowerCase(),t);this.dAt=null;const s=t[11];s.length>=6&&(this.dAt=gM.Un(gM.au,s)),this.PS=t[12]?t[12]:"",this.pAt=new self.tz(this)}static ZPt(t){const s=gM.Un(gM.YPt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.oAt.DPt(t,yM),s}Jn(){this.dAt&&(this.dAt.Jn(),this.dAt=null),this.oAt.Jn(),this.oAt=null}sz(){return this.oAt}iz(){return this.aAt}jH(){return this.lAt.Oa()}JH(){return this.lAt.Da()}cz(){return this.dAt}lz(t){return this.fAt.get(t.toLowerCase())||null}az(t){return(t=Math.floor(t))<0||t>=this.uAt.length?null:this.uAt[t]}nz(){return this.uAt.length}mz(){return this.PS}XJ(){return this.pAt}}}{const SM=self.Cs;SM.cAt=class extends SM.jn{constructor(t,s){super(),this.mAt=t,this.Yn=s[0],this.gAt=SM.Un(SM.Ia,s[1],s[2])}Jn(){}Pc(){return this.Yn}UM(){return this.gAt.Oa()}qM(){return this.gAt.Da()}yAt(){return this.gAt}}}{const wM=self.Cs,bM=self.SH,vM=self.yW,MM=self.assert;wM.rut=class extends wM.jn{constructor(t,s,i){super();const e=t.dbt(i[1]);this.Nc=t,this.GCt=wM.j$.uW(e),this.ECt=null,this.SAt=e.Instance,this.IS=s,this.qK=i[11],this.Yn=i[0],this.Zbt=this.Nc.Rmt(i[14]),this.wAt=!!i[9],this.bAt=!!i[2],this.vAt=!!i[10],this.MAt=i[3].map((s=>({FK:s[0],type:s[1],name:s[2],xAt:t.Rmt(s[3])}))),this._At=i[4],this.TAt=i[5],this.jGt=this.GCt.Y$(),this.GAt=wM.Un(wM.Event.Sf),this.PQ=null;const[n,r]=t.fL().c$();if(this.CAt=wM.Un(wM.IAt,n,r),this.PAt=!0,this.AAt=null,this.RAt=null,this.EAt=-1,this.OAt=null,this.FAt=null,this.DAt=null,this.kAt=null,this.LAt=null,this.NAt=!1,this.BAt=null,this.$At=i[8].map((t=>wM.WAt.ET(this,t))),this.VAt=[],this.jAt=new Map,this.HAt=new Map,this.UAt=new Set,this.JAt=new Map,this.zAt=wM.Un(wM.sdt,this),this.qAt=null,this.YAt=0,this.XAt=!1,this.BAt=null,this.oAt=null,this.ZAt=null,this.KAt=null,this.QAt=null,this.tRt=0,this.TMt=new Map,this.GMt=new Map,this.pK=[],this.sRt=new Map,this.iRt=!0,this.GCt.sW()&&(this.PQ=wM.Un(wM.AQ,this,i[12])),i[6]&&(this.oAt=wM.Un(wM.vPt),this.oAt.OPt(i[6])),i[7]){this.ZAt=i[7].map((t=>wM.Un(wM.HPt,t))),this.KAt=new Map,this.QAt=new Map;for(const t of this.ZAt)this.KAt.set(t.Pc().toLowerCase(),t),this.QAt.set(t.G0(),t)}this.bAt?(this.AAt=[],this.RAt=new Set,this.EAt=this.Nc.eRt()):(this.OAt=[],this.FAt=new Set,this.DAt=[],this.kAt=[],this.LAt=[]);const h=this.GCt.UMt();if(h<2&&(this.ECt=wM.Un(e.nRt,this,i[15]),!(this.ECt instanceof wM.TCt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.rRt=null,this.hRt=null,this.W3=wM.Un(wM.Event.Sf),wM.j$.pCt(this,h),h>=2?(o=e.nRt,o||(o=globalThis.nq)):o=this.ECt.cCt(),o){if(this.rRt=new o(h<2?this:null),h<2&&!(this.rRt instanceof vM))throw new TypeError("script interface class must derive from IObjectClass");if(h>=2&&!(this.rRt instanceof globalThis.nq))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.rRt=new vM;if(wM.j$.mCt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.ECt.CCt(s,i,e)}}this.Nc.oRt()&&!this.bAt&&!this.vAt&&this.jGt||this.uCt(),this.GCt.z$()&&(this.GCt.fCt(this),this.aRt(i)),this.lRt=null}static ET(t,s,i){return wM.Un(wM.rut,t,s,i)}Jn(){if(this.GAt.Jn(),this.GAt=null,this.oAt&&(this.oAt.Jn(),this.oAt=null),this.ZAt){for(const t of this.ZAt)t.Jn();wM.bh(this.ZAt),this.KAt.clear(),this.QAt.clear()}this.lRt=null,this.zAt.Jn(),this.zAt=null,this.TMt.clear(),this.GMt.clear(),this.BAt=null,this.Nc=null}uRt(t){for(let s=1,i=t.length;s<i;++s){const i=this.Nc.qQ(t[s]);this.AAt.push(i),this.RAt.add(i),i.OAt.push(this),i.FAt.add(this)}}cRt(t){this.NAt=!0,this.BAt=t}Nj(){return this.NAt}f5(){return this.BAt}fRt(){let t=0;if(!this.bAt)for(const s of this.OAt)for(const i of s.dRt()){const s=i.Pc().toLowerCase();this.jAt.set(s,i),this.HAt.set(s,t),this.VAt.push(i),++t}for(const s of this.dRt()){const i=s.Pc().toLowerCase();this.jAt.set(i,s),this.HAt.set(i,t),this.VAt.push(s),++t}for(const t of this.VAt)this.UAt.add(t.xJ().constructor);if(!this.bAt&&this.OAt.length){const t=this.Nc.pRt();wM.xh(this.DAt,t,0),wM.xh(this.kAt,t,0),wM.xh(this.LAt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.OAt){const r=t.Cvt();this.DAt[r]=i,i+=t.mRt(),this.kAt[r]=e,e+=t.gRt(),this.LAt[r]=n,n+=t.yRt();const h=t.HW();if(h&&this.PQ)for(const t of h.UW())s.push(t.SRt(this.PQ))}this.PQ&&this.PQ.wRt(s)}}aRt(t){const s=this.Nc.bRt(),i=wM.Un(wM.Instance,{runtime:this.Nc,objectType:this,uid:s});i.vRt(t[16],[]),this.Nc.MRt(s,i),this.pK.push(i)}Vxt(){return this.ECt}xRt(){return this.vAt}Sf(){return this.GAt}uCt(){this.bAt||(this.ECt?this.ECt.uCt():this.rRt.rq())}_Rt(){return this.tRt>0}async m5(t){this.bAt||(this.tRt++,1===this.tRt&&(this.ECt?await this.ECt.m5(t):await this.rRt.aq(this.Nc.xB().TRt())))}v5(){if(!this.bAt){if(this.tRt--,this.tRt<0)throw new Error("released textures too many times");0===this.tRt&&(this.ECt?this.ECt.v5():this.rRt.lq(this.Nc.xB().TRt()))}}S5(){if(this.bAt)throw new Error("not applicable to family");this.ECt?this.ECt.S5():this.rRt.uq()}async j5(t){this.bAt||(this.ECt?await this.ECt.j5(t):await this.rRt.cq(this.Nc.xB().TRt()))}LB(){return this.Nc}wW(){return this.GCt}GRt(){return this.SAt}Pc(){return this.Yn}Rmt(){return this.Zbt}nL(){return this.IS}G0(){return this.qK}S0(){return this.bAt}n0(){return this.wAt}Y$(){return this.jGt}Cvt(){return this.EAt}dRt(){return this.$At}gRt(){return this._At}CRt(t){return t&&this.UAt.has(t)}mRt(){return this.MAt.length}IRt(){return this.MAt.map((t=>t.FK))}PRt(t){return this.MAt.findIndex((s=>s.FK===t))}nit(t){return this.MAt.findIndex((s=>s.name===t))}ARt(){return this.MAt.map((t=>t.name))}RRt(){return this.MAt.map((t=>t.xAt))}hit(t){if((t=Math.floor(t))<0||t>=this.MAt.length)throw new RangeError("invalid instance variable index");return this.MAt[t].type}rit(t){if((t=Math.floor(t))<0||t>=this.MAt.length)throw new RangeError("invalid instance variable index");return this.MAt[t].name}yRt(){return this.TAt}ERt(){return this.VAt}Nnt(t){return this.jAt.get(t.toLowerCase())||null}ait(t){const s=this.HAt.get(t.toLowerCase());return void 0===s?-1:s}HW(){return this.PQ}sW(){return this.GCt.sW()}ORt(){return this.PQ&&this.PQ.FRt()}bgt(){return this.zAt}EW(){return this.zAt.EW()}sz(){return this.oAt}ZQ(t){this.qAt=t}XQ(){return this.qAt}KQ(t){this.YAt=t}DRt(){return this.YAt}kRt(){return this.ZAt}LRt(){return this.ZAt.length}Nmt(){return this.OAt}qxt(t){return this.FAt.has(t)}XSt(){return this.AAt}w0(t){return this.RAt.has(t)}Evt(t){return this.kAt[t]}Gvt(t){return this.DAt[t]}Dbt(t){this.JAt.set(t.$bt().toLowerCase(),t)}kbt(t){return!!this.Jbt(t)}Jbt(t){const s=this.JAt.get(t.toLowerCase());return s&&s.Gu()?s:null}NRt(){return this.ZAt}BRt(t){if(!this.ZAt)throw new Error("no animations");return this.KAt.get(t.toLowerCase())||null}$Rt(t){if(!this.ZAt)throw new Error("no animations");return this.QAt.get(t)||null}WRt(t){if(this.BRt(t))throw new Error(`animation name '${t}' already exists`);const s=wM.HPt.ZPt(this.LB(),t);return this.ZAt.push(s),this.KAt.set(s.Pc().toLowerCase(),s),this.QAt.set(s.G0(),s),s}VRt(t){const s=this.BRt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.ZAt.length)throw new Error("cannot remove last animation");const i=this.ZAt.indexOf(s);this.ZAt.splice(i,1),this.KAt.delete(s.Pc().toLowerCase()),this.QAt.delete(s.G0()),s.Jn()}jRt(){if(!this.ZAt)throw new Error("no animations");return this.ZAt[0]}HRt(){return this.jRt().sAt(0)}URt(){if(this.ZAt){const t=this.HRt().sz();return[t.Vg(),t.Kg()]}return this.oAt?[this.oAt.Vg(),this.oAt.Kg()]:[100,100]}gW(){if(!this.GCt.z$())throw new Error("not a single-global plugin");return this.pK[0]}RW(){return this.pK}*vW(){yield*this.pK}*AW(){yield*this.pK,yield*this.Nc.K_t(this)}FW(){return this.pK.length}r0(t){this.pK.push(t)}JRt(){this.iRt=!0}Z5(){if(!this.iRt||this.bAt)return;const t=this.pK;let s=0;for(let i=t.length;s<i;++s)t[s].zRt(s);const i=this.Nc.qRt();for(const t of i)t.Cj()===this&&t.zRt(s++);this.iRt=!1}YRt(t){const s=this.pK;if(t<s.length)return s[t];t-=s.length;const i=this.Nc.qRt();for(const s of i)if(s.Cj()===this){if(0===t)return s;--t}return null}D_t(t){if(t&&t.Nj()&&t.Cj()!==this)for(const s of t.Bj())if(s.Cj()===this)return s;const s=this.EW().RW();return s.length?s[0]:null}PW(t){const s=this.EW().RW();return s.length>0?s[t.Vj()%s.length]:null}*nTt(t,s){const i=this.EW().RW(),e=i.length,n=s.EW(),r=s.EW().RW(),h=r.length;let o=t.Vj();!s.S0()&&n.pdt()||(o=r.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}nxt(t){this.ECt?.nxt(t)}nbt(){if(!this.NAt||this.bAt)return;this.Z5();const t=this.EW(),s=t.Mdt(),i=t.pdt(),e=this.Nc.vmt(),n=e&&e.UL()&&e.UL().Rdt();for(const e of this.BAt.Y5()){if(e===this)continue;e.Z5();const r=e.EW();if(r.vdt(i),!i){const i=r.Mdt();wM.bh(i);for(const t of s)i.push(e.YRt(t.Vj()));if(n){const s=t.xdt(),i=r.xdt();wM.bh(i);for(const t of s)i.push(e.YRt(t.Vj()))}}}}lxt(t,s){for(const i of this.f5().Y5()){const e=i.EW();t?wM.wh(e.xdt(),s):wM.wh(e.Mdt(),s)}}XRt(){return this.CAt}ZRt(t){this.PAt=!!t}KRt(){if(this.PAt&&this.jGt){for(const t of this.pK)t.aB().QRt();for(const t of this.Nc.qRt())t.Cj()===this&&t.aB().QRt();this.PAt=!1}}tEt(t,s,i){if(s){const i=this.sRt.get(s);i&&(i.delete(t),0===i.size&&this.sRt.delete(s))}if(i){let s=this.sRt.get(i);s||(s=new Set,this.sRt.set(i,s)),s.add(t)}}sEt(){if(this.S0()){const t=new Set;for(const s of this.AAt)for(const i of s.sEt())t.add(i);return t.values()}return this.sRt.keys()}ZMt(){return this.TMt||(this.TMt=new Map),this.TMt}KMt(){return this.GMt||(this.GMt=new Map),this.GMt}iEt(){return this.CRt(wM.slt.dPt)}eEt(){return this.CRt(wM.slt.pPt)}nEt(){return this.CRt(wM.slt.rEt)}i0(){return this.CRt(wM.slt.hEt)}s3(){const t={instances:this.pK.map((t=>t.hx()))};return this.TMt&&this.TMt.size&&(t.ex=wM.wo(this.TMt)),t}i3(t,s){this.TMt&&(this.TMt.clear(),this.TMt=null);const i=t.ex;i&&(this.TMt=wM.bo(i));const e=this.pK,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].ox(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.Nc.Oj(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.Y$()&&(e=this.Nc.$N().i5(i.w.l),!e))continue;const r=this.Nc.e0(this.qAt||this,e,!1,0,0,!0);r.ox(i),s&&s.add(r)}this.lRt=n,this.JRt()}oEt(){return this.lRt}aEt(){this.lRt=null}lEt(){for(let t=0,s=this.pK;t<s;++t)this.pK[t].lEt()}dW(){return this.rRt}DL(){return this.W3}uEt(){return this.hRt}DW(t){this.hRt=t}x4(t){const s=this.Nc,i=s.yH()&&!s.BL().$W();i&&bM._4(),this.W3.dispatchEvent(t),i&&bM.T4()}}}{const xM=self.Cs;xM.cEt=class extends xM.jn{constructor(t,s){super(),this.Nc=t,this.fEt=s;for(const t of this.fEt)t.cRt(this)}Jn(){this.Nc=null}LB(){return this.Nc}c5(){return this.fEt}Y5(){return this.fEt}Q5(){return this.fEt.some((t=>t.Y$()))}}}{const _M=self.Cs,TM=self.SH,GM=self.Gj,CM=_M.j$,IM=[];let PM=0;const AM=new WeakMap,RM=new WeakMap,EM=1,OM=2,FM=4,DM=8,kM=16,LM=32,NM=64;_M.Instance=class extends _M.jn{constructor(t){if(_M.j$!==CM)throw new Error("invalid addon manager");super(),this.Nc=t.runtime,this.dEt=t.objectType,this.Est=null,this.pEt=null,this.mEt=null,this.gEt=0,this.yEt=t.uid,this.SEt=PM++,this.dxt=0,this.wEt=null;const s=_M.kh(t.tags);s.length>0&&(this.wEt=new Set(s)),this.bEt=IM,this.vEt=IM;const i=this.dEt.ERt();i.length>0&&(this.vEt=i.map(((t,s)=>_M.Un(_M.MEt,{runtime:this.Nc,_J:t,CJ:this,index:s})))),this.xEt=this.dEt.Nj()?[]:null,this._Et=-1,this.GAt=null;const e=this.wW();if(e.wM()&&(this.dxt|=4),e.Y$())if(this.Est=_M.Un(_M.TEt,this,t.LH),t.GEt)this.Est.CEt(t.GEt);else{this.Est.IEt();const[t,s]=this.dEt.URt();this.Est._A(t,s),this.Cj().ORt()&&this.Est.kH().PEt()}t.AEt?this.REt(t.AEt):this.EEt()}Jn(){if(this.mEt&&(this.mEt.Ej(),this.mEt=null),this.vEt.length>0){for(const t of this.vEt)t.Jn();_M.bh(this.vEt)}this.pEt&&(this.pEt.Jn(),this.pEt=null);const t=AM.get(this);t&&(t.clear(),AM.delete(this));const s=RM.get(this);s&&(s.clear(),RM.delete(this)),this.xEt&&_M.bh(this.xEt),this.GAt&&(this.GAt.Jn(),this.GAt=null),this.wEt&&this.wEt.clear(),this.wEt=null,this.Nc=null,this.dEt=null,this.bEt.length>0&&_M.bh(this.bEt),this.Est&&(this.Est.Jn(),this.Est=null)}REt(t){t.length>0&&(this.bEt=[],_M.Th(this.bEt,t))}EEt(){const t=this.dEt.mRt();if(0===t)return;this.bEt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.bEt.push(s[this.dEt.hit(i)])}vRt(t,s){if(this.pEt)throw new Error("already got sdk instance");for(let t=0,i=this.vEt.length;t<i;++t)this.vEt[t].vRt(s?s[t]:null);if(this.wW().UMt()<2){if(this.pEt=_M.Un(this.dEt.GRt(),this,t),!(this.pEt instanceof _M.ACt))throw new Error("sdk type must derive from SDKInstanceBase");!this.wW().Y$()&&this.dEt.uEt()&&this.nB()}else{const s=this.wW().cCt();this.OEt(s.Instance,t)}}gJ(){return this.pEt??this.mEt}aB(){return this.Est}LB(){return this.Nc}gN(){return this._Et}Uj(){const t=this._Et;return-1===t?this.LB().gN():t}yN(t){((t=+t)<0||!isFinite(t))&&(t=0),this._Et=t,this.Cj().ORt()&&this.Nc.FEt(this,!0)}zj(){this._Et=-1,this.Cj().ORt()&&this.Nc.FEt(this,!1)}H2(){return this.Nc.DEt(this)}Sf(){return this.GAt||(this.GAt=_M.Un(_M.Event.Sf)),this.GAt}$x(t){this.pEt?this.pEt.$x(t):this.mEt.yq(this.Nc.xB().TRt())}uCt(t){this.pEt.uCt(t)}kEt(){this.dxt|=2}LEt(){return!!(2&this.dxt)}NEt(){this.dxt|=1}Oq(){return!!(1&this.dxt)}wM(){return!!(4&this.dxt)||this.pEt.wM()}BEt(){this.dxt|=32}O2(){return!!(32&this.dxt)}$Et(){return!!(8&this.dxt)}WEt(t){t?this.dxt|=8:this.dxt&=-9}VEt(){return!!(16&this.dxt)}jEt(t){t?this.dxt|=16:this.dxt&=-17}HEt(){return!!(64&this.dxt)}UEt(t){t?this.dxt|=64:this.dxt&=-65}JEt(t,s){t<<=16,s?this.dxt|=t:this.dxt&=~t}zEt(t){return!!(this.dxt&t<<16)}fIt(){return this.pEt.fIt()}dIt(){return this.pEt.dIt()}pIt(){return this.pEt.pIt()}mIt(){return this.pEt.mIt()}yIt(){return this.pEt.yIt()}n_t(t){return this.pEt.n_t(t)}Cj(){return this.dEt}R2(){return this.pEt.R2()}Q_t(t){return t.S0()?t.w0(this.Cj()):this.Cj()===t}qEt(t,s,i){const e=(s,i)=>{const e=i||s.Cj(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.Nj())for(const t of this.Bj())e(t);if(i)for(const t of this.IU())e(t)}YEt(){if(!this.wW().rW())throw new Error("object does not support scene graph")}OU(){return null!==this.bU()}bU(){const t=this.aB();if(!t)return null;const s=t.bU();return s?s.Vz():null}MU(){const t=this.aB();if(!t)return null;const s=t.MU();return s?s.Vz():null}*xU(){const t=this.aB();if(t)for(const s of t.xU())yield s.Vz()}XEt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}r3(){const t=this.aB();return!!t&&t.r3()}ZEt(t){const s=this.aB();if(!s)return[];const i=t.Pc();return s.o4().map((t=>t.Vz())).filter((t=>t.Cj().Pc()===i))}o4(){const t=this.aB();return t?t.o4().map((t=>t.Vz())):[]}*children(){const t=this.aB();if(t)for(const s of t.children())yield s.Vz()}*IU(){const t=this.aB();if(t)for(const s of t.IU())yield s.Vz()}TU(){const t=this.aB();return t?t.TU():0}KEt(){return[...this.xU()].length}eTt(){const t=this.aB();return t?t.eTt():0}CU(t){const s=this.aB();if(!s)return null;const i=s.CU(t);return i?i.Vz():null}QEt(){const t=this.aB();if(!t)return NaN;const s=t.bU();return s?s.tOt(t):NaN}sOt(t){for(const s of this.aB().o4())if(s.Vz().$j()===t)return!0;return!1}AU(t,s){this.YEt(),t.YEt(),this.aB().AU(t.aB(),s||{})}RU(t){const s=this.aB();s&&s.RU(t.aB())}KU(){const t=this.aB();return!!t&&t.KU()}N5(){const t=this.aB();if(!t)return;const s=t.iOt();if(s)for(const t of s){const s=this.Nc.eB(t[2]);if(s){const i=t[3];this.AU(s,{DU:!!(1&i),LU:!!(i>>1&1),BU:!!(i>>2&1),WU:!!(i>>3&1),jU:!!(i>>4&1),ZU:!!(i>>5&1),UU:!!(i>>6&1),zU:!!(i>>7&1),YU:!!(i>>8&1)})}}}B5(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.AU(i,{DU:!!(1&e),LU:!!(e>>1&1),BU:!!(e>>2&1),WU:!!(e>>3&1),jU:!!(e>>4&1),ZU:!!(e>>5&1),UU:!!(e>>6&1),zU:!!(e>>7&1),YU:!!(e>>8&1)})}}Hj(){const t=this.Nc.eOt();return t?t.out(this):""}Nj(){return null!==this.xEt}nOt(){_M.bh(this.xEt)}X5(t){this.xEt.push(t)}kj(){return this.xEt}rOt(t){return!!this.hOt(t)}hOt(t){const s=this.Bj();if(null===s||0===s.length)return!1;for(const i of s)if(i.Cj()===t)return i;return null}Bj(){return this.xEt}aSt(){for(const t of this.Bj())t.Cj().EW()._dt(t)}rxt(){for(const t of this.Bj())t.Cj().EW().wdt(t)}hxt(t){for(const s of this.Bj())s.Cj().EW().Mdt()[t]=s}axt(){for(const t of this.Bj())t.Cj().EW().bdt(t)}oxt(t){for(const s of this.Bj())s.Cj().EW().xdt()[t]=s}wW(){return this.dEt.wW()}zRt(t){this.gEt=t}Vj(){return this.dEt.Z5(),this.gEt}$j(){return this.yEt}oOt(){return this.SEt}aOt(t){t?this.Zj(new Set(t)):this.wEt=null}Zj(t){if(0===t.size)this.wEt=null;else{this.wEt?this.wEt.clear():this.wEt=new Set;for(const s of t)this.wEt.add(s)}}Yj(){return this.wEt??new Set}ITt(){return Array.from(this.Yj()).join(" ")}RTt(t){t=Math.floor(t);for(const s of this.Yj()){if(0===t)return s;--t}return""}Lnt(){return this.vEt}lOt(t){if(!t)return null;for(const s of this.vEt)if(s.xJ()instanceof t)return s;return null}rlt(t){if(!t)return null;const s=this.lOt(t);return s?s.gJ():null}knt(t){const s=this.vEt;for(let i=0,e=s.length;i<e;++i)if(s[i].GJ().G0()===t)return i;return-1}uOt(){return this.bEt}ARt(){return this.dEt.ARt()}cOt(){return this.bEt.length}Qrt(t){t|=0;const s=this.bEt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}_vt(t){return this.bEt[t]}fOt(t){const s=this.bEt[t];return 0===this.dEt.hit(t)?!!s:s}tht(t,s){t|=0;const i=this.bEt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.dEt.hit(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}jht(t,s){if(0===s)return;t|=0;const i=this.bEt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}ZMt(){let t=AM.get(this);return t||(t=new Map,AM.set(this,t),t)}KMt(){let t=RM.get(this);return t||(t=new Map,RM.set(this,t),t)}dOt(t){const s=this.Cj();if(s.DL().xf(t))return!0;for(const i of s.Nmt())if(i.DL().xf(t))return!0;return!!this.Nc.DL().xf(t)}BW(){const t=new Set;t.add(this);const s=this.aB();if(s&&s.r3())for(const s of this.IU())if(t.add(s),s.Nj())for(const i of s.Bj())t.add(i);if(this.Nj())for(const s of this.Bj())t.add(s);for(const s of t.values())s.W5();this.V5()}pOt(){this.dEt.uEt()&&this.nB();for(const t of this.vEt)t.KIt()}mOt(){this.pOt()}W5(){if(this.pOt(),this.dOt("instancecreate")){const t=this.Cj(),s=new _M.Event("instancecreate");s.CJ=this.nB(),t.x4(s);for(const i of t.Nmt())i.x4(s);this.Nc.x4(s)}this.Nc.lH(this.wW().qgt().CB.FTt,this,null)}V5(){if(this.wW().rW()){if(this.x4(new _M.Event("hierarchyready")),this.dOt("hierarchyready")){const t=this.Cj(),s=new _M.Event("hierarchyready");s.CJ=this.nB(),t.x4(s);for(const i of t.Nmt())i.x4(s);this.Nc.x4(s)}this.Nc.lH(this.wW().qgt().CB.X_t,this,null)}}gOt(){this.Nc.lH(this.wW().qgt().CB.DTt,this,null)}yOt(t){if(this.mEt){const s=new _M.Event("destroy");s.SOt=t,this.x4(s)}if(!this.dOt("instancedestroy"))return;const s=this.Cj(),i=new _M.Event("instancedestroy");i.CJ=this.nB(),i.SOt=t,s.x4(i);for(const t of s.Nmt())t.x4(i);this.Nc.x4(i)}wOt(){return this.pEt?this.pEt.QCt():this.mEt._H()}hx(t="full",s=null){const i={};"full"===t?i.uid=this.$j():i.c3=!0;const e=this.Yj();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=AM.get(this);if(s&&s.size&&(i.ex=_M.wo(s)),-1!==this.gN()&&(i.mts=this.gN()),this.dEt.mRt()>0){const t={},s=this.dEt.IRt();for(let i=0,e=this.bEt.length;i<e;++i)t[s[i].toString()]=this.bEt[i];i.ivs=t}if(this.vEt.length){const s={};for(const i of this.vEt){const e=i.hx(t);e&&(s[i.GJ().G0().toString()]=e)}i.behs=s}}this.Est&&(i.w=this.Est.s3(t,s));const n=this.pEt?this.pEt.hx():this.mEt.TH();return n&&(i.data=n),i}p6(t="full",s=null){this.Est&&this.Est.p6(t)}g6(t,s="full",i=null){this.Est&&this.Est.g6(t,s,i)}bOt(t,s="full",i=null){this.Est&&this.Est.bOt(t,s,i)}lEt(){this.wW().Y$()&&this.Est.lEt()}ox(t,s="full",i=null){if("full"===s)this.yEt=t.uid;else if(!t.c3)return;if(this.aOt(t.tags),"visual-state"!==s){let s=AM.get(this);s&&(s.clear(),AM.delete(this));const i=t.ex;i&&(s=_M.bo(i),AM.set(this,s)),this._Et=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.dEt.PRt(i);if(e<0||e>=this.bEt.length)continue;let n=s;null===n&&(n=NaN),this.bEt[e]=n}}if(this.wW().Y$()){const e=t.w;if(e){const t=e.l;if(this.Est.lB().G0()!==t){const i=this.Est.lB(),e=i.HN().i5(t);e?(this.Est.dB(e),i.a0(this,!0),e.r0(this,!0),e.pB(this),this.Est.NH()):"full"===s&&this.Nc.Oj(this)}this.Est.i3(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.knt(i);n<0||n>=this.vEt.length||this.vEt[n].ox(e,s)}}const e=t.data;e&&(this.pEt?this.pEt.ox(e,s):this.mEt.GH(e))}nB(){return this.mEt||this.OEt()}eIt(){return!!this.mEt}OEt(t,s){const i=this.Est?t?self.fq:self.cJ:t?self.sH:self.Gj,e=t||this.pEt.cCt(),n=this.dEt.uEt(),r=n||e||i,h=this.wW().UMt();if(_M.j$.pCt(this,h),_M.j$.gPt(s),this.mEt=new r,_M.j$.yPt(),_M.j$.mCt(h),e&&!(this.mEt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.mEt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.mEt}Ij(t){if(0===this.bEt.length)return;const s={},i=this.dEt.RRt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:_M.Instance.prototype.fOt.bind(this,t),set:_M.Instance.prototype.tht.bind(this,t)};const e=Object.create(Object.prototype,s);t.vOt={value:e,writable:!1}}Pj(t){const s=this.vEt;if(0===s.length)return;const i={};for(const t of s)i[t.GJ().Rmt()]={value:t.DCt(),writable:!1};const e=Object.create(Object.prototype,i);t.qyt={value:e,writable:!1}}x4(t){if(!this.eIt())return;const s=this.nB();t.CJ=s;const i=this.Nc,e=i.yH()&&!i.BL().$W();e&&TM._4(),s.dispatchEvent(t),e&&TM.T4()}}}{const BM=self.Cs;BM.l4=class extends BM.jn{constructor(t){super(),this.wx=t,this.pSt=null,this.MOt=[],this.xOt=t.Vg(),this._Ot=t.Kg(),this.TOt=1,this.GOt=1,this.COt=0,this.IOt=1,this.POt=t.sO(),this.AOt=null,this.ROt=null,this.EOt=NaN,this.OOt=!1,this.a3=NaN,this.l3=NaN,this.FOt=s=>{if(s.CJ!==this.pSt.Vz())return;t.LB().Sf().removeEventListener("instancecreate",this.FOt);const i=this.pSt.Vz().gJ();this.OOt=!!i.vit(),this.a3=this.OOt?i.bit():NaN,this.l3=this.OOt?i.xit():NaN}}Jn(){this.pSt=null,this.AOt=null,this.ROt=null,this.EOt=NaN,this.OOt=!1,this.a3=NaN,this.l3=NaN,BM.bh(this.MOt)}DOt(t){if(this.IOt=this.wx.sO(),this.POt=this.IOt,this.pSt=t,this.COt=t?t.ZW():0,this.pSt){const t=this.wx.LB();if(this.pSt.Vz().wW().UMt()<2){const s=this.pSt.Vz().gJ();s?(this.OOt=!!s.vit(),this.a3=this.OOt?s.bit():NaN,this.l3=this.OOt?s.xit():NaN):this.pSt.Vz().Oq()||t.Sf().addEventListener("instancecreate",this.FOt)}else this.OOt=!1,this.a3=NaN,this.l3=NaN}else this.OOt=!1,this.a3=NaN,this.l3=NaN}bU(){return this.pSt}r3(){return this.MOt.length>0}o4(){return this.MOt}kOt(){this.r3()&&1!==this.MOt.length&&(this.ROt?this.MOt.sort(((t,s)=>{const i=this.ROt.get(t.Vz()),e=this.ROt.get(s.Vz());return BM.te(i)&&BM.te(e)?i-e:0})):this.MOt.sort(((t,s)=>{const i=t.uht().LOt(),e=s.uht().LOt();return BM.te(i)&&BM.te(e)?i-e:0})))}LOt(){return this.EOt}cht(){return this.TOt}NOt(t){this.TOt=t}dht(){return this.GOt}BOt(t){this.GOt=t}vht(){return this.POt}G_t(){return this.IOt}$Ot(t){this.IOt=t}lht(){return 0===this.xOt?Number.EPSILON:this.xOt}fht(){return 0===this._Ot?Number.EPSILON:this._Ot}WOt(){if(this.wx.$U()){const t=this.pSt;let s=t.Vg(),i=t.uht().lht();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.OOt?1+s/this.a3:s/i}return 1}VOt(){if(this.wx.VU()){const t=this.pSt;let s=t.Kg(),i=t.uht().fht();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.OOt?1+s/this.l3:s/i}return 1}jOt(){return 0}HOt(){return{sw:this.xOt,sh:this._Ot,sx:this.TOt,sy:this.GOt,psa:this.COt,oo:this.IOt,so:this.POt,pi:this.wx.Vz().QEt()}}s3(t,s=null){const i=this.HOt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.UOt(t),c:this.JOt(t)})}zOt(t){let s="";return t.kU()&&(s+="x"),t.NU()&&(s+="y"),t.$U()&&(s+="w"),t.VU()&&(s+="h"),t.HU()&&(s+="a"),t.JU()&&(s+="z"),t.KU()&&(s+="d"),t.qU()&&(s+="o"),t.XU()&&(s+="v"),s}UOt(t){return this.pSt?!this.pSt.Vz()||this.pSt.Vz().Oq()?null:this.qOt(this.pSt,this.wx,t):null}JOt(t){return this.MOt.map((s=>this.qOt(s,s,t))).filter((t=>t))}qOt(t,s,i){const e=t.Vz();if(e&&e.Oq())return null;const n={};return n.uid=e.$j(),n.f=this.zOt(s),n.offsets=s.YOt(),n.data=BM.l4.XOt(e),n.oci=e.Cj().nL(),"state"===i?(n.inst=e.hx("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.Cj().RW().indexOf(e),n.inst=null),n}i3(t){this.xOt=t.sw,this._Ot=t.sh,this.TOt=t.sx,this.GOt=t.sy,this.COt=t.psa,this.IOt=t.oo,this.POt=t.so,this.EOt=BM.te(t.pi)?t.pi:NaN}ZOt(t,s,i,e){if(!t&&!s)if(e?.HTt){if(this.AOt)for(const t of this.AOt)t.Oq()||t.OU()||t.LB().Oj(t)}else if(this.AOt)for(const t of this.AOt)if(i.c&&i.c.length){if(!i.c.some((s=>s.uid===t.$j())))continue;t.Oq()||t.OU()||t.LB().Oj(t)}this.AOt=t,this.ROt=s}g6(t,s){const i=this.wx,e=i.LB(),n=new Set;if(t.p&&!this.pSt){const r=t.p.uid,h=e.eB(r);if(h){const r=h.aB();h.XEt(i.Vz())?this.pSt=r:(h.sOt(i.Vz().$j())?(e.Oj(i.Vz()),e.KOt(i.Vz().$j())):h.AU(i.Vz(),this.QOt(t.p.f)),n.has(i)||(i.tFt(t.p.offsets),this.sFt(h,t.p,s),this.iFt(i.Vz(),i.Vz().$j(),i.LB(),s)),n.add(i),h.aB().uht().kOt())}else if(BM.te(t.p.oci)){const n=e.qQ(t.p.oci),r=(e.OZ(),e.kW(n,i.lB(),0,0,!0));if(r){const n=this.eFt(t.p,e);n&&r.ox(n),r.aB().lB().LW(r),r.AU(i.Vz(),this.QOt(t.p.f)),this.iFt(r,r.$j(),e,s),r.aB().uht().kOt()}}}const r=[];for(const s of t.c){const t=s.uid,i=e.eB(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=e.eB(a);if(l){if(this.AOt){if(this.AOt.includes(l)){const e=l;if(e.Cj()!==l.Cj()){h++;continue}if(e.Oq()){h++;continue}const o=t.c[h];if(!s?.HTt&&this.nFt(e,r,i)){if(i.Vz().CU(h)){const r=e.Cj().nL(),a=o.oci,l=i.Vz().CU(h).Cj().nL();if(r!==a||a!==l){this.rFt(t.c,i,n,s);break}this.hFt(h,o,i,n,s)}else this.hFt(h,o,i,n,s);h++;continue}if(e.OU()&&e.bU()!==i.Vz()){const t=this.oFt(o,s);this.aFt(t,o,n,s),h++;continue}this.aFt(e.aB(),o,n,s,!0),h++;continue}if(this.AOt[h]){const e=this.AOt[h];if(e.Cj()!==l.Cj()){h++;continue}if(e.Oq()){h++;continue}const o=t.c[h];if(!s?.HTt&&this.nFt(e,r,i)){if(i.Vz().CU(h)){const r=e.Cj().nL(),a=o.oci,l=i.Vz().CU(h).Cj().nL();if(r!==a||a!==l){this.rFt(t.c,i,n,s);break}this.hFt(h,o,i,n,s)}else this.hFt(h,o,i,n,s);h++;continue}if(e.OU()&&e.bU()!==i.Vz()){const t=this.oFt(o,s);this.aFt(t,o,n,s),h++;continue}this.aFt(e.aB(),o,n,s,!0),h++;continue}}const e=l.Cj();if(this.lFt(r,e)===i.Vz().ZEt(e).length){const t=i.Vz().CU(h);if(t){const i=t.aB();i&&(n.has(i)||(i.tFt(o.offsets),this.sFt(t,o,s)),n.add(i))}h++;continue}if(l.OU()&&l.bU()!==i.Vz()){const t=this.oFt(o,s);this.aFt(t,o,n,s),h++;continue}this.aFt(l.aB(),o,n,s)}else if(this.AOt&&this.AOt[h]){const a=this.AOt[h],l=e.qQ(this.uFt(o));if(a.Cj()!==l){h++;continue}if(a.Oq()){h++;continue}const u=t.c[h];if(!s?.HTt&&this.nFt(a,r,i)){if(i.Vz().CU(h)){const e=a.Cj().nL(),r=u.oci,o=i.Vz().CU(h).Cj().nL();if(e!==r||r!==o){this.rFt(t.c,i,n,s);break}this.hFt(h,u,i,n,s)}else this.hFt(h,u,i,n,s);h++;continue}if(a.OU()&&a.bU()!==i.Vz()){const t=this.oFt(u,s);this.aFt(t,u,n,s),h++;continue}this.aFt(a.aB(),u,n,s)}else{const t=this.oFt(o,s);this.aFt(t,o,n,s)}h++}}rFt(t,s,i,e){const n=s.LB();for(const t of s.Vz().children())t&&!t.Oq()&&(n.Oj(t),n.KOt(t.$j()));this.AOt&&(this.AOt=[]),this.ROt&&(this.ROt=new WeakMap);for(const s of t){const t=this.oFt(s,e);this.aFt(t,s,i,e),this.AOt.push(t.Vz()),this.ROt.set(t.Vz(),this.AOt.length-1)}s.uht().kOt()}nFt(t,s,i){const e=t.Cj();return this.lFt(s,e)===i.Vz().ZEt(e).length}hFt(t,s,i,e,n){const r=i.Vz().CU(t);if(!r)return;const h=r.aB();h&&(e.has(h)||(h.tFt(s.offsets),this.sFt(r,s,n)),e.add(h))}QOt(t){const s={};return s.DU=t.includes("x"),s.LU=t.includes("y"),s.BU=t.includes("w"),s.WU=t.includes("h"),s.jU=t.includes("a"),s.UU=t.includes("z"),s.ZU=t.includes("d"),s.zU=t.includes("o"),s.YU=t.includes("v"),s}uFt(t){return BM.te(t.oci)?t.oci:t[1]}oFt(t,s){if(!BM.te(t.oci))return;const i=this.wx,e=i.LB();let n;if(t.data)n=e.e0(t.data,i.lB(),!1,0,0,!1,!0);else{const s=e.qQ(t.oci);n=e.kW(s,i.lB(),0,0,!0)}if(!n)return;const r=this.eFt(t,e);r&&n.ox(r);const h=n.aB();return h.lB().LW(n,!0),h}iFt(t,s,i,e){if(i.eB(s)){if(!e?.HTt){const e=i.eB(s);e!==t&&i.Oj(e)}i.KOt(s)}i.MRt(s,t)}aFt(t,s,i,e,n=!0){const r=this.wx,h=r.AU(t,this.QOt(s.f));h&&n?(i.has(t)||(t.tFt(s.offsets),this.sFt(t.Vz(),s,e)),i.add(t)):h&&this.iFt(t.Vz(),s.uid,r.LB(),e),this.kOt()}sFt(t,s,i){let e=this.eFt(s,this.wx.LB());if(!e)return;const n=t.LB();e=JSON.parse(JSON.stringify(e));const r=e.w?.zi;e.w=null,t.ox(e),BM.te(r)&&t.aB().d0(r),this.iFt(t,e.uid,n,i)}lFt(t,s){return t.filter((t=>t.Cj().Pc()===s.Pc())).length}eFt(t,s){if(BM.te(t.instIndex)){const i=s.qQ(t.oci).oEt();return i?i[t.instIndex]:null}return BM.le(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static XOt(t){let s=t.aB().lB().QQ(t.$j());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.o4()]){const t=s.aB();i.push([t.HN().G0(),t.lB().nL(),s.$j(),BM.l4.a4(t),s.Cj().Nj()?1:0,t.uB(),BM.l4.XOt(s)])}return BM._e(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=BM.l4.cFt(),s[0][14][1]=i,s[0][14][2]=t.aB().uB()),s}static a4(t){let s=0;return s|=Number(t.XU())<<8,s|=Number(t.qU())<<7,s|=Number(t.JU())<<6,s|=Number(t.KU())<<5,s|=Number(t.HU())<<4,s|=Number(t.VU())<<3,s|=Number(t.$U())<<2,s|=Number(t.NU())<<1,s|=0|Number(t.kU()),s}static cFt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}}}{const $M=self.Cs,WM=self.ls,VM=WM.Ss,jM=WM.ws,HM=$M.Un($M.Rect),UM=$M.Un($M.Il),JM=$M.Un($M.Event,"bboxchange",!1),zM=$M.Un($M._o,0,0,0,0),qM=$M.Un($M.au),YM=$M.Un($M._o,1,1,1,1),XM=$M.Un($M.Rect,0,0,-1,-1),ZM=$M.Un($M.Rect,0,0,-1,-1),KM=new Set(["absolute","relative"]),QM=[];let tx=!0;const sx=1,ix=2,ex=4,nx=8,rx=16,hx=32,ox=64,ax=128,lx=256,ux=512,cx=1024,fx=2048,dx=4096,px=8192,mx=16384,gx=32768,yx=1<<22,Sx=1<<23,wx=12647936,bx=65536,vx=1<<17,Mx=1<<18,xx=1<<19,_x=1<<20,Tx=1<<21,Gx=26,Cx=31<<26,Ix=new WeakMap,Px=new WeakMap;$M.TEt=class extends $M.jn{constructor(t,s){super(),this.di=t,this.idt=t.Cj(),this.Nc=t.LB(),this.fFt=s,this.idt.tEt(this,null,s),this.dFt=-1,this.pFt=-1,this.dxt=196635,this.idt.wW().Q$()&&(this.dxt|=128),this.Pa=NaN,this.Aa=NaN,this.EM=NaN,this.mFt=NaN,this.gFt=NaN,this.z_=NaN,this.Io=NaN,this.yFt=NaN,this.SFt=NaN,this.wFt=NaN,this.bFt=NaN,this.vFt=$M.Un($M.Rect),this.MFt=$M.Un($M.Il),this.xFt=ZM,this._Ft=XM,this.TFt=null,this.GFt=null,this.CFt=null,this.RM=YM,this.IFt=YM,this.PFt=null,this.AFt=null,this.di.Cj().ORt()&&(this.AFt=$M.Un($M.RFt,this.di,this)),this.EFt=null,this.AOt=null,this.ROt=null,this.OFt=-1,this.FFt=null}NEt(){this.dxt|=256}Jn(){if(this.idt.tEt(this,this.fFt,null),this.PFt&&(this.Nc.pM().Rb(this.PFt),this.PFt=null),this.TFt=null,this.GFt&&(this.GFt.DFt.Jn(),this.GFt=null),this.CFt&&(this.CFt.clear(),this.CFt=null),this.iJ(),this.AFt&&this.AFt.Jn(),this.OU()&&this.bU().RU(this),this.r3()){const t=[...this.o4()];for(const s of t)this.RU(s)}this.kFt(),this.LFt(),Ix.delete(this),Px.delete(this),this.di=null,this.idt=null,this.Nc=null,this.fFt=null}CEt(t){if(tx=!1,this.BH(t[0],t[1]),this.ZM(t[2]),this._A(t[3],t[4]),this.z_=0,this.Q$()?this.XW(t[6]):this.Io=0,zM.Sa(t[7]),this.NFt(zM),this.HH(t[8]),this.zH(t[9]),this.FM(t[10]),this.AFt&&this.AFt.BFt(t[12]),t[14]&&Ix.set(this,{$Ft:t[14][1],WFt:t[14][2]}),t[15]){const s=t[15];this.tJ(s[0],s[1]);const i=this.oJ(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.Nx(e,t);r.JM(n[0]),r.YM(n[1]),r.ZM(n[2]),r.QM(n[3]),r.sx(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.Nc.eOt();e&&r&&r.hut(this.Vz(),i),n&&r&&r.hut(this.Vz(),s)}tx=!0,this.VFt()}IEt(){this.Pa=0,this.Aa=0,this.EM=0,this.mFt=0,this.gFt=0,this.z_=0,this.Io=0,this.yFt=0,this.SFt=1,this.wFt=0,this.bFt=0,this.VFt()}LB(){return this.Nc}Cj(){return this.idt}Vz(){return this.di}jFt(){return this.HU()?this.HFt(this.bU().UFt()-this.EFt.jOt()):0}JM(t){if(t=+t,this.kU()){const s=this.EFt,i=t-this.UM(),e=-this.jFt();0===e?this.Pa+=i/s.WOt():(this.Pa+=Math.cos(e)*i/s.WOt(),this.NU()&&(this.Aa+=Math.sin(e)*i/s.VOt()))}else this.Pa=t}rht(t,s=!1){t=+t,s?this.Pa+=t:this.kU()?this.JM(this.UM()+t):this.Pa+=t}UM(){if(this.kU()){let t=this.Pa;const s=this.EFt,i=this.bU(),e=this.jFt();return 0===e?t*=s.WOt():(t=t*s.WOt()*Math.cos(e),this.NU()&&(t-=this.Aa*s.VOt()*Math.sin(e))),i.UM()+t}return this.Pa}YM(t){if(t=+t,this.NU()){const s=this.EFt,i=t-this.qM(),e=-this.jFt();0===e?this.Aa+=i/s.VOt():(this.kU()&&(this.Pa-=Math.sin(e)*i/s.WOt()),this.Aa+=Math.cos(e)*i/s.VOt())}else this.Aa=t}hht(t,s=!1){t=+t,s?this.Aa+=t:this.NU()?this.YM(this.qM()+t):this.Aa+=t}qM(){if(this.NU()){let t=this.Aa;const s=this.EFt,i=this.bU(),e=this.jFt();return 0===e?t*=s.VOt():(t=t*s.VOt()*Math.cos(e),this.kU()&&(t+=this.Pa*s.WOt()*Math.sin(e))),i.qM()+t}return this.Aa}BH(t,s){if(t=+t,s=+s,this.JFt()){const i=this.kU(),e=this.NU(),n=this.EFt,r=t-this.UM(),h=s-this.qM(),o=-this.jFt();if(0===o)i?this.Pa+=r/n.WOt():this.Pa=t,e?this.Aa+=h/n.VOt():this.Aa=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Pa+=e?(l*r-a*h)/n.WOt():l*r/n.WOt():this.Pa=t,e?this.Aa+=i?(a*r+l*h)/n.VOt():l*h/n.VOt():this.Aa=s}}else this.Pa=t,this.Aa=s}zFt(){return[this.UM(),this.qM()]}WH(t,s){t=+t,s=+s,this.JFt()?this.BH(this.UM()+t,this.qM()+s):(this.Pa+=t,this.Aa+=s)}i_t(t,s){return this.UM()===t&&this.qM()===s}ZM(t){if(t=+t,this.JU()&&(t-=this.bU().XM()),this.EM===t)return;this.EM=t,this.qFt();const s=this.lB();0!==this.EM&&s.c0(),s.pB(this)}qFt(){if(this.VFt(),this.r3()){const t=this.o4();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.JU()&&i.qFt()}}}_ht(t){this.ZM(this.XM()+t)}XM(){return this.JU()?this.bU().XM()+this.EM:this.EM}ZH(){return this.lB().XM()+this.XM()}vit(){return this.Vz().wW().UMt()<2&&this.Vz().gJ().vit()}Yg(t){if(t=+t,this.$U()){const s=this.Vg();0===s?this.mFt=Number.EPSILON:this.mFt*=t/s}else this.mFt=t;this.YFt()}Ty(t,s){t=+t,s?this.mFt+=t:this.$U()?this.Yg(this.Vg()+t):this.mFt+=t,this.YFt()}Vg(){if(this.$U()){const t=this.bU(),s=t.Vg();return t.uht().lht()===Number.EPSILON?(this.uht().lht()+s)*this.mFt:s*this.mFt}return this.mFt}jg(t){if(t=+t,this.VU()){const s=this.Kg();0===s?this.gFt=Number.EPSILON:this.gFt*=t/s}else this.gFt=t;this.YFt()}pht(t,s){t=+t,s?this.gFt+=t:this.VU()?this.jg(this.Kg()+t):this.gFt+=t,this.YFt()}Kg(){if(this.VU()){const t=this.bU(),s=t.Kg();return t.uht().fht()===Number.EPSILON?(this.uht().fht()+s)*this.gFt:s*this.gFt}return this.gFt}_A(t,s){if(t=+t,s=+s,this.$U()){const s=this.Vg();0===s?this.mFt=Number.EPSILON:this.mFt*=t/s}else this.mFt=t;if(this.VU()){const t=this.Kg();0===t?this.gFt=Number.EPSILON:this.gFt*=s/t}else this.gFt=s;this.YFt()}Ou(){return[this.Vg(),this.Kg()]}E2(){return this.z_}XFt(t){if(t<0)throw new RangeError("invalid depth");this.z_=t}ZFt(){if(this.OU()){const t=this.EFt;return Math.min(t.WOt(),t.VOt())}return 1}Q$(){return!!(128&this.dxt)}XW(t){t=+t,this.Q$()&&(this.HU()&&(t-=this.bU().ZW()),t=$M.Kn(t),this.Io!==t&&(this.Io=t,this.YFt()))}mht(t){0!=(t=+t)&&this.Q$()&&(this.Io=$M.Kn(this.Io+t),this.YFt())}YFt(){if(this.dxt|=262144,this.r3()){const t=this.o4();for(let s=0,i=t.length;s<i;s++)t[s].YFt()}}ZW(){return this.HU()&&this.Q$()?this.HFt($M.Kn(this.bU().UFt()+this.Io)):this.Io}UFt(){return this.HU()&&this.Q$()?$M.Kn(this.bU().UFt()+this.Io):this.Io}HFt(t){return this.$U()&&this.MU().Vg()<0&&(t=$M.Kn($M.pr(t,this.MU().ZW()+Math.PI))),this.VU()&&this.MU().Kg()<0&&(t=$M.pr(t,this.MU().ZW())),t}KFt(){const t=this.bU();return!!(this.$U()&&t.Vg()<0)||!!(this.VU()&&t.Kg()<0)}QFt(){const t=this.bU();return!!(this.$U()&&t.Vg()<0&&this.VU()&&t.Kg()<0)}tDt(){const t=this.dxt;if(!(262144&t))return;const s=this.ZW();this.yFt=Math.sin(s),this.SFt=Math.cos(s),this.dxt=-262145&t}o_t(){return this.tDt(),this.yFt}h_t(){return this.tDt(),this.SFt}HH(t){this.wFt=+t}Mht(t){this.wFt+=+t}jH(){return this.wFt}zH(t){this.bFt=+t}xht(t){this.bFt+=+t}JH(){return this.bFt}NFt(t){this.RM.equals(t)||(this.RM===YM?(this.RM=$M.Un($M._o,t),this.IFt=$M.Un($M._o,t),this.IFt.Zo()):t.zo(1,1,1,1)?(this.RM=YM,this.IFt=YM):(this.RM.set(t),this.IFt.set(t),this.IFt.Zo()),this.VFt())}eO(t){if(t=$M.Zn(+t,0,1),this.qU()){if(this.uht().G_t()===t)return;this.uht().$Ot(t),t=this.sO()}else if(this.RM.a===t)return;this.sDt(t)}iDt(){if(!this.r3())return;const t=this.o4();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.sDt(i.sO())}}sDt(t){zM.Lo(this.RM),zM.a=t,this.NFt(zM),this.iDt()}Sht(t){this.qU()?this.eO(this.uht().G_t()+t):this.eO(this.sO()+t)}sO(){return this.qU()?this.bU().sO()*this.uht().G_t():this.RM.a}oU(t){this.RM.Uo(t)||(zM.Lo(t),zM.a=this.sO(),this.NFt(zM))}Zrt(t,s,i){zM.Ao(t,s,i),this.oU(zM)}eDt(t,s,i){0===t&&0===s&&0===i||(zM.Lo(this.RM),zM.r+=t,zM.g+=s,zM.b+=i,this.oU(zM))}hU(){return this.RM}EQ(){return this.IFt}KU(){return!!(512&this.dxt)}nDt(t){this.rDt(512,t)}kU(){return!!(1024&this.dxt)}hDt(t){this.rDt(1024,t)}NU(){return!!(2048&this.dxt)}JFt(){return!!(3072&this.dxt)}oDt(t){this.rDt(2048,t)}$U(){return!!(4096&this.dxt)}aDt(t){this.rDt(4096,t)}VU(){return!!(8192&this.dxt)}lDt(t){this.rDt(8192,t)}HU(){return!!(16384&this.dxt)}uDt(t){this.rDt(16384,t)}JU(){return!!(32768&this.dxt)}cDt(t){this.rDt(32768,t)}qU(){return!!(4194304&this.dxt)}fDt(t){this.rDt(4194304,t)}XU(){return!!(8388608&this.dxt)}dDt(t){this.rDt(8388608,t)}pDt(){this.dxt&=-12647937}AU(t,s){if(t===this)return!1;if(t.OU())return!1;if(this.mDt(t))return!1;if(this.gDt(t))return!1;const i=t.UM(),e=t.qM(),n=t.Vg(),r=t.Kg(),h=t.ZW(),o=t.XM(),a=t.sO();t.yDt(this),t.hDt(s.DU),t.oDt(s.LU),t.aDt(s.BU),t.lDt(s.WU),t.uDt(s.jU),t.cDt(s.UU),t.fDt(s.zU),t.dDt(s.YU),t.nDt(s.ZU);const l=i-this.UM(),u=e-this.qM(),c=-this.ZW(),f=Math.cos(c),d=Math.sin(c);if(s.DU&&(s.jU?t.Pa=l*f-u*d:t.Pa=l,s.BU)){const s=this.Vg()/this.EFt.lht();0!==s&&(t.Pa/=s)}if(s.LU&&(s.jU?t.Aa=l*d+u*f:t.Aa=u,s.WU)){const s=this.Kg()/this.EFt.fht();0!==s&&(t.Aa/=s)}if(s.BU){const s=this.Vg();0===s||s===Number.EPSILON?(t.mFt=1,t.EFt.NOt(1)):(t.mFt=n/this.Vg(),t.EFt.NOt(t.mFt))}if(s.WU){const s=this.Kg();0===s||s===Number.EPSILON?(t.gFt=1,t.EFt.BOt(1)):(t.gFt=r/this.Kg(),t.EFt.BOt(t.gFt))}return s.jU&&(t.Io=h-this.ZW()),s.UU&&(t.EM=o-this.XM()),s.zU&&t.EFt.$Ot(a),s.YU&&t.OV(this.DV()),this.SDt(t),this.NH(),this.iDt(),!0}RU(t){if(t.bU()!==this)return;const s=t.UM(),i=t.qM(),e=t.Vg(),n=t.Kg(),r=t.ZW(),h=t.XM(),o=t.sO();t.yDt(null),t.pDt(),t.BH(s,i),t._A(e,n),t.XW(r),t.ZM(h),t.eO(o),this.wDt(t),this.NH()}bDt(){return this.OFt}vDt(){this.MDt();const t=[...this.children()];for(const s of t)this.RU(s);const s=this.bU();s&&s.RU(this),this.pDt()}MDt(){if(this.xDt(),!this.AOt){const t=[...this.children()];t.length&&(this.AOt=[],this.ROt=new WeakMap);let s=0;for(const i of t){const t=i.Vz();this.AOt.push(t),this.ROt.set(t,s),s++}}const t=this.bU();t&&t.MDt()}xDt(){if(-1!==this.OFt)return;const t=[...this.xU()];this.OFt=t.length;for(const s of t)s.xDt();const s=[...this.children()];for(const t of s)t.xDt()}LFt(){this.AOt&&(this.AOt.length=0),this.AOt=null,this.ROt=null;const t=this.bU();t&&t.LFt(),this.OFt=-1}OU(){return null!==this.bU()}bU(){const t=this.EFt;return null!==t?t.bU():null}MU(){let t=this;for(;t.OU();)t=t.bU();return t}*xU(){let t=this.bU();for(;t;)yield t,t=t.bU()}XEt(t){return this.o4().includes(t)}r3(){const t=this.EFt;return null!==t&&t.r3()}o4(){const t=this.EFt;return null!==t?t.o4():QM}children(){return this.o4()}*IU(){for(const t of this.children())yield t,yield*t.IU()}TU(){return this.o4().length}eTt(){return[...this.IU()].length}CU(t){const s=this.o4();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}tOt(t){if(!t)return NaN;const s=this.o4();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}_Dt(t){this.EFt||(this.EFt=$M.Un($M.l4,this)),t&&this.EFt.DOt(t)}uht(){return this.EFt}kFt(){this.EFt&&(this.EFt.Jn(),this.EFt=null)}yDt(t){t?(t._Dt(null),this._Dt(t)):(this.EFt&&this.EFt.DOt(null),this.r3()||this.kFt())}gDt(t){if(!this.OU())return!1;const s=this.bU();return s===t||s.gDt(t)}mDt(t){if(this.XEt(t))return!0;for(const s of this.o4())if(s.mDt(t))return!0;return!1}SDt(t){this.EFt.o4().push(t)}wDt(t){const s=this.EFt.o4(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.OU()||this.kFt(),t.r3()||t.kFt()}iOt(){const t=Ix.get(this);return t?t.$Ft:null}TDt(){const t=Ix.get(this);return t?t.WFt:NaN}n3(){const t=Px.get(this);return $M.te(t)?t:NaN}GDt(t){Px.set(this,t)}CDt(){this.rDt(524288,!0),this.VFt()}VFt(){if(!tx)return;const t=this.Nc.pM();let s;this.PFt&&t.Rb(this.PFt),s=524288&this.dxt?t.cb()||"<point>":t.ab()||"<default>",this.PFt=t.Cb(s,this.cj(),this.IFt,this.XM())}W2(){return this.PFt}A0(){return this.RM===YM}FM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.cj()!==t&&(this.dxt=-2080374785&this.dxt|t<<26,this.VFt())}cj(){return(2080374784&this.dxt)>>26}dB(t,s){const i=s&&this.fFt!==t;i&&this.l0(),this.idt.tEt(this,this.fFt,t),this.fFt=t,i&&this.IDt(),0!==this.XM()&&this.fFt.c0()}lB(){return this.fFt}HN(){return this.lB().HN()}d0(t){this.dFt=0|t}uB(){return this.fFt.G1(),this.dFt}A1(t){this.pFt=0|t}Cq(){return this.fFt.I1(),this.pFt}cK(){return this.dFt}rDt(t,s){s?this.dxt|=t:this.dxt&=~t}DV(){return!!(1&this.dxt)}OV(t){if(this.rDt(1,t),this.r3())for(const s of this.o4())s.XU()&&s.OV(t)}yU(){return!!(8&this.dxt)}SU(t){t=!!t,this.yU()!==t&&(this.rDt(8,t),t?this.NH():this.PDt())}ADt(t,s){if(this.rDt(32,t),this.CFt&&this.CFt.clear(),s.trim()){this.CFt||(this.CFt=new Set);for(const t of s.split(" "))t&&this.CFt.add(t.toLowerCase())}else this.CFt=null}RDt(t){const s=!!(32&this.dxt),i=this.CFt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}NH(){if(this.dxt|=65554,this.idt.ZRt(!0),this.Nc.mB(),this.fFt.HQ()&&(this.QH(this.vFt,this.MFt,!0),this.dxt&=-3,this.IDt()),4&this.dxt&&this.di.Sf().dispatchEvent(JM),null!==this.EFt){const t=this.EFt.o4();for(let s=0,i=t.length;s<i;++s)t[s].NH()}}QH(t,s,i){const e=this.UM(),n=this.qM(),r=this.Vg(),h=this.Kg(),o=this.ZW();t.Ha(e-this.wFt*r,n-this.bFt*h,r,h),i&&this.hJ()&&this.EDt(t),0===o?s.Yl(t):(t.offset(-e,-n),s.Zl(t,this.o_t(),this.h_t()),s.offset(e,n),s.Kl(t)),t.normalize()}ODt(){const t=this.dxt;2&t&&(this.QH(this.vFt,this.MFt,!0),this.dxt=-3&t)}tU(){return this.ODt(),this.vFt}iU(){return this.ODt(),this.MFt}FDt(t){const s=this.UM(),i=this.qM(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(UM.S(t),UM.offset(e,n),UM)}DDt(t){this.vFt.S(t),this.MFt.Yl(this.vFt),this.dxt&=-3,this.QRt(),this.IDt()}kDt(t){this.rDt(4,t)}LDt(){return!!(4&this.dxt)}C2(t,s,i){return s&&0!==this.E2()?this.A2(this.lB().P2()):0===this.XM()||i?t.Ml(this.tU()):this.NDt()}NDt(){const t=this.lB(),s=this.ZH();return!(s>=t.q0())&&(t.J0(s,HM),HM.Ml(this.tU()))}A2(t){const s=this.tU(),i=s.Ka(),e=s.tl(),n=s.Qa(),r=s.sl(),h=this.ZH(),o=h+this.E2();return t.zS(i,n,h,e,r,o)}nU(){const t=this.lB();if(t.o1())return this.A2(t.P2());{const s=t.HN();return this.C2(t.mj(),s.G2(),s._V())}}L2(t){this.rDt(1048576,t)}D2(t){this.rDt(2097152,t)}BDt(){return!!(1048576&this.dxt)}$Dt(){return!!(2097152&this.dxt)}WDt(t){this.TFt=t,this.VDt(),this.hJ()&&(this.FFt.jDt=null)}HDt(){return this.TFt}UDt(){return null!==this.TFt||this.hJ()}JDt(){return this.zDt(this.Vg(),this.Kg(),this.ZW(),this.o_t(),this.h_t())}qDt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.zDt(t,s,i,e,n)}zDt(t,s,i,e,n){let r=this.GFt;null===r&&(r={DFt:$M.Un($M.au),width:NaN,height:NaN,angle:NaN},this.GFt=r);const h=r.DFt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.TFt;if(this.hJ()){const i=this.jH(),r=this.JH(),a=this.oJ();let l=this.FFt.jDt;l||(o?(qM.S(o),qM.offset(i,r)):qM.gu(),l=a.Vx(qM),this.FFt.jDt=l),a.jx(l,h),h.offset(-i,-r),h.bu(t,s,e,n)}else o?(h.S(o),h.bu(t,s,e,n)):h.wu(this.iU(),-this.UM(),-this.qM());return r.width=t,r.height=s,r.angle=i,h}VDt(){this.YDt(!0);const t=this.GFt;null!==t&&(t.width=NaN)}tJ(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.Vz().wW().oW())throw new Error("object does not support mesh");this.iJ(),this.FFt={XDt:$M.Un($M.DS.gx,t,s),ZDt:$M.Un($M.DS.gx,t,s),jDt:null}}hJ(){return null!==this.FFt}oJ(){if(!this.hJ())throw new Error("no mesh");return this.FFt.XDt}KDt(){if(!this.hJ())throw new Error("no mesh");return this.FFt.ZDt}QDt(t){this.rDt(65536,t)}tkt(){return!!(65536&this.dxt)}YDt(t){this.rDt(131072,t)}skt(){return!!(131072&this.dxt)}EDt(t){const s=this.FFt.XDt,i=Math.min(s.Ex(),0),e=Math.min(s.Ox(),0),n=Math.max(s.Fx(),1),r=Math.max(s.Dx(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.al((n-1)*h),t.ll((r-1)*o),this.z_=s.kx()}iJ(){this.FFt&&(this.FFt.XDt.Jn(),this.FFt.ZDt.Jn(),this.FFt=null,this.VDt())}nJ(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!KM.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.ij;let a="number"==typeof i.aJ?i.aJ:n?0:-1,l="number"==typeof i.lJ?i.lJ:n?0:-1;if(!this.hJ())return!1;const u=this.oJ(),c=u.Nx(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.XM()!==o&&(c.ZM(o),f=!0),n&&(r+=t/(u.Cx()-1),h+=s/(u.Ix()-1)),-1!==a||n?(n&&(a+=t/(u.Cx()-1)),a=$M.Zn(a,0,1)):a=c.KM(),-1!==l||n?(n&&(l+=s/(u.Ix()-1)),l=$M.Zn(l,0,1)):l=c.tx(),c.UM()===r&&c.qM()===h&&c.KM()===a&&c.tx()===l?f:(c.JM(r),c.YM(h),c.QM(a),c.sx(l),this.VDt(),!0)}LEt(){return this.di.LEt()}wU(t,s){return!!this.tU()._l(t,s)&&!!this.iU()._l(t,s)&&(this.LEt()?this.di.gJ().wIt(t,s):!this.UDt()||this.JDt()._l(t-this.UM(),s-this.qM()))}ikt(){return!!(16&this.dxt)}QRt(){if(!this.ikt()||!this.yU()||256&this.dxt)return;const t=this.tU(),s=this.idt.XRt(),i=this.xFt;if(HM.set(s.IK(t.Ka()),s.PK(t.Qa()),s.IK(t.tl()),s.PK(t.sl())),i.equals(HM))return;const e=this.di;i===ZM?(s.AK(e,null,HM),this.xFt=$M.Un($M.Rect,HM)):(s.AK(e,i,HM),i.S(HM)),this.dxt&=-17}ekt(){this.dxt|=16}PDt(){const t=this.xFt;t!==ZM&&(this.idt.XRt().AK(this.di,t,null),this.xFt=ZM)}IDt(){const t=this.lB();if(!t.HQ()||256&this.dxt)return;const s=t.E0(),i=this.tU(),e=this._Ft;if(HM.set(s.IK(i.Ka()),s.PK(i.Qa()),s.IK(i.tl()),s.PK(i.sl())),e.equals(HM))return;const n=this.di;e===XM?(s.AK(n,null,HM),this._Ft=$M.Un($M.Rect,HM)):(s.AK(n,e,HM),e.S(HM)),t.O0()}l0(){const t=this._Ft;t!==XM&&(this.lB().E0().AK(this.di,t,null),this._Ft=XM)}C1(){return this._Ft}lU(){const t=this.di,s=this.fFt,i=s.fB();i.length&&i.at(-1)===t||(s.a0(t,!1),s.r0(t,!1),this.Nc.mB())}cU(){const t=this.di,s=this.fFt,i=s.fB();i.length&&i[0]===t||(s.a0(t,!1),s.o0(t,!1),this.Nc.mB())}dU(t){const s=this.di,i=this.fFt;if(i.HN()!==t.HN())throw new Error("layer from different layout");t!==i&&(i.a0(s,!0),this.dB(t),t.r0(s,!0),this.Nc.mB())}mU(t,s){const i=this.di;let e=!1;const n=this.fFt;if(t.$j()===i.$j())return;const r=t.aB();if(!r)throw new Error("expected world instance");const h=r.lB();n.nL()!==h.nL()&&(n.a0(i,!0),this.dB(h),h.r0(i,!0),e=!0);const o=h.O1(i,t,!!s);(e||o)&&this.Nc.mB()}kH(){return this.AFt}nkt(t){this.rDt(64,t)}V1(){return!!(64&this.dxt)}s3(t,s=null){const i={x:this.UM(),y:this.qM(),w:this.Vg(),h:this.Kg(),l:this.lB().G0(),zi:this.uB()};0!==this.XM()&&(i.ze=this.XM()),0!==this.ZW()&&(i.a=this.UFt()),this.A0()||(i.c=this.RM.toJSON()),.5!==this.jH()&&(i.oX=this.jH()),.5!==this.JH()&&(i.oY=this.JH()),0!==this.cj()&&(i.bm=this.cj()),this.DV()||(i.v=this.DV()),this.yU()||(i.ce=this.yU()),this.LDt()&&(i.be=this.LDt()),this.AFt&&(i.fx=this.AFt.s3());const e=!!(32&this.dxt);return e&&(i.sfi=e),this.CFt&&(i.sft=[...this.CFt].join(" ")),this.EFt&&"visual-state"!==t&&(i.sgi=this.EFt.s3(t,s),Ix.has(this)&&(i.sgcd=Ix.get(this).$Ft,i.sgzid=Ix.get(this).WFt)),this.hJ()&&(i.mesh=this.oJ().hx()),i}YOt(){return{x:this.Pa,y:this.Aa,z:this.EM,w:this.mFt,h:this.gFt,a:this.Io,sgi:this.uht()?this.uht().HOt():null}}tFt(t){t&&(this.Pa=t.x,this.Aa=t.y,this.EM=t.z,this.mFt=t.w,this.gFt=t.h,this.Io=t.a,t.sgi&&this.uht()&&this.uht().i3(t.sgi),this.YFt(),this.NH())}lEt(){this.LFt(),this.vDt(),this._Dt(null),this.EFt&&this.EFt.ZOt(this.AOt,this.ROt)}p6(t){"visual-state"!==t&&this.vDt()}g6(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.dxt)return;this.EFt.g6(t.sgi,i)}}bOt(t,s="full",i=null){if("visual-state"!==s)if(256&this.dxt)this.LFt();else{if(t.hasOwnProperty("sgi"))this.EFt.ZOt(null,null,t.sgi,i);else if(i?.HTt&&this.AOt)for(const t of this.AOt)t.Oq()||this.Nc.Oj(t);this.LFt(),this.NH()}}i3(t,s,i=null){if(tx=!1,this.JM(t.x),this.YM(t.y),this.Yg(t.w),this.jg(t.h),this.d0(t.zi),this.ZM(t.hasOwnProperty("ze")?t.ze:0),this.XW(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?zM.Sa(t.c):t.hasOwnProperty("o")?(zM.Lo(this.RM),zM.a=t.o):zM.Po(1,1,1,1),this.NFt(zM),this.HH(t.hasOwnProperty("oX")?t.oX:.5),this.zH(t.hasOwnProperty("oY")?t.oY:.5),this.FM(t.hasOwnProperty("bm")?t.bm:0),this.OV(!t.hasOwnProperty("v")||t.v),this.SU(!t.hasOwnProperty("ce")||t.ce),this.kDt(!!t.hasOwnProperty("be")&&t.be),this.ADt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.AFt&&t.hasOwnProperty("fx")&&this.AFt.i3(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this._Dt(null);const s=this.EFt,i=t.sgi;s.i3(i),s.ZOt(this.AOt,this.ROt),t.sgcd&&$M.te(t.sgzid)&&Ix.set(this,{$Ft:t.sgcd,WFt:t.sgzid})}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.tJ(s.cols,s.rows),this.oJ().ox(s)}else this.iJ();this.NH(),tx=!0,this.VFt(),"visual-state"!==s&&this.Nc.rkt(this.Vz(),t)}}}{const Ax=self.Cs;Ax.WAt=class extends Ax.jn{constructor(t,s){super();const i=t.LB(),e=i.dbt(s[1]);i.hkt().mPt(e),this.Nc=i,this.idt=t,this.zIt=Ax.j$.RJ(e),this.ECt=null,this.okt=null,this.SAt=e.Instance,this.qK=s[2],this.Yn=s[0],this.Zbt=this.Nc.Rmt(s[3]);const n=this.zIt.UMt();if(n<2&&(this.ECt=Ax.Un(e.nRt,this),!(this.ECt instanceof Ax.JIt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Ax.j$.pCt(this,n),n>=2){const t=e.nRt??globalThis.Uq;if(this.okt=new t,!(this.okt instanceof globalThis.Uq))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.okt=new globalThis.PJ;Ax.j$.mCt(n),this.uCt()}static ET(t,s){return Ax.Un(Ax.WAt,t,s)}Jn(){this.Nc=null,this.zIt=null,this.ECt&&(this.ECt.Jn(),this.ECt=null),this.SAt=null}Vxt(){return this.ECt}uCt(){this.ECt?this.ECt.uCt():this.okt&&this.okt.rq()}LB(){return this.Nc}Cj(){return this.idt}xJ(){return this.zIt}GRt(){return this.SAt}Pc(){return this.Yn}G0(){return this.qK}TJ(){return this.okt}Rmt(){return this.Zbt}}}{const Rx=self.Cs,Ex=self.vJ;Rx.MEt=class extends Rx.jn{constructor(t){super(),this.Nc=t.runtime,this.Pvt=t._J,this.zIt=this.Pvt.xJ(),this.di=t.CJ,this.IS=t.index,this.pEt=null,this.mEt=null,this.zIt.r0(this.di)}Jn(){this.mEt&&(this.mEt.Ej(),this.mEt=null),this.zIt.a0(this.di),this.pEt&&(this.pEt.Jn(),this.pEt=null),this.Nc=null,this.Pvt=null,this.zIt=null,this.di=null}vRt(t){if(this.pEt)throw new Error("already got sdk instance");if(this.xJ().UMt()<2){if(this.pEt=Rx.Un(this.Pvt.GRt(),this,t),!(this.pEt instanceof Rx.qIt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.xJ().cCt();this.dCt(s.Instance,t)}}gJ(){return this.pEt??this.mEt}IJ(){return this.di}LB(){return this.Nc}GJ(){return this.Pvt}xJ(){return this.zIt}Lrt(){return this.IS}KIt(){this.pEt?this.pEt.KIt():this.mEt.qq()}iPt(t,s){this.pEt&&this.pEt.iPt(t,s)}wOt(){return this.pEt?this.pEt.QCt():this.mEt._H()}hx(t="full"){return this.pEt?this.pEt.hx(t):this.mEt.TH(t)}ox(t,s="full"){if(this.pEt)return this.pEt.ox(t,s);this.mEt.GH(t,s)}static akt(t,s,i){const e=globalThis.Jq;let n,r;n=s instanceof e?t.uV(s):s.ZIt(),r=i instanceof e?t.uV(i):i.ZIt();const h=n.IJ(),o=r.IJ(),a=h.Cj().nL(),l=o.Cj().nL();if(a!==l)return a-l;const u=h.oOt(),c=o.oOt();return u!==c?u-c:n.Lrt()-r.Lrt()}dCt(t,s){const i=Ex,e=t??this.pEt.cCt(),n=e||i,r=this.xJ().UMt();if(Rx.j$.pCt(this,r),Rx.j$.gPt(s),this.mEt=new n,Rx.j$.yPt(),Rx.j$.mCt(r),e&&!(this.mEt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.mEt}DCt(){return this.mEt||this.dCt()}eIt(){return!!this.mEt}}}{const Ox=self.Cs;Ox.AQ=class extends Ox.jn{constructor(t,s){super(),this.wx=t,this.lkt=[],this.ukt=[],this.ckt=new Map,this.fkt=[],this.dkt=[],this.pkt=new Set,this.eM=!0;for(const t of s){const s=Ox.Un(Ox.mkt,this,t,this.lkt.length);this.lkt.push(s),this.ckt.set(s.Pc().toLowerCase(),s),t.length>=3&&this.fkt.push(this.gkt(s,t[2]))}this.LB().ykt(this)}Jn(){this.LB().Skt(this);for(const t of this.dkt)t.Jn();Ox.bh(this.dkt),Ox.bh(this.lkt),Ox.bh(this.ukt),this.ckt.clear(),Ox.bh(this.fkt),this.wx=null}wkt(t){this.pkt.add(t)}bkt(t){this.pkt.delete(t)}vkt(t){t.sb()&&(this.dkt=this.lkt.map((t=>{const s=t.EG();return s.Mkt()>0?Ox.Un(Ox.DS.xkt,s):null})),this._kt());for(const s of this.pkt)s.vkt(t)}wRt(t){if(t.length){this.lkt=t.concat(this.lkt);for(const s of t)this.ckt.set(s.Pc().toLowerCase(),s);for(let t=0,s=this.lkt.length;t<s;++t)this.lkt[t].v0(t)}}gkt(t,s){t.Tkt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Ox.Un(Ox._o);e.Sa(s),i[t]=e}}return i}Px(){return this.wx}LB(){return this.wx.LB()}FJ(){Ox.bh(this.ukt);let t=!0;for(const s of this.lkt)s.Qyt()&&(this.ukt.push(s),s.EG().bM()||(t=!1));this.eM=t}UW(){return this.lkt}FRt(){return this.lkt.length>0}$nt(t){return this.ckt.get(t.toLowerCase())||null}Gkt(t){if((t=Math.floor(+t))<0||t>=this.lkt.length)throw new RangeError("invalid effect type index");return this.lkt[t]}EJ(t){return this.Gkt(t).Qyt()}OJ(t,s){this.Gkt(t).Tkt(s)}R0(){return this.ukt}V1(){return this.ukt.length>0}bM(){return this.eM}Bnt(t){return this.fkt[t]}FQ(t){return t<this.dkt.length?this.dkt[t]:this.fkt[t]}DJ(t,s){if(t<0||t>=this.fkt.length)return null;const i=this.fkt[t];return s<0||s>=i.length?null:i[s]}kJ(t,s,i){if(t<0||t>=this.fkt.length)return!1;const e=this.fkt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Ox._o){if(n.Uo(i))return!1;n.Lo(i)}else{if(n===i)return!1;e[s]=i}return t<this.dkt.length&&this.dkt[t].Ckt(s,i),!0}_kt(){const t=this.fkt,s=this.dkt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.Ckt(t,n[t])}}static Ikt(t){return t&&t instanceof Ox._o?{t:"color",v:t.toJSON()}:t}static Pkt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=Ox.Un(Ox._o);return s.Sa(t.v),s}throw new Error("invalid effect parameter type")}return t}static Akt(t){return t.map(Ox.AQ.Ikt)}static Rkt(t){return t.map(Ox.AQ.Pkt)}hx(){return this.lkt.map((t=>({name:t.Pc(),active:t.Qyt(),params:Ox.AQ.Akt(this.fkt[t.nL()])})))}ox(t){for(const s of t){const t=this.$nt(s.name);t&&(t.Tkt(s.active),this.fkt[t.nL()]=Ox.AQ.Rkt(s.params))}this.FJ(),this._kt()}}}{const Fx=self.Cs;Fx.mkt=class extends Fx.jn{constructor(t,s,i){super(),this.PQ=t,this.$c=s[0],this.Yn=s[1],this.IS=i,this.IM=null,this.Nf=!0}Jn(){this.PQ=null,this.IM=null}SRt(t){const s=Fx.Un(Fx.mkt,t,[this.$c,this.Yn],-1);return s.IM=this.IM,s.Nf=this.Nf,s}vkt(t){const s=t.ob(this.$c);if(!s)throw new Error("failed to find shader program '"+this.$c+"'");this.IM=s}HW(){return this.PQ}Pc(){return this.Yn}v0(t){this.IS=t}nL(){return this.IS}Px(){return this.PQ.Px()}LB(){return this.PQ.LB()}Tkt(t){this.Nf=!!t}Qyt(){return this.Nf}EG(){return this.IM}Ekt(){const t=[];for(let s=0,i=this.IM.OG();s<i;++s){const i=this.IM.FG(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(Fx.Un(Fx._o,1,1,1,1))}}return t}}}{const Dx=self.Cs;Dx.RFt=class extends Dx.jn{constructor(t,s){super(),this.di=t,this.Okt=s,this.PQ=t.Cj().HW(),this.Fkt=!0,this.kQ=!0,this.Dkt=!1,this.kkt=!1,this.Lkt=!1,this.Nkt=!1,this.tL=Dx.Un(Dx.DS.jF,t.LB().xB().RQ(),{EF:(t,s)=>{const i=s.Jk(),e=i.aB();t.DM(e.EQ()),t.Ub(e.ZH()),i.$x(t),t.Ub(0)},OF:t=>{const s=t.pIt(),[i,e]=t.dIt();return{Nk:s,Bk:i,$k:e}},FF:t=>this.FQ(t)}),this.Bkt=[],this.ukt=[],this.eM=!0,this.fkt=[],this.dkt=[],this.vkt(t.LB().pM());for(let t=0,s=this.PQ.UW().length;t<s;++t)this.Bkt.push(!0);this.FJ(),this.PQ.wkt(this)}Jn(){this.PQ.bkt(this);for(const t of this.dkt)t&&t.Jn();Dx.bh(this.dkt),this.tL.Jn(),this.tL=null,Dx.bh(this.Bkt),Dx.bh(this.ukt),Dx.bh(this.fkt),this.di=null,this.PQ=null}vkt(t){t.sb()&&(this.dkt=this.PQ.UW().map((t=>{const s=t.EG();return s.Mkt()>0?Dx.Un(Dx.DS.xkt,s):null})))}BFt(t){let s=0;for(const i of t)this.fkt.push(this.gkt(s,i)),++s;this._kt(),this.FJ()}gkt(t,s){this.Bkt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Dx.Un(Dx._o);e.Sa(s),i[t]=e}}return i}PEt(){for(const t of this.PQ.UW())this.fkt.push(t.Ekt());this._kt()}Px(){return this.wx}HW(){return this.PQ}eL(){return this.P0(),this.tL}LB(){return this.di.LB()}FJ(){Dx.bh(this.ukt);const t=this.Okt,s=this.PQ.UW(),i=this.ukt,e=this.Bkt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.EG().bM()||(n=!1)}this.eM=n,t.nkt(!!i.length),this.Fkt=!0}P0(){const t=this.di,s=this.Okt,i=s.A0(),e=t.wW().eW(),n=0!==s.ZW()||0!==s.lB().ZW()||s.Vg()<0||s.Kg()<0,r=t.yIt(),h=t.wM();(this.Fkt||i!==this.kQ||e!==this.Dkt||n!==this.kkt||r!==this.Lkt||h!==this.Nkt||this.tL.DD())&&(this.tL.kD(this.ukt.map((t=>t.EG())),{kF:this.ukt.map((t=>t.nL())),LF:!i||h,BF:e,$F:r,WF:n}),this.Fkt=!1,this.kQ=i,this.Dkt=e,this.kkt=n,this.Lkt=r,this.Nkt=h)}R0(){return this.ukt}Bnt(t){return this.fkt[t]}FQ(t){return t<this.dkt.length?this.dkt[t]:this.fkt[t]}DJ(t,s){if(t<0||t>=this.fkt.length)return null;const i=this.fkt[t];return s<0||s>=i.length?null:i[s]}kJ(t,s,i){if(t<0||t>=this.fkt.length)return!1;const e=this.fkt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Dx._o){if(n.Uo(i))return!1;n.Lo(i)}else{if(n===i)return!1;e[s]=i}return t<this.dkt.length&&this.dkt[t].Ckt(s,i),!0}_kt(){const t=this.fkt,s=this.dkt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.Ckt(t,n[t])}}bM(){return this.eM}$kt(){return this.ukt.some((t=>t.EG().xM()))}EJ(t){return this.Bkt[t]}OJ(t,s){this.Bkt[t]=!!s}UW(){return this.PQ.UW()}s3(){return this.PQ.UW().map((t=>({name:t.Pc(),active:this.Bkt[t.nL()],params:Dx.AQ.Akt(this.fkt[t.nL()])})))}i3(t){for(const s of t){const t=this.PQ.$nt(s.name);t&&(this.Bkt[t.nL()]=s.active,this.fkt[t.nL()]=Dx.AQ.Rkt(s.params))}this.FJ(),this._kt()}}}{const kx=self.Cs,Lx=[],Nx=[],Bx=[],$x=kx.Un(kx.au),Wx=kx.Un(kx.au),Vx=kx.Un(kx.Il),jx=kx.Un(kx.Rect),Hx=kx.Un(kx.Rect);let Ux=null,Jx=null,zx=null;kx.Wkt=class extends kx.jn{constructor(t){super(),this.Nc=t,this.Vkt=0,this.jkt=0,this.Hkt=[],this.Ukt=0,this.Jkt=0,this.zkt=0,this.qkt=0,this.Ykt=new self.i$(this)}Jn(){this.Nc=null}LB(){return this.Nc}cL(){return this.Ykt}Xkt(){this.Jkt=this.Ukt,this.Ukt=0,this.qkt=this.zkt,this.zkt=0}Zkt(){return this.Jkt}Kkt(){return this.qkt}Qkt(t,s){const i=t.aB(),e=s.aB();i&&e&&i.yU()&&e.yU()&&this.Hkt.push([t,s])}H_t(t,s,i){for(const[e,n]of this.Hkt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.Q_t(s)&&(i.includes(r)||i.push(r))}}U_t(t,s){if(!this.Hkt.length)return!1;for(const[i,e]of this.Hkt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}tLt(){kx.bh(this.Hkt)}n$(t,s){if(!t||!s||t===s)return!1;const i=t.aB(),e=s.aB();if(!i.yU()||!e.yU())return!1;this.Ukt++;const n=i.lB(),r=e.lB();return n.v1(r)?this.sLt(i,e):this.iLt(i,e)}sLt(t,s){if(!t.tU().Ml(s.tU()))return!1;if(this.zkt++,!t.iU().tu(s.iU()))return!1;if(t.LEt()&&s.LEt())return!1;if(t.LEt())return this.eLt(t,s);if(s.LEt())return this.eLt(s,t);if(!t.UDt()&&!s.UDt())return!0;const i=t.JDt(),e=s.JDt();return i.vu(e,s.UM()-t.UM(),s.qM()-t.qM())}iLt(t,s){const i=t.LEt(),e=s.LEt();if(i&&!e)return this.nLt(t,s);if(e&&!i)return this.nLt(s,t);if(e||i)return!1;{const i=t.lB(),e=s.lB();$x.S(t.JDt()),Wx.S(s.JDt());const n=$x.du();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.wj(r+t.UM(),h+t.qM());n[s]=o,n[e]=a}const r=Wx.du();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.wj(n+s.UM(),h+s.qM());r[t]=o,r[i]=a}return $x.yu(),Wx.yu(),this.zkt++,$x.vu(Wx,0,0)}}nLt(t,s){const i=t.lB(),e=s.lB();Ux||(Ux=kx.Un(kx.au)),Jx||(Jx=kx.Un(kx.Rect)),zx||(zx=kx.Un(kx.Il));const n=s.UM(),r=s.qM(),[h,o]=e.wj(n,r),[a,l]=i.yj(h,o),u=a-n,c=l-r;if(Jx.S(s.tU()),Jx.offset(u,c),!t.tU().Ml(Jx))return!1;if(zx.S(s.iU()),zx.offset(u,c),this.zkt++,!t.iU().tu(zx))return!1;Ux.S(s.JDt());const f=Ux.du();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return Ux.yu(),this.eLt(t,s,a,l,Ux,Jx,zx)}eLt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.tU(),a=t.UM(),l=t.qM(),u=t.Vz().gJ(),c=void 0!==i?i:s.UM(),f=void 0!==e?e:s.qM(),d=s.UDt(),p=void 0!==h?h:s.iU(),m=Nx;u.rLt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.hLt();if(this.Ukt++,o.xl(e,a,l)&&(Vx.Yl(e),Vx.offset(a,l),Vx.tu(p)))if(d){const t=void 0!==n?n:s.JDt();let r=c,h=f;void 0!==n&&(r=s.UM(),h=s.qM());const o=i.oLt();if(o){if(this.zkt++,o.vu(t,r-(a+e.Ka()),h-(l+e.Qa())))return kx.bh(m),!0}else if($x.wu(Vx,0,0),$x.vu(t,r,h))return kx.bh(m),!0}else{const t=i.oLt();if(!t)return kx.bh(m),!0;if($x.wu(p,0,0),t.vu($x,-(a+e.Ka()),-(l+e.Qa())))return kx.bh(m),!0}}return kx.bh(m),!1}aLt(t,s,i){const e=t.EW(),n=this.Nc.UL();if(!n)throw new Error("cannot call outside event");const r=n.Rdt(),h=new kx.lLt;if(e.pdt()){i||(e.vdt(!1),kx.bh(e.Mdt())),r&&kx.bh(e.xdt());for(const n of t.RW()){const t=n.aB(),o=t.lB();let a=!1;if(h.LV(o)&&t.nU()&&(a=s.some((([s,i])=>{const[e,n]=h.yj(o,s,i,t.ZH());return t.wU(e,n)}))),a){if(i)return!1;e.wdt(n)}else r&&e.bdt(n)}}else{let t,o=!1;r&&!n.xwt(this.Nc.Mmt())?this.Nc.zxt()&&!e.xdt().length&&e.Mdt().length?t=e.Mdt():(t=e.xdt(),o=!0):t=e.Mdt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.aB(),c=u.lB();let f=!1;if(h.LV(c)&&u.nU()&&(f=s.some((([t,s])=>{const[i,e]=h.yj(c,t,s,u.ZH());return u.wU(i,e)}))),f){if(i)return!1;o?e.wdt(l):t[a++]=l}else o?t[a++]=l:r&&e.bdt(l)}i||(t.length=a)}return t.nbt(),h.Jn(),!!i||e.mdt()}uLt(t,s){if(!t)return!0;for(const i of s.sEt())if(!t.v1(i))return!1;return!0}Jxt(t,s,i,e){if(s.S0())for(const n of s.XSt())this.uLt(t,n)?(n.KRt(),n.XRt().RK(i,e)):kx.On(e,n.RW());else this.uLt(t,s)?(s.KRt(),s.XRt().RK(i,e)):kx.On(e,s.RW())}p$(t,s,i,e){for(const n of s)this.Jxt(t,n,i,e)}cLt(t,s,i){const e=this.Nc.wPt();e&&this.p$(t,e.B6(),s,i)}fLt(t,s,i){const e=this.Nc.bPt();e&&this.p$(t,e.B6(),s,i)}RDt(t,s){return t.$Et()&&(!s||s.aB().RDt(t.ZMt().get("solidTags")))}o$(t){const s=t.aB();this.cLt(s.lB(),s.tU(),Lx);for(const s of Lx)if(this.RDt(s,t)&&this.n$(t,s))return kx.bh(Lx),s;return kx.bh(Lx),null}dLt(t,s){this.cLt(null,t,Lx);for(const i of Lx)if(this.RDt(i,s)&&this.pLt(t,i))return kx.bh(Lx),i;return kx.bh(Lx),null}mLt(t,s){let i=null;s&&(i=Bx,kx.bh(i));const e=t.aB();this.fLt(e.lB(),e.tU(),Lx);for(const e of Lx)if(e.VEt()&&this.n$(t,e)){if(!s)return kx.bh(Lx),e;i.push(e)}return kx.bh(Lx),i}gLt(t,s,i,e,n){e=e||50;const r=t.aB(),h=r.UM(),o=r.qM();for(let a=0;a<e;++a)if(r.BH(h+s*a,o+i*a),r.NH(),!this.n$(t,n))return!0;return r.BH(h,o),r.NH(),!1}yLt(t,s,i,e,n,r){e=e||50;const h=t.aB(),o=h.UM(),a=h.qM();let l=null,u=null;for(let c=0;c<e;++c)if(h.BH(o+s*c,a+i*c),h.NH(),!this.n$(t,l))if(l=this.o$(t),l)u=l;else if(n&&(l=r?this.n$(t,r)?r:null:this.mLt(t),l&&(u=l)),!l)return u&&this.SLt(t,s,i,u,16,!0),!0;return h.BH(o,a),h.NH(),!1}wLt(t,s,i,e){e=e||50;const n=t.aB(),r=n.UM(),h=n.qM();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(n.BH(r+s*l*u,h+i*l*u),n.NH(),!this.n$(t,o)){if(o=this.o$(t),!o)return a&&this.SLt(t,s*u,i*u,a,16,!0),!0;a=o}}return n.BH(r,h),n.NH(),!1}SLt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const l=t.aB();let u=l.UM(),c=l.qM();for(;h<=n;){const n=1/h;h*=2,l.WH(s*n*(o?1:-1),i*n*(o?1:-1)),l.NH(),this.n$(t,e)||r&&this.o$(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.UM(),c=l.qM())}a&&(l.BH(u,c),l.NH())}bLt(t,s=100){let i=0;const e=t.aB(),n=e.UM(),r=e.qM();let h=0,o=this.o$(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.BH(Math.floor(n+s*i),Math.floor(r+a*i)),e.NH(),!this.n$(t,o)&&(o=this.o$(t),!o))return!0}return e.BH(n,r),e.NH(),!1}vLt(t,s,i,e){const n=t.aB(),r=n.UM(),h=n.qM(),o=Math.max(10,kx.er(s,i,r,h)),a=kx.rr(s,i,r,h),l=e||this.o$(t);if(!l)return kx.Kn(a+Math.PI);let u=l,c=0,f=0;const d=kx.Qn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.BH(s+Math.cos(r)*o,i+Math.sin(r)*o),n.NH(),!this.n$(t,u)&&(u=e?null:this.o$(t),!u)){c=r;break}}for(36===p&&(c=kx.Kn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.BH(s+Math.cos(r)*o,i+Math.sin(r)*o),n.NH(),!this.n$(t,u)&&(u=e?null:this.o$(t),!u)){f=r;break}}if(36===p&&(f=kx.Kn(a+Math.PI)),n.BH(r,h),n.NH(),f===c)return f;const m=kx.hr(f,c)/2;let g;g=kx.lr(f,c)?kx.Kn(c+m+Math.PI):kx.Kn(f+m);const y=Math.cos(a),S=Math.sin(a),w=Math.cos(g),b=Math.sin(g),v=y*w+S*b,M=y-2*v*w,x=S-2*v*b;return kx.rr(0,0,M,x)}MLt(t,s,i,e,n){if(!n)return!1;const r=n.aB();return!!r.yU()&&(this.Ukt++,jx.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.tU().Ml(jx)&&(n.LEt()?this.xLt(t,s,i,e,n,r):(this.zkt++,!!r.iU().Ql(t,s,i,e)&&(!r.UDt()||r.JDt().Ql(r.UM(),r.qM(),t,s,i,e)))))}xLt(t,s,i,e,n,r){const h=r.UM(),o=r.qM(),a=n.gJ(),l=Nx;Hx.set(t,s,i,e),Hx.normalize(),a.rLt(Hx,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.hLt();if(this.Ukt++,jx.xl(a,h,o)&&(Vx.Yl(a),Vx.offset(h,o),Vx.Ql(t,s,i,e))){const n=r.oLt();if(!n)return kx.bh(l),!0;if(this.zkt++,n.Ql(h+a.Ka(),o+a.Qa(),t,s,i,e))return kx.bh(l),!0}}return kx.bh(l),!1}pLt(t,s){if(!s)return!1;const i=s.aB();if(!i.yU())return!1;if(this.Ukt++,!i.tU().Ml(t))return!1;if(s.LEt())return this._Lt(t,s,i);if(this.zkt++,Vx.Yl(t),!i.iU().tu(Vx))return!1;if(!i.UDt())return!0;const e=$x;e.Yl(t,i.UM(),i.qM());const n=i.JDt();return e.vu(n,0,0)}_Lt(t,s,i){const e=i.UM(),n=i.qM(),r=s.gJ(),h=Nx;r.rLt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.hLt();if(this.Ukt++,t.xl(r,e,n)){const s=i.oLt();if(!s)return kx.bh(h),!0;if(this.zkt++,$x.Yl(t,0,0),s.vu($x,-(e+r.Ka()),-(n+r.Qa())))return kx.bh(h),!0}}return kx.bh(h),!1}TLt(t,s){if(!t)return;const i=t.aB();i.yU()&&(this.Ukt++,i.tU().Ml(s.rect)&&(t.LEt()?this.GLt(t,i,s):(this.zkt++,i.UDt()?s.CLt(t,i.UM(),i.qM(),i.JDt()):s.ILt(t,i.iU()))))}GLt(t,s,i){const e=s.UM(),n=s.qM(),r=Nx;t.gJ().rLt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.hLt();if(this.Ukt++,i.rect.xl(a,e,n)){const r=o.oLt();this.zkt++,r?i.CLt(t,e+a.Ka(),n+a.Qa(),r):i.PLt(t,s.UM(),s.qM(),a)}}kx.bh(r)}l$(t,s){if(t===this.Vkt&&s===this.jkt)return;this.Vkt=t,this.jkt=s;const i=this.Nc.y0();for(const e of i)if(e.Y$()){for(const t of e.AW())t.aB().PDt();e.XRt().ALt(t,s),e.ZRt();for(const t of e.AW()){const s=t.aB();s.ekt(),s.QRt()}}}c$(){return[this.Vkt,this.jkt]}RLt(t,s){this.Vkt=t,this.jkt=s}}}{const qx=self.Cs;qx.IAt=class extends qx.jn{constructor(t,s){super(),this._K=t,this.TK=s,this.GK=qx.Un(qx.Cu)}Jn(){this.GK.Jn(),this.GK=null}ALt(t,s){if(!this.GK.Au())throw new Error("grid not empty");this._K=t,this.TK=s}CK(t,s,i){let e=this.GK.Js(t,s);return e||(i?(e=qx.Un(qx.ELt,this,t,s),this.GK.Set(t,s,e),e):null)}IK(t){const s=Math.floor(t/this._K);return isFinite(s)?s:0}PK(t){const s=Math.floor(t/this.TK);return isFinite(s)?s:0}AK(t,s,i){if(s)for(let e=s.Ka(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i._l(e,n))continue;const s=this.CK(e,n,!1);s&&(s.Zf(t),s.Au()&&this.GK.Ru(e,n))}if(i)for(let e=i.Ka(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s._l(e,n)||this.CK(e,n,!0).bK(t)}RK(t,s){let i=this.IK(t.Ka());const e=this.PK(t.Qa()),n=this.IK(t.tl()),r=this.PK(t.sl());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.CK(i,t,!1);e&&e.MK(s)}}}}{const Yx=self.Cs;Yx.ELt=class extends Yx.jn{constructor(t,s,i){super(),this.dK=t,this.Pa=s,this.Aa=i,this.pK=Yx.Un(Yx.Du)}Jn(){this.pK.Jn(),this.pK=null,this.dK=null}Au(){return this.pK.Au()}bK(t){this.pK.Bu(t)}Zf(t){this.pK.Ru(t)}MK(t){Yx.On(t,this.pK.$u())}}}{const Xx=self.Cs,Zx=1e-6,Kx=2;Xx.OLt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Xx.Rect,this.FLt=2,this.DLt=null,this.kLt=0,this.LLt=0,this.NLt=0,this.BLt=0,this.$Lt=0,this.vt=0,this.WLt=1,this.VLt=0,this.jLt=1,this.HLt=0}ULt(){return this.FLt<1.000001}Bf(){this.FLt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.FLt=2,this.DLt=null,this.kLt=0,this.LLt=0,this.NLt=0,this.BLt=0,this.$Lt=0,this.vt=0,this.WLt=1,this.VLt=0,this.jLt=1,this.HLt=0,this}JLt(){if(!1===this.ULt())return;const t=this.dx*this.FLt,s=this.dy*this.FLt,i=Xx.sr(t,s),e=t/i,n=s/i;this.vt=i-Zx,this.BLt=this.x1+e*this.vt,this.$Lt=this.y1+n*this.vt,this.kLt=Math.atan2(this.NLt,this.LLt)+Math.PI/2,this.WLt=Math.cos(this.kLt),this.VLt=Math.sin(this.kLt);const r=e*this.WLt+n*this.VLt;if(this.jLt=e-2*this.WLt*r,this.HLt=n-2*this.VLt*r,r>0){const t=Math.PI;this.kLt=Xx.Kn(this.kLt+t),this.WLt=-this.WLt,this.VLt=-this.VLt}}zLt(t,s,i,e,n){const r=Xx.qr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.FLt&&(this.FLt=r,this.DLt=t.$j(),this.LLt=s-e,this.NLt=i-n)}PLt(t,s,i,e){const n=s+e.Ka(),r=s+e.tl(),h=i+e.Qa(),o=i+e.sl();this.zLt(t,n,h,r,h),this.zLt(t,r,h,r,o),this.zLt(t,r,o,n,o),this.zLt(t,n,o,n,h)}ILt(t,s){const i=s.Br(),e=s.$r(),n=s.Wr(),r=s.Vr(),h=s.jr(),o=s.Hr(),a=s.Ur(),l=s.Jr();this.zLt(t,i,e,n,r),this.zLt(t,n,r,h,o),this.zLt(t,h,o,a,l),this.zLt(t,a,l,i,e)}CLt(t,s,i,e){const n=e.du();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,l=n[h]+s,u=n[h+1]+i;this.zLt(t,o,a,l,u)}}}}{const Qx=self.Cs;Qx.lLt=class{constructor(){this.qLt=new Map}Jn(){for(const t of this.qLt.values())t.YLt.Pu();this.qLt.clear()}XLt(t){let s=this.qLt.get(t);return void 0===s&&(s={kV:null,YLt:new Qx.Cu},this.qLt.set(t,s)),s}LV(t){const s=this.XLt(t);return null===s.kV&&(s.kV=t.jV()),s.kV}yj(t,s,i,e){if(0!==e)return t.yj(s,i,e);const n=this.XLt(t);let r=n.YLt.Js(s,i);return void 0===r&&(r=t.yj(s,i,e),n.YLt.Set(s,i,r)),r}}}{const t_=self.Cs,s_=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),i_=new Set(["high","low"]),e_=self.ls,n_=e_.ds,r_=e_.Ss,h_=n_.create(),o_=300,a_=200,l_=120,u_=8,c_=t_.Un(t_.Il),f_=t_.Un(t_.Rect),d_=3e3,p_=200,m_=300;t_.ZLt=class extends t_.jn{constructor(t){super(),this.Nc=t,this.KLt=[],this.QLt=!1,this.tNt=null,this.sNt=null,this.iNt=null,this.eNt="high-performance",this.nNt=!1,this.rNt="auto",this.hNt=0,this.oNt=0,this.aNt="",this.lNt=0,this.uNt=0,this.cNt=0,this.fNt=0,this.dNt=0,this.pNt=0,this.iw="normalized",this.mNt=0,this.gNt=1,this.yNt=1e4,this.Fw=!0,this.SNt=0,this.pD=0,this.mD=0,this.wNt="letterbox-scale",this.bNt="letterbox-scale",this.vNt=0,this.MNt=0,this.xNt=n_.create(),this._Nt="high",this.TNt=this._Nt,this.GNt=!1,this.CNt=[],this.INt=new Set,this.PNt=self.C3_Shaders,this.ANt=t_.Un(t_.DS.SF,{pF:()=>[this.n2(),this.h2()],mF:()=>this.RNt(),gF:t=>this.ENt(t),getTime:()=>this.LB().fN(),yF:()=>this.LB().mB()}),this.ONt=0,this.FNt=0,this.DNt=NaN,this.kNt=null,this.LNt=new Map,this.NNt=NaN,this.BNt=new Map,this.$Nt="",this.WNt=1,this.VNt=t_.Un(t_.Rect),this.jNt="",this.HNt=null,this.UNt=null,this.JNt=0,this.zNt=0,this.qNt=-1,this.YNt=0,this.XNt=t=>this.YNt=t.progress,this.ZNt=null,this.KNt={QNt:null,tBt:null,sBt:null},this.iBt=0,this.eBt=0,this.nBt=0,this.rBt="fade-in",this.hBt=null,this.oBt=new Promise((t=>this.hBt=t))}aBt(t){this.eNt=t}lBt(t){this.QLt=!!t}uBt(t){this.iw=t}cBt(){return this.iw}fBt(t){this.mNt=t}dBt(t,s){this.gNt=t,this.yNt=s}pBt(t){this.nNt=!!t}mBt(t){this.rNt=t}async co(t){let s=t.canvas;this.KLt.push({canvas:s,gBt:null}),this.Nc.fH("runtime","window-resize",(t=>this.yBt(t))),this.Nc.fH("runtime","fullscreenchange",(t=>this.SBt(t))),this.Nc.fH("runtime","fullscreenerror",(t=>this.wBt(t))),s.addEventListener("webglcontextlost",(t=>this.bBt(t))),s.addEventListener("webglcontextrestored",(t=>this.vBt(t))),this.GNt=!!t.isFullscreen,this.aNt=t.cssDisplayMode;const i=navigator.gpu&&this.QLt;let e=!1;if(i)try{await this.MBt(!0)}catch(t){this.xBt("WebGPU",t),this.sNt=null}if(!this.pM())try{await this._Bt(!0)}catch(t){this.xBt("WebGL",t),this.tNt=null}if(this.pM()||(e=!0),!this.pM()&&i)try{await this.MBt(!1)}catch(t){this.xBt("WebGPU",t),this.sNt=null}if(!this.pM())try{await this._Bt(!1)}catch(t){this.xBt("WebGL",t),this.tNt=null}const n=this.pM();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.Nv(e),this.sNt&&(this.sNt.TBt=()=>this.GBt(),this.sNt.CBt=()=>this.IBt()),"normalized"===this.iw?n.Zw():(n.Kw(),n.Yw(this.mNt)),this._A(t.windowInnerWidth,t.windowInnerHeight,!0),await this.vkt()}xBt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async MBt(t){const s={YS:this.gNt,XS:this.yNt};let i=!0;"no"===this.rNt?i=!1:"auto"===this.rNt&&(i=t_.Ks.hi);const e={powerPreference:this.eNt,depth:this.Nc.h1(),failIfMajorPerformanceCaveat:t,PBt:this.Nc.g2(),ABt:this.Nc.RBt(),OR:this.Nc.EBt(),OBt:i};this.sNt=t_.Un(t_.DS.FBt,s),await this.sNt.ET(this.KLt[0].canvas,e)}async _Bt(t){const s={alpha:!0,powerPreference:this.eNt,ER:"xbox-uwp-webview2"!==this.Nc.b$(),depth:this.Nc.h1(),OR:this.Nc.EBt(),failIfMajorPerformanceCaveat:t,YS:this.gNt,XS:this.yNt};this.nNt&&(s.FR=1),this.tNt=t_.Un(t_.DS.LR,this.KLt[0].canvas,s),await this.tNt.Bw()}async DBt(){if(this.PNt){const t=[];for(const[s,i]of Object.entries(this.PNt)){i.src=i.kBt;const e=t_.DS.LBt.QG();t.push(this.sNt.WE(Object.assign({PT:e,name:s},i)))}await Promise.all(t)}}async NBt(){if(this.PNt){const t=[];for(const[s,i]of Object.entries(this.PNt)){let e;if(i.BBt&&this.tNt.y_()>=2)i.src=i.BBt,e=t_.DS.CT.tC();else{if(!i.$Bt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.$Bt,e=t_.DS.CT.QG()}t.push(this.tNt.WE(Object.assign({PT:e,name:s},i)))}await Promise.all(t),this.tNt.VE(),this.tNt.lb()}this.tNt.sF()&&(this.kNt=t_.Un(t_.DS.MR,this.tNt))}async vkt(){this.sNt?await this.DBt():this.tNt&&await this.NBt();const t=this.pM();t.kv(this.Fw),t.sF()&&(this.DNt=0);for(const s of this.Nc.WBt()){for(const i of s.UW())i.vkt(t);s.vkt(t),s.FJ()}this.iNt=new self.IY(this.Nc,t)}Jn(){this.Nc=null,this.tNt=null,this.KLt.length=0}xL(){return this.Nc.xL()}yBt(t){const s=this.Nc;if(s.VBt())return;const i=t.devicePixelRatio;this.xL()&&(self.devicePixelRatio=i),s.jBt(i),this.GNt=!!t.isFullscreen,this.aNt=t.cssDisplayMode,this._A(t.innerWidth,t.innerHeight),s.mB();const e=new t_.Event("window-resize");e.data=t,s.Sf().If(e);const n=new t_.Event("resize");n.HBt=this.R$(),n.UBt=this.O$(),n.JBt=this.D$(),n.zBt=this.L$(),s.x4(n),s.yH()&&(s.ugt()||self.SH.qBt())&&s.JD()}SBt(t){this.GNt=!!t.isFullscreen,this._A(t.innerWidth,t.innerHeight,!0),this.Nc.mB()}wBt(t){this.GNt=!!t.isFullscreen,this._A(t.innerWidth,t.innerHeight,!0),this.Nc.mB()}_A(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.hNt===t&&this.oNt===s&&!i)return;this.hNt=t,this.oNt=s;const e=this.YBt();"letterbox-scale"===e?this.XBt(t,s):"letterbox-integer-scale"===e?this.ZBt(t,s):"off"===e?this.KBt(t,s):this.QBt(t,s),this.t$t(e);for(const{canvas:t}of this.KLt)t.width=this.cNt,t.height=this.fNt;this.Nc.Wc("canvas","update-size",{marginLeft:this.dNt,marginTop:this.pNt,styleWidth:this.lNt,styleHeight:this.uNt,displayScale:this.Fq()});const n=this.pM();n._A(this.cNt,this.fNt,!0);for(const t of this.CNt)n.YO(t);t_.bh(this.CNt),this.s$t();const r=this.Nc.jN();r.W4(),r.V4()}s$t(){this.pM().tb(this.xNt,this.n2()/this.h2())}o2(){return this.xNt}XBt(t,s){const i=this.Nc.N$(),e=this.Nc.TL(),n=this.Nc.CL(),r=e/n;if(t/s>r){const i=s*r;this.lNt=Math.round(i),this.uNt=s,this.dNt=Math.floor((t-this.lNt)/2),this.pNt=0}else{const i=t/r;this.lNt=t,this.uNt=Math.round(i),this.dNt=0,this.pNt=Math.floor((s-this.uNt)/2)}this.cNt=Math.round(this.lNt*i),this.fNt=Math.round(this.uNt*i),this.Nc.i$t(e,n)}ZBt(t,s){const i=this.Nc.N$();1!==i&&(t+=1,s+=1);const e=this.Nc.TL(),n=this.Nc.CL(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.cNt=Math.round(e*h),this.fNt=Math.round(n*h),this.lNt=this.cNt/i,this.uNt=this.fNt/i,this.dNt=Math.max(Math.floor((t-this.lNt)/2),0),this.pNt=Math.max(Math.floor((s-this.uNt)/2),0),this.Nc.i$t(e,n)}QBt(t,s){const i=this.Nc.N$();this.lNt=t,this.uNt=s,this.cNt=Math.round(this.lNt*i),this.fNt=Math.round(this.uNt*i),this.dNt=0,this.pNt=0;const e=this.Fq();this.Nc.i$t(this.lNt/e,this.uNt/e)}KBt(t,s){const i=this.Nc.N$();this.lNt=this.Nc.Y0(),this.uNt=this.Nc.X0(),this.cNt=Math.round(this.lNt*i),this.fNt=Math.round(this.uNt*i),this.e$t()?(this.dNt=Math.floor((t-this.lNt)/2),this.pNt=Math.floor((s-this.uNt)/2)):(this.dNt=0,this.pNt=0),this.Nc.i$t(this.Nc.Y0(),this.Nc.X0())}t$t(t){if("high"===this._Nt)this.pD=this.cNt,this.mD=this.fNt,this.TNt="high";else{let s,i;if("off"===this.YBt()?(s=this.Nc.Y0(),i=this.Nc.X0()):(s=this.Nc.TL(),i=this.Nc.CL()),this.cNt<s||this.fNt<i)this.pD=this.cNt,this.mD=this.fNt,this.TNt="high";else if(this.pD=s,this.mD=i,this.TNt="low","scale-inner"===t){const t=s/i,e=this.hNt/this.oNt;e<t?this.pD=this.mD*e:e>t&&(this.mD=this.pD/e)}else if("scale-outer"===t){const t=s/i,e=this.hNt/this.oNt;e>t?this.pD=this.mD*e:e<t&&(this.mD=this.pD/e)}}}LB(){return this.Nc}n$t(){return this.KLt[0].canvas}RQ(){return this.ANt}e$t(){return this.GNt}r$t(){return this.aNt}h$t(t){if(!s_.has(t))throw new Error("invalid fullscreen mode");this.wNt=t;const s=this.Nc.jN();s.W4(),s.V4()}Eq(){return this.wNt}o$t(t){if(!s_.has(t))throw new Error("invalid fullscreen mode");this.bNt=t;const s=this.Nc.jN();s.W4(),s.V4()}a$t(){return this.bNt}YBt(){return this.e$t()?this.a$t():this.Eq()}l$t(t){if(!i_.has(t))throw new Error("invalid fullscreen scaling quality");this._Nt=t,this.Nc.jN().W4()}u$t(){return this._Nt}S2(){return this.TNt}static c$t(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}wq(){return this.hNt}bq(){return this.oNt}n2(){return this.pD}h2(){return this.mD}kv(t){this.Fw=!!t}f$t(t){this.SNt=t}oK(){return this.SNt}d$t(){return this.pM().QA()}bBt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.CNt=[],this.INt.clear(),this.ANt.kM(),this.tNt.kM(),this.Nc.x5()}GBt(){console.log("[Construct] WebGPU device lost"),this.CNt=[],this.INt.clear(),this.ANt.kM(),this.Nc.x5()}async vBt(t){await this.tNt.LM(),await this.vkt(),await this.Nc.p$t(),console.log("[Construct] WebGL context restored")}async IBt(){await this.vkt(),await this.Nc.p$t(),console.log("[Construct] WebGPU device restored")}m$t(){return this.tNt}g$t(){return this.sNt}pM(){return this.sNt||this.tNt}TRt(){return this.iNt}x$(){let t="";return t=this.Nc.g$t()?"webgpu":"webgl"+this.Nc.m$t().y_(),this.Nc.pM().Bv()&&(t+="-software"),t}T$(){return this.Nc.g$t()?this.Nc.g$t().y$t():this.Nc.m$t().uF()}Tj(){return"low"===this.TNt?1/this.Nc.N$():this.Fq()}Fq(){const t=this.YBt();if("off"===t||"crop"===t)return 1;const s=this.Nc.TL(),i=this.Nc.CL(),e=s/i,n=this.cNt/this.fNt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.uNt/i:this.lNt/s}U2(){return"low"===this.S2()?1:this.Fq()}j2(){return"low"===this.S2()?1:this.Nc.N$()}S$t(t,s){this.vNt=t,this.MNt=s}dX(t,s,i,e=!0){s=s||this.pD,i=i||this.mD;const n=s/2+this.vNt,r=i/2+this.MNt;if(e){let e=this.o2();s===this.pD&&i===this.mD||(t.tb(h_,s/i),e=h_),t.HE(e)}const h=t.nb(n,r,t.Ww(i),n,r,0,i);t.XE(h)}w$t(t,s=!0){const i=this.R$(),e=this.O$(),n=i/2,r=e/2;s&&t.HE(this.o2());const h=t.nb(n,r,t.Ww(e),n,r,0,e);t.XE(h)}D$(){return this.cNt}L$(){return this.fNt}R$(){return this.lNt}O$(){return this.uNt}C$(){return this.dNt}P$(){return this.pNt}h5(){return this.KLt.length}b$t(){return"undefined"!=typeof OffscreenCanvas&&this.n$t()instanceof OffscreenCanvas&&("Chromium"!==t_.Ks.ni||t_.Ks.ei>=124)}async I5(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.KLt.length===t)return;const i={count:t,layersDomState:this.Nc.jN().$N().T0().filter((t=>t.$V())).map((t=>t.E1())),immediate:s,marginLeft:this.dNt,marginTop:this.pNt,styleWidth:this.lNt,styleHeight:this.uNt};let e;if(e=this.xL()?await this.Nc.yB("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.KLt.length)this.KLt.length=t;else for(const t of e.addedCanvases){t.width=this.cNt,t.height=this.fNt;const s=this.b$t()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.KLt.push({canvas:t,gBt:i})}this.Nc.mB()}w4(t){if(t>=this.KLt.length)return;const s=this.n$t(),i=this.KLt[t].gBt;this.b$t()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}w2(t){t.depth=this.Nc.h1();const s=this.CNt,i=s.findIndex((s=>s.vT(t)));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.pM().HO(t),this.INt.add(e),e}OQ(t){if(!this.INt.has(t))throw new Error("render target not in use");this.INt.delete(t),this.CNt.push(t)}RNt(){const t={Zx:this.Nc.IL()};return"low"===this.S2()&&(t.width=this.n2(),t.height=this.h2()),this.w2(t)}ENt(t){this.OQ(t)}*v$t(){for(const t of this.Nc.jN().L4())for(const s of t.hV()){const t=this.LNt.get(s);t&&(yield t)}}c2(t){if(!this.pM().sF())return null;let s=this.LNt.get(t);return s||(s={LH:t,name:t.Pc(),M$t:t_.Un(t_.DS.MR,this.tNt),x$t:0,_$t:0,T$t:0},this.LNt.set(t,s)),s.M$t}G$t(){const t=this.pM();if(t.sF()&&0===this.FNt){this.FNt=t.Fv(),this.NNt=NaN;for(const t of this.v$t())t.x$t=NaN}}C$t(){this.tNt&&this.tNt.sF()&&this.I$t(),this.sNt&&this.sNt.sF()&&this.P$t()}I$t(){if(isNaN(this.NNt)&&(this.NNt=this.kNt.PR(this.ONt,this.FNt),!isNaN(this.NNt))){if(this.Nc.yH())for(const t of this.v$t())if(t.x$t=t.M$t.PR(this.ONt,this.FNt),isNaN(t.x$t))return;if(this.kNt.AR(this.FNt),this.DNt=Math.min(this.NNt,1),this.Nc.yH()){const t=new Map;for(const s of this.v$t())s.M$t.AR(this.FNt),s._$t=Math.min(s.x$t,1),t.set(s.LH,s._$t);for(const s of this.v$t()){const i=s.LH,e=(t.get(i)||0)-i.PV().reduce(((s,i)=>s+(t.get(i)||0)),0);s.T$t=t_.Zn(e,0,1)}const s=this.Nc.$N(),i=this.DNt-s.T0().reduce(((s,i)=>s+(t.get(i)||0)),0);self.SH.A$t(t_.Zn(i,0,1),this.DNt,[...this.v$t()])}this.ONt=this.FNt,this.FNt=0}}R$t(){return this.kNt}P$t(){if(0===this.FNt)return;for(let t=this.ONt;t<this.FNt;++t){const s=this.BNt.get(t);if(s&&!s.cR())return}const t=this.Nc.$N(),s=t_.xo(t.t5()+1,0);let i=0;for(let t=this.ONt;t<this.FNt;++t){const e=this.BNt.get(t);if(!e)continue;const n=e.fR();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.DNt=t_.Zn(i,0,1),this.Nc.yH()){const i=t.hV(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.RV()].reduce(((t,s)=>t+(e.get(s)||0)),0);r.set(t,i),n.push({name:t.Pc(),T$t:t_.Zn(s,0,1),_$t:t_.Zn(i,0,1)})}const h=this.DNt-t.T0().reduce(((t,s)=>t+(r.get(s)||0)),0);self.SH.A$t(t_.Zn(h,0,1),this.DNt,n)}for(let t=this.ONt;t<this.FNt;++t)this.BNt.delete(t);this.ONt=this.FNt,this.FNt=0}E$t(t){this.BNt.set(this.sNt.Fv(),t)}TN(){return this.DNt}_B(t,s,i,e,n,r){return this.$Nt=t,this.WNt=s,this.VNt.Ha(i,e,n,r),this.HNt||(this.HNt=new Promise((t=>{this.UNt=t}))),this.HNt}O$t(){if(!this.$Nt)return;let t=this.n$t();const s=this.VNt,i=t_.Zn(Math.floor(s.Ka()),0,t.width),e=t_.Zn(Math.floor(s.Qa()),0,t.height);let n=s.width();n=0===n?t.width-i:t_.Zn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:t_.Zn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=t_.co(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}t_.fo(t,this.$Nt,this.WNt).then((t=>{this.jNt&&URL.revokeObjectURL(this.jNt),this.jNt=URL.createObjectURL(t),this.HNt=null,this.UNt(t)})),this.$Nt="",this.WNt=1}F$t(){return this.jNt}D$t(t){t?this.JNt++:this.JNt--}k$t(){return this.JNt>0}L$t(t){const s=this.pM();if(2===t)this.ZNt=t_.Un(t_.DS.Jv,this.pM()),this.ZNt.tA("Arial"),this.ZNt.sA(16),this.ZNt.mA("center"),this.ZNt.yA("center"),this.ZNt._A(300,200);else if(0===t){const t=this.Nc.N$t();t&&t.rX(s).catch((t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t)))}else 4===t&&(this.B$t("splash-images/splash-logo.svg").then((t=>{"done"===this.rBt?s.hT(t):this.KNt.QNt=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.$$t("splash-images/splash-poweredby-512.png").then((t=>{"done"===this.rBt?s.hT(t):this.KNt.tBt=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.$$t("splash-images/splash-website-512.png").then((t=>{"done"===this.rBt?s.hT(t):this.KNt.sBt=t})).catch((t=>console.warn("Failed to load splash image: ",t))))}async B$t(t){t=new URL(t,this.Nc.W$t()).toString();const s=await t_.no(t),i=await this.Nc.V$t(s,2048,2048);return await this.pM().jO(i,{s_:"high"})}async $$t(t){t=new URL(t,this.Nc.W$t()).toString();const s=await t_.no(t);return await this.pM().jO(s,{s_:"high"})}j$t(){this.Nc.Wc("runtime","hide-cordova-splash")}H$t(){this.zNt=Date.now(),this.Nc.Sf().addEventListener("loadingprogress",this.XNt),this.qNt=requestAnimationFrame((()=>this.U$t())),3!==this.Nc.J$t()&&this.j$t()}async z$t(){const t=this.pM();this.YNt=1;const s=this.Nc.J$t();4===s&&await this.oBt,this.hBt=null,this.oBt=null,-1!==this.qNt&&(cancelAnimationFrame(this.qNt),this.qNt=-1),this.Nc.Sf().removeEventListener("loadingprogress",this.XNt),this.XNt=null,this.ZNt&&(this.ZNt.Jn(),this.ZNt=null),this.Nc.q$t(),t.OO(),this.KNt.QNt&&(t.hT(this.KNt.QNt),this.KNt.QNt=null),this.KNt.tBt&&(t.hT(this.KNt.tBt),this.KNt.tBt=null),this.KNt.sBt&&(t.hT(this.KNt.sBt),this.KNt.sBt=null),t.EO(0,0,0,0),t.Ev(),this.rBt="done",this.ONt=t.Fv(),3===s&&this.j$t()}U$t(){if(-1===this.qNt)return;const t=this.pM();t.OO(),this.qNt=-1;const s=this.Nc.lL().RZ(),i=this.Nc.J$t();if(3!==i&&(this.w$t(t),t.EO(0,0,0,0),t.nO(),t.lb(),t.hO(null)),0===i)this.Y$t(s);else if(1===i)this.X$t(s,120,0);else if(2===i)this.Z$t(s);else if(3===i)t_.gh();else{if(4!==i)throw new Error("invalid loader style");this.K$t(s)}t.Ev(),this.qNt=requestAnimationFrame((()=>this.U$t()))}Z$t(t){t?this.ZNt.pA(1,0,0):this.ZNt.pA(.6,.6,.6),this.ZNt.Vc(Math.round(100*this.YNt)+"%");const s=this.lNt/2,i=this.uNt/2;c_.Ll(s-150,i-100,s+150,i+100);const e=this.pM();e.hO(this.ZNt.fT()),e.ev(c_,this.ZNt.sR())}X$t(t,s,i){const e=this.pM();e.gb(),t?e.iO(1,0,0,1):e.iO(.118,.565,1,1);const n=this.lNt/2,r=this.uNt/2,h=s/2;f_.Ha(n-h,r-4+i,Math.floor(s*this.YNt),8),e.Rect(f_),f_.Ha(n-h,r-4+i,s,8),f_.offset(-.5,-.5),f_.cl(.5,.5),e.iO(0,0,0,1),e.av(f_),f_.cl(1,1),e.iO(1,1,1,1),e.av(f_)}Y$t(t){const s=this.pM(),i=this.Nc.N$t();if(!i)return void this.X$t(t,120,0);const e=i.fT();if(!e)return void this.X$t(t,120,0);const n=e.Vg(),r=e.Kg(),h=this.lNt/2,o=this.uNt/2,a=n/2,l=r/2;c_.Ll(h-a,o-l,h+a,o+l),s.hO(e),s.Il(c_),this.X$t(t,n,l+16)}K$t(t){const s=this.pM(),i=this.KNt.QNt,e=this.KNt.tBt,n=this.KNt.sBt,r=Date.now();0===this.iBt&&(this.zNt=r);const h=this.Nc.Q$t()||this.Nc.tWt()&&!this.Nc.sWt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.rBt?l=Math.min((r-this.zNt)/300,1):"fade-out"===this.rBt&&(l=Math.max(1-(r-this.nBt)/300,0)),s.gb(),s.iO(.231*l,.251*l,.271*l,l),f_.set(0,0,this.lNt,this.uNt),s.Rect(f_);const u=Math.ceil(this.lNt),c=Math.ceil(this.uNt);let f,d;this.uNt>256?(s.iO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),f_.Ha(0,.8*c-d/2,f,d),s.Rect(f_),t?s.iO(l,0,0,l):s.iO(.161*l,.953*l,.816*l,l),f=u*this.YNt,f_.Ha(.5*u-f/2,.8*c-d/2,f,d),s.Rect(f_),s.iO(l,l,l,l),s.lb(),e&&(f=1.5*t_.Zn(.22*c,105,.6*u),d=f/8,f_.Ha(.5*u-f/2,.2*c-d/2,f,d),s.hO(e),s.Rect(f_)),i&&(f=Math.min(.395*c,.95*u),d=f,f_.Ha(.5*u-f/2,.485*c-d/2,f,d),s.hO(i),s.Rect(f_)),n&&(f=1.5*t_.Zn(.22*c,105,.6*u),d=f/8,f_.Ha(.5*u-f/2,.868*c-d/2,f,d),s.hO(n),s.Rect(f_))):(s.iO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),f_.Ha(0,.85*c-d/2,f,d),s.Rect(f_),t?s.iO(l,0,0,l):s.iO(.161*l,.953*l,.816*l,l),f=u*this.YNt,f_.Ha(.5*u-f/2,.85*c-d/2,f,d),s.Rect(f_),s.iO(l,l,l,l),s.lb(),i&&(f=.55*c,d=f,f_.Ha(.5*u-f/2,.45*c-d/2,f,d),s.hO(i),s.Rect(f_))),this.iBt++,"fade-in"===this.rBt&&r-this.zNt>=300&&this.iBt>=2&&(this.rBt="wait",this.eBt=r),"wait"===this.rBt&&r-this.eBt>=a&&this.YNt>=1&&(this.rBt="fade-out",this.nBt=r),("fade-out"===this.rBt&&r-this.nBt>=300+o||h&&this.YNt>=1&&r-this.zNt<500)&&this.hBt()}}}{const g_=self.Cs,y_=self.SH,S_=self.assert,w_=self.Jq,b_={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let v_=!0;g_.iWt=class extends g_.jn{constructor(t){t=Object.assign({},b_,t),super(),this.eWt=t.messagePort,this.nWt=t.runtimeBaseUrl,this.rWt=t.previewUrl,this.hWt=!!t.headless,this.oWt=!!t.hasDom,this.aWt=!!t.isInWorker,v_=t.ife,this.lWt=!!t.useAudio,this.uWt=t.exportType,this.cWt=t.isNWjs,this.FX=!!t.isiOSCordova,this.fWt=!!t.isiOSWebView,this.dWt=!!t.isWindowsWebView2,this.pWt=!!t.isAnyWebView2Wrapper,this.mWt=!!t.isFBInstantAvailable,this.gWt=!("preview"!==this.uWt||!t.isDebug),this.yWt=this.gWt,this.SWt=this.gWt,this.wWt=0,this.bWt=[],this.vWt=[],this.MWt=!1,this.xWt="",this._Wt="",this.TWt="",this.GWt="",this.CWt=0,this.IWt=0,this.PWt=0,this.xD=self.devicePixelRatio,this.AWt=0,this.RWt=0,this.EWt=0,this.OWt=0,this.FWt=0,this.DWt=!1,this.yS=!0,this.kWt=!1,this.LWt=!1,this.NWt=!1,this.BWt=null,this.qZ=g_.Un(g_.AX,this,t),this.o3=g_.Un(g_.I4,this),this.Odt=g_.Un(g_.Apt,this),this.$Wt=g_.Un(g_.j$,this,t.wrapperComponentIds),this.WWt=g_.Un(g_.Wkt,this),this.r9=g_.Un(g_.j4,this),this.VWt=g_.Un(g_.Klt,this),this.jWt=g_.Un(g_.tut,this),this.mut=g_.Un(g_.aut,this),this.fS=g_.Un(g_.tS,{eS:t=>this.HWt(t),rS:t=>this.UWt(t)}),this.JWt=new Map,this.zWt=[],this.qWt=new Map,this.YWt=new Map,this.XWt=0,this.ZWt=[],this.KWt=new Set,this.QWt=[],this.tVt=[],this.sVt=new Map,this.iVt=!1,this.eVt=!1,this.nVt=0,this.rVt=0,this.hVt=new Map,this.oVt=new Set,this.aVt=new Set,this.lVt=[],this.uVt=[],this.cVt=null,this.fVt=!1,this.dVt="vsync",this.l_="trilinear",this.pVt=!1,this.mVt=!0,this.gVt=!1,this.yVt=!1,this.SVt=null,this.wVt={bVt:t=>{this.qNt=-1,this.vVt=-1,this.d8(t)},MVt:t=>{this.vVt=-1,this.d8(t,!1,"skip-render")},xVt:()=>{this.qNt=-1,this.JD()}},this.qNt=-1,this.vVt=-1,this._Vt=0,this.TVt=0,this.GVt=!1,this.CVt=!1,this.IVt=!1,this.PVt=!0,this.AVt=!0,this.RVt=!1,this.EVt=0,this.OVt=new g_.Hd(1),this.FVt=()=>Math.random(),this.DVt=0,this.kVt=0,this.LVt=0,this.NVt=0,this.BVt=0,this._Et=1,this.$Vt=1/30,this.WVt=0,this.VVt=g_.Un(g_.Qf),this.jVt=g_.Un(g_.Qf),this.HVt=g_.Un(g_.Qf),this.UVt=new Map,this.JVt=-1,this.zVt=0,this.qVt=0,this.YVt=-1,this.XVt=0,this.ZVt=0,this.KVt=0,this.QVt=!1,this.tjt="",this.sjt=!1,this.ijt="",this.GH=null,this.ejt="",this.njt=null,this.rjt=null,this.GAt=g_.Un(g_.Event.Sf),this.hjt=new Map,this.ojt=new Map,this.ajt=0,this.ljt=!1,this.ujt=!1,this.cjt=!1,this.fjt=[],this.djt={pretick:g_.Un(g_.Event,"pretick",!1),tick:g_.Un(g_.Event,"tick",!1),tick2:g_.Un(g_.Event,"tick2",!1),instancecreate:g_.Un(g_.Event,"instancecreate",!1),instancedestroy:g_.Un(g_.Event,"instancedestroy",!1),beforelayoutchange:g_.Un(g_.Event,"beforelayoutchange",!1),layoutchange:g_.Un(g_.Event,"layoutchange",!1)},this.djt.instancecreate.CJ=null,this.djt.instancedestroy.CJ=null,this.W3=g_.Un(g_.Event.Sf),this.pjt=null;const s=(t,s)=>g_.MEt.akt(this,t,s);this.mjt=g_.Un(g_.ld,s),this.gjt=g_.Un(g_.ld,s),this.yjt=g_.Un(g_.ld,s),this.Sjt=g_.Un(g_.wjt,this,t.jobScheduler),t.canvas&&(this.cVt=g_.Un(g_.ZLt,this)),this.eWt.onmessage=t=>this._OnMessageFromDOM(t.data),this.fH("runtime","visibilitychange",(t=>this.bjt(t))),this.fH("runtime","wrapper-extension-message",(t=>this.vjt(t))),this.fH("runtime","get-remote-preview-status-info",(()=>this.Mjt())),this.fH("runtime","js-invoke-function",(t=>this.nmt(t))),this.fH("runtime","go-to-last-error-script",self.goToLastErrorScript),this.fH("runtime","offline-audio-render-completed",(t=>this.xjt(t))),this.GAt.addEventListener("window-blur",(t=>this._jt(t))),this.GAt.addEventListener("window-focus",(()=>this.Tjt())),this.r9.M6(),this.jWt.M6(),this.Gjt=null,this.Cjt=new WeakMap,this.Ijt={keyboard:null,ZN:null,KN:null,QN:null},this.Pjt=new WeakMap,this.Ajt=[]}static ET(t){return g_.Un(g_.iWt,t)}Jn(){g_.bh(this.zWt),this.qWt.clear(),this.YWt.clear(),this.o3.Jn(),this.o3=null,this.Odt.Jn(),this.Odt=null,this.$Wt.Jn(),this.$Wt=null,this.qZ.Jn(),this.qZ=null,this.WWt.Jn(),this.WWt=null,this.r9.Jn(),this.r9=null,this.VWt.Jn(),this.VWt=null,this.jWt.Jn(),this.jWt=null,this.mut.Jn(),this.mut=null,this.fS.Jn(),this.fS=null,this.cVt&&(this.cVt.Jn(),this.cVt=null),this.GAt.Jn(),this.GAt=null,this.Rjt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.Ejt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.Ojt(t)}}Ejt(t){if(!this.cjt)return void this.fjt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new g_.Event(i);t.data=e,this.GAt.If(t)}if(h){const t=new g_.Event(i,!0);for(const[s,i]of Object.entries(e))t[s]=i;this.x4(t)}}const a=this.hjt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.Fjt(o,!1,""+t))}null!==o&&(u&&u.then?u.then((t=>this.Fjt(o,!0,t))).catch((t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.Fjt(o,!1,""+t)})):this.Fjt(o,!0,u))}Fjt(t,s,i){this.eWt.postMessage({type:"result",responseId:t,isOk:s,result:i})}Ojt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.ojt.get(s);i?n.resolve(e):n.reject(e),this.ojt.delete(s)}fH(t,s,i){let e=this.hjt.get(t);if(e||(e=new Map,this.hjt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Wc(t,s,i,e){this.eWt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}yB(t,s,i,e){const n=this.ajt++,r=new Promise(((t,s)=>{this.ojt.set(n,{resolve:t,reject:s})}));return this.eWt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}eY(t,s,i,e=-1){this.Wc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}nY(t,s,i){const e=this.ajt++,n=new Promise(((t,s)=>{this.ojt.set(e,{resolve:t,reject:s})}));return this.eY(t,s,i,e),n}vjt(t){if(-1!==t.asyncId){const s=t.asyncId;this.ojt.get(s).resolve(t.params),this.ojt.delete(s)}else this.Ejt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}AH(t,s,i){this.fH("wrapper-extension:"+t,s,i)}IH(t){return this.$Wt.IH(t)}Djt(t){if(!this.yH())throw new Error("not in debug mode");this.Wc("runtime","post-to-debugger",t)}async CEt(t){g_.Yxt(this),this.yH()?await y_.CEt(this):self.SH&&self.SH.kjt(this);const s=await this.qZ.eo("data.json");if(await this.Ljt(s),await this.Njt(t),this.Q$t()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.m$t()){const t=this.m$t();console.info(`[C3 runtime] Hosted in ${this.xL()?"worker":"DOM"}, rendering with WebGL ${t.y_()} [${t.uF()}]`)}else this.g$t()&&console.info(`[C3 runtime] Hosted in ${this.xL()?"worker":"DOM"}, rendering with WebGPU [${this.g$t().y$t()}]`);this.pM().Bv()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.cjt=!0;for(const t of this.fjt)this.Ejt(t);g_.bh(this.fjt),this.cVt&&this.cVt.H$t();for(const s of t.runOnStartupFunctions)this.bWt.push(this.Bjt(s));if(await Promise.all([this.qZ.PZ(),...this.bWt]),g_.bh(this.bWt),!this.qZ.RZ())return this.cVt&&await this.cVt.z$t(),await this.GAt.Gf(new g_.Event("beforeruntimestart")),await this.OO(),this.eWt.postMessage({type:"runtime-ready"}),this;this.cVt&&this.cVt.j$t()}async Bjt(t){try{await t(this.Gjt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async Ljt(t){const s=t.project;this.xWt=s[0],this._Wt=s[16],this.TWt=s[31],this.GWt=s[38],this.CWt=s[36];const i=s[39]||"loading-logo.png";this.pVt=!!s[9],this.IWt=this.EWt=s[10],this.PWt=this.OWt=s[11],this.WWt.RLt(this.IWt,this.PWt),this.AWt=this.IWt/2,this.RWt=this.PWt/2,this.dVt=s[37],this.fVt=!!s[40],this.l_=s[14],this.kWt=s[15],this.LWt=s[42],this.NWt=s[17],this.DWt=!!s[18],this.FWt=s[19],this.rVt=s[21],this.gVt=s[22];const e=this.qZ;if(e.hZ(s[45]),e.NZ(s[7],s[25]),e.aZ(s[8]),e.lZ(s[32]),e.cZ(s[28]),e.FZ(s[29]),0===this.FWt){let t="";t="flat"===e.UB()?e.fZ()+i:i,t&&(this.BWt=e.MZ({url:t}))}this.cVt&&(this.cVt.h$t(g_.ZLt.c$t(s[12])),this.cVt.l$t(s[23]?"high":"low"),this.cVt.kv(0!==s[24]),this.cVt.aBt(s[34]),this.cVt.f$t(s[41]),this.cVt.lBt(s[13]),this.cVt.uBt(s[30]),this.cVt.dBt(s[46],s[47]),this.cVt.fBt(s[26]),this.cVt.pBt(s[48]),this.cVt.mBt(s[50]));const n=s[43];n&&await this.$jt(n),this.Wjt(),this.$Wt.cPt(),this.lVt=self.Vjt();const r=s[2];for(const t of r[1])this.$Wt.fPt(t);for(const t of r[0])this.$Wt.uPt(t);this.lVt=self.Vjt(),this.jjt(),this.$Wt.SPt();for(const t of s[3]){const s=g_.rut.ET(this,this.zWt.length,t);this.zWt.push(s),this.qWt.set(s.Pc().toLowerCase(),s),this.YWt.set(s.G0(),s)}for(const t of s[4])this.zWt[t[0]].uRt(t);for(const t of s[27]){const s=t.map((t=>this.zWt[t]));this.ZWt.push(g_.Un(g_.cEt,this,s))}this.Hjt();for(const t of this.zWt)t.fRt();for(const t of s[5])this.o3.ET(t);const h=s[1];if(h){const t=this.o3.R4(h);t&&this.o3.P4(t)}for(const t of s[35])this.VWt.ET(t);for(const t of s[33])this.r9.ET(t);for(const t of s[44])this.jWt.ET(t);this.jWt.eut()||(this.jWt.Jn(),this.jWt=null);for(const t of s[49])this.mut.ET(t);this.mut.fut()||(this.mut.Jn(),this.mut=null);for(const t of s[6])this.Odt.ET(t);this.Odt.omt(),this.Ujt(),g_.bh(this.lVt),this.VW();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Wc("runtime","set-target-orientation",{targetOrientation:o})}async $jt(t){const s=t.format;"image-sequence"===s?this.SVt=new self.Jjt(this,t):"image-sequence-gif"===s?this.SVt=new self.zjt(this,t):"webm"===s?this.SVt=new self.qjt(this,t):"mp4"===s&&(this.SVt=new self.Yjt(this,t)),this.dVt="unlimited-frame",this.cVt.h$t("off"),this.xD=1,self.devicePixelRatio=1,await this.yB("runtime","set-exporting-to-video",{message:this.SVt.Xjt(0),duration:this.SVt.iz()})}J$t(){return this.FWt}VBt(){return null!==this.SVt}Zjt(){return this.SVt.iz()}Kjt(){return this.SVt.Qjt()}tHt(){return this.SVt.CEt({width:this.cVt.D$(),height:this.cVt.L$()})}sHt(){const t=this._Vt/this.Kjt();return this.SVt.iHt(this.cVt.n$t(),t)}eHt(){this.SVt&&this.SVt.$it()}xjt(t){this.SVt.nHt(t)}rHt(){return this.SVt.Ev()}tWt(){return this.mWt}MS(){return this.yS}vB(t){this.bWt.push(t)}A5(t){this.MWt=!!t}hHt(t){this.MWt&&this.vWt.push(t)}k5(){return this.vWt}eRt(){return this.XWt++}pRt(){return this.XWt}ykt(t){this.KWt.add(t)}Skt(t){this.KWt.delete(t)}WBt(){return this.KWt}async Njt(t){this.cVt&&(await this.cVt.co(t),this.cVt.L$t(this.FWt))}async OO(){this.GVt=!0,this.DVt=Date.now();let t=null;const s=new Promise((s=>t=s));if(this.DWt){for(const t of this.zWt)t.S0()||t.xRt()||!t.Y$()||t.uCt();(async()=>{await this.qZ.PZ(),await s,this.yS=!1,this.oHt()})()}else this.yS=!1;this.qZ.AZ(),this.yH()&&y_.aHt(v_);for(const t of this.o3.JN())t.K5();this.VBt()&&await this.tHt();const i=this.o3.A4();await i.p5(null,this.pM()),await i._5(!0),this.zVt=performance.now(),t(),this.DWt||this.oHt(),(await this.yB("runtime","before-start-ticking")).isSuspended&&!this.VBt()?(this.EVt++,this.RVt=!0):this.d8()}oHt(){this.lH(g_.PB.IB.CB.lHt,null,null),this.Wc("runtime","register-sw")}dbt(t){t=Math.floor(t);const s=this.lVt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}jjt(){for(const t of self.uHt){const s=g_.$h(Object.keys(t));this.uVt.push(s)}}Rmt(t){t=Math.floor(t);const s=this.uVt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}cHt(){return this.oWt}fHt(){return this.hWt}xL(){return this.aWt}W$t(){return this.nWt}dHt(){return this.rWt}BL(){return this.Odt}KL(){return this.Odt.KL()}vmt(){return this.Odt.vmt()}UL(){return this.Odt.UL()}Mmt(){return this.Odt.Mmt()}zxt(){return 0===this.vmt().Kdt()}_mt(){return this.Odt._mt()}hkt(){return this.$Wt}OZ(){return this.$Wt.OZ()}qQ(t){if((t=Math.floor(t))<0||t>=this.zWt.length)throw new RangeError("invalid index");return this.zWt[t]}pHt(t){return this.qWt.get(t.toLowerCase())||null}dY(t){return this.YWt.get(t)||null}rrt(t){const s=g_.j$.uW(t);return s?s.pW():null}y0(){return this.zWt}*mHt(){for(const t of this.zWt)t.S0()||(yield*t.vW())}Sf(){return this.GAt}DL(){return this.W3}x4(t){t.runtime=this.H$();const s=this.yH()&&!this.Odt.$W();s&&y_._4(),this.W3.dispatchEvent(t),s&&y_.T4()}H5(t){return t.runtime=this.H$(),this.W3.Gf(t)}TL(){return this.IWt}CL(){return this.PWt}gHt(t,s){if(this.IWt===t&&this.PWt===s)return;this.IWt=t,this.PWt=s;const i=this.jN();i.W4(),i.V4()}Y0(){return this.EWt}X0(){return this.OWt}i$t(t,s){if(this.EWt===t&&this.OWt===s)return;this.EWt=t,this.OWt=s;const i=this.jN();i.W4(),i.V4()}jBt(t){this.VBt()||(this.xD=t)}N$(){return this.xD}Z1(){return this.AWt}K1(){return this.RWt}xB(){return this.cVt}n2(){return this.cVt?this.cVt.n2():this.EWt}h2(){return this.cVt?this.cVt.h2():this.OWt}Tj(){return this.cVt?this.cVt.Tj():1}Fq(){return this.cVt?this.cVt.Fq():1}U2(){return this.cVt?this.cVt.U2():1}j2(){return this.cVt?this.cVt.j2():1}C$(){return this.cVt?this.cVt.C$():0}P$(){return this.cVt?this.cVt.P$():0}yHt(){return this.cVt?this.cVt.R$():0}SHt(){return this.cVt?this.cVt.O$():0}Eq(){return this.cVt?this.cVt.Eq():"off"}w2(t){return this.cVt?this.cVt.w2(t):null}OQ(t){this.cVt&&this.cVt.OQ(t)}g2(){return this.kWt}RBt(){return this.LWt}EBt(){return this.NWt}TN(){return this.cVt?this.cVt.TN():NaN}pT(){return"nearest"!==this.IL()}CN(){return this.dVt}IN(t){this.dVt!==t&&(this.dVt=t,-1===this.qNt&&-1===this.vVt||(this.wHt(),this.bHt()))}IL(){return this.l_}oRt(){return this.DWt}N$t(){return this.BWt}q$t(){this.BWt&&(this.BWt.JP(),this.BWt.Jn(),this.BWt=null)}jN(){return this.o3}$N(){return this.o3.$N()}J9(){return this.r9}vHt(){return this.VWt}eOt(){return this.jWt}kut(){return this.mut}lL(){return this.qZ}MZ(t){return this.qZ.MZ(t)}kW(t,s,i,e,n,r){if(r&&this.jWt){if(t instanceof g_.rut&&t.S0()){const h=t.XSt(),o=Math.floor(this.BN()*h.length);return this.kW(h[o],s,i,e,n,r)}const h=this.jWt.nut(t,r);if(h){const t=this.e0(h,s,!1,i,e,!1,n,void 0,n);return this.jWt.hut(t,r),t}}return this.e0(t,s,!1,i,e,!1,n,void 0,n)}e0(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof g_.rut){if(u=t,u.S0()){const t=u.XSt();u=t[Math.floor(this.BN()*t.length)]}l=u.XQ()}else l=t,u=this.qQ(l[1]);const c=u.wW().Y$();if(this.yS&&c&&!u.xRt())return null;const f=s;let d;c||(s=null),d=i&&!r&&l&&!this.hVt.has(l[2])?l[2]:this.rVt++;const p=l?l[0]:null,m=g_.Un(g_.Instance,{runtime:this,objectType:u,LH:s,GEt:p,AEt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.hVt.set(d,m);let g=null;if(c&&(g=m.aB(),void 0!==e&&void 0!==n&&(g.JM(e),g.YM(n)),u.ZRt(!0)),s&&(a||s.r0(m,!0),s.HN().g5(u)),this.nVt++,u.Nj()&&!i&&!r){const t=new Set;for(const s of u.f5().Y5()){if(s===u)continue;const i=this.MHt(s,g,t);if(i){const t=this.e0(i,f,!1,g?g.UM():e,g?g.qM():n,!0,!1,void 0,a);m.X5(t)}else{const t=this.e0(s,f,!1,g?g.UM():e,g?g.qM():n,!0,!1,void 0,a);m.X5(t)}}for(const t of m.Bj()){t.X5(m);for(const s of m.Bj())t!==s&&t.X5(s)}}if(c&&!i&&h&&this.xHt(m,p,g,s,e,n,a),u.Nj()&&!i&&!r&&h)for(const t of m.Bj()){const i=t.aB();if(!i)continue;const e=t.wW(),n=t.Cj().XQ()[0];e.Y$()?this.xHt(t,n,i,s,i.UM(),i.qM(),a):this.xHt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.MU(),s=e-g.UM()+t.UM(),i=n-g.qM()+t.qM();t.BH(s,i)}u.JRt();const y=l?g_.Oh(l[5]):null,S=l?l[4].map((t=>g_.Oh(t))):null,w=c&&p&&p[13];if(w&&m.kEt(),m.vRt(y,S),w){const t=p[13];m.gJ().CCt(t[2],t[0],t[1])}this.tVt.push(m),this.iVt=!0,this.yH()&&y_._Ht(m);const b=this.djt.instancecreate;return b.CJ=m,this.GAt.dispatchEvent(b),m}eFt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.o3.E4(s).lB(i).QQ(e)}MHt(t,s,i){const e=s?.iOt()??[];for(const s of e){const e=this.eFt(s),n=!!s[4],r=this.qQ(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}xHt(t,s,i,e,n,r,h){const o=i.TDt(),a=i.iOt();if(t.aB().GDt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.o3.E4(i).lB(o).QQ(a);const y=this.qQ(g[1]),S=t.rOt(y),w=l.has(y);if(S&&!w&&d){const s=t.hOt(y);s.aB().CEt(g[0]);const i=n+g[0][0]-u,e=r+g[0][1]-c;s.aB().BH(i,e),s.aB().GDt(p),t.AU(s,{DU:!!(1&f),LU:!!(f>>1&1),BU:!!(f>>2&1),WU:!!(f>>3&1),jU:!!(f>>4&1),ZU:!!(f>>5&1),UU:!!(f>>6&1),zU:!!(f>>7&1),YU:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,i=r+g[0][1]-c,o=this.e0(g,e,!1,s,i,!1,!0,t,h);o.aB().GDt(p),t.AU(o,{DU:!!(1&f),LU:!!(f>>1&1),BU:!!(f>>2&1),WU:!!(f>>3&1),jU:!!(f>>4&1),ZU:!!(f>>5&1),UU:!!(f>>6&1),zU:!!(f>>7&1),YU:!!(f>>8&1)})}}}Oj(t){if(this.oVt.has(t))return;const s=t.Cj();let i=this.sVt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.sVt.set(s,i);if(this.yH()&&y_.THt(t),t.NEt(),this.iVt=!0,t.Nj())for(const s of t.Bj())this.Oj(s);for(const s of t.children())s.KU()&&this.Oj(s);if(!this.o3.WW()&&!this.QVt){const s=this.BL();s.NW(!0),t.gOt(),s.NW(!1)}t.yOt(this.o3.WW())}VW(){this.iVt&&(this.eVt=!0,this.GHt(),this.CHt(),this.eVt=!1,this.iVt=!1,this.mB())}GHt(){for(const t of this.tVt){const s=t.Cj();s.r0(t);for(const i of s.Nmt())i.r0(t),i.JRt()}g_.bh(this.tVt)}CHt(){this.GAt.cf(!0);for(const[t,s]of this.sVt.entries())this.IHt(t,s),s.clear();this.sVt.clear(),this.GAt.cf(!1)}IHt(t,s){for(const t of s){const s=this.djt.instancedestroy;s.CJ=t,this.GAt.dispatchEvent(s),this.hVt.delete(t.$j()),this.UVt.delete(t);const i=t.aB();i&&(i.PDt(),i.l0(),i.NEt()),this.oVt.add(t),this.nVt--}g_.Ah(t.RW(),s),t.JRt(),this.aVt.add(t);for(const i of t.Nmt())g_.Ah(i.RW(),s),i.JRt(),this.aVt.add(i);if(t.wW().Y$()){const t=new Set([...s].map((t=>t.aB().lB())));for(const i of t)i.T1(s)}}qRt(){return this.tVt}*K_t(t){for(const s of this.qRt())t.S0()?s.Cj().qxt(t)&&(yield s):s.Cj()===t&&(yield s)}bRt(){return this.rVt++}MRt(t,s){this.hVt.set(t,s)}aY(t){t=!!t,this.AVt!==t&&(this.AVt=!!t,this.AVt&&this.RVt&&(this.cY(!1),this.RVt=!1))}lY(){return this.AVt}x5(){this.GAt.dispatchEvent(g_.Un(g_.Event,"renderercontextlost")),this.cY(!0);for(const t of this.zWt)!t.S0()&&t._Rt()&&t.v5();const t=this.$N();t&&t.x5(),g_.vPt.hK(),g_._Z.hK()}async p$t(){await this.$N().p5(null,this.pM()),this.GAt.dispatchEvent(g_.Un(g_.Event,"renderercontextrestored")),this.cY(!1),this.mB()}bjt(t){if(!this.AVt)return;const s=t.hidden;this.cY(s),this.RVt=s,s||this.mB()}_jt(t){this.Q$t()&&this.gVt&&!g_.Ks.oi&&(t.data.parentHasFocus||(this.cY(!0),this.yVt=!0))}Tjt(){this.yVt&&(this.cY(!1),this.yVt=!1)}bHt(){const t=this.wVt;"vsync"===this.dVt?-1===this.qNt&&(this.qNt=self.requestAnimationFrame(t.bVt)):"unlimited-tick"===this.dVt?(-1===this.vVt&&(this.vVt=g_.Uh(t.MVt)),-1===this.qNt&&(this.qNt=self.requestAnimationFrame(t.xVt))):-1===this.vVt&&(this.vVt=g_.Uh(t.bVt))}wHt(){-1!==this.qNt&&(self.cancelAnimationFrame(this.qNt),this.qNt=-1),-1!==this.vVt&&(g_.Jh(this.vVt),this.vVt=-1)}hN(){return this.EVt>0}cY(t){if(this.VBt())return;const s=this.hN();this.EVt+=t?1:-1,this.EVt<0&&(this.EVt=0);const i=this.hN();if(!s&&i)console.log("[Construct] Suspending"),this.wHt(),this.GAt.dispatchEvent(g_.Un(g_.Event,"suspend")),this.x4(g_.Un(g_.Event,"suspend")),this.lH(g_.PB.IB.CB.PHt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.kVt=t,this.zVt=t,this.JVt=0,this.qVt=0,this.YVt=0,this.XVt=0,this.KVt=0,this.ZVt=0,this.GAt.dispatchEvent(g_.Un(g_.Event,"resume")),this.x4(g_.Un(g_.Event,"resume")),this.lH(g_.PB.IB.CB.AHt,null,null),this.ugt()||this.d8(t)}}Yq(t){this.mjt.Bu(t)}Qq(t){this.gjt.Bu(t)}Zq(t){this.yjt.Bu(t)}Xq(t){this.mjt.Zf(t)}tY(t){this.gjt.Zf(t)}Kq(t){this.yjt.Zf(t)}RHt(t,s){const i=s?performance.now():0;let e;return t instanceof w_?(e=t.wH(),s&&y_.EHt(t.behavior,performance.now()-i)):(e=t.d8(),s&&y_.EHt(t.xJ(),performance.now()-i)),e}OHt(){const t=this.yH();this.mjt.Vd(!0);for(const s of this.mjt)this.RHt(s,t);this.mjt.Vd(!1)}FHt(t,s){const i=s?performance.now():0;let e;return t instanceof w_?(e=t.iY(),s&&y_.EHt(t.behavior,performance.now()-i)):(e=t.QIt(),s&&y_.EHt(t.xJ(),performance.now()-i)),e}DHt(){const t=this.yH();this.gjt.Vd(!0);for(const s of this.gjt)this.FHt(s,t);this.gjt.Vd(!1)}kHt(t,s){const i=s?performance.now():0;let e;return t instanceof w_?(e=t.MH(),s&&y_.EHt(t.behavior,performance.now()-i)):(e=t.qCt(),s&&y_.EHt(t.xJ(),performance.now()-i)),e}LHt(){const t=this.yH();this.yjt.Vd(!0);for(const s of this.yjt)this.kHt(s,t);this.yjt.Vd(!1)}*NHt(){const t=this.yH();this.mjt.Vd(!0);for(const s of this.mjt){const i=this.RHt(s,t);g_.Mo(i)&&(yield*i)}this.mjt.Vd(!1)}*BHt(){const t=this.yH();this.gjt.Vd(!0);for(const s of this.gjt){const i=this.FHt(s,t);g_.Mo(i)&&(yield*i)}this.gjt.Vd(!1)}*$Ht(){const t=this.yH();this.yjt.Vd(!0);for(const s of this.yjt){const i=this.kHt(s,t);g_.Mo(i)&&(yield*i)}this.yjt.Vd(!1)}async d8(t,s,i){this.IVt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.jN(),h=this.xB();if(!this.GVt||this.hN()&&!s&&!e)return;const o=performance.now();this.CVt=!0,this.WHt(t||0),this.YVt++,this.VHt();const a=this.jHt();this.z_t()&&await a;const l=this.GAt.Cf(this.djt.pretick);l instanceof Promise&&await l,this.x4(this.pjt.pretick);const u=this.HHt();this.z_t()&&await u,this.UHt()&&await this.JHt(),r.qN()&&await this.zHt();const c=this.qHt();this.z_t()&&await c;const f=r.$N(),d=f.o5();let p=!1;if(-1!==d&&(f.a5(),h.h5()!==d)){const t=this.xB().I5(d);this.xL()&&(p=!0,await t)}this.Wc("canvas","update-html-layer-dom-state",{layersDomState:f.T0().filter((t=>t.$V())).map((t=>t.E1()))}),n&&this.JD(),p&&this.Wc("canvas","cleanup-html-layers"),this.VBt()&&(await this.sHt(),this.fN()>=this.Zjt())?this.rHt():(this.hN()||e||this.bHt(),this._Vt++,this.TVt++,this.CVt=!1,this.ZVt+=performance.now()-o)}async jHt(){const t=this.Odt,s=this.yH();this.VW(),t.NW(!0),this.Kmt(this.$N()),s&&y_.YHt(),this.z_t()?await t.Rgt():t.Ggt(),s&&y_.XHt(),this.Qmt(),t.NW(!1),this.VW(),t.NW(!0)}async HHt(){const t=this.Odt,s=this.yH(),i=this.z_t(),e=this.GAt,n=this.djt,r=this.pjt;s&&y_.YHt(),i?await this.ZHt(this.NHt()):this.OHt(),i?await this.ZHt(this.BHt()):this.DHt(),s&&y_.KHt(),s&&y_.YHt(),i?await this.QHt(n.tick):e.dispatchEvent(n.tick),s&&y_.tUt(),t.NW(!1),this.x4(r.tick)}async qHt(){const t=this.Odt,s=this.GAt,i=this.djt,e=this.pjt,n=this.yH(),r=this.z_t();n&&y_.YHt(),r?await t.tgt(this.o3):t.Zmt(this.o3),n&&y_.XHt(),this.WWt.tLt(),this.VHt(),this.PVt=!1,t.NW(!0),n&&y_.YHt(),r?await this.ZHt(this.$Ht()):this.LHt(),n&&y_.KHt(),n&&y_.YHt(),r?await this.QHt(i.tick2):s.dispatchEvent(i.tick2),n&&y_.tUt(),t.NW(!1),this.x4(e.tick2),r&&await t.cgt(),this.VW(),this.VHt()}VHt(){if(0===this.oVt.size)return;const t=this.GAt;t.cf(!0);for(const t of this.aVt)t.bgt().ldt(this.oVt);this.aVt.clear(),this.Odt.Ogt(this.oVt);for(const t of this.oVt)t.Jn();this.oVt.clear(),t.cf(!1)}async zHt(){const t=this.jN();let s=0;for(;t.qN()&&s++<10;)await this.sUt(t.B4())}WHt(t){let s=0;this.VBt()?(s=1/this.Kjt(),this.LVt=s,this.NVt=s):0!==this.kVt&&(s=Math.max(t-this.kVt,0)/1e3,s>.5&&(s=0),this.LVt=s,this.NVt=g_.Zn(s,this.WVt,this.$Vt)),this.kVt=t,this.BVt=this.NVt*this._Et,this.VVt.Bu(this.BVt),this.jVt.Bu(s*this._Et),this.HVt.Bu(this.NVt);for(const[t,s]of this.UVt)s.Bu(this.NVt*t.gN());this.cVt&&this.cVt.C$t(),t-this.zVt>=1e3&&(this.zVt+=1e3,t-this.zVt>=1e3&&(this.zVt=t),this.qVt=this.JVt,this.JVt=0,this.XVt=this.YVt,this.YVt=0,this.KVt=Math.min(this.ZVt/1e3,1),this.ZVt=0,this.cVt&&this.cVt.G$t(),this.WWt.Xkt(),this.yH()&&y_.iUt())}FEt(t,s){if(s){if(!this.UVt.has(t)){const s=g_.Un(g_.Qf);s.rd(this.VVt),this.UVt.set(t,s)}}else this.UVt.delete(t)}DEt(t){const s=this.UVt.get(t);return s?s.Js():this.fN()}async sUt(t){const s=this.GAt,i=this.jN().$N();await i.t4(),i.M5(t,this.pM()),i===t&&this.Odt.e4(),this.WWt.tLt(),this.VHt(),s.dispatchEvent(this.djt.beforelayoutchange),g_.df.Af(!0),await t.p5(i,this.pM()),g_.df.Af(!1),await t._5(!1),s.dispatchEvent(this.djt.layoutchange),this.mB(),this.PVt=!0,this.VW(),this.eHt()}mB(){this.mVt=!0}m$t(){return this.cVt?this.cVt.m$t():null}g$t(){return this.cVt?this.cVt.g$t():null}pM(){return this.cVt?this.cVt.pM():null}JD(){const t=this.cVt;if(!t||t.d$t())return;const s=this.pM(),i=s.sF(),e=i&&s.$v(),n=i&&s.sb();if(e&&s.WO(),!this.mVt&&!this.VBt())return void s.Dv();const r=this.o3.$N();this.JVt++,s.OO();const h=this.yH();h&&y_.YHt(),this.mVt=!1;let o=null;e&&(o=t.R$t().CR(),s.tF(o));let a=null;n&&(a=s.eUt(2*(1+r.t5())),s.d2(0,1)),this.h1()&&"low"===t.S2()?s.JE(t.n2(),t.h2()):s.zE(),this.nUt(this.pM(),r),o&&s.iF(o),n&&(s.rUt(),this.cVt.E$t(a)),s.Ev(),h&&(y_.hUt(),y_.oUt()),t&&t.O$t()}d4(t){return"low"===this.xB().S2()||t.$v()&&(this.g2()||this.h1())}nUt(t,s){t.lb(),t.uO(),t.iO(1,1,1,1),t.UO(null),t.hO(null),t.DO(this.h1()),this.d4(t)&&s.c4(t);const i=s.h5();for(let e=1;e<i;++e)s.S4(t,e),t.sb()&&t.aUt();this.d4(t)||s.c4(t),s.y4(t)}lH(t,s,i){if(!this.GVt)return!1;const e=!this.CVt&&!this.Odt.mgt();let n=0;e&&(n=performance.now());const r=this.yH();r&&this.wY(!1);const h=this.Odt.ngt(this.o3,t,s,i);if(e){const t=performance.now()-n;this.ZVt+=t,r&&y_.lUt(t)}return r&&this.wY(!0),h}kCt(t,s,i){if(!this.z_t())return this.lH(t,s,i);if(this.ugt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.CVt&&!this.Odt.mgt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.Odt.ogt(this.o3,t,s,i)}async TB(t,s,i){if(!this.z_t())return this.lH(t,s,i);if(!this.GVt)return!1;if(this.ugt())return this.Odt.agt(t,s,i);if(!this.$N())return this.Odt.rgt(t,s,i);const e=performance.now(),n=this.Odt.ogt(this.o3,t,s,i);let r=n.next();for(;!r.done;)await this.igt(r.value),r=n.next();return this.hN()||this.Odt.mgt()||(await this.Odt.cgt(),this.IVt&&!this.CVt&&this.bHt()),this.ZVt+=performance.now()-e,r.value}LCt(t,s,i){const e=this.yH();e&&this.wY(!1);const n=this.Odt.fgt(this.o3,t,s,i);return e&&this.wY(!0),n}NCt(t,s,i){return this.Odt.dgt(this.o3,t,s,i)}BCt(t){return this.OVt.Bu(t)}Kmt(t){this.QWt.push(t)}Qmt(){if(!this.QWt.length)throw new Error("layout stack empty");this.QWt.pop()}hB(){return this.QWt.length?this.QWt.at(-1):this.$N()}aN(t){return t&&-1!==t.gN()?this.NVt*t.gN():this.BVt}c8(){return this.BVt}f8(){return this.NVt}uN(){return this.LVt}gN(){return this._Et}yN(t){(isNaN(t)||t<0)&&(t=0),this._Et=t}RN(t){this.WVt=Math.max(t,0)}AN(){return this.WVt}FN(t){this.$Vt=Math.max(t,0)}ON(){return this.$Vt}wN(){return this.qVt}vN(){return this.XVt}xN(){return this.KVt}uUt(){return this.DVt}fN(){return this.VVt.Js()}cUt(){return this.jVt.Js()}pN(){return this.HVt.Js()}Mtt(){return this._Vt}fUt(){return this.TVt}dUt(){return this.nVt}gL(){return this.xWt}SL(){return this._Wt}pUt(){return this.TWt}mUt(){return this.GWt}bL(){return this.CWt}eB(t){if(this.QVt)throw new Error("cannot call while loading state - wait until afterload event");return this.hVt.get(t)||null}KOt(t){if(this.QVt)throw new Error("cannot call while loading state - wait until afterload event");this.hVt.delete(t)}q5(){this.hVt.clear();for(const t of this.zWt)if(!t.S0())for(const s of t.RW())this.hVt.set(s.$j(),s)}Q$t(){return"preview"===this.uWt}yH(){return this.gWt}b$(){return this.uWt}v$(){return"nwjs"===this.b$()||this.cWt}sWt(){return"cordova"===this.uWt}gUt(){return"Android"===g_.Ks.Qs&&("cordova"===this.uWt||"playable-ad-single-file"===this.uWt||"playable-ad-zip"===this.uWt||"instant-games"===this.uWt)}yUt(){return this.FX}SUt(){return this.fWt}M$(){return this.dWt}wUt(){return this.pWt}fL(){return this.WWt}wPt(){return this.$Wt.wPt()}bPt(){return this.$Wt.bPt()}h1(){return this.fVt}bUt(){return this.pM().Hw(this.X0())}Ww(t){return this.pM().Ww(t||this.X0())}vUt(){return this.PVt}MUt(t){t=!!t,this.pVt!==t&&(this.pVt=t,this.jN().V4(),this.mB())}AL(){return this.pVt}xUt(t){if(!this.JWt.has(t)){const s=()=>this._Ut(t);this.JWt.set(t,s),t.Sf().addEventListener("animationframeimagechange",s)}const s=this.fS.hS(t);return s.vS()||s.xS().then((()=>this.mB())),s}_Ut(t){this.fS.uS(t)}HWt(t){const s=[];for(const i of t.kRt())for(const t of i.YJ()){const i=t.sz();s.push({source:t,width:i.Vg(),height:i.Kg(),tag:t.mz()})}return{wS:s}}async UWt(t){const s=g_.Un(g_.Hd),i=[],e=new Map;for(const n of t.kRt())for(const t of n.YJ()){const n=t.sz().WPt();e.has(n)||(e.set(n,null),i.push(s.Bu((async()=>{const t=await n.uK();e.set(n,t)}))))}await Promise.all(i);const n=[];for(const i of t.kRt())for(const t of i.YJ())n.push(s.Bu((async()=>{const s=t.sz(),i=e.get(s.WPt()),n=await s.VPt(i);return{TS:await createImageBitmap(n)}})));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{wS:r}}TUt(t){this.tjt=t,this.sjt=!1}GUt(){this.tjt="",this.sjt=!0}CUt(t){this.ijt=t}WTt(t){this.GH=t}IUt(){return this.ejt}UHt(){return!!(this.tjt||this.sjt||this.ijt||null!==this.GH)}async JHt(){if(this.tjt&&(this.VW(),await this.PUt(this.tjt),this.AUt()),this.ijt&&(await this.RUt(this.ijt),this.AUt(),this.yH()&&y_.EUt()),this.sjt){const t=await this.OUt();this.ejt=t,await this.TB(g_.PB.IB.CB.FUt,null),this.ejt="",this.AUt()}if(null!==this.GH){this.VW();try{await this.DUt(this.GH),this.ejt=this.GH,await this.TB(g_.PB.IB.CB.kUt,null),this.ejt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.TB(g_.PB.IB.CB.LUt,null)}this.AUt()}}AUt(){this.tjt="",this.sjt=!1,this.ijt="",this.GH=null}$$(){return this.njt||(this.njt=localforage.Gi({name:"c3-localstorage-"+this.pUt(),description:this.gL()})),this.njt}NUt(){return this.rjt||(this.rjt=localforage.Gi({name:"c3-savegames-"+this.pUt(),description:this.gL()})),this.rjt}async PUt(t){const s=await this.OUt();try{await this.NUt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.ejt=s,await this.TB(g_.PB.IB.CB.FUt,null),this.ejt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.TB(g_.PB.IB.CB.BUt,null)}}async RUt(t){try{const s=await this.NUt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.DUt(s),this.ejt=s,await this.TB(g_.PB.IB.CB.kUt,null),this.ejt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.TB(g_.PB.IB.CB.LUt,null)}}async OUt(){const t={c3save:!0,version:1,rt:{time:this.fN(),timeRaw:this.cUt(),walltime:this.pN(),timescale:this.gN(),tickcount:this.Mtt(),next_uid:this.rVt,running_layout:this.$N().G0(),start_time_offset:Date.now()-this.DVt},types:{},layouts:{},events:this.Odt.s3(),timelines:this.r9.s3(),user_script_data:null};for(const s of this.zWt)s.S0()||s.nEt()||(t.types[s.G0().toString()]=s.s3());for(const s of this.o3.JN())t.layouts[s.G0().toString()]=s.s3();const s=this.$Ut("save");return s.saveData=null,await this.H5(s),t.user_script_data=s.saveData,JSON.stringify(t)}L5(){return this.QVt}async DUt(t){const s=this.jN(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.VTt(),this.GAt.dispatchEvent(g_.Un(g_.Event,"beforeload"));for(const t of this.mHt())t.Cj().nEt()||t.p6();const e=i.rt;this.VVt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.jVt.Set(e.timeRaw),this.HVt.Set(e.walltime),this._Et=e.timescale,this._Vt=e.tickcount,this.DVt=Date.now()-e.start_time_offset;const n=e.running_layout;this.QVt=!0;let r=!1;if(n!==this.$N().G0()){const t=s.E4(n);if(!t)return;await this.sUt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.E4(i);n&&n.i3(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.dY(i);!e||e.S0()||e.nEt()||e.i3(s,h)}for(const t of this.o3.JN())for(const s of t.oV())s.e3();if(this.VW(),this.q5(),this.QVt=!1,r){for(const t of this.mHt())t.N5();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.dY(i);!e||e.S0()||e.nEt()||e.lEt(s)}}this.rVt=e.next_uid,this.Odt.i3(i.events);for(const t of this.zWt)if(!t.S0()&&t.Nj())for(const s of t.RW()){const i=s.Vj();s.nOt();for(const e of t.f5().Y5()){if(e===t)continue;const n=e.RW();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.X5(n[i])}}this.r9.i3(i.timelines),s.W4(),s.V4();for(const t of h)t.mOt();this.jTt(),this.GAt.dispatchEvent(g_.Un(g_.Event,"afterload")),this.x4(this.$Ut("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.dY(s);i&&i.aEt()}const o=this.$Ut("load");o.saveData=i.user_script_data,await this.H5(o),this.mB()}WUt(t,s){return s.aB().bDt()-t.aB().bDt()}rkt(t,s){t.aB()&&(this.Pjt.has(t)||(this.Pjt.set(t,s),this.Ajt.push(t)))}VTt(){this.Pjt=new WeakMap,g_.bh(this.Ajt)}jTt(t="full",s=null){this.Ajt.sort(this.WUt);const i=this.Ajt.length;for(const i of this.Ajt)i.g6(this.Pjt.get(i),t,s);for(const i of this.Ajt)i.bOt(this.Pjt.get(i),t,s);if(this.VTt(),i){this.VW(),this.q5();for(const t of this.o3.JN())for(const s of t.oV())s.f0(),s.pB()}}async VUt(t){const s=await Promise.all(t.map((async t=>{if(this.sWt()&&this.qZ.dZ()||"playable-ad-single-file"===this.b$()){const s=await this.qZ.no(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()})));this.Sjt.jUt(s)}HUt(t,s){this.Sjt.UUt(t,s)}JUt(t,s){this.Sjt.zUt(t,s)}qUt(t,s,i,e){return this.Sjt.qUt(t,s,i,null,null,e)}YUt(t,s,i,e){return this.Sjt.YUt(t,s,i,e)}XUt(){return this.Sjt.ZUt()}sB(t,s){this.Wc("runtime","invoke-download",{url:t,filename:s})}async V$t(t,s,i,e,n,r){if(e=e||s,n=n||i,this.xL())return(await this.yB("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async KUt(t){return this.xL()?await this.yB("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}QUt(){this.ljt||(this.ljt=!0,this.Wc("runtime","enable-device-orientation"))}tJt(){this.ujt||(this.ujt=!0,this.Wc("runtime","enable-device-motion"))}BN(){return this.FVt()}sJt(t){this.FVt=t}Mjt(){const t=this.pM();return{fps:this.wN(),tps:this.vN(),cpu:this.xN(),gpu:this.TN(),layout:this.$N()?this.$N().Pc():"",renderer:t.$v()?t.uF():t.y$t()}}ugt(){return!!this.yH()&&y_.ugt()}igt(t){return this.z_t()?y_.igt(t):Promise.resolve()}Nwt(){return!!this.z_t()&&y_.iJt()}eJt(t){this.yWt=!!t,this.nJt()}rJt(){return this.yWt}z_t(){return this.SWt}wY(t){t?this.wWt--:this.wWt++,this.nJt()}nJt(){this.SWt=this.yH()&&this.yWt&&0===this.wWt}iSt(){return this.yH()&&y_.iSt()}u2(){return this.yH()&&this.pM().sF()&&y_.u2()}async ZHt(t){if(t)for(const s of t)await this.igt(s)}QHt(t){return this.ZHt(this.GAt.Pf(t))}nmt(t){return this.Odt.nmt(t.name,t.params)}wB(t){if(this.xL())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}H$(){return this.Gjt}$Ut(t){const s=g_.Un(g_.Event,t,!1);return s.runtime=this.Gjt,s}Wjt(){this.Gjt=new self.hL(this),this.pjt={pretick:this.$Ut("pretick"),tick:this.$Ut("tick"),tick2:this.$Ut("tick2")}}Hjt(){const t={};for(const s of this.zWt)t[s.Rmt()]={value:s.dW(),enumerable:!0,writable:!1};this.Gjt.kL(t)}Ujt(){const t={};for(const s of this.BL().Bmt())t[s.Rmt()]=s.Emt();this.Gjt.LL(t)}XN(){return this.Ijt}aW(t,s){this.Cjt.set(t,s)}uV(t){return this.Cjt.get(t)}d$(t){if(!(t instanceof self.yW))throw new TypeError("expected IObjectClass");const s=this.uV(t);if(!(s&&s instanceof g_.rut))throw new Error("invalid IObjectClass");return s}IW(t){if(!(t instanceof self.Gj))throw new TypeError("expected IInstance");const s=this.uV(t);if(!(s&&s instanceof g_.Instance))throw new Error("invalid IInstance");return s}oB(t){if(!(t instanceof self.cJ))throw new TypeError("expected IWorldInstance");const s=this.uV(t);if(!(s&&s instanceof g_.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=g_.iWt.ET,self.C3_InitRuntime=(t,s)=>t.CEt(s)}{const M_=self.Cs;M_.wjt=class extends M_.jn{constructor(t,s){super(),this.Nc=t,this.hJt=new Map,this.oJt=0,this.aJt=s.inputPort,s.outputPort.onmessage=t=>this.lJt(t),this.uJt=s.maxNumWorkers,this.cJt=1,this.fJt=!1,this.dJt=!1}ZUt(){return this.uJt}jUt(t){this.aJt.postMessage({type:"_import_scripts",scripts:t})}UUt(t,s){this.aJt.postMessage({type:"_send_blob",blob:t,id:s})}zUt(t,s){this.aJt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}qUt(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.oJt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise(((t,s)=>{this.hJt.set(h,{resolve:t,progress:e,reject:s,pJt:!1,mJt:r})}));return n&&n.Yf((()=>this.gJt(h))),this.aJt.postMessage(o,i),this.yJt(),a}YUt(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.oJt++,params:s,transferables:i};this.aJt.postMessage(n,i)}gJt(t){const s=this.hJt.get(t);s&&(s.pJt=!0,s.resolve=null,s.progress=null,s.reject=null,this.aJt.postMessage({type:"_cancel",jobId:t}))}lJt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.SJt(e,s.result);break;case"progress":this.wJt(e,s.progress);break;case"error":this.bJt(e,s.error);break;case"ready":this.vJt();break;default:throw new Error(`unknown message from worker '${i}'`)}}SJt(t,s){const i=this.hJt.get(t);if(!i)throw new Error("invalid job ID");i.pJt||i.resolve(s),this.hJt.delete(t)}wJt(t,s){const i=this.hJt.get(t);if(!i)throw new Error("invalid job ID");!i.pJt&&i.progress&&i.progress(s)}bJt(t,s){const i=this.hJt.get(t);if(!i)throw new Error("invalid job ID");i.pJt||i.reject(s),this.hJt.delete(t)}vJt(){this.fJt&&(this.fJt=!1,this.cJt++,this.cJt<this.uJt?this.yJt():this.aJt.postMessage({type:"_no_more_workers"}))}MJt(){let t=0;const s=[...this.hJt.values()].sort(((t,s)=>(t.mJt||1/0)-(s.mJt||1/0)));for(const i of s)t<(i.mJt||1/0)&&t++;return t}async yJt(){if(!(this.cJt>=this.uJt||this.fJt||this.dJt||this.MJt()<=this.cJt))try{this.fJt=!0,(await this.Nc.yB("runtime","create-job-worker")).outputPort.onmessage=t=>this.lJt(t)}catch(t){this.dJt=!0,this.fJt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.cJt} so far)`,t)}}}}self.C3_Shaders={};{let x_=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};ForEachOrdered_SortInstances=x_;const __=self.Cs;let T_=null,G_="",C_="",I_=[],P_="",A_="",R_="";const E_=__.Un(__.Ppt);__.PB.IB=class extends __.WGt{constructor(t){super(t),this._pt=this.Nc.BL().yY(),this.udt=this.Nc.BL().KL(),this.xJt=0,this._Jt=0,this.TJt=new Map}Jn(){super.Jn()}mB(){this.Nc.mB()}lH(t){this.Nc.lH(t,null,null)}GJt(t,s){return T_&&t===G_&&s===C_||(T_=new RegExp(t,s),G_=t,C_=s),T_.lastIndex=0,T_}CJt(t,s,i){if(t===P_&&s===A_&&i===R_)return I_;const e=this.GJt(s,i);return I_=t.match(e),P_=t,A_=s,R_=i,I_}async IJt(t,s){if(!s.length)return;this.xJt+=s.length;const i=[];for(const e of s)i.push(t.g5(e));await __.Vh(i,(()=>{this._Jt++})),this._Jt++,this._Jt===this.xJt&&(this._Jt=0,this.xJt=0,this.Nc.lH(__.PB.IB.CB.PJt,null,null))}EZ(){return 0===this.xJt?1:this._Jt/this.xJt}AJt(t,s){for(const i of s)0===i.FW()&&t.b5(i)}RJt(){return E_}EJt(t){const s=this.Nc.BL(),i=s.KL(),e=i.mY(),n=e.UL(),r=n.pY(),h=e.upt(),o=i.gY(n),a=s.yY(),l=a.gY();if(l.Cpt(t),h)for(let i=0;i<t&&!l.GY();++i)s.vY(r),l._Y(i),n.MY(e,o),s.xY(r);else for(let s=0;s<t&&!l.GY();++s)l._Y(s),n.MY(e,o);return i.CY(),a.CY(),!1}*OJt(t){const s=this.Nc.BL(),i=s.KL(),e=i.mY(),n=e.UL(),r=n.pY(),h=e.upt(),o=i.gY(n),a=s.yY(),l=a.gY();if(l.Cpt(t),h)for(let i=0;i<t&&!l.GY();++i)s.vY(r),l._Y(i),yield*n.Ywt(e,o),s.xY(r);else for(let s=0;s<t&&!l.GY();++s)l._Y(s),yield*n.Ywt(e,o);return i.CY(),a.CY(),!1}FJt(){const t=this.Nc.BL(),s=t.KL(),i=s.mY(),e=i.UL(),n=e.pY(),r=i.upt(),h=s.gY(e),o=t.yY(),a=o.gY();if(r)for(let s=0;!a.GY();++s)t.vY(n),a._Y(s),e.MY(i,h)||a.Sz(),t.xY(n);else for(let t=0;!a.GY();++t)a._Y(t),e.MY(i,h)||a.Sz();return s.CY(),o.CY(),!1}*DJt(){const t=this.Nc.BL(),s=t.KL(),i=s.mY(),e=i.UL(),n=e.pY(),r=i.upt(),h=s.gY(e),o=t.yY(),a=o.gY();if(r)for(let s=0;!a.GY();++s)t.vY(n),a._Y(s),(yield*e.Ywt(i,h))||a.Sz(),t.xY(n);else for(let t=0;!a.GY();++t)a._Y(t),(yield*e.Ywt(i,h))||a.Sz();return s.CY(),o.CY(),!1}kJt(t,s,i){const e=this.Nc.BL(),n=e.KL(),r=n.mY(),h=r.UL(),o=h.pY(),a=r.upt(),l=n.gY(h),u=e.yY(),c=u.gY();if(c.SY(t),c.Cpt(i),i<s)if(a)for(let t=s;t>=i&&!c.GY();--t)e.vY(o),c._Y(t),h.MY(r,l),e.xY(o);else for(let t=s;t>=i&&!c.GY();--t)c._Y(t),h.MY(r,l);else if(a)for(let t=s;t<=i&&!c.GY();++t)e.vY(o),c._Y(t),h.MY(r,l),e.xY(o);else for(let t=s;t<=i&&!c.GY();++t)c._Y(t),h.MY(r,l);return n.CY(),u.CY(),!1}*LJt(t,s,i){const e=this.Nc.BL(),n=e.KL(),r=n.mY(),h=r.UL(),o=h.pY(),a=r.upt(),l=n.gY(h),u=e.yY(),c=u.gY();if(c.SY(t),c.Cpt(i),i<s)if(a)for(let t=s;t>=i&&!c.GY();--t)e.vY(o),c._Y(t),yield*h.Ywt(r,l),e.xY(o);else for(let t=s;t>=i&&!c.GY();--t)c._Y(t),yield*h.Ywt(r,l);else if(a)for(let t=s;t<=i&&!c.GY();++t)e.vY(o),c._Y(t),yield*h.Ywt(r,l),e.xY(o);else for(let t=s;t<=i&&!c.GY();++t)c._Y(t),yield*h.Ywt(r,l);return n.CY(),u.CY(),!1}NJt(t){const s=t.EW(),i=s.RW();if(0===i.length)return!1;const e=this.Nc.BL(),n=e.KL(),r=n.mY(),h=r.UL(),o=h.pY(),a=r.upt(),l=n.gY(h),u=e.yY(),c=u.gY(),f=t.Nj(),d=E_.gY();if(__.Th(d,i),c.Cpt(d.length),a)for(let s=0,i=d.length;s<i&&!c.GY();++s){e.vY(o);const i=d[s];t.EW()._dt(i),f&&i.aSt(),c._Y(s),h.MY(r,l),e.xY(o)}else{s.vdt(!1);const t=s.Mdt();__.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.GY();++s){const i=d[s];t[0]=i,f&&i.aSt(),c._Y(s),h.MY(r,l)}}return n.CY(),u.CY(),__.bh(d),E_.CY(),!1}*BJt(t){const s=t.EW(),i=s.RW();if(0===i.length)return!1;const e=this.Nc.BL(),n=e.KL(),r=n.mY(),h=r.UL(),o=h.pY(),a=r.upt(),l=n.gY(h),u=e.yY(),c=u.gY(),f=t.Nj(),d=E_.gY();if(__.Th(d,i),c.Cpt(d.length),a)for(let s=0,i=d.length;s<i&&!c.GY();++s){e.vY(o);const i=d[s];t.EW()._dt(i),f&&i.aSt(),c._Y(s),yield*h.Ywt(r,l),e.xY(o)}else{s.vdt(!1);const t=s.Mdt();__.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.GY();++s){const i=d[s];t[0]=i,f&&i.aSt(),c._Y(s),yield*h.Ywt(r,l)}}return n.CY(),u.CY(),__.bh(d),E_.CY(),!1}$Jt(t,s){const i=t.EW(),e=i.RW();if(0===e.length)return!1;const n=this.Nc.BL(),r=n.KL(),h=n.Mmt(),o=r.mY(),a=o.UL(),l=a.pY(),u=o.upt(),c=r.gY(a),f=n.yY(),d=f.gY(),p=t.Nj(),m=E_.gY();__.bh(m),d.Cpt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.cxt(1,t)]);if(m.sort(x_),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.GY();++s){n.vY(l);const i=m[s][0];t.EW()._dt(i),p&&i.aSt(),d._Y(s),a.MY(o,c),n.xY(l)}else{i.vdt(!1);const t=i.Mdt();__.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.GY();++s){const i=m[s][0];t[0]=i,p&&i.aSt(),d._Y(s),a.MY(o,c)}}return r.CY(),f.CY(),__.bh(m),E_.CY(),!1}*WJt(t,s){const i=t.EW(),e=i.RW();if(0===e.length)return!1;const n=this.Nc.BL(),r=n.KL(),h=n.Mmt(),o=r.mY(),a=o.UL(),l=a.pY(),u=o.upt(),c=r.gY(a),f=n.yY(),d=f.gY(),p=t.Nj(),m=E_.gY();__.bh(m),d.Cpt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.cxt(1,t)]);if(m.sort(x_),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.GY();++s){n.vY(l);const i=m[s][0];t.EW()._dt(i),p&&i.aSt(),d._Y(s),yield*a.Ywt(o,c),n.xY(l)}else{i.vdt(!1);const t=i.Mdt();__.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.GY();++s){const i=m[s][0];t[0]=i,p&&i.aSt(),d._Y(s),yield*a.Ywt(o,c)}}return r.CY(),f.CY(),__.bh(m),E_.CY(),!1}VJt(t,s){let i=this.TJt.get(t);return i||(s?(i={jJt:null,HJt:new Map},this.TJt.set(t,i),i):null)}UJt(t,s,i,e,n){s.jL().cbt(i,s.qL()),e&&t.xY(n)}*JJt(t,s,i,e,n){yield*s.jL().fbt(i,s.qL()),e&&t.xY(n)}}}{const O_=self.Cs;O_.PB.IB.nRt=class extends O_.jn{constructor(t){super(),this.idt=t,this.Nc=t.LB(),this.GCt=t.wW()}uCt(){}Jn(){this.idt=null,this.Nc=null,this.GCt=null}}}{const F_=self.Cs;F_.PB.IB.Instance=class extends F_.jn{constructor(t,s){super(),this.di=t,this.idt=this.di.Cj(),this.ECt=this.idt.Vxt(),this.Nc=this.di.LB()}Jn(){this.di=null,this.idt=null,this.ECt=null,this.Nc=null}}}{const D_=self.Cs,k_=[];D_.PB.IB.CB={zJt:()=>!0,J5:()=>!0,s4:()=>!0,PHt:()=>!0,AHt:()=>!0,hN(){return this.Nc.hN()},JSt(){const t=this.Nc.vmt();return!t.rpt()&&!t.ept()},qJt(){const t=this.Nc.Mmt().ZMt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Nc.Mtt();return t.set("TriggerOnce_lastTick",i),this.Nc.vUt()||s!==i-1},YJt(t){const s=this.Nc.Mmt().ZMt(),i=s.get("Every_lastTime")||0,e=this.Nc.fN();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},ayt(t){const s=this.Nc.BL().jmt(t);return s&&s.ayt()},Q$t(){return this.Nc.Q$t()},oi:()=>D_.Ks.oi,lHt:()=>!0,GB:()=>!0,XJt:()=>!0,FUt:()=>!0,BUt:()=>!0,kUt:()=>!0,LUt:()=>!0,ZJt(t){return!!this.Nc.eB(t)},KJt(t){switch(t){case 0:return"browser"===D_.Ks.ri;case 1:return"iOS"===D_.Ks.Qs;case 2:return"Android"===D_.Ks.Qs;case 8:return"cordova"===D_.Ks.ri;case 9:return"scirra-arcade"===this.Nc.b$();case 10:return"nwjs"===D_.Ks.ri;case 13:return"windows-uwp"===this.Nc.b$();default:return!1}},QJt(t,s,i){return this.GJt(s,i).test(t)},tzt:(t,s,i)=>D_.compare(t,s,i),szt:(t,s,i)=>t>=s&&t<=i,izt:(t,s,i)=>D_.compare(t.Eet(),s,i),ezt:t=>!!t.Eet(),nzt(t,s){const i=this.Nc.fN();if(0===t){const t=this.Nc.Mmt().ZMt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return D_.compare(i,t,s)},rzt:t=>isNaN(t),lGt:(t,s,i)=>D_.hr(D_.Qn(t),D_.Qn(i))<=D_.Qn(s),uGt:(t,s)=>D_.lr(D_.Qn(t),D_.Qn(s)),w_t(t,s,i){let e=D_.Qn(t),n=D_.Qn(s),r=D_.Qn(i);return D_.lr(r,n)?D_.lr(e,n)&&!D_.lr(e,r):!(!D_.lr(e,n)&&D_.lr(e,r))},hzt:(t,s)=>"number"==typeof t?0===s:1===s,ozt:t=>!!t,$gt(t){return t.toLowerCase()===this.Nc.BL().Hgt()},azt(t,s,i,e){if(!t)return!1;const n=this.RJt(),r=n.gY(),h=t.EW();D_.Th(r,h.RW()),h.pdt()&&D_.bh(h.xdt());const o=this.Nc.Mmt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.cxt(1,t),e=o.cxt(3,t),D_.compare(s,i,e)?++a:h.bdt(n)}D_.wh(r,a),h.Tdt(r);const l=!!r.length;return D_.bh(r),n.CY(),t.nbt(),l},lzt(t,s){if(!t)return!1;const i=this.RJt(),e=i.gY(),n=t.EW();D_.Th(e,n.RW()),n.pdt()&&D_.bh(n.xdt());const r=this.Nc.Mmt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.cxt(1,t)?++h:n.bdt(s)}D_.wh(e,h),n.Tdt(e);const o=!!e.length;return D_.bh(e),i.CY(),t.nbt(),o},uzt(t,s,i){if(!t)return!1;const e=t.EW(),n=e.RW();if(0===n.length)return!1;const r=this.Nc.Mmt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.cxt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.Adt(h),t.nbt(),!0},czt(t,s){if(!t)return!1;const i=t.EW(),e=i.RW();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.Adt(n),t.nbt(),!0},fzt(t){if(!t)return!1;const s=t.EW(),i=s.RW(),e=Math.floor(this.Nc.BN()*i.length);if(e>=i.length)return!1;const n=i[e];return s.Adt(n),t.nbt(),!0},dzt:t=>!!t&&(!!t.FW()&&(t.EW().vdt(!0),t.nbt(),!0)),pzt(t,s,i){if(!t)return!1;const e=t.EW(),n=e.RW(),r=this.Nc.UL().Rdt(),h=this.Nc.Mmt().JMt();e.pdt()?(D_.Th(k_,n),e.ddt(),e.vdt(!1)):r?(D_.Th(k_,e.xdt()),D_.bh(e.xdt())):(D_.Th(k_,e.Mdt()),D_.bh(e.Mdt()));for(let t=0,n=k_.length;t<n;++t){const n=k_[t];D_.xor(n.aB().wU(s,i),h)?e.wdt(n):e.bdt(n)}return t.nbt(),D_.xor(!!e.Mdt().length,h)},mzt(t){if(!t)return!1;const s=t.S0();let i=null;const e=this.Nc.qRt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.Cj().qxt(t)){i=r;break}}else if(r.Cj()===t){i=r;break}}if(!i){const s=t.RW();s.length&&(i=s.at(-1))}return!!i&&(t.EW().Adt(i),t.nbt(),!0)},gzt(t){return this.Nc.z_t()?this.OJt(t):this.EJt(t)},yzt(){return this.Nc.z_t()?this.DJt():this.FJt()},Szt(t,s,i){return this.Nc.z_t()?this.LJt(t,s,i):this.kJt(t,s,i)},jd(t){return this.Nc.z_t()?this.BJt(t):this.NJt(t)},wzt(t,s,i){return this.Nc.z_t()?this.WJt(t,i):this.$Jt(t,i)},bzt:t=>!!t&&t.DV(),vzt:t=>!!t&&t.jV(),Mzt:t=>!!t&&t.$V(),xzt:t=>!!t&&!t.FW(),_zt:(t,s,i)=>!!t&&D_.compare(100*t.sO(),s,i),Tzt(t){const s=this.Nc.$N();return!!s&&s.s5(t)},PJt:()=>!0,Gzt(){return this.xJt>0},Czt(t,s){const i=this.Nc.eOt();return!!i&&!!s&&!!i.nut(t,s)}}}{let L_=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},N_=function(t,s){return t[1]-s[1]};SortZOrderList=L_,SortInstancesByValue=N_;const B_=self.Cs,$_=[],W_=[],V_=B_.Un(B_.Rect),j_=B_.Un(B_._o),H_=[];B_.PB.IB.hrt={Izt(t,s){t.pnt(s)},Pzt(t,s){t.Qi()&&"number"!=typeof s&&(s=parseFloat(s)),t.pnt(t.Eet()+s)},Azt(t,s){t.Qi()&&t.pnt(t.Eet()-s)},Rzt(t,s){t.pnt(!!s)},Ezt(t){t.pnt(!t.Eet())},Ozt(t){t.pnt(t.bmt())},Fzt(t){this.Nc.BL().Wmt(t)},Dzt(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.kW(t,s,i,e,n,r);if(!h)return;n&&s.LW(h);const o=this.Nc.BL();o.NW(!0),h.BW(),o.NW(!1);const a=new Map;h.qEt(a,t,n);for(const[t,s]of a)t.EW().Gdt(s)},kzt(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.pHt(t);h&&B_.PB.IB.hrt.Dzt.call(this,h,s,i,e,n,r)},g0(t,s,i,e,n,r,h,o,a,l,u){if(!t)return;const c=this.Nc.hB();let f=c;if(r){const t=this.Nc.jN().R4(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.lB(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.lB(o),!p))return;V_.set(s,i,e,n);const m=f.g0(t,V_,d,p,a,l,u);t.EW().Tdt(m),t.nbt()},Lzt(){const t=this._pt;t.bpt()&&t.Spt().Sz()},lyt(t,s){const i=this.Nc.BL().jmt(t);i&&(0===s?i.lyt(!1):1===s?i.lyt(!0):i.lyt(!i.ayt()))},Nzt(t){this.Nc.yN(t)},Bzt(t,s){if(s<0&&(s=0),!t)return;const i=t.EW().RW();for(const t of i)t.yN(s)},$zt(t){if(!t)return;const s=t.EW().RW();for(const t of s)t.zj()},ph(t,s){if(t<0)return;const i=this.Nc.BL().xgt();return s?i.EGt(t):i.OGt(t),!0},eN(t){return this.Nc.BL().xgt().FGt(t),!0},Wzt(){const t=this.Nc.BL();return t.xgt().DGt(t.Bgt()),!0},sN(t){this.Nc.BL().sN(t)},async _B(t,s,i,e,n,r){const h=this.Nc.xB();h&&(this.mB(),await h._B(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.Nc.TB(B_.PB.IB.CB.GB,null))},Vzt(t,s){if(t<=0||s<=0)return;this.Nc.i$t(t,s),this.Nc.hB().z2();const i=this.Nc.xB();i&&("off"===i.YBt()||this.Nc.gHt(t,s),i._A(i.wq(),i.bq(),!0),this.Nc.mB())},jzt(t){const s=this.Nc.xB();s&&"off"!==s.YBt()&&(s.l$t(0!==t?"high":"low"),s._A(s.wq(),s.bq(),!0))},zit(t){this.Nc.TUt(t)},Hzt(){this.Nc.GUt()},Uzt(t){this.Nc.CUt(t)},Jzt(t){this.Nc.WTt(t)},zzt(t){},qzt(){for(const t of this.Nc.jN().JN())t.u4()},Yzt(t){this.Nc.MUt(0!==t)},Xzt(t,s){this.Nc.FN(1/t),this.Nc.RN(1/s)},Zzt(t,s){this.Nc.RN(t),this.Nc.FN(s)},Kzt(t){this.Nc.IN(["vsync","unlimited-tick","unlimited-frame"][t])},Qzt(t,s){if(!t)return;const i=t.EW().RW(),e=$_,n=W_,r=this.Nc.hB(),h=t.S0(),o=t.Cvt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.aB();if(!a)continue;let l;l=h?r.Qrt(s+r.Cj().Gvt(o)):r.Qrt(s),e.push([a.lB().nL(),a.uB()]),n.push([r,l])}if(!e.length)return;e.sort(L_),n.sort(N_);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.cB(e[t][0]),h=e[t][1],o=i.fB();o[h]!==s&&(o[h]=s,s.aB().dB(i,!0),i.pB(s),a=!0)}a&&this.Nc.mB(),B_.bh($_),B_.bh(W_)},l$(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Nc.fL().l$(t,s)},tqt(t){if(this.Nc.MS())return;const s=this.Nc.jN();s.qN()||s.YN(t)},sqt(t){if(this.Nc.MS())return;const s=this.Nc.jN();if(s.qN())return;const i=s.R4(t);i&&s.YN(i)},iqt(t){if(this.Nc.MS())return;const s=this.Nc.jN();if(s.qN())return;const i=s.JN(),e=i.indexOf(s.$N());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.YN(n)},eqt(){if(this.Nc.MS())return;const t=this.Nc.jN();t.qN()||(t.YN(t.$N()),this.Nc.BL().zmt())},nqt(t,s){t&&t.OV(s)},rqt(t,s){t&&t.NV(s)},hqt(t,s){t&&t.WV(s)},oqt(t,s){t&&t.eO(s/100)},aqt(t,s){t&&t.HV(s)},lqt(t,s){t&&t.zV(s)},uqt(t,s){t&&t.XW(B_.Qn(+s))},cqt(t,s,i){t&&(t.dj(!0),t.KW(s),t.tV(i))},fqt(t){t&&t.dj(!1)},dqt(t,s,i){t&&t.Z0(s/100,i/100)},pqt(t,s){t&&t.ZM(+s)},mqt(t,s){t&&t.ej(1===s)},gqt(t,s){if(!t)return;j_.Qo(s),j_.Zn();const i=t.fj();i.Uo(j_)||(i.Lo(j_),this.mB())},yqt(t,s){t&&t.hj(s)},Sqt(t,s){t&&t.FM(s)},wqt(t,s,i){if(!t)return;const e=t.HW().$nt(i);if(!e)return;const n=1===s;e.Qyt()!==n&&(e.Tkt(n),t.FJ(),this.Nc.mB())},bqt(t,s,i,e){if(!t)return;const n=t.HW(),r=n.$nt(s);if(!r)return;i=Math.floor(i);const h=r.EG().FG(i);h&&("color"===h?(j_.Qo(e),e=j_):"percent"===h&&(e/=100),n.kJ(r.nL(),i,e)&&r.Qyt()&&this.Nc.mB())},vqt(t,s){t&&t.lj(s)},Mqt(t){this.Nc.hB().qW(+t)},xqt(t){this.Nc.hB().XW(B_.Qn(+t))},_qt(t,s){const i=this.Nc.hB(),e=i.HW().$nt(s);if(!e)return;const n=1===t;e.Qyt()!==n&&(e.Tkt(n),i.FJ(),this.Nc.mB())},Tqt(t,s,i){const e=this.Nc.hB().HW(),n=e.$nt(t);if(!n)return;s=Math.floor(s);const r=n.EG().FG(s);r&&("color"===r?(j_.Qo(i),i=j_):"percent"===r&&(i/=100),e.kJ(n.nL(),s,i)&&n.Qyt()&&this.Nc.mB())},Gqt(t,s){this.Nc.hB().wV(t/100,s/100)},Cqt(t){const s=this.Nc.hB();0===t?s.MV():s.xV()},Iqt(t){this.Nc.hB().KW(t)},Pqt(t){this.Nc.hB().tV(t)},Aqt(t,s){const i=this.Nc.hB();i.KW(t),i.tV(s)},Rqt(t){if(!t)return;const s=t.D_t();if(!s)return;const i=s.aB();if(!i)return;const e=this.Nc.hB();e.KW(i.UM()),e.tV(i.qM())},cV(t,s,i){const e=this.Nc.hB();try{e.cV(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},dV(t,s,i){if(!t)return;const e=this.Nc.hB();try{e.dV(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},mV(t){t&&this.Nc.hB().mV(t)},yV(){this.Nc.hB().yV()},async Eqt(t){const s=this.Nc.$N();if(!s||!t||this.Nc.MS())return;const i=t.S0()?t.XSt():[t];await this.IJt(s,i)},async Oqt(t){await B_.PB.IB.hrt.Eqt.call(this,this.Nc.pHt(t))},Fqt(t){const s=this.Nc.$N();if(!s||!t)return;const i=t.S0()?t.XSt():[t];this.AJt(s,i)},Dqt(t){B_.PB.IB.hrt.Fqt.call(this,this.Nc.pHt(t))},kqt(){const t=this.Nc.$N();if(!t)return;const s=t.d5();this.AJt(t,s)},async Lqt(t){const s=this.Nc.$N();t&&s&&!this.Nc.MS()&&await this.IJt(s,t.u5())},async Nqt(t){const s=this.Nc.$N(),i=this.Nc.jN().R4(t);i&&s&&!this.Nc.MS()&&await this.IJt(s,i.u5())},tN(t){const s=this.udt.ZL();if(s)switch(s.QL()){case 1:"number"==typeof t&&s.tN(t);break;case 2:"string"==typeof t&&s.tN(t);break;case 3:s.tN(t)}},Bqt(t,s,i){const e=this.VJt(t.toLowerCase(),!0),n=e.HJt,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=B_.$h(n.values())||e.jJt;h&&0!==h.YL()!=(0!==i.YL())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},$qt(t,s){const i=this.VJt(t.toLowerCase(),!0);i.jJt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=B_.$h(i.HJt.values())||i.jJt;e&&0!==e.YL()!=(0!==s.YL())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.jJt=s},Wqt(t,s,i){const e=this.Nc,n=e.z_t()?H_:null;i=Math.floor(i);const r=this.VJt(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.HJt.get(s.toLowerCase());if(!h){if(!r.jJt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.jJt,i=0}if(!h.Gu())return n;if(0!==h.YL())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.BL(),a=o.UL(),l=a.HL(),u=l.length>0;u&&(h.qL()?o.vY(l):o.vgt(l));const c=[],f=o.myt(a);if(f){const t=f.yyt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Eet())}const d=h.yyt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].bmt());return e.z_t()?this.JJt(o,h,c,u,l):this.UJt(o,h,c,u,l)}}}{const U_=self.Cs;U_.PB.IB.ort={Vqt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},P:t=>t.toString(),Lt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Nc.BN()*t:this.Nc.BN()*(s-t)+t},cvt(...t){return t[Math.floor(this.Nc.BN()*t.length)]},jqt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=U_.Zn(Math.floor(t),0,s.length-1)]),Hqt:()=>Math.PI,Uqt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),Jqt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(U_.Qn(t)),cos:t=>Math.cos(U_.Qn(t)),tan:t=>Math.tan(U_.Qn(t)),asin:t=>U_.tr(Math.asin(t)),acos:t=>U_.tr(Math.acos(t)),atan:t=>U_.tr(Math.atan(t)),exp:t=>Math.exp(t),jt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Zn:(t,s,i)=>U_.Zn(t,s,i),vt:(t,s,i,e)=>U_.er(t,s,i,e),angle:(t,s,i,e)=>U_.tr(U_.rr(t,s,i,e)),Ct:(t,s,i)=>U_.Ct(t,s,i),mr:(t,s,i)=>U_.mr(t,s,i),yr:(t,s,i,e)=>U_.yr(t,s,i,e),Sr:(t,s,i,e,n)=>U_.Sr(t,s,i,e,n),wr:(t,s,i)=>U_.wr(t,s,i),zqt:(t,s)=>U_.tr(U_.hr(U_.Qn(t),U_.Qn(s))),qqt:(t,s,i)=>U_.tr(U_.ur(U_.Qn(t),U_.Qn(s),i)),Yqt:(t,s,i)=>U_.tr(U_.ar(U_.Qn(t),U_.Qn(s),U_.Qn(i))),Xqt:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,Zqt:(t,s)=>(t|=0)^1<<s,Kqt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,Qqt:()=>"\n",tYt:t=>"string"==typeof t?t.toUpperCase():"",sYt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",iYt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},eYt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(U_.Zi(s),"i")):-1,nYt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(U_.Zi(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(U_.Zi(s),"gi"),i):"string"==typeof t?t:"",rYt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},hYt(t,s,i){const e=this.GJt(s,i);return t?t.search(e):-1},oYt(t,s,i,e){const n=this.GJt(s,i);return t?t.replace(n,e):""},aYt(t,s,i){const e=this.CJt(t.toString(),s,i);return e?e.length:0},lYt(t,s,i,e){e=Math.floor(e);const n=this.CJt(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},uYt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},cYt:t=>encodeURIComponent(t),fYt:t=>decodeURIComponent(t),oN(){return this.Nc.c8()},dYt(){return this.Nc.f8()},pYt(){return this.Nc.gN()},mYt(){return(Date.now()-this.Nc.uUt())/1e3},gYt:()=>Date.now(),time(){return this.Nc.fN()},yYt(){return this.Nc.Mtt()},SYt(){return this.Nc.dUt()},SN(){return this.Nc.wN()},wYt(){return this.Nc.xN()},bYt(){return this.Nc.TN()},vYt(){return this.Nc.xB().D$()},MYt(){return this.Nc.xB().L$()},xYt(){return this.Nc.TL()},_Yt(){return this.Nc.CL()},TYt(){return this.Nc.TL()},GYt(){return this.Nc.CL()},CYt(){return this.Nc.hB().QW()},IYt(){return this.Nc.hB().sV()},PYt(){return this.Nc.hB().Pc()},AYt(){return this.Nc.hB().YW()},RYt(){return U_.tr(this.Nc.hB().ZW())},EYt(){return this.Nc.hB().Vg()},OYt(){return this.Nc.hB().Kg()},FYt(){return 100*this.Nc.hB().H0()},DYt(){return 100*this.Nc.hB().U0()},kYt(t){const s=this.Nc.hB().lB(t);return s?s.j0().Ka():0},LYt(t){const s=this.Nc.hB().lB(t);return s?s.j0().Qa():0},NYt(t){const s=this.Nc.hB().lB(t);return s?s.j0().tl():0},BYt(t){const s=this.Nc.hB().lB(t);return s?s.j0().sl():0},$Yt(t){const s=this.Nc.hB().lB(t);return s?s.j0().width():0},WYt(t){const s=this.Nc.hB().lB(t);return s?s.j0().height():0},VYt(t){const s=this.Nc.hB().lB(t);if(s){const t=s.j0();return(t.Ka()+t.tl())/2}return 0},jYt(t){const s=this.Nc.hB().lB(t);if(s){const t=s.j0();return(t.Qa()+t.sl())/2}return 0},HYt(t,s,i){const e=this.Nc.hB().lB(t);return e?e.yj(s,i)[0]:0},UYt(t,s,i){const e=this.Nc.hB().lB(t);return e?e.yj(s,i)[1]:0},JYt(t,s,i){const e=this.Nc.hB().lB(t);return e?e.wj(s,i)[0]:0},zYt(t,s,i){const e=this.Nc.hB().lB(t);return e?e.wj(s,i)[1]:0},qYt(t,s,i,e){const n=this.Nc.hB(),r=n.lB(t),h=n.lB(s);if(!r||!h||r===h)return i;const[o,a]=r.wj(i,e);return h.yj(o,a)[0]},YYt(t,s,i,e){const n=this.Nc.hB(),r=n.lB(t),h=n.lB(s);if(!r||!h||r===h)return e;const[o,a]=r.wj(i,e);return h.yj(o,a)[1]},XYt(t){const s=this.Nc.hB().lB(t);return s?s.UV():0},ZYt(t){const s=this.Nc.hB().lB(t);return s?U_.tr(s.YV()):0},KYt(t){const s=this.Nc.hB().lB(t);return s?100*s.sO():0},QYt(t){const s=this.Nc.hB().lB(t);return s?s.qV():0},tXt(t){const s=this.Nc.hB().lB(t);return s?s.QW():0},sXt(t){const s=this.Nc.hB().lB(t);return s?s.sV():0},iXt(t){const s=this.Nc.hB().lB(t);return s?100*s.KV():0},eXt(t){const s=this.Nc.hB().lB(t);return s?100*s.sj():0},nXt(t){const s=this.Nc.hB().lB(t);return s?s.XM():0},rXt(t){const s=this.Nc.hB().lB(t);return s?s.nL():-1},hXt(){const t=this.Nc.xB();return t?t.F$t():""},oXt(t){const s=this._pt;if(!s.bpt())return 0;if(t){const i=s.Mpt(t);return i?i.nL():0}return s.Spt().nL()},aXt(){return this.Nc.IUt()},lXt(t,s,...i){const e=this.VJt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.HJt.get(s.toLowerCase());if(!n){if(!e.jJt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.jJt}const r=n.YL(),h=n.WL();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Gu())return h;const o=this.Nc.BL(),a=o.UL().HL(),l=a.length>0;l&&(n.qL()?o.vY(a):o.vgt(a));const u=n.yyt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].bmt());const c=n.jL(),f=c.zL(c.HL(),n.qL(),r,h,...i);return l&&o.xY(a),f},uXt(){return this.Nc.lL().kN()},cXt(){return this.EZ()},EC(){return this.Nc.g$t()?"webgpu":"webgl"},fXt(){return this.Nc.g$t()?this.Nc.g$t().y$t():this.Nc.m$t().uF()},dXt(){let t=this.Nc.pM().jv();return Math.round(100*t/1048576)/100},pXt:(t,s,i)=>U_.Cr(t,s,i),mXt:(t,s,i)=>U_.Pr(t/100,s/100,i/100),gXt:(t,s,i,e)=>U_.Ir(t/100,s/100,i/100,e/100),yXt:(t,s,i)=>U_.Pr(t/255,s/255,i/255),SXt:(t,s,i,e)=>U_.Ir(t/255,s/255,i/255,e/255),wXt(){return this.Nc.gL()},bXt(){return this.Nc.SL()},vXt(){return this.Nc.UL().Q3().Pc()},MXt(){return this.Nc.UL().pwt()}}}{const J_=self.Cs;J_.PB.jnt=class extends J_.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{const z_=self.Cs,q_=self.Ns,Y_=[];z_.PB.jnt.nRt=class extends z_.TCt{constructor(t){super(t),this.ZAt=t.kRt()}Jn(){z_.bh(this.ZAt),super.Jn()}uCt(){for(const t of this.ZAt)t.KPt(this.Nc)}m5(t){const s={Zx:this.Nc.IL()};return Promise.all(this.ZAt.map((i=>i.QPt(t,s))))}v5(){for(const t of this.ZAt)t.tAt()}S5(){this.xXt()}xXt(){for(const t of this.idt.AW())t.gJ()._Xt()}nxt(t){z_.PB.jnt.wGt(this,t)}jxt(t){Y_.push({PCt:null,TXt:!1,vW:[]})}GXt(t,s,i){const e=Y_.at(-1);e.PCt=t,e.TXt=i,e.vW.push(s)}Hxt(t){const s=Y_.pop(),i=s.PCt,e=s.TXt;if(!i)return;const n=new Map;for(const t of s.vW)t.qEt(n,i,e);for(const[t,s]of n)t.EW().Gdt(s)}CXt(t){const s=this.Cj().WRt(t),i=this.LB();return s.sAt(0).sz().rX(i.pM(),{Zx:i.IL()}).then((()=>this.xXt())),s}IXt(t){for(const s of this.idt.AW())s.gJ().PXt(t);this.Cj().VRt(t)}AXt(t,s){const i=this.idt.BRt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.rAt(s);e<0&&(e+=i.zJ()+1);const n=z_.YPt.ZPt(this.LB());i.iAt(n,e);const r=this.LB();n.sz().rX(r.pM(),{Zx:r.IL()}).then((()=>this.xXt()));for(const t of this.idt.AW())t.gJ().RXt();return n}EXt(t,s){const i=this.idt.BRt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.zJ())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.rAt(s);e<0&&(e+=i.zJ()),i.eAt(e);for(const t of this.idt.AW())t.gJ().RXt()}cCt(){return self.OXt}};const X_=new WeakMap;self.OXt=class extends self.yW{constructor(t){super(t),X_.set(this,t.Vxt())}FXt(t){q_.ue(t);const s=X_.get(this).Cj().BRt(t);return s?s.hAt():null}DXt(){return X_.get(this).Cj().NRt().map((t=>t.hAt()))}kXt(t){return q_.ue(t),X_.get(this).CXt(t).hAt()}LXt(t){q_.ue(t),X_.get(this).IXt(t)}NXt(t,s){if(q_.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return X_.get(this).AXt(t,s).XJ()}BXt(t,s){if(q_.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");X_.get(this).EXt(t,s)}}}{const Z_=self.Cs,K_=self.Ns,Q_=0,tT=1,sT=2,iT=3,eT=Z_.Un(Z_.Rect),nT=Z_.Un(Z_.Il),rT=Z_.Un(Z_.Ia),hT=1,oT=2,aT=4;Z_.PB.jnt.Instance=class extends Z_.nIt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[Q_],e=s[tT],n=s[sT],r=s[iT]),this.$Xt=this.idt.BRt(e)||this.idt.kRt()[0],this.WXt=Z_.Zn(n,0,this.$Xt.zJ()-1),this.VXt=this.$Xt.sAt(this.WXt);const h=this.VXt.sz();this.jXt=h.fT(),this.HXt=h.sR(),this.UXt=h.gIt(),this.aIt(),t.JEt(oT,!0),t.JEt(hT,this.$Xt.NJ()>=0),this.JXt=Math.abs(this.$Xt.NJ()),this.zXt=this.$Xt.HJ(),this.qXt=Z_.Un(Z_.Qf),this.YXt=0,this.XXt=0,this.ZXt="",this.KXt=-1,this.QXt="",this.tZt=0;const o=this.aB();this.sZt=o.iU(),o.OV(i),o.SU(r),o.HH(this.VXt.jH()),o.zH(this.VXt.JH()),o.WDt(this.VXt.cz()),o.NH(),1===this.idt.LRt()&&1===this.idt.kRt()[0].zJ()||0===this.JXt||this.YCt()}Jn(){this.$Xt=null,this.VXt=null,this.jXt=null,this.qXt=null,super.Jn()}fIt(){return this.VXt.sz()}vit(){return!0}hK(){this.jXt=null}cIt(){this._Xt()}$x(t){const s=this.jXt;if(null===s)return;t.hO(s);const i=this.aB();i.hJ()?this.iZt(i,t):this.eZt(i,t)}eZt(t,s){let i=this.sZt;this.Nc.AL()&&(i=t.FDt(i)),s.gO(i,this.UXt)}iZt(t,s){const i=t.KDt();if(t.tkt()){t.QH(eT,nT,!1);let s=nT;this.Nc.AL()&&(s=t.FDt(s)),i.Bx(t.oJ(),s,this.UXt),t.QDt(!1)}i.$x(s)}nZt(){return this.qXt.Js()}rZt(){return this.di.zEt(oT)}hZt(t){this.di.JEt(oT,t)}oZt(){return this.di.zEt(hT)}aZt(t){this.di.JEt(hT,t)}lZt(){return this.di.zEt(aT)}uZt(t){this.di.JEt(aT,t)}d8(){this.QXt&&this.cZt(),this.KXt>=0&&this.fZt();const t=this.JXt;if(!this.rZt()||0===t)return void this.OCt();const s=this.Nc.aN(this.di);this.qXt.Bu(s);const i=this.nZt(),e=this.VXt,n=e.iz()/t;if(i<this.YXt+n)return;const r=this.$Xt,h=this.zXt,o=r.zJ(),a=r.VJ(),l=r.$J(),u=r.JJ();this.oZt()?this.WXt++:this.WXt--,this.YXt+=n,this.WXt>=o&&(u?(this.aZt(!1),this.WXt=o-2):l?this.WXt=h:(this.XXt++,this.XXt>=a?this.dZt(!1):this.WXt=h)),this.WXt<0&&(u?(this.WXt=1,this.aZt(!0),l||(this.XXt++,this.XXt>=a&&this.dZt(!0))):l?this.WXt=h:(this.XXt++,this.XXt>=a?this.dZt(!0):this.WXt=h)),this.WXt=Z_.Zn(this.WXt,0,o-1);const c=r.sAt(this.WXt);i>this.YXt+c.iz()/t&&(this.YXt=i),this.pZt(e,c)}dZt(t){this.WXt=t?0:this.$Xt.zJ()-1,this.hZt(!1),this.ZXt=this.$Xt.Pc(),this.uZt(!0),this.ICt("animationend",!1,{animationName:this.ZXt}),this.lH(Z_.PB.jnt.CB.mZt),this.lH(Z_.PB.jnt.CB.gZt),this.uZt(!1),this.XXt=0}pZt(t,s,i){if(t===s)return;const e=this.aB(),n=t.sz(),r=s.sz(),h=n.Vg(),o=n.Kg(),a=r.Vg(),l=r.Kg();i&&i.yZt?i.yZt(e,h,o,a,l):(h!==a&&e.Yg(e.Vg()*(a/h)),o!==l&&e.jg(e.Kg()*(l/o))),e.HH(s.jH()),e.zH(s.JH()),e.WDt(s.cz()),e.NH(),this.VXt=s,this.jXt=r.fT(),this.HXt=r.sR(),this.UXt=r.gIt();const u=this.Vz().Lnt();for(let i=0,e=u.length;i<e;++i)u[i].iPt(t,s);this.ICt("framechange",!1,{animationName:this.$Xt.Pc(),SZt:this.WXt}),this.lH(Z_.PB.jnt.CB.wZt),this.Nc.mB()}bZt(t){this.hZt(!0),this.YXt=this.nZt(),1===t&&0!==this.WXt&&(this.KXt=0,this.lZt()||this.fZt()),this.YCt()}vZt(t,s,i){this.QXt=t,this.tZt=s,this.YCt(),!i&&this.lZt()||this.cZt()}MZt(){return this.$Xt}xZt(){return this.QXt?this.QXt:this.$Xt.Pc()}PXt(t){Z_.Ke(t,this.xZt())&&this.vZt(this.idt.jRt().Pc(),1,!0)}_Zt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.idt.BRt(this.xZt());if(!s)return;if(-1===(t=s.nAt(t)))return}isFinite(t)&&(this.KXt=t,this.lZt()||this.fZt())}RXt(){if(this.QXt||-1!==this.KXt)return;const t=this.VXt,s=this.$Xt.sAt(Z_.Zn(this.WXt,0,this.$Xt.zJ()-1));t!==s&&this.pZt(t,s),this.$Xt.zJ()>1&&this.JXt>0&&this.YCt()}TZt(){return this.WXt}GZt(){return this.VXt.mz()}CZt(t){this.JXt=Math.abs(t),this.aZt(t>=0),this.JXt>0&&this.YCt()}IZt(){return this.oZt()?this.JXt:-this.JXt}PZt(t){"string"==typeof t&&-1===(t=this.$Xt.nAt(t))||(t=Z_.Zn(Math.floor(t),0,this.$Xt.zJ()-1),this.zXt=t)}AZt(){return this.zXt}cZt(t){const s=this.VXt,i=this.idt.BRt(this.QXt);if(this.QXt="",!i)return;if(i===this.$Xt&&this.rZt())return;this.$Xt=i,this.aZt(i.NJ()>=0),this.JXt=Math.abs(i.NJ()),this.zXt=i.HJ(),this.WXt=Z_.Zn(this.WXt,0,this.$Xt.zJ()-1),1===this.tZt&&(this.WXt=0),this.hZt(!0),this.YXt=this.nZt();const e=this.$Xt.sAt(this.WXt);this.pZt(s,e,t)}fZt(t){const s=this.VXt,i=this.WXt;if(this.WXt=Z_.Zn(Math.floor(this.KXt),0,this.$Xt.zJ()-1),this.KXt=-1,!t&&i===this.WXt)return;const e=this.$Xt.sAt(this.WXt);this.pZt(s,e),this.YXt=this.nZt()}_Xt(){const t=this.VXt.sz();this.jXt=t.fT(),this.HXt=t.sR(),this.UXt=t.gIt(),this.aB().QDt(!0)}fT(){return this.jXt}sR(){return this.HXt}gIt(){return this.UXt}nz(){return this.VXt.nz()}n_t(t){const s=this.VXt,i=this.aB();let e=null;if("string"==typeof t)e=s.lz(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.az(t-1)}let n=i.ZH();if(!e)return[i.UM(),i.qM(),n];if(rT.S(e.yAt()),i.hJ()){const[t,s,e]=i.oJ().Jx(rT.Oa(),rT.Da());rT.set(t,s),n+=e}return rT.offset(-s.jH(),-s.JH()),rT.scale(i.Vg(),i.Kg()),rT.rotate(i.ZW()),rT.offset(i.UM(),i.qM()),[rT.Oa(),rT.Da(),n]}RZt(){return this.aB().JDt().pu()}EZt(t){t=Math.floor(t);const s=this.aB(),i=s.JDt(),e=i.pu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.du();return[n[2*t+0]+s.UM(),n[2*t+1]+s.qM()]}QCt(){const t=Z_.PB.jnt.hrt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.$Xt.Pc(),OZt:s=>this.sIt(t.FZt,s,0)},{name:s+".current-frame",value:this.WXt,OZt:s=>this.sIt(t.DZt,s)},{name:s+".is-playing",value:this.rZt(),OZt:s=>s?this.sIt(t.kZt,0):this.sIt(t.LZt)},{name:s+".speed",value:this.JXt,OZt:s=>this.sIt(t.NZt,s)},{name:s+".repeats",value:this.XXt,OZt:t=>this.XXt=t}]}]}hx(){const t={a:this.$Xt.G0()};0!==this.YXt&&(t.fs=this.YXt);const s=this.nZt();0!==s&&(t.at=s),0!==this.WXt&&(t.f=this.WXt),0!==this.JXt&&(t.cas=this.JXt),1!==this.XXt&&(t.ar=this.XXt),0!==this.zXt&&(t.rt=this.zXt),this.rZt()||(t.ap=this.rZt()),this.oZt()||(t.af=this.oZt());const i=this.aB();return i.yU()&&(t.ce=i.yU()),t}ox(t){const s=this.Cj().$Rt(t.a);s&&(this.$Xt=s),this.YXt=t.hasOwnProperty("fs")?t.fs:0,this.qXt.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.WXt=Z_.Zn(i,0,this.$Xt.zJ()-1),this.JXt=t.hasOwnProperty("cas")?t.cas:0,this.XXt=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.zXt=Z_.Zn(e,0,this.$Xt.zJ()-1),this.hZt(!t.hasOwnProperty("ap")||!!t.ap),this.aZt(!t.hasOwnProperty("af")||!!t.af);const n=this.$Xt.sAt(this.WXt);this.VXt=n,this._Xt();const r=this.aB();r.HH(n.jH()),r.zH(n.JH()),r.WDt(n.cz()),r.SU(!!t.ce),this.rZt()&&this.YCt()}Hrt(t){const s=this.aB();switch(t){case iT:return s.yU();case sT:return Z_.Zn(this.WXt,0,this.$Xt.zJ()-1);case tT:return this.$Xt.Pc()}}Xrt(t,s,i){const e=this.aB();switch(t){case iT:e.SU(!!s);break;case sT:{this.hZt(!1);const t=this.$Xt.zJ()-1,e=s=Z_.Zn(s,0,t),n=this.$Xt.sAt(this.WXt),r=this.$Xt.sAt(e);this.pZt(n,r,i),this.WXt=Z_.Zn(e,0,t);break}case tT:this.QXt=s,this.cZt(i),this.$Xt.zJ()>1&&this.$Xt.NJ()>0?this.YCt():this.OCt()}}cCt(){return self.BZt}};const lT=new WeakMap,uT=new Map([["current-frame",0],["beginning",1]]);self.BZt=class extends self.cJ{constructor(){super(),lT.set(this,self.Gj.Aj().gJ())}ez(){return lT.get(this).nz()}rz(t){return this.hz(t)[0]}oz(t){return this.hz(t)[1]}$Zt(t){return this.hz(t)[2]}hz(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return lT.get(this).n_t(t)}uz(){return lT.get(this).RZt()}fz(t){return K_.he(t),lT.get(this).EZt(t)[0]}pz(t){return K_.he(t),lT.get(this).EZt(t)[1]}dz(t){return K_.he(t),lT.get(this).EZt(t)}WZt(){lT.get(this).hZt(!1)}VZt(t="current-frame"){K_.ue(t);const s=uT.get(t);if(void 0===s)throw new Error("invalid mode");lT.get(this).bZt(s)}jZt(t,s="beginning"){K_.ue(t),K_.ue(s);const i=uT.get(s);if(void 0===i)throw new Error("invalid mode");const e=lT.get(this);if(!e.Cj().BRt(t))throw new Error(`animation name "${t}" does not exist`);e.vZt(t,i)}FXt(t){K_.ue(t);const s=lT.get(this).Cj().BRt(t);return s?s.hAt():null}get animation(){return lT.get(this).MZt().hAt()}get animationName(){return lT.get(this).xZt()}set SZt(t){K_.he(t),lT.get(this)._Zt(t)}get SZt(){return lT.get(this).TZt()}set HZt(t){K_.ue(t),lT.get(this)._Zt(t)}get HZt(){return lT.get(this).GZt()}set UZt(t){K_.he(t),lT.get(this).CZt(t)}get UZt(){return lT.get(this).IZt()}set JZt(t){K_.he(t),lT.get(this).PZt(t)}get JZt(){return lT.get(this).AZt()}get imageWidth(){return lT.get(this).fIt().Vg()}get imageHeight(){return lT.get(this).fIt().Kg()}zZt(){const t=lT.get(this).fIt();return[t.Vg(),t.Kg()]}async qZt(t){K_.Be(t,Blob);const s=lT.get(this),i=s.LB(),e=s.fIt(),n=Z_.Un(Z_.vPt);if(n.DPt(i,t),await n.rX(i.pM(),{Zx:i.IL()}),s.zn())return void n.Jn();e.kPt(n);const r=s.Vxt();r.xXt(),r.Cj().Sf().dispatchEvent(new Z_.Event("animationframeimagechange")),i.mB()}YZt(t,s){K_.ue(s),lT.get(this).aB().ADt(!!t,s)}}}{const cT=self.Cs;cT.PB.jnt.CB={XZt(t){return cT.Ke(this.xZt(),t)},ZZt(t,s){return cT.compare(this.WXt,t,s)},KZt(t,s){if("string"!=typeof s)return!1;const i=this.VXt.mz();return cT.compare(i.toLowerCase(),t,s.toLowerCase())},QZt(t,s){return cT.compare(this.IZt(),t,s)},gZt(t){return cT.Ke(this.ZXt,t)},mZt:()=>!0,wZt:()=>!0,tKt(){return this.aB().Vg()<0},sKt(){return this.aB().Kg()<0},iKt:()=>!0,eKt:()=>!0,yU(){return this.aB().yU()}}}{const fT=self.Cs;fT.PB.jnt.hrt={nKt(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.n_t(i),o=this.Nc.kW(t,s,r,h,e,n);if(!o)return;if(e&&s.LW(o),t.wW().Q$()){const t=o.aB();t.XW(this.aB().ZW()),t.NH()}const a=this.Nc.BL();a.NW(!0),o.BW(),a.NW(!1),t!==this.Nc._mt().Cj()&&this.ECt.GXt(t,o,e)},LZt(){this.hZt(!1)},kZt(t){this.bZt(t)},FZt(t,s){this.vZt(t,s)},DZt(t){this._Zt(t)},NZt(t){this.CZt(t)},rKt(t){this.PZt(t)},hKt(t,s){try{0===t?this.Vxt().CXt(s):this.Vxt().IXt(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},oKt(t,s,i){try{0===t?this.Vxt().AXt(s,i):this.Vxt().EXt(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},aKt(t){const s=this.aB(),i=s.Vg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Yg(e),s.NH())},lKt(t){const s=this.aB(),i=s.Kg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.jg(e),s.NH())},qW(t){const s=this.VXt.sz(),i=this.aB(),e=i.Vg()<0?-1:1,n=i.Kg()<0?-1:1,r=s.Vg()*t*e,h=s.Kg()*t*n;i.Vg()===r&&i.Kg()===h||(i._A(r,h),i.NH())},async uKt(t,s,i){const e=this.VXt.sz(),n=this.aB(),r=this.Nc,h=this.ECt;if(e.TZ()===t)return 0===s&&(n._A(e.Vg(),e.Kg()),n.NH()),void this.lH(fT.PB.jnt.CB.iKt);const o=fT.Un(fT.vPt);try{if(await o.FPt(r,t),!o.tK())throw new Error("image failed to load");if(this.zn())return void o.Jn();await o.rX(r.pM(),{Zx:r.IL()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.zn()||this.lH(fT.PB.jnt.CB.eKt))}this.zn()?o.Jn():(e.kPt(o),h.xXt(),h.Cj().Sf().dispatchEvent(new fT.Event("animationframeimagechange")),r.mB(),0===s&&(n._A(e.Vg(),e.Kg()),n.NH()),await this.TB(fT.PB.jnt.CB.iKt))},cKt(t){this.aB().SU(t)},ADt(t,s){this.aB().ADt(0===t,s)},fKt(t){this.aB().FM(t),this.Nc.mB()}}}self.Cs.PB.jnt.ort={dKt(){return this.TZt()},pKt(){return this.GZt()},mKt(){return this.$Xt.zJ()},gKt(){return this.$Xt.Pc()},yKt(){return this.IZt()},SKt(){return this.$Xt.NJ()},wKt(t){return this.n_t(t)[0]},bKt(t){return this.n_t(t)[1]},vKt(t){return this.n_t(t)[2]},MKt(){return this.nz()},xKt(){return this.fIt().Vg()},_Kt(){return this.fIt().Kg()},TKt(t){return this.EZt(t)[0]},GKt(t){return this.EZt(t)[1]},CKt(){return this.RZt()}};{const dT=self.Cs;dT.PB.Text=class extends dT.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{const pT=self.Cs;pT.PB.Text.nRt=class extends pT.TCt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}m5(t){}v5(){}}}{const mT=self.Cs,gT=self.Ns,yT=[0,0,0],ST=0,wT=1,bT=2,vT=3,MT=4,xT=5,_T=6,TT=7,GT=8,CT=9,IT=10,PT=11,AT=12,RT=13,ET=15,OT=["left","center","right"],FT=["top","center","bottom"],DT=["ltr","rtl"],kT=["word","cjk","character"],LT=new mT.Rect,NT=new mT.Il,BT=new mT._o,$T=mT.Un(mT.Ia),WT=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);mT.PB.Text.Instance=class extends mT.nIt{constructor(t,s){if(super(t),this.Bc="",this.IKt=!0,this.PKt="Arial",this.AKt=12,this.RKt=0,this.lP=!1,this.uP=!1,this.RM=mT.Un(mT._o),this.gP=0,this.yP=0,this.bP="word",this.vP=0,this.EKt="auto",this.OKt=1,this.FKt=null,this.DKt="",this.kKt=!1,this.LKt=!1,this.NKt=null,this.BKt=-1,this.$Kt=-1,this.WKt=0,this.VKt=mT.Un(mT.DS.Jv,this.Nc.pM(),{timeout:5}),this.VKt.qP=()=>this.Nc.mB(),this.jKt=()=>this.HKt(),this.UKt=!1,s){this.Bc=s[ST],this.IKt=!!s[wT],this.PKt=s[bT],this.AKt=s[vT],this.RKt=s[MT],this.lP=!!s[xT],this.uP=!!s[_T],this.gP=s[GT],this.yP=s[CT],this.bP=kT[s[IT]],this.vP=s[PT],this.JKt(this.Nc.dY(s[AT]));const t=s[TT];this.RM.Ao(t[0],t[1],t[2]),this.aB().OV(s[RT]),this.LKt=!!s[ET]}this.zKt(),this.qKt()}Jn(){this.JKt(null),this.YKt(),this.NKt&&(this.NKt.Jn(),this.NKt=null),this.VKt.Jn(),this.VKt=null,super.Jn()}zKt(){const t=this.VKt;t.Vc(this.Bc),t.KP(this.IKt),this.VKt.iP()&&this.FKt?this.VKt.$g(this.LB().xUt(this.FKt)):this.VKt.$g(null),t.QP("nearest"!==this.Nc.IL()),t.tA(this.PKt),t.nA(this.RKt),t.hA(this.lP),t.aA(this.uP),t.DM(this.RM),t.mA(OT[this.gP]),t.yA(FT[this.yP]),t.wA(this.bP),t.vA(DT[this.vP])}XKt(){const t=this.aB();this.VKt.sA(this.AKt),this.VKt.eA(t.ZFt());const s=t.lB();let i;"auto"===this.EKt?i=s.U1(t.ZH()):"fixed"===this.EKt&&(i=this.OKt),t.hJ()&&i!==this.VKt.TA()&&t.QDt(!0),this.VKt._A(t.Vg(),t.Kg(),i)}JKt(t){t&&(t.S0()||t.wW().constructor!==mT.PB.jnt)||t!==this.FKt&&(this.FKt&&this.FKt.Sf().removeEventListener("animationframeimagechange",this.jKt),this.FKt=t,this.FKt&&this.FKt.Sf().addEventListener("animationframeimagechange",this.jKt),this.zKt(),this.kKt=!1,this.Nc.mB())}HKt(){this.Nc._Ut(this.FKt),this.Nc.mB(),this.UKt=!0}qKt(){if(this.LKt){let t=this.Bc;this.IKt&&(t=mT.pn.Fg(t)),this.NKt?this.NKt.Vc(t):this.NKt=mT.Un(mT.Lc,this.Nc,t)}else this.NKt&&(this.NKt.Jn(),this.NKt=null)}$x(t){const s=this.aB();this.XKt(),this.UKt&&(this.UKt=!1,this.VKt.iP()&&this.FKt&&this.VKt.$g(this.LB().xUt(this.FKt)));const i=this.VKt.fT();if(!i)return;const e=s.lB();if(0===s.ZW()&&0===e.ZW()&&0===s.ZH()&&!s.hJ()&&e.n1()){const n=s.iU(),[r,h]=e.xj(n.Br(),n.$r()),[o,a]=e.xj(n.jr(),n.Hr()),l=r-Math.round(r),u=h-Math.round(h);LT.set(r,h,o,a),LT.offset(-l,-u),NT.Yl(LT);const[c,f]=t.bO(t.BO());this.Nc.xB().dX(t,c,f),t.hO(i),t.ev(NT,this.VKt.sR()),e.mX(t)}else t.hO(i),s.hJ()?this.iZt(s,t):this.eZt(s,t)}eZt(t,s){let i=t.iU();this.Nc.AL()&&(i=this.ZKt(i)),s.ev(i,this.VKt.sR())}iZt(t,s){const i=t.KDt();if(t.tkt()){t.QH(LT,NT,!1);let s=NT;this.Nc.AL()&&(s=this.ZKt(s)),i.Bx(t.oJ(),s,this.VKt.sR()),t.QDt(!1)}i.$x(s)}ZKt(t){const s=t.Br()-Math.round(t.Br()),i=t.$r()-Math.round(t.$r());return 0===s&&0===i?t:(NT.S(t),NT.offset(-s,-i),NT)}dIt(){const t=this.VKt.fT();return t?[t.Vg(),t.Kg()]:[100,100]}pIt(){return this.VKt.sR()}yIt(){return!1}hx(){const t={t:this.Bc,c:this.RM.toJSON(),fn:this.PKt,ps:this.AKt};return this.IKt&&(t.bbc=this.IKt),0!==this.gP&&(t.ha=this.gP),0!==this.yP&&(t.va=this.yP),"word"!==this.bP&&(t.wr=this.bP),0!==this.RKt&&(t.lho=this.RKt),this.lP&&(t.b=this.lP),this.uP&&(t.i=this.uP),-1!==this.$Kt&&(t.tw={st:this.BKt,en:this.$Kt,l:this.WKt}),this.FKt&&(t.ioc=this.FKt.G0()),"fixed"===this.EKt&&(t.fs=this.OKt),t}ox(t){if(this.YKt(),this.Bc=t.t,this.RM.Sa(t.c),this.PKt=t.fn,this.AKt=t.ps,this.IKt=!!t.hasOwnProperty("bbc")&&t.bbc,this.gP=t.hasOwnProperty("ha")?t.ha:0,this.yP=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.bP="boolean"==typeof s?s?"word":"character":s}else this.bP="word";if(this.RKt=t.hasOwnProperty("lho")?t.lho:0,this.lP=!!t.hasOwnProperty("b")&&t.b,this.uP=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.BKt=s.st,this.$Kt=s.en,this.WKt=s.l}if(t.hasOwnProperty("ioc")){const s=this.LB().dY(t.ioc);s&&this.JKt(s)}else this.JKt(null);t.hasOwnProperty("fs")?(this.EKt="fixed",this.OKt=t.fs):this.EKt="auto",this.zKt(),this.qKt(),this.kKt=!1,-1!==this.$Kt&&this.YCt()}Hrt(t){switch(t){case ST:return this.xA();case wT:return this.IKt;case bT:return this.KKt();case vT:return this.QKt();case MT:return this.tQt();case xT:return this.sQt();case _T:return this.iQt();case TT:return yT[0]=this.RM.No(),yT[1]=this.RM.Bo(),yT[2]=this.RM.$o(),yT;case GT:return this.eQt();case CT:return this.nQt();case IT:return this.rQt();case ET:return this.hQt()}}Xrt(t,s){switch(t){case ST:this.oQt(s);break;case wT:if(this.IKt===!!s)return;this.IKt=!!s,this.zKt();break;case bT:this.aQt(s);break;case vT:this.lQt(s);break;case MT:this.uQt(s);break;case xT:this.cQt(s);break;case _T:this.fQt(s);break;case TT:const t=this.RM,i=s;if(t.No()===i[0]&&t.Bo()===i[1]&&t.$o()===i[2])return;this.RM.Ao(i[0],i[1],i[2]),this.zKt();break;case GT:this.dQt(s);break;case CT:this.pQt(s);break;case IT:this.mQt(s)}}tIt(t,s,i,e){0===s&&0===i&&0===e||t!==TT||(this.RM.Ro(s,i,e),this.zKt())}oQt(t){this.Bc!==t&&(this.Bc=t,this.VKt.Vc(t),this.qKt(),this.kKt=!1,this.Nc.mB())}xA(){return this.Bc}gQt(t,s){this.XKt(),this.oQt(t),this.BKt=this.Nc.pN(),this.$Kt=this.BKt+s/this.Vz().Uj(),this.WKt=this.VKt.PA(),this.VKt.uA(0),this.YCt()}YKt(){this.BKt=-1,this.$Kt=-1,this.WKt=0,this.VKt.uA(-1),this.OCt()}yQt(){-1!==this.$Kt&&(this.YKt(),this.lH(mT.PB.Text.CB.SQt),this.Nc.mB())}aQt(t){this.PKt!==t&&(this.PKt=t,this.VKt.tA(t),this.Nc.mB())}KKt(){return this.PKt}cQt(t){t=!!t,this.lP!==t&&(this.lP=t,this.VKt.hA(t),this.Nc.mB())}sQt(){return this.lP}fQt(t){t=!!t,this.uP!==t&&(this.uP=t,this.VKt.aA(t),this.Nc.mB())}iQt(){return this.uP}lQt(t){this.AKt!==t&&(this.AKt=t,this.Nc.mB())}QKt(){return this.AKt}wQt(t){this.RM.Uo(t)||(this.RM.Lo(t),this.VKt.DM(this.RM),this.Nc.mB())}bQt(){return this.RM}uQt(t){this.RKt!==t&&(this.RKt=t,this.zKt(),this.Nc.mB())}tQt(){return this.RKt}dQt(t){this.gP!==t&&(this.gP=t,this.zKt(),this.Nc.mB())}eQt(){return this.gP}pQt(t){this.yP!==t&&(this.yP=t,this.zKt(),this.Nc.mB())}nQt(){return this.yP}vQt(t){this.mQt(kT[t])}mQt(t){this.bP!==t&&(this.bP=t,this.zKt(),this.Nc.mB())}rQt(){return this.bP}MQt(t){this.vP!==t&&(this.vP=t,this.zKt(),this.Nc.mB())}xQt(){return this.vP}_Qt(t){this.LKt=!!t,this.qKt()}hQt(){return this.LKt}TQt(t){this.EKt!==t&&(this.EKt=t,this.Nc.mB())}GQt(){return this.EKt}CQt(t){this.OKt!==t&&(this.OKt=t,"fixed"===this.EKt&&this.Nc.mB())}IQt(){return this.OKt}PQt(){return this.XKt(),this.VKt.GA()}AQt(){return this.XKt(),this.VKt.IA()}RQt(t,s){this.XKt();const i=this.aB();$T.set(t-i.UM(),s-i.qM()),$T.rotate(-i.ZW()),$T.offset(i.Vg()*i.jH(),i.Kg()*i.JH()),$T.wt(i.Vg(),i.Kg()),$T.scale(this.VKt.Vg(),this.VKt.Kg());const e=this.VKt.RA($T.Oa(),$T.Da());if(e){const t=e.Hy("tag");if(t)return t.Ig}return""}EQt(t,s,i){const e=this.RQt(s,i);return e&&mT.Ke(t,e)}OQt(t,s){this.XKt(),s=Math.floor(s);const i=this.VKt.OA(t,s);if(!i)return null;const e=this.aB(),n=this.VKt.dA(),r=i.By(),h=i.Wy()-(i.Kg()-i.ty())*n,o=i.Vg()*n/this.VKt.Vg()*e.Vg(),a=i.Kg()*n/this.VKt.Kg()*e.Kg();return $T.set(r,h),$T.wt(this.VKt.Vg(),this.VKt.Kg()),$T.scale(e.Vg(),e.Kg()),$T.offset(-e.Vg()*e.jH(),-e.Kg()*e.JH()),$T.rotate(e.ZW()),$T.offset(e.UM(),e.qM()),{x:$T.Oa(),y:$T.Da(),width:o,height:a}}FQt(t){return this.XKt(),this.VKt.FA(t)}DQt(t){let s=WT.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}kQt(t,s){let i=WT.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async LQt(){if(this.kKt)return this.DKt;const t=new mT.pn(this.Bc,{dg:!0}).Gg(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.KKt()}';`),this.sQt()&&e.push("font-weight: bold;"),this.iQt()&&e.push("font-style: italic;"),"character"===this.rQt()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.FKt?this.LB().xUt(this.FKt):null;if(this.FKt){const i=mT.Un(mT.Hd),e=[],r=new Map;for(const s of t)if(s.Xg()){const t=s.Xy(n);if(t){const s=t.RS().sz().WPt();if(r.has(s))continue;r.set(s,null),e.push(i.Bu((async()=>{const t=await s.uK();r.set(s,t)})))}}await Promise.all(e);const h=[];for(const e of t)if(e.Xg()){const t=e.Xy(n);if(t){const e=t.RS(),n=e.sz().WPt();h.push(i.Bu((async()=>{const i=await e.sz().jPt(r.get(n));s.set(t,i)})))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.Jy();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.DQt(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this.kQt(s,e));if(e.qg()&&(i+=mT.Pm(mT.Cm(e.yy().join("")),"\n","<br>")),e.Xg()&&n){const r=e.Xy(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Nc.IL()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.Yy()}" width="${r.Vg()}" height="${r.Kg()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.DQt(t);return i+="</span>",this.DKt=i,this.kKt=!0,this.DKt}d8(){const t=this.Nc.pN();if(t>=this.$Kt)this.YKt(),this.lH(mT.PB.Text.CB.SQt),this.Nc.mB();else{let s=mT.gr(this.BKt,this.$Kt,t,0,this.WKt);s=Math.floor(s),s!==this.VKt.cA()&&(this.VKt.uA(s),this.Nc.mB())}}QCt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.xA(),OZt:t=>this.oQt(t)},{name:t+".properties.font.name",value:this.KKt(),OZt:t=>this.aQt(t)},{name:t+".properties.size.name",value:this.QKt(),OZt:t=>this.lQt(t)},{name:t+".properties.line-height.name",value:this.tQt(),OZt:t=>this.uQt(t)},{name:t+".properties.bold.name",value:this.sQt(),OZt:t=>this.cQt(t)},{name:t+".properties.italic.name",value:this.iQt(),OZt:t=>this.fQt(t)}]}]}cCt(){return self.NQt}};const VT=new WeakMap,jT=new Map([["left",0],["center",1],["right",2]]),HT=new Map([["top",0],["center",1],["bottom",2]]),UT=["ltr","rtl"];self.NQt=class extends self.cJ{constructor(){super(),VT.set(this,self.Gj.Aj().gJ())}get text(){return VT.get(this).xA()}set text(t){gT.ue(t);const s=VT.get(this);s.YKt(),s.oQt(t)}BQt(t,s){gT.ue(t),gT.he(s);const i=VT.get(this);i.YKt(),i.gQt(t,s)}$Qt(){VT.get(this).yQt()}set yX(t){gT.ue(t),VT.get(this).aQt(t)}get yX(){return VT.get(this).KKt()}set wX(t){VT.get(this).cQt(t)}get wX(){return VT.get(this).sQt()}set bX(t){VT.get(this).fQt(t)}get bX(){return VT.get(this).iQt()}set SX(t){gT.he(t),VT.get(this).lQt(t)}get SX(){return VT.get(this).QKt()}set WQt(t){if(gT.Te(t),t.length<3)throw new Error("expected 3 elements");BT.Ao(t[0],t[1],t[2]),VT.get(this).wQt(BT)}get WQt(){const t=VT.get(this).bQt();return[t.No(),t.Bo(),t.$o()]}set lineHeight(t){gT.he(t),VT.get(this).uQt(t)}get lineHeight(){return VT.get(this).tQt()}set xX(t){gT.ue(t);const s=jT.get(t);if(void 0===s)throw new Error("invalid mode");VT.get(this).dQt(s)}get xX(){return OT[VT.get(this).eQt()]}set verticalAlign(t){gT.ue(t);const s=HT.get(t);if(void 0===s)throw new Error("invalid mode");VT.get(this).pQt(s)}get verticalAlign(){return FT[VT.get(this).nQt()]}set _X(t){if(!kT.includes(t))throw new Error("invalid mode");VT.get(this).mQt(t)}get _X(){return VT.get(this).rQt()}set TX(t){gT.ue(t);const s=UT.indexOf(t);if(-1===s)throw new Error("invalid text direction");VT.get(this).MQt(s)}get TX(){return UT[VT.get(this).xQt()]}set VQt(t){VT.get(this)._Qt(!!t)}get VQt(){return VT.get(this).hQt()}jQt(t){gT.he(t);const s=VT.get(this);s.TQt("fixed"),s.CQt(t)}HQt(){VT.get(this).TQt("auto")}get IX(){return VT.get(this).PQt()}get PX(){return VT.get(this).AQt()}UQt(){const t=VT.get(this);return[t.PQt(),t.AQt()]}JQt(t,s,i){return gT.ue(t),gT.he(s),gT.he(i),VT.get(this).EQt(t,s,i)}zQt(t,s){return gT.he(t),gT.he(s),VT.get(this).RQt(t,s)}qQt(t,s=0){return gT.ue(t),gT.he(s),VT.get(this).OQt(t,s)}YQt(t){return gT.ue(t),VT.get(this).FQt(t)}XQt(t){const s=VT.get(this),i=s.LB().d$(t);s.JKt(i)}ZQt(){return VT.get(this).LQt()}}}{const JT=self.Cs;JT.PB.Text.CB={KQt(t,s){return s?this.Bc===t:JT.Ke(this.Bc,t)},QQt(){return-1!==this.$Kt},SQt:()=>!0,t0t(t,s,i){return this.EQt(t,s,i)}}}{const zT=self.Cs,qT=zT.Un(zT._o);zT.PB.Text.hrt={Vc(t){this.YKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.oQt(t.toString())},s0t(t){this.YKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.oQt(this.Bc+t)},i0t(t,s){this.YKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.gQt(t.toString(),s)},e0t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.PKt&&i===this.lP&&e===this.uP||(this.aQt(t),this.cQt(i),this.fQt(e))},sA(t){this.lQt(t)},n0t(t){qT.Qo(t),qT.Zn(),this.wQt(qT)},r0t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},fKt(t){this.aB().FM(t),this.Nc.mB()},h0t(){this.yQt()},nA(t){this.uQt(t)},o0t(t){this.dQt(t)},a0t(t){this.pQt(t)},l0t(t){this.vQt(t)},vA(t){this.MQt(t)},u0t(t){this.JKt(t)},c0t(){return this.LQt()},f0t(t){this._Qt(t)},d0t(t,s){this.TQt(["auto","fixed"][t]),this.CQt(s)}}}{const YT=self.Cs;YT.PB.Text.ort={Text(){return this.Bc},p0t(){return this.IKt?YT.pn.Fg(this.Bc):this.Bc},m0t(){return this.PKt},g0t(){return this.AKt},y0t(){return this.PQt()},S0t(){return this.AQt()},w0t(){return this.RKt},b0t(t,s){return this.RQt(t,s)},v0t(t){return this.FQt(t)},M0t(t,s){const i=this.OQt(t,s);return i?i.x:0},x0t(t,s){const i=this.OQt(t,s);return i?i.y:0},_0t(t,s){const i=this.OQt(t,s);return i?i.width:0},T0t(t,s){const i=this.OQt(t,s);return i?i.height:0},G0t(){return this.DKt}}}{const XT=self.Cs;XT.PB.PlatformInfo=class extends XT.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{const ZT=self.Cs;ZT.PB.PlatformInfo.nRt=class extends ZT.TCt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const KT=self.Cs,QT="platform-info";KT.PB.PlatformInfo.Instance=class extends KT.ACt{constructor(t,s){super(t,QT),this.C0t=0,this.I0t=0,this.P0t=0,this.A0t=0,this.R0t=[0,0,0,0],this.E0t=!1,this.O0t=!1,this.WCt([["window-resize",t=>this.yBt(t)],["wake-lock-acquired",t=>this.F0t(t)],["wake-lock-error",t=>this.D0t(t)],["wake-lock-released",t=>this.k0t(t)]]),navigator.connection&&navigator.connection.addEventListener("change",(()=>this.L0t())),this.Nc.vB(this.jCt("get-initial-state").then((t=>{this.C0t=t.screenWidth,this.I0t=t.screenHeight,this.P0t=t.windowOuterWidth,this.A0t=t.windowOuterHeight,this.R0t=t.safeAreaInset,this.E0t=t.supportsWakeLock})))}Jn(){super.Jn()}yBt(t){this.P0t=t.windowOuterWidth,this.A0t=t.windowOuterHeight,this.R0t=t.safeAreaInset}async L0t(){await this.TB(KT.PB.PlatformInfo.CB.N0t)}async F0t(){this.O0t=!0,await this.TB(KT.PB.PlatformInfo.CB.B0t)}async D0t(){this.O0t=!1,await this.TB(KT.PB.PlatformInfo.CB.$0t)}async k0t(){this.O0t=!1,await this.TB(KT.PB.PlatformInfo.CB.W0t)}}}{const tG=self.Cs;tG.PB.PlatformInfo.CB={V0t:()=>tG.Ks.oi,j0t:()=>"Windows"===tG.Ks.Qs,H0t:()=>"macOS"===tG.Ks.Qs,U0t:()=>"Linux"===tG.Ks.Qs,J0t:()=>"Chrome OS"===tG.Ks.Qs,z0t:()=>"Android"===tG.Ks.Qs,q0t:()=>"iOS"===tG.Ks.Qs,Y0t(){const t=this.Nc.b$();return"html5"===t||"scirra-arcade"===t||"preview"===t||"instant-games"===t},X0t(){return this.Nc.sWt()},Z0t(){return this.Nc.v$()},K0t(){return"windows-uwp"===this.Nc.b$()},Q0t(){return this.Nc.M$()},t1t(){return"macos-wkwebview"===this.Nc.b$()},s1t(){return"linux-cef"===this.Nc.b$()},N0t:()=>!0,B0t:()=>!0,$0t:()=>!0,W0t:()=>!0,i1t(){return this.O0t},e1t(){return this.E0t}}}self.Cs.PB.PlatformInfo.hrt={n1t(){this.E0t&&this.HCt("request-wake-lock")},r1t(){this.E0t&&(this.O0t=!1,this.VCt("release-wake-lock"))}},self.Cs.PB.PlatformInfo.ort={h1t(){return this.Nc.xB().x$()},o1t(){return this.Nc.xB().T$()},a1t(){return this.Nc.N$()},l1t(){return this.C0t},u1t(){return this.I0t},c1t(){return this.Nc.xB().wq()},f1t(){return this.Nc.xB().bq()},d1t(){return this.P0t},p1t(){return this.A0t},m1t(){return this.Nc.xB().R$()},g1t(){return this.Nc.xB().O$()},y1t(){return this.Nc.xB().D$()},S1t(){return this.Nc.xB().L$()},w1t:()=>navigator.connection&&navigator.connection.downlink||0,b1t:()=>navigator.connection&&navigator.connection.downlinkMax||0,ConnectionType:()=>navigator.connection&&navigator.connection.type||"unknown",v1t:()=>navigator.connection&&navigator.connection.effectiveType||"unknown",M1t:()=>navigator.connection&&navigator.connection.rtt||0,x1t:()=>navigator.hardwareConcurrency||0,_1t:()=>navigator.deviceMemory||0,T1t(){return this.R0t[0]},G1t(){return this.R0t[1]},C1t(){return this.R0t[2]},I1t(){return this.R0t[3]},P1t(){return this.Nc.wN()},A1t(){return this.Nc.vN()}};{const sG=self.Cs,iG=[];sG.PB.Audio=class extends sG.WGt{constructor(t){super(t)}R1t(t){iG.push(t)}static async E1t(){await Promise.all(iG),sG.bh(iG)}Jn(){super.Jn()}}}{let eG=function(){return oG.gW().gJ()},nG=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};GetAudioSdkInstance=eG,GetAudioDOMInterface=nG;const rG=self.Cs,hG=self.Ns;rG.PB.Audio.nRt=class extends rG.TCt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}cCt(){return self.O1t}};let oG=null;self.O1t=class extends self.yW{constructor(t){super(t),oG=t}get F1t(){return nG().GetAudioContextExtern()}get D1t(){return nG().GetDestinationNodeExtern()}get k1t(){return eG().L1t()}set k1t(t){eG().N1t(t)}get B1t(){return eG().$1t()}set B1t(t){hG.he(t),eG().W1t(t)}V1t(){eG().j1t()}}}{const aG=self.Cs,lG="audio",uG=["interactive","balanced","playback"];aG.PB.Audio.Instance=class extends aG.ACt{constructor(t,s){super(t,lG),this.H1t=0,this.U1t=[],this.J1t=!0,this.z1t=0,this.q1t=0,this.Y1t=!1,this.X1t=1,this.Z1t=1,this.K1t=[this.Nc.Y0()/2,this.Nc.X0()/2,600],this.Q1t=[0,0,-1],this.t2t=[0,1,0],this.s2t=600,this.i2t=1e4,this.e2t=1,this.n2t=null,this.r2t=-1,this.h2t=1,this.o2t=!1,this.a2t=0,this.l2t="suspended",this.u2t=0,this.c2t=new Map,this.f2t=0,this.d2t=0,this.p2t=new Map,this.m2t=new Map;let i="interactive";s&&(this.z1t=s[0],this.q1t=s[1],this.Y1t=s[2],i=uG[s[3]],this.J1t=s[4],this.X1t=s[5],this.Z1t=s[6],this.K1t[2]=s[7],this.s2t=s[8],this.i2t=s[9],this.e2t=s[10]),this.g2t=[],this.y2t=[],this.S2t=[],this.WCt([["state",t=>this.w2t(t)],["audiocontext-state",t=>this.b2t(t)],["fxstate",t=>this.v2t(t)],["trigger",t=>this.M2t(t)],["buffer-metadata",t=>this.x2t(t)]]);const e=this.LB().Sf();this.Xf=new aG.zf(aG.Wf.Jf(e,"instancedestroy",(t=>this._2t(t.CJ))),aG.Wf.Jf(e,"afterload",(()=>this.g6())),aG.Wf.Jf(e,"suspend",(()=>this.T2t())),aG.Wf.Jf(e,"resume",(()=>this.G2t())));const n=this.Nc.b$(),r="Safari"===aG.Ks.si,h=this.Nc.SUt()||"macos-wkwebview"===n,o=this.Nc.lL().dZ(),a="playable-ad-single-file"===this.Nc.b$(),l=r||h||o||a;this.Nc.vB(this.jCt("create-audio-context",{preloadList:this.Nc.lL().HZ().map((t=>({originalUrl:t.UZ,url:t.url,type:t.type,fileSize:t.fileSize}))),timeScaleMode:this.z1t,latencyHint:i,panningModel:this.X1t,distanceModel:this.Z1t,refDistance:this.s2t,maxDistance:this.i2t,rolloffFactor:this.e2t,listenerPos:this.K1t,usePlayMusicAsSoundWorkaround:l}).then((t=>{this.a2t=t.sampleRate,this.l2t=t.audioContextState,this.u2t=t.outputLatency}))),this.YCt()}Jn(){this.n2t=null,super.Jn()}C2t(t){return this.J1t?t.split(" ").filter((t=>!!t)):t?[t]:[]}I2t(t,s){for(const i of s){let s=!1;for(const e of t)if(aG.Ke(e,i)){s=!0;break}if(!s)return!1}return!0}P2t(t,s){return this.I2t(t,this.C2t(s))}R1t(t){this.wW().R1t(t)}_2t(t){this.n2t===t&&(this.n2t=null)}A2t(t){return Math.pow(10,t/20)}R2t(t){const s=this.A2t(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}E2t(t){return Math.log(t)/Math.log(10)*20}O2t(t){return this.E2t(Math.max(Math.min(t,1),0))}T2t(){this.Y1t||this.VCt("set-suspended",{isSuspended:!0})}G2t(){this.Y1t||this.VCt("set-suspended",{isSuspended:!1})}w2t(t){const s=t.tickCount;this.u2t=t.outputLatency;const i=this.g2t.filter((t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.g2t=t.audioInstances,this.S2t=t.analysers,i.length>0&&aG.On(this.g2t,i)}x2t(t){this.p2t.set(t.originalUrl,{duration:t.duration})}b2t(t){this.l2t=t.audioContextState}grt(){return this.Nc.VBt()?"running":this.l2t}v2t(t){this.y2t=t.fxstate}F2t(t){const s=this.C2t(t);for(const t of this.g2t)if(this.I2t(t.tags,s))return t;return null}D2t(t){const s=this.C2t(t);return this.g2t.some((t=>this.I2t(t.tags,s)&&t.isPlaying))}k2t(t,s,i,e,n){if(this.D2t(s))return null;const r=this.p2t.get(t),h={tags:this.C2t(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.g2t.push(h),h}L2t(t){const s=this.C2t(t);for(const t of this.g2t)this.I2t(t.tags,s)&&(t.isPlaying=!1)}async M2t(t){const s=t.type;this.U1t=t.tags;const i=t.aiid;if("ended"===s){for(const t of this.g2t)if(t.aiid===i){t.isPlaying=!1;break}await this.TB(aG.PB.Audio.CB.N2t)}else"fade-ended"===s&&await this.TB(aG.PB.Audio.CB.B2t)}$2t(t){return this.P2t(this.U1t,t)}d8(){const t={timeScale:this.Nc.gN(),gameTime:this.Nc.cUt(),instPans:this.W2t(),tickCount:this.Nc.fUt()};if(this.n2t){const s=this.n2t.aB();this.K1t[0]=s.UM(),this.K1t[1]=s.qM(),t.listenerPos=this.K1t,t.listenerOrientation=[...this.Q1t,...this.t2t]}this.VCt("tick",t)}V2t(t,s,i,e,n){if(0===i)return[t,s];const r=Math.sin(i),h=Math.cos(i),o=(t-=e)*r;return t=t*h-(s-=n)*r,s=s*h+o,[t+=e,s+=n]}W2t(){return this.g2t.filter((t=>-1!==t.uid)).map((t=>this.Nc.eB(t.uid))).filter((t=>t)).map((t=>{const s=t.aB(),i=s.lB().ZW(),[e,n]=this.V2t(s.UM(),s.qM(),-i,this.K1t[0],this.K1t[1]);return{uid:t.$j(),x:e,y:n,z:s.ZH(),angle:s.ZW()-i}}))}j2t(t,s){for(const i of this.S2t)if(i.index===s&&aG.Ke(i.tag,t))return i;return null}H2t(t){for(const s of this.C2t(t)){const t=s.toLowerCase();this.c2t.set(t,(this.c2t.get(t)||0)+1)}}L1t(){return this.o2t}N1t(t){t=!!t,this.o2t!==t&&(this.o2t=t,this.VCt("set-silent",{isSilent:t}))}$1t(){return this.h2t}W1t(t){this.h2t!==t&&(this.h2t=t,this.VCt("set-master-volume",{vol:t}))}j1t(){this.VCt("stop-all");for(const t of this.g2t)t.isPlaying=!1}U2t(t){return!(t.hasOwnProperty("placeholder")||3===this.q1t||t.isMusic&&1===this.q1t||!t.isMusic&&2===this.q1t)}hx(){return{isSilent:this.o2t,masterVolume:this.h2t,listenerZ:this.K1t[2],listenerForwardVec:this.Q1t,listenerUpVec:this.t2t,listenerUid:this.n2t?this.n2t.$j():-1,remoteUrls:[...this.m2t.entries()],playing:this.g2t.filter((t=>this.U2t(t))),effects:this.y2t,analysers:this.S2t}}ox(t){if(this.o2t=t.isSilent,this.h2t=t.masterVolume,this.K1t[2]=t.listenerZ,this.n2t=null,this.r2t=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.Q1t=t.listenerForwardVec:this.Q1t=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.t2t=t.listenerUpVec:this.t2t=[0,1,0],this.m2t.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.m2t.set(s,i);this.g2t=t.playing;for(const t of this.g2t)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter((t=>!!t)));this.y2t=t.effects,this.S2t=t.analysers}g6(){if(-1!==this.r2t&&(this.n2t=this.Nc.eB(this.r2t),this.r2t=-1,this.n2t)){const t=this.n2t.aB();this.K1t[0]=t.UM(),this.K1t[1]=t.qM()}for(const t of this.g2t){const s=this.Nc.lL().jZ(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.y2t))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.Nc.lL().jZ(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this.VCt("load-state",{saveLoadMode:this.q1t,timeScale:this.Nc.gN(),gameTime:this.Nc.cUt(),listenerPos:this.K1t,listenerOrientation:[...this.Q1t,...this.t2t],isSilent:this.o2t,masterVolume:this.h2t,playing:this.g2t.filter((t=>null!==t.bufferUrl)),effects:this.y2t})}QCt(){const t=[];for(const[s,i]of Object.entries(this.y2t))t.push({name:"$"+s,value:i.map((t=>t.type)).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.g2t.length},...this.g2t.map(((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`})))]}]}}}self.Cs.PB.Audio.CB={N2t(t){return this.$2t(t)},B2t(t){return this.$2t(t)},J2t(){return this.d2t===this.f2t},z2t:()=>!0,q2t(){return this.L1t()},Y2t(){for(const t of this.g2t)if(t.isPlaying)return!0;return!1},X2t(t){return this.D2t(t)}};{const cG=self.Cs,fG=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];cG.PB.Audio.hrt={Play(t,s,i,e,n){const r=cG.PB.Audio.hrt.Z2t.call(this,t,s,i,e,n);return this.R1t(r),r},yrt(t,s,i,e){cG.PB.Audio.hrt.Z2t.call(this,t,0,s,0,i,e)},async Z2t(t,s,i,e,n,r){if(this.o2t)return;const h=t[1],o=this.Nc.lL().jZ(t[0]);if(!o)return;const a=this.H1t;this.H1t=0;const l=this.k2t(t[0],n,h,0!==s,this.R2t(i));try{await this.jCt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.C2t(n),isLooping:0!==s,vol:this.R2t(i),stereoPan:cG.Zn(e/100,-1,1),pos:r||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.Nc.fUt())}},async K2t(t,s,i,e,n,r,h,o,a,l,u){if(this.o2t)return;const c=t[1],f=this.Nc.lL().jZ(t[0]);if(!f)return;const d=this.H1t;this.H1t=0;const p=this.k2t(t[0],u,c,0!==s,this.R2t(i));try{await this.jCt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.C2t(u),isLooping:0!==s,vol:this.R2t(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:n,z:r,angle:cG.Qn(h),innerAngle:cG.Qn(o),outerAngle:cG.Qn(a),outerGain:this.R2t(l)}})}finally{p&&(p.placeholder=this.Nc.fUt())}},async Q2t(t,s,i,e,n,r,h,o){if(this.o2t)return;if(!e)return;const a=e.D_t();if(!a||!a.aB())return;const l=a.aB(),u=l.lB().ZW(),[c,f]=this.V2t(l.UM(),l.qM(),-u,this.K1t[0],this.K1t[1]),d=t[1],p=this.Nc.lL().jZ(t[0]);if(!p)return;const m=this.H1t;this.H1t=0;const g=this.k2t(t[0],o,d,0!==s,this.R2t(i));try{await this.jCt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.C2t(o),isLooping:0!==s,vol:this.R2t(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:l.ZH(),angle:l.ZW()-u,innerAngle:cG.Qn(n),outerAngle:cG.Qn(r),outerGain:this.R2t(h),uid:a.$j()}})}finally{g&&(g.placeholder=this.Nc.fUt())}},async t3t(t,s,i,e,n,r){if(this.o2t)return;const h=1===t,o=this.Nc.lL().jZ(s)||this.m2t.get(s.toLowerCase());if(!o)return;const a=this.H1t;this.H1t=0;const l=this.k2t(s,r,h,0!==i,this.R2t(e));try{await this.jCt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.C2t(r),isLooping:0!==i,vol:this.R2t(e),stereoPan:cG.Zn(n/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.Nc.fUt())}},async s3t(t,s,i,e,n,r,h,o,a,l,u,c){if(this.o2t)return;const f=1===t,d=this.Nc.lL().jZ(s)||this.m2t.get(s.toLowerCase());if(!d)return;const p=this.H1t;this.H1t=0;const m=this.k2t(s,c,f,0!==i,this.R2t(e));try{await this.jCt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.C2t(c),isLooping:0!==i,vol:this.R2t(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:n,y:r,z:h,angle:cG.Qn(o),innerAngle:cG.Qn(a),outerAngle:cG.Qn(l),outerGain:this.R2t(u)}})}finally{m&&(m.placeholder=this.Nc.fUt())}},async i3t(t,s,i,e,n,r,h,o,a){if(this.o2t)return;if(this.o2t)return;if(!n)return;const l=n.D_t();if(!l||!l.aB())return;const u=l.aB(),c=u.lB().ZW(),[f,d]=this.V2t(u.UM(),u.qM(),-c,this.K1t[0],this.K1t[1]),p=1===t,m=this.Nc.lL().jZ(s)||this.m2t.get(s.toLowerCase());if(!m)return;const g=this.H1t;this.H1t=0;const y=this.k2t(s,a,p,0!==i,this.R2t(e));try{await this.jCt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.C2t(a),isLooping:0!==i,vol:this.R2t(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:u.ZH(),angle:u.ZW()-c,innerAngle:cG.Qn(r),outerAngle:cG.Qn(h),outerGain:this.R2t(o),uid:l.$j()}})}finally{y&&(y.placeholder=this.Nc.fUt())}},e3t(t,s){this.VCt("set-looping",{tags:this.C2t(t),isLooping:0===s})},n3t(t,s){this.VCt("set-muted",{tags:this.C2t(t),isMuted:0===s})},prt(t,s){this.VCt("set-volume",{tags:this.C2t(t),vol:this.R2t(s)})},r3t(t,s,i,e){this.VCt("fade-volume",{tags:this.C2t(t),vol:this.R2t(s),duration:i,stopOnEnd:0===e})},h3t(t,s){this.VCt("set-stereo-pan",{tags:this.C2t(t),p:cG.Zn(s/100,-1,1)})},async o3t(t){const s=t[1],i=this.Nc.lL().jZ(t[0]);i&&(this.f2t++,await this.jCt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.d2t++)},async a3t(t,s){const i=1===t,e=this.Nc.lL().jZ(s)||this.m2t.get(s.toLowerCase());e&&(this.f2t++,await this.jCt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.d2t++)},Iz(t,s){this.VCt("set-playback-rate",{tags:this.C2t(t),rate:Math.max(s,0)})},Sz(t){this.L2t(t),this.VCt("stop",{tags:this.C2t(t)})},l3t(){this.j1t()},u3t(t,s){this.VCt("set-paused",{tags:this.C2t(t),paused:0===s})},c3t(t,s){this.VCt("seek",{tags:this.C2t(t),pos:s})},f3t(t){2===t&&(t=this.L1t()?1:0),this.N1t(0===t)},d3t(t){const s=this.R2t(t);this.W1t(s)},p3t(t,s,i,e,n,r,h){const o=fG[s];this.H2t(t),this.VCt("add-effect",{type:"filter",tags:this.C2t(t),params:[o,i,e,n,r,cG.Zn(h/100,0,1)]})},m3t(t,s,i,e){this.H2t(t),this.VCt("add-effect",{type:"delay",tags:this.C2t(t),params:[s,this.R2t(i),cG.Zn(e/100,0,1)]})},g3t(t,s,i,e,n,r){this.H2t(t),this.VCt("add-effect",{type:"flanger",tags:this.C2t(t),params:[s/1e3,i/1e3,e,n/100,cG.Zn(r/100,0,1)]})},y3t(t,s,i,e,n,r,h){this.H2t(t),this.VCt("add-effect",{type:"phaser",tags:this.C2t(t),params:[s,i,e,n,r,cG.Zn(h/100,0,1)]})},S3t(t,s,i,e){const n=this.Nc.lL().jZ(s[0]);n&&(this.H2t(t),this.VCt("add-effect",{type:"convolution",tags:this.C2t(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===i,cG.Zn(e/100,0,1)]}))},w3t(t,s){this.H2t(t),this.VCt("add-effect",{type:"gain",tags:this.C2t(t),params:[this.R2t(s)]})},b3t(t,s){this.H2t(t),this.VCt("add-effect",{type:"stereopan",tags:this.C2t(t),params:[cG.Zn(s/100,-1,1)]})},v3t(t){this.H2t(t),this.VCt("add-effect",{type:"gain",tags:this.C2t(t),params:[0]})},M3t(t,s,i){this.H2t(t),this.VCt("add-effect",{type:"tremolo",tags:this.C2t(t),params:[s,cG.Zn(i/100,0,1)]})},x3t(t,s,i){this.H2t(t),this.VCt("add-effect",{type:"ringmod",tags:this.C2t(t),params:[s,cG.Zn(i/100,0,1)]})},_3t(t,s,i,e,n,r){this.H2t(t),this.VCt("add-effect",{type:"distortion",tags:this.C2t(t),params:[this.A2t(s),this.A2t(i),e,this.A2t(n),cG.Zn(r/100,0,1)]})},T3t(t,s,i,e,n,r){this.H2t(t),this.VCt("add-effect",{type:"compressor",tags:this.C2t(t),params:[s,i,e,n/1e3,r/1e3]})},G3t(t,s,i){this.H2t(t),this.VCt("add-effect",{type:"analyser",tags:this.C2t(t),params:[s,i]})},C3t(t){const s=this.C2t(t);for(const t of s)this.c2t.set(t.toLowerCase(),0);this.VCt("remove-effects",{tags:s}),this.y2t={}},kJ(t,s,i,e,n,r){this.VCt("set-effect-param",{tags:this.C2t(t),index:Math.floor(s),param:i,value:e,ramp:n,time:r})},I3t(t){if(!t)return;const s=t.D_t();s&&s.aB()&&(this.n2t=s)},P3t(t){this.K1t[2]=t},A3t(t,s,i,e,n,r){this.Q1t[0]=t,this.Q1t[1]=s,this.Q1t[2]=-i,this.t2t[0]=e,this.t2t[1]=n,this.t2t[2]=-r},R3t(t){this.H1t=Math.max(t,0)},E3t(t){const s=t[1],i=this.Nc.lL().jZ(t[0]);i&&this.VCt("unload",{url:i.url,type:i.type,isMusic:s})},O3t(t,s){const i=1===t,e=this.Nc.lL().jZ(s)||this.m2t.get(s.toLowerCase());e&&this.VCt("unload",{url:e.url,type:e.type,isMusic:i})},F3t(){this.VCt("unload-all")},D3t(t,s,i){this.m2t.set(i.toLowerCase(),{url:t,type:s})}}}{const dG=self.Cs;dG.PB.Audio.ort={k3t(t){const s=this.F2t(t);return s?s.duration:0},urt(t){const s=this.F2t(t);return s?s.playbackTime:0},mrt(t){const s=this.F2t(t);return s?s.playbackRate:0},crt(t){const s=this.F2t(t);return s?this.O2t(s.volume):0},L3t(){return this.O2t(this.$1t())},N3t(t){return this.c2t.get(t.toLowerCase())||0},B3t(t,s){const i=this.j2t(t,Math.floor(s));return i?i.binCount:0},$3t(t,s,i){const e=this.j2t(t,Math.floor(s));return e?(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]:0},W3t(t,s){const i=this.j2t(t,Math.floor(s));return i?i.peak:0},V3t(t,s){const i=this.j2t(t,Math.floor(s));return i?i.rms:0},j3t(){return this.a2t},H3t:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,U3t(){return this.u2t},J3t(t,s){return 0==(t=dG.Zn(+t,0,100)/100)?-1/0:t<.1?this.O2t(dG.Ct(0,this.R2t(s),10*t)):dG.Ct(s,0,(t-.1)/.9)}}}{const pG=self.Cs;pG.PB.si=class extends pG.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{const mG=self.Cs;mG.PB.si.nRt=class extends mG.TCt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const gG=self.Cs,yG="browser";gG.PB.si.Instance=class extends gG.ACt{constructor(t,s){super(t,yG),this.z3t="",this.q3t=!1,this.Y3t="",this.X3t="",this.Z3t=!1,this.C0t=0,this.I0t=0,this.P0t=0,this.A0t=0,this.K3t=!1,this.Q3t=!1,this.t5t=new Map,this.s5t=!1,this.i5t="",this.e5t=!1,this.WCt([["online-state",t=>this.n5t(t)],["backbutton",()=>this.r5t()],["sw-message",t=>this.h5t(t)],["hashchange",t=>this.o5t(t)],["install-available",()=>this.a5t()],["app-installed",t=>this.l5t(t)]]);const i=this.LB().Sf();this.Xf=new gG.zf(gG.Wf.Jf(i,"afterfirstlayoutstart",(()=>this.u5t())),gG.Wf.Jf(i,"window-resize",(()=>this.yBt())),gG.Wf.Jf(i,"window-focus",(()=>this.Tjt())),gG.Wf.Jf(i,"window-blur",(()=>this._jt())),gG.Wf.Jf(i,"suspend",(()=>this.T2t())),gG.Wf.Jf(i,"resume",(()=>this.G2t()))),this.Nc.vB(this.jCt("get-initial-state",{exportType:this.Nc.b$()}).then((t=>{this.z3t=t.location,this.q3t=t.isOnline,this.Y3t=t.referrer,this.X3t=t.title,this.Z3t=t.isCookieEnabled,this.C0t=t.screenWidth,this.I0t=t.screenHeight,this.P0t=t.windowOuterWidth,this.A0t=t.windowOuterHeight,this.K3t=t.windowHasFocus,this.Q3t=t.isConstructArcade})))}Jn(){super.Jn()}u5t(){this.VCt("ready-for-sw-messages")}async n5t(t){const s=!!t.isOnline;this.q3t!==s&&(this.q3t=s,this.q3t?await this.TB(gG.PB.si.CB.c5t):await this.TB(gG.PB.si.CB.f5t))}async yBt(){await this.TB(gG.PB.si.CB.d5t)}async Tjt(){this.K3t=!0,await this.TB(gG.PB.si.CB.p5t)}async _jt(){this.K3t=!1,await this.TB(gG.PB.si.CB.m5t)}T2t(){this.lH(gG.PB.si.CB.g5t)}G2t(){this.lH(gG.PB.si.CB.y5t)}async r5t(){await this.TB(gG.PB.si.CB.S5t)}h5t(t){const s=t.type;"downloading-update"===s?this.lH(gG.PB.si.CB.w5t):"update-ready"===s||"update-pending"===s?this.lH(gG.PB.si.CB.b5t):"offline-ready"===s&&this.lH(gG.PB.si.CB.v5t)}o5t(t){this.z3t=t.location,this.lH(gG.PB.si.CB.M5t)}a5t(){this.s5t=!0,this.lH(gG.PB.si.CB.x5t)}l5t(t){this.s5t=!1,this.lH(gG.PB.si.CB._5t)}T5t(){return this.e5t}G5t(t){t=!!t,this.e5t!==t&&(this.e5t=t,this.VCt("set-warn-on-close",{enabled:t}))}QCt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.q3t},{name:t+".is-fullscreen",value:this.Nc.xB().e$t()}]}]}}}{const SG=self.Cs;SG.PB.si.CB={C5t(){return this.q3t},c5t:()=>!0,f5t:()=>!0,d5t:()=>!0,p5t:()=>!0,m5t:()=>!0,I5t(){return this.K3t},P5t(){return this.Z3t},A5t(){return this.Nc.xB().e$t()},S5t:()=>!0,R5t(t){return(this.Nc.xB().wq()<=this.Nc.xB().bq()?0:1)===t},w5t:()=>!0,b5t:()=>!0,v5t:()=>!0,M5t:()=>!0,x5t:()=>!0,E5t(){return this.s5t},O5t(t){switch(t){case 0:return"accepted"===this.i5t;case 1:return"dismissed"===this.i5t;case 2:return"error"===this.i5t;case 3:return!0;default:return!1}},_5t:()=>!0,F5t(t){const s=this.Nc.xB().r$t();switch(t){case 0:return"browser"===s;case 1:return"minimal-ui"===s;case 2:return"standalone"===s;case 3:return"fullscreen"===s;default:return!1}},D5t(){return this.T5t()},k5t(){return!this.Nc.hN()},g5t:()=>!0,y5t:()=>!0,L5t:()=>!1,N5t:()=>!1,B5t:()=>!1,$5t:()=>!1,W5t:()=>!1,V5t:()=>!0,j5t:()=>!0}}{const C3=self.Cs,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.PB.si.hrt={H5t(t){this.VCt("alert",{message:t.toString()})},U5t(){this.Q3t||(this.Nc.yH()?self.SH.J5t():this.VCt("close"))},z5t(){this.VCt("set-focus",{isFocus:!0})},q5t(){this.VCt("set-focus",{isFocus:!1})},Y5t(){this.Q3t||this.VCt("navigate",{type:"back"})},X5t(){this.Q3t||this.VCt("navigate",{type:"forward"})},Z5t(){},K5t(){this.Q3t||(this.Nc.yH()?this.Nc.Djt({type:"reload"}):this.VCt("navigate",{type:"reload"}))},Q5t(t,s){this.HCt("navigate",{type:"url",url:t,target:s,exportType:this.Nc.b$()})},t4t(t,s){this.HCt("navigate",{type:"new-window",url:t,tag:s,exportType:this.Nc.b$()})},s4t(t,s){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const i=C3.ZLt.c$t(t);this.Nc.xB().o$t(i),this.HCt("request-fullscreen",{navUI:s})},i4t(){this.HCt("exit-fullscreen")},e4t(t){const s=t.split(",");for(let t=0,i=s.length;t<i;++t)s[t]=parseInt(s[t],10);this.HCt("vibrate",{pattern:s})},async sB(t,s){if(!t||!s)return;const i=await this.Nc.lL().jB(t);this.Nc.sB(i,s)},n4t(t,s,i){if(!i)return;const e=`data:${s},${encodeURIComponent(t)}`;this.Nc.sB(e,i)},r4t(t,s){s=s.toString(),0===t?console.log(s):1===t?console.warn(s):2===t&&console.error(s)},h4t(t){console.group(t)},o4t(){console.groupEnd()},a4t(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},l4t(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const s=ORIENTATIONS[t];this.HCt("lock-orientation",{orientation:s})},u4t(){this.HCt("unlock-orientation")},s$(t){this.Nc.lL().s$(t)},async c4t(t,s,i,e){await this.jCt("set-document-css-style",{prop:C3.vo(t),value:s,selector:i,"is-all":0!==e})},async f4t(t,s,i){const e=await this.jCt("get-document-css-style",{prop:t,selector:s});e.isOk&&this.t5t.set(i.toLowerCase(),e.result.trim())},d4t(t){this.VCt("set-hash",{hash:t})},p4t(t,s){this.VCt("set-window-size",{windowWidth:t,windowHeight:s})},m4t(t,s){this.VCt("set-window-position",{windowX:t,windowY:s})},async g4t(){const t=await this.jCt("request-install");this.i5t=t.result,this.lH(C3.PB.si.CB.O5t)},y4t(t){this.G5t(t)}}}{const C3=self.Cs;C3.PB.si.ort={URL(){return this.Nc.xL()?this.z3t:location.toString()},S4t(){return this.Nc.xL()?new URL(this.z3t).protocol:location.protocol},w4t(){return this.Nc.xL()?new URL(this.z3t).hostname:location.hostname},Port(){return this.Nc.xL()?new URL(this.z3t).port:location.port},b4t(){return this.Nc.xL()?new URL(this.z3t).pathname:location.pathname},v4t(){return this.Nc.xL()?new URL(this.z3t).hash:location.hash},Ys(){return this.Nc.xL()?new URL(this.z3t).search:location.search},M4t(t){const s=this.Nc.xL()?new URL(this.z3t).search:location.search,i=RegExp("[?&]"+t+"=([^&]*)").exec(s);return i?decodeURIComponent(i[1].replace(/\+/g," ")):""},x4t(){return this.Y3t},_4t(){return this.X3t},T4t:()=>navigator.language,Ks:()=>navigator.platform,G4t:()=>navigator.userAgent,C4t(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.t5t.get(t)||""},I4t:()=>navigator.appName,P4t:()=>navigator.appVersion,A4t:()=>navigator.product,R4t:()=>navigator.vendor,E4t:()=>1,O4t:()=>1/0,F4t(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},a1t:()=>self.devicePixelRatio,l1t(){return this.C0t},u1t(){return this.I0t},c1t(){return this.Nc.xB().wq()},f1t(){return this.Nc.xB().bq()},d1t(){return this.P0t},p1t(){return this.P0t},D4t(){return this.Nc.xB().r$t()},k4t(){return this.i5t}}}{const wG=self.Cs;wG.PB.Touch=class extends wG.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{let bG=function(){return xG.gW().gJ()};GetTouchSdkInstance=bG;const vG=self.Cs,MG=self.Ns;vG.PB.Touch.nRt=class extends vG.TCt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}cCt(){return self.L4t}};let xG=null;self.L4t=class extends self.yW{constructor(t){super(t),xG=t,t.LB().XN().KN=this}requestPermission(t){MG.ue(t);const s=bG();if("orientation"===t)return s.N4t(0);if("motion"===t)return s.N4t(1);throw new Error("invalid type")}}}{const _G=self.Cs,TG="touch";_G.PB.Touch.Instance=class extends _G.ACt{constructor(t,s){super(t,TG),this.B4t=new Map,this.$4t=!1,this.W4t=!1,this.V4t=0,this.j4t=0,this.H4t=0,this.U4t=0,this.J4t=0,this.z4t=0,this.q4t=0,this.Y4t=0,this.X4t=0,this.Z4t=0,this.K4t=0,this.Q4t=0,this.t6t=0,this.s6t=0,this.i6t=0,this.e6t=0,this.n6t=0,this.r6t=[],s&&(this.$4t=s[0]),this.$Ct("permission-result",(t=>this.h6t(t)));const i=this.LB().Sf();this.Xf=new _G.zf(_G.Wf.Jf(i,"pointerdown",(t=>this.o6t(t.data))),_G.Wf.Jf(i,"pointermove",(t=>this.a6t(t.data))),_G.Wf.Jf(i,"pointerup",(t=>this.l6t(t.data,!1))),_G.Wf.Jf(i,"pointercancel",(t=>this.l6t(t.data,!0))),_G.Wf.Jf(i,"deviceorientation",(t=>this.u6t(t.data))),_G.Wf.Jf(i,"deviceorientationabsolute",(t=>this.c6t(t.data))),_G.Wf.Jf(i,"devicemotion",(t=>this.f6t(t.data))),_G.Wf.Jf(i,"tick2",(t=>this.h6())))}Jn(){this.B4t.clear(),super.Jn()}o6t(t){if("mouse"===t.pointerType){if(!this.$4t)return;this.W4t=!0}const s=t.pointerId;if(this.B4t.has(s))return;const i=t.pageX-this.Nc.C$(),e=t.pageY-this.Nc.P$(),n=performance.now(),r=this.B4t.size;this.K4t=r,this.Q4t=s;const h=_G.Un(_G.PB.Touch.d6t);h.CEt(n,i,e,s,r),this.B4t.set(s,h),this.lH(_G.PB.Touch.CB.p6t),this.lH(_G.PB.Touch.CB.m6t),this.s6t=i,this.i6t=e,this.n6t=0,this.lH(_G.PB.Touch.CB.g6t)}a6t(t){if("mouse"===t.pointerType&&!this.W4t)return;const s=this.B4t.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.AF()<2)return;const e=t.pageX-this.Nc.C$(),n=t.pageY-this.Nc.P$();s.AK(i,e,n,t.width,t.height,t.pressure)}l6t(t,s){if("mouse"===t.pointerType){if(!this.W4t)return;this.W4t=!1}const i=performance.now(),e=t.pointerId,n=this.B4t.get(e);if(n){if(this.K4t=n.y6t(),this.Q4t=n.zz(),!s){const s=t.pageX-this.Nc.C$(),i=t.pageY-this.Nc.P$();this.s6t=s,this.i6t=i,this.n6t=1,this.lH(_G.PB.Touch.CB.g6t)}if(this.lH(_G.PB.Touch.CB.S6t),this.lH(_G.PB.Touch.CB.w6t),!s){const t=n.b6t(i);"single-tap"===t?(this.lH(_G.PB.Touch.CB.v6t),this.s6t=n.UM(),this.i6t=n.qM(),this.lH(_G.PB.Touch.CB.M6t)):"double-tap"===t&&(this.lH(_G.PB.Touch.CB.x6t),this.s6t=n.UM(),this.i6t=n.qM(),this.lH(_G.PB.Touch.CB._6t))}n.Jn(),this.B4t.delete(e)}}N4t(t){return this.HCt("request-permission",{type:t}),new Promise(((s,i)=>{this.r6t.push({type:t,resolve:s,reject:i})}))}h6t(t){const s=t.result,i=t.type;this.t6t=i;const e=this.r6t.filter((t=>t.type===i));for(const t of e)t.resolve(s?"granted":"denied");this.r6t=this.r6t.filter((t=>t.type!==i)),s?(this.lH(_G.PB.Touch.CB.T6t),0===i?this.Nc.QUt():this.Nc.tJt()):this.lH(_G.PB.Touch.CB.G6t)}u6t(t){"number"==typeof t.webkitCompassHeading?this.V4t=t.webkitCompassHeading:t.absolute&&(this.V4t=t.alpha),this.j4t=t.alpha,this.H4t=t.beta,this.U4t=t.gamma}c6t(t){this.V4t=t.alpha}f6t(t){const s=t.acceleration;s&&(this.J4t=s.x,this.z4t=s.y,this.q4t=s.z);const i=t.accelerationIncludingGravity;i&&(this.Y4t=i.x,this.X4t=i.y,this.Z4t=i.z)}h6(){const t=performance.now();let s=0;for(const i of this.B4t.values())i.AF()<=t-50&&i.C6t(t),i.I6t(t)&&(this.K4t=i.y6t(),this.Q4t=i.zz(),this.e6t=s,this.lH(_G.PB.Touch.CB.P6t),this.s6t=i.UM(),this.i6t=i.qM(),this.lH(_G.PB.Touch.CB.A6t),this.e6t=0),++s}R6t(t){t=Math.floor(t);for(const s of this.B4t.values()){if(0===t)return s;--t}return null}E6t(t,s){return t>=0&&s>=0&&t<this.Nc.yHt()&&s<this.Nc.SHt()}QCt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.B4t.values()].map((t=>({name:"$"+t.zz(),value:t.UM()+", "+t.qM()})))}]}}}{const GG=self.Cs;GG.PB.Touch.CB={m6t:()=>!0,w6t:()=>!0,O6t(){return this.B4t.size>0},g6t(t,s){return!!t&&s===this.n6t&&!!this.E6t(this.s6t,this.i6t)&&this.Nc.fL().aLt(t,[[this.s6t,this.i6t]],!1)},F6t(t){if(!t)return!1;const s=this.Nc.Mmt().JMt(),i=[...this.B4t.values()].filter((t=>this.E6t(t.UM(),t.qM()))).map((t=>[t.UM(),t.qM()]));return GG.xor(this.Nc.fL().aLt(t,i,s),s)},D6t(t,s,i){const e=this.R6t(t);return!!e&&GG.compare(e.NJ(),s,i)},k6t:()=>!0,L6t:()=>!0,N6t(t,s,i){this.Nc.QUt();let e=0;return e=0===t?this.j4t:1===t?this.H4t:this.U4t,GG.compare(e,s,i)},B6t(t,s,i){this.Nc.tJt();let e=0;return e=0===t?this.Y4t:1===t?this.X4t:2===t?this.Z4t:3===t?this.J4t:4===t?this.z4t:this.q4t,GG.compare(e,s,i)},p6t(t){return(t=Math.floor(t))===this.K4t},S6t(t){return(t=Math.floor(t))===this.K4t},$6t(t){return t=Math.floor(t),this.B4t.size>=t+1},P6t:()=>!0,v6t:()=>!0,x6t:()=>!0,A6t(t){return!!t&&!!this.E6t(this.s6t,this.i6t)&&this.Nc.fL().aLt(t,[[this.s6t,this.i6t]],!1)},M6t(t){return!!t&&!!this.E6t(this.s6t,this.i6t)&&this.Nc.fL().aLt(t,[[this.s6t,this.i6t]],!1)},_6t(t){return!!t&&!!this.E6t(this.s6t,this.i6t)&&this.Nc.fL().aLt(t,[[this.s6t,this.i6t]],!1)},T6t(t){return this.t6t===t},G6t(t){return this.t6t===t}}}self.Cs.PB.Touch.hrt={W6t(t){this.N4t(t)}};{const CG=self.Cs;CG.PB.Touch.ort={V6t(){return this.B4t.size},QTt(t){const s=this.R6t(this.e6t);return s?s.j6t(this.Nc.hB(),t,!0):0},tGt(t){const s=this.R6t(this.e6t);return s?s.j6t(this.Nc.hB(),t,!1):0},H6t(t,s){const i=this.R6t(t);return i?i.j6t(this.Nc.hB(),s,!0):0},U6t(t,s){const i=this.R6t(t);return i?i.j6t(this.Nc.hB(),s,!1):0},J6t(t,s){const i=this.B4t.get(t);return i?i.j6t(this.Nc.hB(),s,!0):0},z6t(t,s){const i=this.B4t.get(t);return i?i.j6t(this.Nc.hB(),s,!1):0},q6t(){const t=this.R6t(0);return t?t.UM():0},Y6t(){const t=this.R6t(0);return t?t.qM():0},X6t(t){const s=this.R6t(t);return s?s.UM():0},Z6t(t){const s=this.R6t(t);return s?s.qM():0},K6t(t){const s=this.B4t.get(t);return s?s.UM():0},Q6t(t){const s=this.B4t.get(t);return s?s.qM():0},t8t(t){const s=this.R6t(t);return s?s.NJ():0},s8t(t){const s=this.B4t.get(t);return s?s.NJ():0},i8t(t){const s=this.R6t(t);return s?CG.tr(s.ZW()):0},e8t(t){const s=this.B4t.get(t);return s?CG.tr(s.ZW()):0},n8t(){return this.Nc.QUt(),this.V4t},r8t(){return this.Nc.QUt(),this.j4t},h8t(){return this.Nc.QUt(),this.H4t},o8t(){return this.Nc.QUt(),this.U4t},a8t(){return this.Nc.tJt(),this.Y4t},l8t(){return this.Nc.tJt(),this.X4t},u8t(){return this.Nc.tJt(),this.Z4t},c8t(){return this.Nc.tJt(),this.J4t},f8t(){return this.Nc.tJt(),this.z4t},d8t(){return this.Nc.tJt(),this.q4t},p8t(){return this.K4t},m8t(){return this.Q4t},g8t(t){const s=this.B4t.get(t);return s?s.Vg():0},y8t(t){const s=this.B4t.get(t);return s?s.Kg():0},S8t(t){const s=this.B4t.get(t);return s?s.w8t():0}}}{const IG=self.Cs,PG=15,AG=500,RG=333,EG=25;let OG=-1e3,FG=-1e3,DG=-1e4;IG.PB.Touch.d6t=class extends IG.jn{constructor(){super(),this.b8t=0,this.NC=0,this.DVt=0,this.GD=0,this.v8t=0,this.M8t=0,this.x8t=0,this.Pa=0,this.Aa=0,this._8t=0,this.T8t=0,this.Py=0,this.Ay=0,this.G8t=0,this.C8t=!1,this.I8t=!1}Jn(){}CEt(t,s,i,e,n){this.b8t=e,this.NC=n,this.GD=t,this.v8t=t,this.DVt=t,this.M8t=s,this.x8t=i,this.Pa=s,this.Aa=i,this._8t=s,this.T8t=i}AK(t,s,i,e,n,r){this.v8t=this.GD,this.GD=t,this._8t=this.Pa,this.T8t=this.Aa,this.Pa=s,this.Aa=i,this.Py=e,this.Ay=n,this.G8t=r,!this.I8t&&IG.er(this.M8t,this.x8t,this.Pa,this.Aa)>=15&&(this.I8t=!0)}zz(){return this.b8t}y6t(){return this.NC}AF(){return this.GD}C6t(t){this.v8t=t}UM(){return this.Pa}qM(){return this.Aa}NJ(){const t=IG.er(this.Pa,this.Aa,this._8t,this.T8t),s=(this.GD-this.v8t)/1e3;return s>0?t/s:0}ZW(){return IG.rr(this._8t,this.T8t,this.Pa,this.Aa)}Vg(){return this.Py}Kg(){return this.Ay}w8t(){return this.G8t}I6t(t){return!this.C8t&&t-this.DVt>=500&&!this.I8t&&IG.er(this.M8t,this.x8t,this.Pa,this.Aa)<15&&(this.C8t=!0,!0)}b6t(t){return this.C8t?"":t-this.DVt<=333&&!this.I8t&&IG.er(this.M8t,this.x8t,this.Pa,this.Aa)<15?t-DG<=666&&IG.er(OG,FG,this.Pa,this.Aa)<25?(OG=-1e3,FG=-1e3,DG=-1e4,"double-tap"):(OG=this.Pa,FG=this.Aa,DG=t,"single-tap"):""}j6t(t,s,i){if(void 0===s)return t.cB(0).X2(this.Pa,this.Aa)[i?0:1];{const e=t.lB(s);return e?e.yj(this.Pa,this.Aa)[i?0:1]:0}}}}{const kG=self.Cs;kG.PB.P8t=class extends kG.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{const LG=self.Cs;LG.PB.P8t.nRt=class extends LG.TCt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const NG=self.Cs;NG.PB.P8t.Instance=class extends NG.ACt{constructor(t,s){if(super(t),this.A8t="",this.R8t=0,this.E8t="",this.O8t=0,this.kf=-1,this.F8t=new Map,this.D8t=null,this.k8t="",this.L8t=!1,this.N8t=null,this.B8t=null,this.$8t=null,this.cWt=this.Nc.v$(),this.cWt){this.N8t=__require("fs"),this.B8t=__require("path");const t=self.process||nw.process;this.$8t=this.B8t.dirname(t.execPath)+"\\"}}Jn(){super.Jn()}async W8t(t,s,i){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,i),this.E8t=t,await this.TB(NG.PB.P8t.CB.V8t),this.E8t=t,await this.TB(NG.PB.P8t.CB.j8t)}async H8t(t){this.E8t=t,await this.TB(NG.PB.P8t.CB.U8t),this.E8t=t,await this.TB(NG.PB.P8t.CB.J8t)}async z8t(t,s){s.lengthComputable&&(this.O8t=s.loaded/s.total,this.E8t=t,await this.TB(NG.PB.P8t.CB.q8t))}async Y8t(t,s){s.lengthComputable&&(this.O8t=s.loaded/s.total,this.E8t=t,await this.TB(NG.PB.P8t.CB.X8t))}Z8t(t,s,i){if(!this.cWt)return void this.W8t(t,s,i);const e=this.N8t,n=this.$8t+s;e.existsSync(n)?e.readFile(n,{encoding:"utf8"},((i,e)=>{i?this.W8t(t,s,i):(this.A8t=e.replace(/\r\n/g,"\n"),this.H8t(t))})):this.W8t(t,s,i)}async K8t(t,s){const i=this.Nc.lL(),e=this.D8t;this.D8t=null;try{if(e){const n=await i.mZ(s);e.Q8t(n),this.A8t="",this.R8t=0,this.H8t(t)}else{const e=await i.gZ(s);this.A8t=e.replace(/\r\n/g,"\n"),this.R8t=0,this.H8t(t)}}catch(i){this.W8t(t,s,i)}}t7t(t,s,i,e){return new Promise((n=>{const r=i=>{this.Z8t(t,s,i),n()},h=this.D8t;this.D8t=null;try{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(this.A8t=h?"":(o.responseText||"").replace(/\r\n/g,"\n"),this.R8t=o.status,o.status>=400)this.W8t(t,s,o.status+o.statusText);else{const s=this.A8t.length||h&&o.response instanceof ArrayBuffer;this.cWt&&!s||!this.cWt&&0===o.status&&!s||(h&&h.Q8t(o.response),this.H8t(t))}n()}},o.onerror=r,o.ontimeout=r,o.onabort=r,o.onprogress=s=>this.z8t(t,s),o.upload.onprogress=s=>this.Y8t(t,s),o.open(i,s),this.kf>=0&&void 0!==o.timeout&&(o.timeout=this.kf),o.responseType=h?"arraybuffer":"text",e&&!this.F8t.has("Content-Type")&&("string"!=typeof e?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[t,s]of this.F8t)try{o.setRequestHeader(t,s)}catch(i){console.error(`[Construct] AJAX: Failed to set header '${t}: ${s}': `,i)}if(this.F8t.clear(),this.k8t){try{o.overrideMimeType(this.k8t)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.k8t=""}this.L8t&&(o.withCredentials=!0,this.L8t=!1),e?o.send(e):o.send()}catch(t){r(t)}}))}QCt(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.R8t},{name:t+".last-data",value:this.A8t}]}]}hx(){return{lastData:this.A8t,lastStatusCode:this.R8t}}ox(t){this.A8t=t.lastData,this.R8t=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.E8t="",this.O8t=0}}}{const BG=self.Cs;BG.PB.P8t.CB={J8t(t){return BG.Ke(this.E8t,t)},U8t:()=>!0,j8t(t){return BG.Ke(this.E8t,t)},V8t:()=>!0,q8t(t){return BG.Ke(this.E8t,t)},X8t(t){return BG.Ke(this.E8t,t)}}}{const $G=self.Cs;$G.PB.P8t.hrt={async Request(t,s){this.Nc.sWt()&&$G.Kh(s)&&this.Nc.lL().dZ()?await this.K8t(t,s):await this.t7t(t,s,"GET",null)},async s7t(t,s){this.Nc.sWt()&&this.Nc.lL().dZ()?await this.K8t(t,s):await this.t7t(t,s,"GET",null)},async i7t(t,s,i,e){await this.t7t(t,s,e,i)},async e7t(t,s,i,e){if(!i)return;const n=i.D_t(this.di);if(!n)return;const r=n.gJ().n7t();await this.t7t(t,s,e,r)},r7t(t){this.kf=1e3*t},h7t(t,s){this.F8t.set(t,s)},o7t(t){if(!t)return;const s=t.D_t(this.di);s&&(this.D8t=s.gJ())},a7t(t){this.k8t=t},l7t(t){this.L8t=!!t}}}self.Cs.PB.P8t.ort={u7t(){return this.A8t},c7t(){return this.R8t},f7t(){return this.O8t},Tag(){return this.E8t}};{const WG=self.Cs;WG.PB.d7t=class extends WG.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{const VG=self.Cs;VG.PB.d7t.nRt=class extends VG.TCt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const jG=self.Cs,HG=self.Ns,UG=self.Gj;jG.PB.d7t.Instance=class extends jG.ACt{constructor(t,s){super(t),this.p7t=[null,null],this.m7t=[null,null],this.bat={},this.g7t=[],this.y7t="",this.S7t=0}Jn(){super.Jn()}w7t(){this.p7t[0]=null,this.p7t[1]=null}b7t(t,s){const i=this.p7t[0];if(null===t||null===i)return!1;if(i===t||jG.Ih(i,t))return!0;if(s&&i.length>0){for(let s=0,e=Math.min(t.length,i.length);s<e;++s)if(t[s]!==i[s])return!1;return!0}return!1}v7t(){return this.p7t[1]}M7t(t,s){this.p7t[0]=t,this.p7t[1]=s}x7t(){this.m7t[0]=null,this.m7t[1]=null}_7t(t){return this.m7t[0]===t}T7t(){return this.m7t[1]}G7t(t,s){this.m7t[0]=t,this.m7t[1]=s}C7t(t){this.bat=t,this.w7t(),this.I7t("")}P7t(){return this.bat}I7t(t){this.g7t=this.A7t(t),this.x7t()}R7t(t){return jG.Oh(this.A7t(t))}A7t(t){const s=[];let i,e=!1;if(this._7t(t))return this.T7t();"."===t[0]?(i=jG.Oh(this.g7t),t=t.slice(1)):i=[];for(const n of t)e?(s.push(n),e=!1):"\\"===n?e=!0:"."===n?(i.push(s.join("")),jG.bh(s)):s.push(n);return 0!==s.length&&i.push(s.join("")),this.G7t(t,i),i}E7t(t,s){if(this.b7t(t,!1))return this.v7t();let i=this.bat;for(const e of t)if(Array.isArray(i)){const t=parseInt(e,10);if(t<0||t>=i.length||!isFinite(t)){i=null;break}i=i[t]}else{if("object"!=typeof i||null===i){i=null;break}if(i.hasOwnProperty(e))i=i[e];else{if(!s){i=null;break}{const t={};i[e]=t,i=t}}}return this.M7t(t,i),i}O7t(t){const s=this.R7t(t);if(!s.length)return this.bat;const i=s.pop(),e=this.E7t(s,!1);if(Array.isArray(e)){const t=parseInt(i,10);return t>=0&&t<e.length?e[t]:null}return"object"==typeof e&&null!==e&&e.hasOwnProperty(i)?e[i]:null}F7t(t){return null===t?"null":Array.isArray(t)?"array":typeof t}D7t(t){const s=this.O7t(t);return this.F7t(s)}k7t(t){const s=typeof t;return"number"===s||"string"===s?t:"boolean"===s&&t?1:0}L7t(t){return this.k7t(this.O7t(t))}N7t(t){const s=this.R7t(t);if(!s.length)return!1;const i=s.pop(),e=this.E7t(s,!1);if(Array.isArray(e)){const t=parseInt(i,10);return t>=0&&t<e.length}return"object"==typeof e&&null!==e&&e.hasOwnProperty(i)}B7t(t,s){const i=this.R7t(t);if(!i.length)return!1;this.b7t(i,!0)&&this.w7t();const e=i.pop(),n=this.E7t(i,!0);if(Array.isArray(n)){const t=parseInt(e,10);return!(!isFinite(t)||t<0||t>=n.length||(n[t]=s,0))}return"object"==typeof n&&null!==n&&(n[e]=s,!0)}$7t(t){const s=this.R7t(t);if(!s.length)return!1;this.b7t(s,!0)&&this.w7t();const i=s.pop(),e=this.E7t(s,!1);return!Array.isArray(e)&&"object"==typeof e&&null!==e&&(delete e[i],!0)}hx(){return{path:this.g7t,data:this.bat}}ox(t){this.w7t(),this.x7t(),this.g7t=t.path,this.bat=t.data}W7t(t){return"number"==typeof t?isFinite(t)?t:0:"object"==typeof t?JSON.stringify(t):t+""}QCt(){const t="plugins.json.debugger";let s;try{s=this.W7t(this.bat)}catch(t){s='"invalid"'}return[{title:t+".title",properties:[{name:t+".data",value:s,OZt:t=>{try{const s=JSON.parse(t);this.C7t(s)}catch(t){}}},{name:t+".path",value:this.g7t.map((t=>t.replace(/\./g,"\\."))).join(".")}]}]}cCt(){return self.V7t}};const JG=new WeakMap;self.V7t=class extends UG{constructor(){super(),JG.set(this,UG.Aj().gJ())}j7t(){const t=JG.get(this).P7t();return JSON.parse(JSON.stringify(t))}H7t(t){try{const s=JSON.parse(JSON.stringify(t));JG.get(this).C7t(s)}catch(t){throw console.error("[JSON plugin] setJsonData: object is not valid JSON: ",t),t}}U7t(t){HG.ue(t);try{const s=JSON.parse(t);JG.get(this).C7t(s)}catch(t){throw console.error("[JSON plugin] setJsonString: string is not valid JSON: ",t),t}}J7t(){return JSON.stringify(JG.get(this).P7t())}z7t(){return JSON.stringify(JG.get(this).P7t(),null,4)}}}{const zG=self.Cs,qG=["null","boolean","number","string","object","array"];zG.PB.d7t.CB={q7t(t){return this.N7t(t)},Y7t(t,s){return this.D7t(t)===qG[s]},X7t(t,s,i){return zG.compare(this.L7t(t),s,i)},Z7t(t){return!0===this.O7t(t)},jd(t){const s=this.O7t(t);if("object"!=typeof s||null===s)return!1;const i=this.Nc,e=i.BL(),n=i.UL(),r=n.pY(),h=i.KL(),o=h.mY(),a=h.gY(n),l=this.g7t,u=this.y7t,c=this.S7t,f=this.A7t(t);i.wY(!1);for(const[t,i]of Object.entries(s))this.g7t=zG.Oh(f),this.g7t.push(t),this.y7t=t,this.S7t=i,e.vY(r),this.Cj().EW().Adt(this.Vz()),n.MY(o,a),e.xY(r);return i.wY(!0),this.g7t=l,this.x7t(),this.y7t=u,this.S7t=c,h.CY(),!1},K7t:()=>!0,Q7t:()=>!0}}{const YG=self.Cs;YG.PB.d7t.hrt={t9t(t){try{this.C7t(JSON.parse(t)),this.lH(YG.PB.d7t.CB.Q7t)}catch(t){console.warn("[JSON plugin] Failed to parse JSON data: ",t),this.C7t({}),this.lH(YG.PB.d7t.CB.K7t)}},s9t(t){this.I7t(t)},pnt(t,s){this.B7t(t,s)},i9t(t,s){let i=this.O7t(t);Array.isArray(i)?YG._h(i,s,0):(i=[],YG.xh(i,s,0),this.B7t(t,i))},e9t(t){this.B7t(t,{})},n9t(t,s){let i=null;try{i=JSON.parse(s),this.lH(YG.PB.d7t.CB.Q7t)}catch(t){console.warn("[JSON plugin] Failed to parse JSON data: ",t),this.lH(YG.PB.d7t.CB.K7t)}this.B7t(t,i)},r9t(t){this.B7t(t,null)},h9t(t,s){this.B7t(t,0!==s)},o9t(t){const s=this.O7t(t);"boolean"==typeof s&&this.B7t(t,!s)},a9t(t,s){const i=this.O7t(t);"number"==typeof i&&this.B7t(t,i+s)},l9t(t,s){const i=this.O7t(t);"number"==typeof i&&this.B7t(t,i-s)},u9t(t){this.$7t(t)},c9t(t,s,i){const e=this.O7t(s);Array.isArray(e)&&(0===t?e.push(i):e.unshift(i),this.w7t())},f9t(t,s){const i=this.O7t(s);Array.isArray(i)&&(0===t?i.pop():i.shift(),this.w7t())},d9t(t,s,i){const e=this.O7t(s);Array.isArray(e)&&(e.splice(i,0,t),this.w7t())},p9t(t,s,i){const e=this.O7t(s);Array.isArray(e)&&t>0&&(e.splice(i,t),this.w7t())}}}self.Cs.PB.d7t.ort={m9t(){try{return JSON.stringify(this.bat)}catch(t){return""}},g9t(){try{return JSON.stringify(this.bat,null,4)}catch(t){return""}},Js(t){return this.L7t(t)},y9t(t){const s=this.O7t(t);return JSON.stringify(s)},S9t(t){const s=this.O7t(t);return JSON.stringify(s,null,4)},$d(t){const s=this.O7t(t);if(Array.isArray(s)){const t=s[0];return this.k7t(t)}return-1},w9t(t){const s=this.O7t(t);if(Array.isArray(s)){const t=s.at(-1);return this.k7t(t)}return-1},nRt(t){return this.D7t(t)},b9t(t){const s=this.O7t(t);return Array.isArray(s)?s.length:-1},v9t(){return this.g7t.map((t=>t.replace(/\./g,"\\."))).join(".")},M9t(){return this.y7t},x9t(){return this.k7t(this.S7t)},_9t(){return this.F7t(this.S7t)}};{const XG=self.Cs;XG.PB.T9t=class extends XG.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{const ZG=self.Cs;ZG.PB.T9t.nRt=class extends ZG.TCt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const KG=self.Cs,QG="localstorage";KG.PB.T9t.Instance=class extends KG.ACt{constructor(t,s){super(t,QG),this.y7t="",this._C="",this.G9t=[],this.C9t="",this.I9t=!1,this.P9t=0,this.A9t=0,this.R9t=!1,s&&(this.R9t=s[0]);const i=this.Nc.$$();this.B$=null,this.R9t?this.B$=i.Gi({Ci:!0}):this.B$=i,this.E9t=new Map,this.O9t=!1,this.Nc.vB(this.HM())}async HM(){const t=await Promise.race([this.jCt("init"),KG.ph(3e3)]);t&&(this.I9t=t.isPersistent)}Jn(){super.Jn()}async F9t(t){this.C9t=this.D9t(t),await this.TB(KG.PB.T9t.CB.j8t)}D9t(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}QCt(){return this.O9t||this.k9t(),[{title:"plugins.localstorage.name",properties:[...this.E9t.entries()].map((t=>({name:"$"+t[0],value:t[1],OZt:s=>this.B$.setItem(t[0],s)})))}]}async k9t(){this.O9t=!0;try{const t=await this.B$.keys();t.sort(((t,s)=>{const i=t.toLowerCase(),e=s.toLowerCase();return i<e?-1:e<i?1:0}));const s=await Promise.all(t.map((t=>this.B$.getItem(t))));this.E9t.clear();for(let i=0,e=t.length;i<e;++i)this.E9t.set(t[i],s[i])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.O9t=!1}}}}{const tC=self.Cs;tC.PB.T9t.CB={L9t(t){return this.y7t===t},N9t:()=>!0,B9t(t){return this.y7t===t},$9t:()=>!0,W9t(t){return this.y7t===t},V9t:()=>!0,j9t:()=>!0,H9t:()=>!0,j8t:()=>!0,U9t(t){return this.y7t===t},J9t(t){return this.y7t===t},z9t(t,s){return tC.compare(this.y7t,t,s)},X7t(t,s){return tC.compare(this._C,t,s)},q9t(){return this.A9t>0},Y9t(){return this.P9t>0},X9t:()=>!0,Z9t:()=>!0,K9t(){return this.I9t}}}{let sC=function(t){return"string"==typeof t||"number"==typeof t};IsExpressionType=sC;const iC=self.Cs;iC.PB.T9t.hrt={async Q9t(t,s){this.A9t++;try{const i=await this.B$.setItem(t,s);await this.BCt((async()=>{this.y7t=t,this._C=i,await this.TB(iC.PB.T9t.CB.N9t),await this.TB(iC.PB.T9t.CB.L9t)}))}catch(t){await this.F9t(t)}finally{this.A9t--,0===this.A9t&&await this.TB(iC.PB.T9t.CB.X9t)}},async tts(t,s){if(!s)return;const i=s.D_t(this.di);if(!i)return;const e=i.gJ();if(!e)return;const n=e.n7t();this.A9t++;try{await this.B$.setItem(t,n),await this.BCt((async()=>{this.y7t=t,this._C="",await this.TB(iC.PB.T9t.CB.N9t),await this.TB(iC.PB.T9t.CB.L9t)}))}catch(t){await this.F9t(t)}finally{this.A9t--,0===this.A9t&&await this.TB(iC.PB.T9t.CB.X9t)}},async sts(t){this.P9t++;try{const s=await this.B$.getItem(t);await this.BCt((async()=>{this.y7t=t,this._C=sC(s)?s:"",await this.TB(iC.PB.T9t.CB.$9t),await this.TB(iC.PB.T9t.CB.B9t)}))}catch(t){await this.F9t(t)}finally{this.P9t--,0===this.P9t&&await this.TB(iC.PB.T9t.CB.Z9t)}},async its(t,s){if(!s)return;const i=s.D_t(this.di);if(!i)return;const e=i.gJ();this.P9t++;try{let s=await this.B$.getItem(t);s=s instanceof ArrayBuffer?s:new ArrayBuffer(0),await this.BCt((async()=>{this._C="",this.y7t=t,e.Q8t(s),await this.TB(iC.PB.T9t.CB.$9t),await this.TB(iC.PB.T9t.CB.B9t)}))}catch(t){await this.F9t(t)}finally{this.P9t--,0===this.P9t&&await this.TB(iC.PB.T9t.CB.Z9t)}},async ets(t){try{const s=await this.B$.getItem(t);await this.BCt((async()=>{this.y7t=t,null==s?(this._C="",await this.TB(iC.PB.T9t.CB.J9t)):(this._C=sC(s)?s:"",await this.TB(iC.PB.T9t.CB.U9t))}))}catch(t){await this.F9t(t)}},async Fc(t){try{await this.B$.removeItem(t),await this.BCt((async()=>{this.y7t=t,this._C="",await this.TB(iC.PB.T9t.CB.V9t),await this.TB(iC.PB.T9t.CB.W9t)}))}catch(t){await this.F9t(t)}},async nts(){try{await this.B$.clear(),await this.BCt((async()=>{this.y7t="",this._C="",iC.bh(this.G9t),await this.TB(iC.PB.T9t.CB.j9t)}))}catch(t){await this.F9t(t)}},async rts(){try{const t=await this.B$.keys();await this.BCt((async()=>{this.G9t=t,await this.TB(iC.PB.T9t.CB.H9t)}))}catch(t){await this.F9t(t)}},async hts(){const t=await this.jCt("request-persistent");t.isOk&&(this.I9t=t.isPersistent)},ots(t){if(!this.R9t)return;let s;try{s=JSON.parse(t)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}s&&s["is-c3-storage"]&&Array.isArray(s.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.B$.Ti(new Map(s.items))}}}self.Cs.PB.T9t.ort={ats(){return this._C},lts(){return this.y7t},uts(){return this.G9t.length},cts(t){return(t=Math.floor(t))<0||t>=this.G9t.length?"":this.G9t[t]},fts(){return this.C9t},dts(){return this.R9t?JSON.stringify({"is-c3-storage":!0,items:[...this.B$._i()]}):""}};{const eC=self.Cs;eC.PB.pts=class extends eC.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{const nC=self.Cs;nC.PB.pts.nRt=class extends nC.TCt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){this.sz().kB(this.Nc)}m5(t){return this.sz().rX(t,{Zx:this.Nc.IL()})}v5(){this.sz().JP()}}}{let rC=function(t){return EC.get(t).mts()};GetParticleEngine=rC;const hC=self.Cs,oC=self.Ns,aC=0,lC=1,uC=2,cC=3,fC=4,dC=5,pC=6,mC=7,gC=8,yC=9,SC=10,wC=11,bC=12,vC=13,MC=14,xC=15,_C=16,TC=17,GC=18,CC=19,IC=20,PC=0,AC=1,RC=hC.Un(hC.Rect);hC.PB.pts.Instance=class extends hC.nIt{constructor(t,s){super(t),this.gts=!0;const i=hC.Un(self.yts);this.Sts=i,i.wts=()=>this.bts(),this.vts=null,this.Mts=(t,s,i,e,n,r)=>this.xts(t,s,i,e,n,r),this._ts=t=>this.Tts(t),this.Gts=!0;let e=!0;s&&(i.Cts(s[aC]),i.Its(hC.Qn(s[lC])),i.Pts(s[uC]?"one-shot":"continuous-spray"),this.Ats(this.Nc.dY(s[cC])),e=s[fC],i.Rts(s[dC]),i.Ets(s[pC]),i.Ots(s[mC]/100),i.Fts(s[gC]),i.Dts(s[yC]),i.kts(s[SC]),i.Lts(s[wC]),i.Nts(s[bC]),i.Bts(s[vC]),i.$ts(s[MC]),i.Wts(s[xC]),i.Vts(s[_C]),i.jts(s[TC]),i.Hts(s[GC]),i.Uts(s[CC]),i.r7t(s[IC])),this.Jts(),this.vts&&(this.Gts=!1),"one-shot"===i.zts()?i.qts():i.Yts(!0);const n=this.aB();n.OV(e),n.kDt(!0),this.di.Sf().addEventListener("bboxchange",(()=>{n.DDt(this.Sts.tU())})),this.LB().pM().sb()&&n.CDt(),this.m6=t=>this.g6(t),this.LB().Sf().addEventListener("afterload",this.m6),this.YCt()}Jn(){this.LB().Sf().removeEventListener("afterload",this.m6),this.m6=null,this.Sts.Jn(),this.Sts=null,this.Mts=null,this._ts=null,super.Jn()}mts(){return this.Sts}Xts(t){this.Sts.Cts(t),"one-shot"===this.Sts.zts()&&this.gts&&this.Sts.Zts(t)}Ats(t){t===this.Cj()&&(t=null),t!==this.vts&&(this.vts=t,this.Sts.Kts=t?t=>this.Qts(t):null,this.vts||(this.Gts=!0))}Jts(){const t=this.Sts,s=this.aB();t.tss(s.sO()),t.Yzt(this.Nc.AL()),t.sss(s.UM()),t.iss(s.qM()),t.ess(s.ZW()),t.nss(Math.abs(s.ZFt()))}bts(){this.Nc.Oj(this.di)}$x(t){if(!this.Gts)return;const s=this.idt.sz(),i=s.fT();if(!i)return;const e=this.aB(),n=e.lB(),r=RC;this.Nc.xB().k$t()?r.set(-1/0,-1/0,1/0,1/0):n.o1()?n.q2(e.ZH(),r):n.J0(e.ZH(),r),t.hO(i);const h=n.z0(e.ZH());this.Sts.rss(n.Tj()*h),this.Sts.$x(t,s.gIt(),r,n.o1())}hx(){const t=this.Sts;return{r:t.hss(),sc:t.oss(),st:t.zts(),isp:t.ass(),isz:t.lss(),io:t.uss(),gr:t.css(),xr:t.fss(),yr:t.dss(),spr:t.pss(),szr:t.mss(),grnd:t.gss(),acc:t.yss(),g:t.Sss(),lar:t.wss(),lsr:t.bss(),lor:t.vss(),dm:t.Mss(),to:t.xss(),s:t._ss(),pcc:t.Tss(),ft:this.gts,soc:this.vts?this.vts.G0():null,p:t.Gss().map((t=>t.toJSON()))}}ox(t,s){const i=this.Sts;if(i.Cts(t.r),i.Its(t.sc),i.Pts(t.st),i.Rts(t.isp),i.Ets(t.isz),i.Ots(t.io),i.Fts(t.gr),i.Dts(t.xr),i.kts(t.yr),i.Lts(t.spr),i.Nts(t.szr),i.Bts(t.grnd),i.$ts(t.acc),i.Wts(t.g),i.Vts(t.lar),i.jts(t.lsr),i.Hts(t.lor),i.Uts(t.dm),i.r7t(t.to),i.Yts(t.s),i.Css(t.pcc),this.gts=t.ft,t.hasOwnProperty("soc")){const s=this.LB().dY(t.soc);s&&this.Ats(s)}const e=t.p;i.Zts(e.length,!1);const n=i.Gss();for(let t=0,s=n.length;t<s;++t)n[t].Sa(e[t]);"state"===s&&this.vts&&(i.Iss(),i.Pss(this))}g6(){const t=this.Sts;t.Iss(),t.Pss(this);const s=t.Gss();for(let t=0,i=s.length;t<i;++t){const i=s[t],e=i.Ass();if(!e)continue;const n=e.aB();if(!n)continue;const r=n.Vz();if(!r)continue;const h=i.Rss(),o=r.$j();if(("number"!=typeof h||"number"!=typeof o||h!==o)&&"number"==typeof h){const t=this.LB(),s=t.eB(h);s&&t.Oj(s)}}}d8(){const t=this.Nc.aN(this.di);this.Jts(),this.gts&&"one-shot"===this.Sts.zts()&&this.Sts.Ess(),this.Sts.d8(t),this.Sts._ss()&&this.Nc.mB(),this.aB().NH(),this.gts=!1}Oss(t){const s=1/60;for(this.gts&&"one-shot"===this.Sts.zts()&&this.Sts.Ess();t>0;)this.Sts.d8(s),t-=s;this.Sts._ss()&&this.Nc.mB(),this.aB().NH(),this.gts=!1}Qts(t,s){let i;"number"==typeof s&&(i=this.Nc.eB(s)),i&&i.Cj()!==this.vts&&(i=null),i||(i=this.Nc.kW(this.vts,this.aB().lB(),t.UM(),t.qM()));const e=i.aB();return e._A(t.Ou(),t.Ou()),e.XW(t.ZW()),e.eO(t.sO()),e.oU(this.aB().hU()),e.NH(),e.mU(this.Vz(),!0),i.W5(),t.Fss(this.Mts),t.Dss(this._ts),i}xts(t,s,i,e,n,r){if(t.Oq())return;const h=t.aB();h.WH(s,i),h._A(h.Vg()+e,h.Kg()+e),h.XW(h.ZW()+n),h.eO(h.sO()+r),h.NH()}Tts(t){t.Oq()||this.Nc.Oj(t)}Hrt(t){const s=this.Sts;switch(t){case aC:return s.hss();case lC:return hC.tr(s.oss());case uC:return"one-shot"===s.zts()?AC:PC;case dC:return s.ass();case pC:return s.lss();case mC:return 100*s.uss();case gC:return s.css();case yC:return s.fss();case SC:return s.dss();case wC:return s.pss();case bC:return s.mss();case vC:return s.gss();case MC:return s.yss();case xC:return s.Sss();case _C:return s.wss();case TC:return s.bss();case GC:return s.vss();case CC:return s.Mss();case IC:return s.xss()}}Xrt(t,s){const i=this.Sts;switch(t){case aC:i.Cts(s);break;case lC:i.Its(hC.Qn(s));break;case uC:i.Pts(s?"one-shot":"continuous-spray");break;case dC:i.Rts(s);break;case pC:i.Ets(s);break;case mC:i.Ots(s/100);break;case gC:i.Fts(s);break;case yC:i.Dts(s);break;case SC:i.kts(s);break;case wC:i.Lts(s);break;case bC:i.Nts(s);break;case vC:i.Bts(s);break;case MC:i.$ts(s);break;case xC:i.Wts(s);break;case _C:i.Vts(s);break;case TC:i.jts(s);break;case GC:i.Hts(s);break;case CC:i.Uts(s);break;case IC:i.r7t(s)}}QCt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.Sts;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.kss()},{name:s+".type.name",value:[s+".type.items."+e.zts()]},{name:i+".is-spraying",value:e._ss(),OZt:t=>e.Yts(t)},{name:s+".rate.name",value:e.hss(),OZt:t=>e.Cts(t)},{name:s+".spray-cone.name",value:hC.tr(e.oss()),OZt:t=>e.Its(hC.Qn(t))},{name:s+".speed.name",value:e.ass(),OZt:t=>e.Rts(t)},{name:s+".size.name",value:e.lss(),OZt:t=>e.Ets(t)},{name:s+".opacity.name",value:e.uss(),OZt:t=>e.Ots(t)},{name:s+".grow-rate.name",value:e.css(),OZt:t=>e.Fts(t)},{name:s+".x-randomiser.name",value:e.fss(),OZt:t=>e.Dts(t)},{name:s+".y-randomiser.name",value:e.dss(),OZt:t=>e.kts(t)},{name:s+".initial-speed-randomiser.name",value:e.pss(),OZt:t=>e.Lts(t)},{name:s+".size-randomiser.name",value:e.mss(),OZt:t=>e.Nts(t)},{name:s+".grow-rate-randomiser.name",value:e.gss(),OZt:t=>e.Bts(t)},{name:s+".acceleration.name",value:e.yss(),OZt:t=>e.$ts(t)},{name:s+".gravity.name",value:e.Sss(),OZt:t=>e.Wts(t)},{name:s+".angle-randomiser.name",value:e.wss(),OZt:t=>e.Vts(t)},{name:s+".life-speed-randomiser.name",value:e.bss(),OZt:t=>e.jts(t)},{name:s+".opacity-randomiser.name",value:e.vss(),OZt:t=>e.Hts(t)},{name:s+".timeout.name",value:e.xss(),OZt:t=>e.r7t(t)}]}]}cCt(){return self.Lss}};const EC=new WeakMap;self.Lss=class extends self.cJ{constructor(){super(),EC.set(this,self.Gj.Aj().gJ())}set Nss(t){rC(this).Yts(!!t)}get Nss(){return rC(this)._ss()}set rate(t){oC.he(t),EC.get(this).Xts(t)}get rate(){return rC(this).hss()}set Bss(t){oC.he(t),rC(this).Its(t)}get Bss(){return rC(this).oss()}set $ss(t){oC.he(t),rC(this).Rts(t)}get $ss(){return rC(this).ass()}set Wss(t){oC.he(t),rC(this).Ets(t)}get Wss(){return rC(this).lss()}set Vss(t){oC.he(t),rC(this).Ots(t)}get Vss(){return rC(this).uss()}set jss(t){oC.he(t),rC(this).Dts(t)}get jss(){return rC(this).fss()}set Hss(t){oC.he(t),rC(this).kts(t)}get Hss(){return rC(this).dss()}set Uss(t){oC.he(t),rC(this).Lts(t)}get Uss(){return rC(this).pss()}set Jss(t){oC.he(t),rC(this).Nts(t)}get Jss(){return rC(this).mss()}set zss(t){oC.he(t),rC(this).Fts(t)}get zss(){return rC(this).css()}set qss(t){oC.he(t),rC(this).Bts(t)}get qss(){return rC(this).gss()}set acceleration(t){oC.he(t),rC(this).$ts(t)}get acceleration(){return rC(this).yss()}set Yss(t){oC.he(t),rC(this).Wts(t)}get Yss(){return rC(this).Sss()}set Xss(t){oC.he(t),rC(this).Vts(t)}get Xss(){return rC(this).wss()}set Zss(t){oC.he(t),rC(this).jts(t)}get Zss(){return rC(this).bss()}set Kss(t){oC.he(t),rC(this).Hts(t)}get Kss(){return rC(this).vss()}set timeout(t){oC.he(t),rC(this).r7t(t)}get timeout(){return rC(this).xss()}Qss(t){oC.he(t),EC.get(this).Oss(t)}tis(t){const s=EC.get(this);t?s.Ats(s.LB().d$(t)):s.Ats(null)}}}self.Cs.PB.pts.CB={_ss(){return this.Sts._ss()}};{const OC=self.Cs;OC.PB.pts.hrt={Yts(t){this.Sts.Yts(0!==t)},Cts(t){this.Xts(t)},sis(t){this.Ats(t)},iis(){this.Ats(null)},Its(t){this.Sts.Its(OC.Qn(t))},Rts(t){this.Sts.Rts(t)},Ets(t){this.Sts.Ets(t)},Ots(t){this.Sts.Ots(t/100)},Fts(t){this.Sts.Fts(t)},eis(t){this.Sts.Dts(t)},nis(t){this.Sts.kts(t)},ris(t){this.Sts.Lts(t)},his(t){this.Sts.Nts(t)},ois(t){this.Sts.Bts(t)},ais(t){this.Sts.$ts(t)},Wts(t){this.Sts.Wts(t)},lis(t){this.Sts.Vts(t)},uis(t){this.Sts.jts(t)},cis(t){this.Sts.Hts(t)},r7t(t){this.Sts.r7t(t)},fis(t){this.Oss(t)},fKt(t){this.aB().FM(t),this.Nc.mB()}}}{const FC=self.Cs;FC.PB.pts.ort={dis(){return this.Sts.kss()},pis(){return this.Sts.hss()},mis(){return FC.tr(this.Sts.oss())},gis(){return this.Sts.ass()},yis(){return this.Sts.lss()},Sis(){return 100*this.Sts.uss()},wis(){return this.Sts.css()},bis(){return this.Sts.fss()},vis(){return this.Sts.dss()},Mis(){return this.Sts.mss()},xis(){return this.Sts.pss()},_is(){return this.Sts.gss()},Tis(){return this.Sts.yss()},Gis(){return this.Sts.Sss()},Cis(){return this.Sts.wss()},Iis(){return this.Sts.bss()},Pis(){return this.Sts.vss()},Ais(){return this.Sts.xss()}}}{const DC=self.Cs,kC=[],LC=1e3,NC=new Set(["continuous-spray","one-shot"]),BC=["fade-to-invisible","timeout-expired","particle-stopped"],$C=DC.Un(DC.Rect);self.yts=class{constructor(){this.Ris=0,this.Eis=0,this.Ois="continuous-spray",this.Fis=!1,this.Dis=0,this.kis=!1,this.Lis=0,this.Nis=0,this.Bis=0,this.$is=0,this.Wis=0,this.Vis=1,this.jis=0,this.His=0,this.Uis=0,this.Jis=0,this.zis=0,this.qis=0,this.Yis=0,this.Xis=0,this.Zis=0,this.Kis=0,this.Qis=0,this.tes=0,this.ses=0,this.kf=0,this.ies=0,this.ees=1,this.wts=null,this.Kts=null,this.nes=[],this.vFt=new DC.Rect,this.RM=new DC._o,this.xD=globalThis.devicePixelRatio||1}Jn(){this.$f(),DC.bh(this.nes),this.nes=null,this.wts=null,this.Kts=null,this.vFt=null,this.RM=null}$f(){const t=this.nes;for(let s=0,i=t.length;s<i;++s)t[s].OTt();DC.On(kC,t),DC.bh(t),kC.length>1e3&&DC.wh(kC,1e3),this.Fis=!1}qts(){for(let t=0,s=this.Ris;t<s;++t)this.res();this.nes.length&&(this.Fis=!0)}res(t=!0){let s=null;return kC.length?(s=kC.pop(),s.hes(this)):s=DC.Un(self.oes,this),this.nes.push(s),t?s.CEt(this.Kts):s.CEt(),s}Ess(){const t=this.nes,s=this.Kts;for(let i=0,e=t.length;i<e;++i)t[i].CEt(s)}Iss(){const t=this.nes,s=this.Kts;for(let i=0,e=t.length;i<e;++i)t[i].aes(s)}Pss(t){const s=this.nes;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.Ass();if(n){const s=n.aB();s.JM(e.UM()),s.YM(e.qM()),s._A(e.Ou(),e.Ou()),s.eO(e.sO()),s.XW(e.ZW()),s.oU(t.aB().hU()),s.NH()}}}Zts(t,s=!0){const i=this.nes;if(t<i.length){const s=i.length-t;for(let t=0;t<s;++t){const t=i.pop();t.OTt(),kC.push(t)}kC.length>1e3&&DC.wh(kC,1e3)}else if(t>i.length){const e=t-i.length;for(let t=0;t<e;++t)this.res(s)}}Gss(){return this.nes}kss(){return this.nes.length}d8(t){this.les(t),this.ues(t),this.ces()}les(t){if("continuous-spray"===this.Ois&&this.Fis){this.ies+=t*this.Ris;const s=Math.floor(this.ies);this.ies-=s;for(let t=0;t<s;++t)this.res()}}Css(t){this.ies=t}Tss(){return this.ies}ues(t){const s=this.vFt;s.set(this.Lis,this.Nis,this.Lis,this.Nis);const i=this.nes;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n];i[e]=r,r.d8(t),r.Qyt()?(++e,s.Gl(r.tU())):(r.OTt(),kC.push(r))}DC.wh(i,e),kC.length>1e3&&DC.wh(kC,1e3)}ces(){"one-shot"===this.Ois&&0===this.nes.length&&this.Fis&&(this.wts&&this.wts(),this.Fis=!1)}$x(t,s,i,e){this.xD=globalThis.devicePixelRatio||1,$C.set(s.Br(),s.$r(),s.jr(),s.Hr()),t.vO($C),this.RM.S(t.rO());const n=this.nes;for(let r=0,h=n.length;r<h;++r){const h=n[r];i.Ml(h.tU())&&h.$x(t,s,e)}t.MO()}rO(){return this.RM}Cts(t){this.Ris=+t}hss(){return this.Ris}Its(t){this.Eis=+t}oss(){return this.Eis}Pts(t){if(!NC.has(t))throw new Error("invalid spray type");this.Ois=t}zts(){return this.Ois}Yts(t){this.Fis=!!t}_ss(){return this.Fis}tss(t){this.Dis=+t}fes(){return this.Dis}Yzt(t){this.kis=!!t}des(){return this.kis}sss(t){this.Lis=+t}pes(){return this.Lis}iss(t){this.Nis=+t}mes(){return this.Nis}ess(t){this.Bis=+t}ges(){return this.Bis}Rts(t){this.$is=+t}ass(){return this.$is}Ets(t){this.Wis=+t}lss(){return this.Wis}nss(t){this.Vis=+t}yes(){return this.Vis}Ots(t){this.jis=+t}uss(){return this.jis}Fts(t){this.His=+t}css(){return this.His}Dts(t){this.Uis=+t}fss(){return this.Uis}kts(t){this.Jis=+t}dss(){return this.Jis}Lts(t){this.zis=+t}pss(){return this.zis}Nts(t){this.qis=+t}mss(){return this.qis}Bts(t){this.Yis=+t}gss(){return this.Yis}$ts(t){this.Xis=+t}yss(){return this.Xis}Wts(t){this.Zis=+t}Sss(){return this.Zis}Vts(t){this.Kis=+t}wss(){return this.Kis}jts(t){this.Qis=+t}bss(){return this.Qis}Hts(t){this.tes=+t}vss(){return this.tes}Ses(t){let s=BC.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.ses=s}Uts(t){this.Ses(BC[t])}wes(){return BC[this.ses]}Mss(){return this.ses}r7t(t){this.kf=+t}xss(){return this.kf}rss(t){this.ees=+t}bes(){return this.ees}tU(){return this.vFt}N$(){return this.xD}}}{let WC=function(t){return Math.random()*t-t/2};randomOffset=WC;const VC=self.Cs,jC=self.yts,HC=new VC.Il,UC=new VC._o;let JC=!1;self.oes=class{constructor(t){this.ves=t,this.Nf=!1,this.Pa=0,this.Aa=0,this.UPt=0,this.uQ=0,this.Mes=1,this.xes=0,this._es=0,this.XZ=0,this.Tes=0,this.Ges=0,this.Ces=0,this.uu=new VC.Rect,this.Ies=null,this.Pes=NaN,this.Aes=null,this.Res=null}hes(t){this.ves=t}CEt(t){const s=this.ves;this.Nf=!0,this.Pa=s.pes()+WC(s.fss()),this.Aa=s.mes()+WC(s.dss()),this.UPt=s.ass()+WC(s.pss()),this.uQ=s.ges()+WC(s.oss()),this.Mes=s.uss(),this.xes=this.Mes,this.XZ=(s.lss()+WC(s.mss()))*s.yes(),this.Tes=this.XZ/2,this._es=s.css()+WC(s.gss()),this.Ges=0,this.Ces=0,this.Ees(),t?this.Ies||(this.Ies=t(this)):(this.Ies=null,this.Aes=null,this.Res=null)}aes(t){t?this.Ies&&!this.Ies.Oq()||(this.Ies=t(this,this.Pes)):(this.Ies=null,this.Aes=null,this.Res=null)}Fss(t){this.Aes=t}Dss(t){this.Res=t}OTt(){const t=this.Res;t&&t(this.Ies),this.Ies=null,this.Aes=null,this.Res=null}toJSON(){let t;return this.Ies&&this.Ies.aB()&&(t=this.Ies.aB().Vz().$j()),[this.Pa,this.Aa,this.UPt,this.uQ,this.Mes,this._es,this.XZ,this.Ges,this.Ces,t]}Sa(t){this.Pa=t[0],this.Aa=t[1],this.UPt=t[2],this.uQ=t[3],this.Mes=t[4],this.xes=this.Mes,this._es=t[5],this.XZ=t[6],this.Ges=t[7],this.Ces=t[8],this.Pes=t[9],this.Tes=this.XZ/2,this.Ees()}d8(t){const s=this.ves,i=this.UPt*t,e=this.uQ,n=Math.cos(e)*i,r=Math.sin(e)*i+this.Ges*t;this.Pa+=n,this.Aa+=r;const h=this._es*t;this.XZ+=h,this.Tes=this.XZ/2,this.UPt+=s.yss()*t,this.Ges+=s.Sss()*t,this.Ces+=t,this.Ees();const o=s.wss(),a=s.bss(),l=s.vss();let u=0;0!==o&&(u=WC(o*t),this.uQ+=u),0!==a&&(this.UPt+=WC(a*t)),0!==l&&(this.Mes=VC.Zn(this.Mes+WC(l*t),0,1));const c=this.XZ>=1&&(2===s.Mss()?this.UPt>0:this.Ces<s.xss()),f=this.Aes;if(f&&c){let t=s.fes()*this.Mes;0===s.Mss()&&(t*=1-this.Ces/s.xss());const i=t-this.xes;this.xes=t,f(this.Ies,n,r,h,u,i)}this.Nf=c}Qyt(){return this.Nf}tU(){return this.uu}Ees(){const t=this.Pa,s=this.Aa,i=this.Tes;this.uu.set(t-i,s-i,t+i,s+i)}$x(t,s,i){if(this.Ies)return;const e=this.ves;let n=e.fes()*this.Mes;if(0===e.Mss()&&(n*=1-this.Ces/e.xss()),n<=0)return;const r=this.XZ,h=r*e.bes()*e.N$();if(h<1)return;let o=this.Pa,a=this.Aa;e.des()&&(o=o+.5|0,a=a+.5|0),t.sb()?t.xO(o,a,r,n):i||h>t.hF()||h<t.rF()?(UC.S(e.rO()),UC.Xo(n),t.DM(UC),JC=!0,HC.Yl(this.uu),t.gO(HC,s)):(JC&&(t.DM(e.rO()),JC=!1),t.xO(o,a,h,n))}Ass(){return this.Ies}Rss(){return this.Pes}UM(){return this.Pa}qM(){return this.Aa}Ou(){return this.XZ}ZW(){return this.uQ}sO(){return this.Mes}}}{const zC=self.Cs,qC="button";zC.PB.Oes=class extends zC.gCt{constructor(t){super(t,qC),this.bCt("click",((t,s)=>t.Fes(s)))}Jn(){super.Jn()}}}{const YC=self.Cs;YC.PB.Oes.nRt=class extends YC.TCt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const XC=self.Cs,ZC=self.Ns,KC=0,QC=1,tI=2,sI=3,iI=4,eI=5,nI=6,rI=7,hI=8,oI="button";XC.PB.Oes.Instance=class extends XC.bIt{constructor(t,s){super(t,oI),this.Bc="OK",this.Des=!1,this.kes=!1,this.Les="",this.$c="",this.Nes="",this.xbt=!0,this._It=!0,s&&(this.Des=1===s[KC],this.Bc=s[QC],this.Les=s[tI],this.aB().OV(s[sI]),this.xbt=s[iI],this._It=s[eI],this.kes=s[nI],this.$c=s[rI],this.Nes=s[hI]),this.DIt({id:this.$c,className:this.Nes})}Jn(){super.Jn()}kIt(){return{text:this.Bc,isCheckbox:this.Des,isChecked:this.kes,title:this.Les,isVisible:this.aB().DV(),isEnabled:this.xbt}}async Fes(t){this.kes=t.isChecked,this.ICt("click",!0),await this.TB(XC.PB.Oes.CB.Bes)}oQt(t){this.Bc!==t&&(this.Bc=t,this.BIt())}$es(){return this.Bc}Wes(t){this.Les!==t&&(this.Les=t,this.BIt())}Ves(){return this.Les}bTt(t){t=!!t,this.xbt!==t&&(this.xbt=t,this.BIt())}MTt(){return this.xbt}jes(t){this.Des&&(t=!!t,this.kes!==t&&(this.kes=t,this.BIt()))}Hes(){return this.kes}$x(t){}hx(){return{text:this.Bc,checked:this.kes,title:this.Les,enabled:this.xbt}}ox(t){this.Bc=t.text,this.kes=t.checked,this.Les=t.title,this.xbt=t.enabled,this.BIt()}Hrt(t){switch(t){case QC:return this.$es();case tI:return this.Ves();case iI:return this.MTt();case eI:return this._It;case nI:return this.Hes()}}Xrt(t,s){switch(t){case QC:this.oQt(s);break;case tI:this.Wes(s);break;case iI:this.bTt(!!s);break;case eI:this._It=!!s;break;case nI:this.jes(!!s)}}QCt(){const t="plugins.button";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.$es(),OZt:t=>this.oQt(t)},{name:t+".properties.enabled.name",value:this.MTt(),OZt:t=>this.bTt(t)},{name:t+".properties.checked.name",value:this.Hes(),OZt:t=>this.jes(t)}]}]}cCt(){return self.Ues}};const aI=new WeakMap;self.Ues=class extends self.dJ{constructor(){super(),aI.set(this,self.Gj.Aj().gJ())}set text(t){ZC.ue(t),aI.get(this).oQt(t)}get text(){return aI.get(this).$es()}set Jes(t){ZC.ue(t),aI.get(this).Wes(t)}get Jes(){return aI.get(this).Ves()}set isEnabled(t){aI.get(this).bTt(t)}get isEnabled(){return aI.get(this).MTt()}set zes(t){aI.get(this).jes(t)}get zes(){return aI.get(this).Hes()}}}{const lI=self.Cs;lI.PB.Oes.CB={Bes:()=>!0,qes(){return this.kes},KQt(t,s){return s?this.Bc===t:lI.Ke(this.Bc,t)}}}self.Cs.PB.Oes.hrt={Vc(t){this.oQt(t)},Yes(t){this.Wes(t)},Xes(t){this.jes(0!==t)},Zes(){this.Des&&(this.kes=!this.kes,this.BIt())}},self.Cs.PB.Oes.ort={Text(){return this.Bc}};{const uI=self.Cs;uI.PB.Kes=class extends uI.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{const cI=self.Cs;cI.PB.Kes.nRt=class extends cI.TCt{constructor(t){super(t),this.Qes=cI.Un(self.tns)}Jn(){super.Jn()}uCt(){this.sz().kB(this.Nc)}m5(t){return this.sz().rX(t,{Zx:this.Nc.IL()})}v5(){this.sz().JP()}sns(){return this.Qes}ins(t,s,i,e){const n=this.sz(),r=this.Qes;r.Yg(n.Vg()),r.jg(n.Kg()),r.ens(t),r.nns(s),r.rns(i),r.hns(e),r.ons()}}}{const fI=self.Cs,dI=self.Ns,pI=fI.Un(fI.Ia),mI=0,gI=1,yI=2,SI=3,wI=4,bI=5,vI=6,MI=7,xI=8,_I=9,TI=10,GI=11,CI=14,II=["left","center","right"],PI=["top","center","bottom"],AI=["word","cjk","character"];fI.PB.Kes.Instance=class extends fI.nIt{constructor(t,s){super(t),this.Bc="",this.IKt=!0,this.ans=16,this.lns=16,this.uns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@+=*$<>";let i="";this.cns=1,this.fns=0,this.aP=0,this.gP=0,this.yP=0,this.bP="word",this.pns=!0,this.LKt=!1,this.NKt=null,this.mns=null,this.BKt=-1,this.$Kt=-1,this.WKt=0,s&&(this.Bc=s[0],this.IKt=s[1],this.ans=s[2],this.lns=s[3],this.uns=s[4],i=s[5],this.cns=s[6],this.fns=s[7],this.aP=s[8],this.gP=s[9],this.yP=s[10],this.bP=AI[s[11]],this.aB().OV(s[12]),this.LKt=!!s[CI]),this.ECt.ins(this.ans,this.lns,this.uns,i),this.mns=fI.Un(self.gns,this.ECt.sns());const e=this.aB();this.mns._A(e.Vg(),e.Kg()),this.yns(),this.qKt(),this.di.BEt()}Jn(){this.YKt(),this.NKt&&(this.NKt.Jn(),this.NKt=null),this.mns.Jn(),this.mns=null,super.Jn()}yns(){const t=this.mns;t&&(t.KP(this.IKt),t.Vc(this.Bc),t.wA(this.bP),t.Sns(II[this.gP]),t.wns(PI[this.yP]),t.bns(this.fns),t.nA(this.aP))}XKt(){const t=this.aB();this.mns._A(t.Vg(),t.Kg()),this.mns.qW(this.cns)}qKt(){if(this.LKt){let t=this.Bc;this.IKt&&(t=fI.pn.Fg(t)),this.NKt?this.NKt.Vc(t):this.NKt=fI.Un(fI.Lc,this.Nc,t)}else this.NKt&&(this.NKt.Jn(),this.NKt=null)}$x(t){const s=this.idt.sz(),i=s.fT();if(!i)return;t.hO(i);const e=this.aB();let n=e.iU();const r=this.mns;r.qW(this.cns),r.vns(e.ZFt()),this.Nc.AL()&&(n=e.FDt(n)),r._A(e.Vg(),e.Kg()),r.sns().Mns(s.sR()),r.DM(e.hU()),r.$x(t,n.Br(),n.$r(),e.ZW()),this.pns=!1}hx(){const t={t:this.Bc,ebbc:this.IKt,csc:this.cns,csp:this.fns,lh:this.aP,ha:this.gP,va:this.yP,w:this.bP,cw:this.ECt.sns().xns(),ch:this.ECt.sns()._ns(),cs:this.ECt.sns().Tns(),sd:this.ECt.sns().Gns()};return-1!==this.$Kt&&(t.tw={st:this.BKt,en:this.$Kt,l:this.WKt}),t}ox(t){if(this.YKt(),this.Bc=t.t,this.IKt=t.ebbc,this.cns=t.csc,this.fns=t.csp,this.aP=t.lh,this.gP=t.ha,this.yP=t.va,t.hasOwnProperty("w")){const s=t.w;this.bP="boolean"==typeof s?s?"word":"character":s}else this.bP="word";if(t.hasOwnProperty("tw")){const s=t.tw;this.BKt=s.st,this.$Kt=s.en,this.WKt=t.l}const s=this.ECt.sns();s.ens(t.cw),s.nns(t.ch),s.rns(t.cs),s.hns(t.sd),this.yns(),this.qKt(),-1!==this.$Kt&&this.YCt()}Hrt(t){switch(t){case mI:return this.xA();case gI:return this.IKt;case yI:return this.ECt.sns().xns();case SI:return this.ECt.sns()._ns();case wI:return this.ECt.sns().Tns();case bI:return this.ECt.sns().Gns();case vI:return this.Cns();case MI:return this.Ins();case xI:return this.tQt();case _I:return this.eQt();case TI:return this.nQt();case GI:return this.rQt()}}Xrt(t,s){switch(t){case mI:this.oQt(s);break;case gI:if(this.IKt===!!s)return;this.IKt=!!s,this.yns();break;case yI:this.ECt.sns().ens(s);break;case SI:this.ECt.sns().nns(s);break;case wI:this.ECt.sns().rns(s);break;case bI:this.ECt.sns().hns(s);break;case vI:this.Pns(s);break;case MI:this.Ans(s);break;case xI:this.uQt(s);break;case _I:this.dQt(s);break;case TI:this.pQt(s);break;case GI:this.mQt(s)}}oQt(t){this.Bc!==t&&(this.Bc=t,this.mns.Vc(t),this.qKt(),this.Nc.mB())}xA(){return this.Bc}gQt(t,s){this.oQt(t),this.BKt=this.Nc.pN(),this.$Kt=this.BKt+s/this.Vz().Uj(),this.WKt=fI.zm(fI.pn.Fg(t)),this.mns.uA(0),this.YCt()}YKt(){this.BKt=-1,this.$Kt=-1,this.WKt=0,this.mns.uA(-1),this.OCt()}yQt(){-1!==this.$Kt&&(this.YKt(),this.lH(fI.PB.Kes.CB.SQt),this.Nc.mB())}Pns(t){this.cns!==t&&(this.cns=t,this.mns.qW(this.cns),this.Nc.mB())}Cns(){return this.cns}Ans(t){this.fns!==t&&(this.fns=t,this.mns.bns(this.fns),this.Nc.mB())}Ins(){return this.fns}uQt(t){this.aP!==t&&(this.aP=t,this.mns.nA(this.aP),this.Nc.mB())}tQt(){return this.aP}dQt(t){this.gP!==t&&(this.gP=t,this.yns(),this.Nc.mB())}eQt(){return this.gP}pQt(t){this.yP!==t&&(this.yP=t,this.yns(),this.Nc.mB())}nQt(){return this.yP}vQt(t){this.mQt(AI[t])}mQt(t){this.bP!==t&&(this.bP=t,this.yns(),this.Nc.mB())}rQt(){return this.bP}_Qt(t){this.LKt=!!t,this.qKt()}hQt(){return this.LKt}PQt(){return this.XKt(),this.mns.GA()}AQt(){return this.XKt(),this.mns.IA()}RQt(t,s){this.XKt();const i=this.aB();pI.set(t-i.UM(),s-i.qM()),pI.rotate(-i.ZW()),pI.offset(i.Vg()*i.jH(),i.Kg()*i.JH());const e=this.mns.RA(pI.Oa(),pI.Da());if(e){const t=e.Hy("tag");if(t)return t.Ig}return""}EQt(t,s,i){const e=this.RQt(s,i);return e&&fI.Ke(t,e)}OQt(t,s){this.XKt(),s=Math.floor(s);const i=this.mns.OA(t,s);if(!i)return null;const e=this.aB();return pI.set(i.By(),i.Wy()),pI.offset(-e.Vg()*e.jH(),-e.Kg()*e.JH()),pI.rotate(e.ZW()),pI.offset(e.UM(),e.qM()),{x:pI.Oa(),y:pI.Da(),width:i.Vg(),height:i.Kg()}}FQt(t){return this.XKt(),this.mns.FA(t)}d8(){const t=this.Nc.pN();if(t>=this.$Kt)this.YKt(),this.lH(fI.PB.Kes.CB.SQt),this.Nc.mB();else{let s=fI.gr(this.BKt,this.$Kt,t,0,this.WKt);s=Math.floor(s),s!==this.mns.cA()&&(this.mns.uA(s),this.Nc.mB())}}QCt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.xA(),OZt:t=>this.oQt(t)},{name:t+".properties.scale.name",value:this.Cns(),OZt:t=>this.Pns(t)},{name:t+".properties.character-spacing.name",value:this.Ins(),OZt:t=>this.Ans(t)},{name:t+".properties.line-height.name",value:this.tQt(),OZt:t=>this.uQt(t)}]}]}cCt(){return self.Rns}};const RI=new WeakMap,EI=new Map([["left",0],["center",1],["right",2]]),OI=new Map([["top",0],["center",1],["bottom",2]]);self.Rns=class extends self.cJ{constructor(){super(),RI.set(this,self.Gj.Aj().gJ())}get text(){return RI.get(this).xA()}set text(t){dI.ue(t);const s=RI.get(this);s.YKt(),s.oQt(t)}BQt(t,s){dI.ue(t),dI.he(s);const i=RI.get(this);i.YKt(),i.gQt(t,s)}$Qt(){RI.get(this).yQt()}set Ens(t){dI.he(t),RI.get(this).Pns(t)}get Ens(){return RI.get(this).Cns()}set Ons(t){dI.he(t),RI.get(this).Ans(t)}get Ons(){return RI.get(this).Ins()}set lineHeight(t){dI.he(t),RI.get(this).uQt(t)}get lineHeight(){return RI.get(this).tQt()}set xX(t){dI.ue(t);const s=EI.get(t);if(void 0===s)throw new Error("invalid mode");RI.get(this).dQt(s)}get xX(){return II[RI.get(this).eQt()]}set verticalAlign(t){dI.ue(t);const s=OI.get(t);if(void 0===s)throw new Error("invalid mode");RI.get(this).pQt(s)}get verticalAlign(){return PI[RI.get(this).nQt()]}set _X(t){if(!AI.includes(t))throw new Error("invalid mode");RI.get(this).mQt(t)}get _X(){return RI.get(this).rQt()}set VQt(t){RI.get(this)._Qt(!!t)}get VQt(){return RI.get(this).hQt()}get IX(){return RI.get(this).PQt()}get PX(){return RI.get(this).AQt()}UQt(){const t=RI.get(this);return[t.PQt(),t.AQt()]}JQt(t,s,i){return dI.ue(t),dI.he(s),dI.he(i),RI.get(this).EQt(t,s,i)}zQt(t,s){return dI.he(t),dI.he(s),RI.get(this).RQt(t,s)}qQt(t,s=0){return dI.ue(t),dI.he(s),RI.get(this).OQt(t,s)}YQt(t){return dI.ue(t),RI.get(this).FQt(t)}}}{const FI=self.Cs;FI.PB.Kes.CB={KQt(t,s){return s?this.Bc===t:FI.Ke(this.Bc,t)},QQt(){return-1!==this.$Kt},SQt:()=>!0,t0t(t,s,i){return this.EQt(t,s,i)}}}self.Cs.PB.Kes.hrt={Vc(t){this.YKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.oQt(t.toString())},s0t(t){this.YKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.oQt(this.Bc+t)},i0t(t,s){this.YKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.gQt(t.toString(),s)},h0t(){this.yQt()},qW(t){this.Pns(t)},Fns(t){this.Ans(t)},nA(t){this.uQt(t)},ens(t,s){let i=!1;const e=this.ECt.sns();for(const n of t)if(" "===n)e.Dns(s),i=!0;else{const t=e.kns(n);t&&(t.Lns(s),i=!0)}i&&e.Nns(),this.Nc.mB()},fKt(t){this.aB().FM(t),this.Nc.mB()},o0t(t){this.dQt(t)},a0t(t){this.pQt(t)},l0t(t){this.vQt(t)},f0t(t){this._Qt(t)}};{const DI=self.Cs;DI.PB.Kes.ort={Bns(t){const s=this.ECt.sns().kns(t);return s?s.$ns():this.ECt.sns().xns()},Wns(){return this.lns},Vns(){return this.cns},jns(){return this.fns},w0t(){return this.aP},Text(){return this.Bc},p0t(){return this.IKt?DI.pn.Fg(this.Bc):this.Bc},y0t(){return this.PQt()},S0t(){return this.AQt()},b0t(t,s){return this.RQt(t,s)},v0t(t){return this.FQt(t)},M0t(t,s){const i=this.OQt(t,s);return i?i.x:0},x0t(t,s){const i=this.OQt(t,s);return i?i.y:0},_0t(t,s){const i=this.OQt(t,s);return i?i.width:0},T0t(t,s){const i=this.OQt(t,s);return i?i.height:0}}}{const kI=self.Cs;self.Hns=class{constructor(t,s,i,e){let n=t.xns(),r=t._ns();this.Qes=t,this.Uns=s,this.Jns=new kI.Rect(i,e,i+n,e+r),this.zns=new kI.Rect,this.qns=-1,this.Yns()}Jn(){this.Qes=null,this.Jns=null,this.zns=null}Yns(){let t=this.Qes.Vg(),s=this.Qes.Kg();this.zns.S(this.Jns),this.zns.wt(t,s),this.zns.Cl(this.Qes.sR())}sns(){return this.Qes}Xns(){return this.Uns}sR(){return this.zns}Lns(t){this.qns=t}$ns(){return this.qns<0?this.Qes.xns():this.qns}}}{let LI=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},NI=function(t){return JI||(JI=BI.co(32,32).getContext("2d")),JI.fillStyle="#FFFFFF",JI.fillStyle=t,JI.fillStyle};getOffsetParam=LI,normalizeCssColorString=NI;const BI=self.Cs,$I=new BI.Rect,WI=new BI.Il,VI=new BI._o,jI=new Set(["left","center","right"]),HI=new Set(["top","center","bottom"]),UI=new Set(["word","cjk","character"]);let JI=null;self.gns=class{constructor(t){this.Qes=t,this.CP=0,this.IP=0,this.Bc="",this.fP=!1,this.SP=null,this.wP=BI.Un(BI.Dg),this.bP="word",this.MP=!1,this.xP=!1,this.gP="left",this.yP="top",this.lQ=1,this.Zns=1,this.Kns=0,this.aP=0,this.RM=BI.Un(BI._o),this.TP=-1,this.GP=0,this.WP=t=>this.VP(t),this.Qes.Qns(this)}Jn(){this.Qes.trs(this),this.RM=null,this.WP=null,this.wP.Pu(),this.wP=null,this.Qes=null,this.SP=null}VP(t){if(t.Xg())return{width:0,height:0};const s=t.yy(),i=t.Hy("scale"),e=(i?parseFloat(i.Ig):this.lQ)*this.Zns,n=t.Hy("scalex"),r=(n?parseFloat(n.Ig):1)*e,h=t.Hy("scaley"),o=(h?parseFloat(h.Ig):1)*e,a=this.Qes._ns()*o+this.aP,l=this.sns(),u=l.xns()*r,c=this.srs();if(l.irs()){let t=0,i=0;for(const e of s){let s=u;const n=l.kns(e);n?s=n.$ns()*r:" "===e&&(s=l.ers()*r),i+=s,++t}return{width:i+t*c,height:a}}{const t=s.length;return{width:u*t+Math.max(t,0)*c,height:a}}}ZP(){this.xP=!0}nP(){this.ZP(),this.MP=!0,this.wP.Pu()}_A(t,s){t<=0||s<=0||this.CP===t&&this.IP===s||(this.CP!==t?this.nP():this.ZP(),this.CP=t,this.IP=s)}uA(t){this.TP=Math.floor(t)}cA(){return this.TP}RA(t,s){this.CA();const i=this.wP.Ng();for(const e of i)if(s>e.Wy()&&s<e.Wy()+e.Kg())for(const s of e.ny())if(t>=s.By()&&t<s.By()+s.Vg())return s;return null}*EA(t){this.CA();const s=this.wP.Ng();for(const i of s)for(const s of i.ny()){const i=s.Hy("tag");i&&BI.Ke(i.Ig,t)&&(yield s)}}OA(t,s){for(const i of this.EA(t)){if(0===s)return i;--s}return null}FA(t){let s=0;for(const i of this.EA(t))++s;return s}CA(){this.WA(),this.VA()}WA(){if(!this.MP)return;!this.fP||this.SP&&this.SP.toString()===this.Bc||(this.SP=new BI.pn(this.Bc,{dg:!0}));const t=-this.srs();this.wP.Dg(this.fP?this.SP.Gg():this.Bc,this.WP,this.CP,this.bP,t),this.MP=!1}VA(){this.xP&&(this.jA(),this.xP=!1)}jA(){let t=0;const s=this.aP,i=BI.Oh(this.wP.Ng());for(const t of i){t.Ny(NaN),t.$y(NaN);for(const s of t.ny())s.Ny(NaN),s.$y(NaN)}const e=i.reduce(((t,s)=>t+s.Kg()),0)-s;"center"===this.yP?t=Math.max(Math.floor(this.IP/2-e/2),0):"bottom"===this.yP&&(t=Math.floor(this.IP-e));for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.Kg();if(e>0&&t>this.IP-(r-s))break;t>=0&&this.qA(n,t),t+=r}}qA(t,s){let i=0;"center"===this.gP?i=Math.max(Math.floor((this.CP-t.Vg())/2),0):"right"===this.gP&&(i=Math.max(Math.floor(this.CP-t.Vg()),0)),t.Ny(i),t.$y(s);for(const e of t.ny())e.Xg()||(this.nrs(e,i,s),i+=e.Vg())}nrs(t,s,i){const e=t.Hy("offsetx");s+=e?LI(e.Ig,t.Kg()):0;const n=t.Hy("offsety");i+=n?LI(n.Ig,t.Kg()):0,t.Ny(s),t.$y(i)}$x(t,s,i,e){this.CA(),this.GP=0;const n=BI.Oh(this.wP.Ng()),r=Math.sin(e),h=Math.cos(e);for(const e of n)this.rrs(t,e,s,i,r,h)}rrs(t,s,i,e,n,r){const h=s.By(),o=s.Wy();if(!Number.isFinite(h)||!Number.isFinite(o))return;const a=s.Kg();for(const h of s.ny())this.ZA(t,h,i,e,n,r,a)}ZA(t,s,i,e,n,r,h){let o=s.By(),a=s.Wy();if(!Number.isFinite(o)||!Number.isFinite(a))return;let l=s.yy(),u=s.Vg();if(-1!==this.TP){if(this.GP>=this.TP)return;this.GP+l.length>this.TP&&(l=l.slice(0,this.TP-this.GP),u=this.VP(s).width),this.GP+=l.length}const c=s.Hy("background");if(BI.bm(l)&&!c||s.Uy("hide"))return;const f=s.Hy("scale"),d=(f?parseFloat(f.Ig):this.lQ)*this.Zns,p=s.Hy("scalex"),m=(p?parseFloat(p.Ig):1)*d,g=s.Hy("scaley"),y=(g?parseFloat(g.Ig):1)*d,S=this.Qes._ns()*y;a+=h-this.aP-S;let w=1;const b=s.Hy("opacity");b&&(w=parseFloat(b.Ig)/100),c&&(t.gb(),VI.ua(NI(c.Ig)),VI.ko(VI.Wo()*w*this.RM.Wo()),VI.Zo(),t.DM(VI),$I.set(o,a,o+u,a+S),$I.tl()>this.CP&&$I.qa(this.CP),WI.Zl($I,n,r),WI.offset(i,e),t.Il(WI),t.lb());const v=s.Hy("color");v?(VI.ua(NI(v.Ig)),VI.ko(this.RM.Wo())):VI.S(this.RM),VI.ko(VI.Wo()*w),VI.Zo(),t.DM(VI);const M=this.Qes.xns()*m,x=Math.abs(this.srs());for(const s of l){const h=this.Qes.kns(s);if(h){const s=h.$ns()*m;if(o+s>this.CP+x+1e-5)return;$I.set(o,a,o+M,a+S),WI.Zl($I,n,r),WI.offset(i,e),t.ev(WI,h.sR()),o+=s+this.Kns}else o+=this.Qes.ers()*m+this.Kns}}sns(){return this.Qes}KP(t){t=!!t,this.fP!==t&&(this.fP=t,this.nP())}iP(){return this.fP}Vc(t){this.Bc!==t&&(this.Bc=t,this.nP())}wA(t){if(!UI.has(t))throw new Error("invalid word wrap mode");this.bP!==t&&(this.bP=t,this.nP())}Sns(t){if(!jI.has(t))throw new Error("invalid alignment");this.gP!==t&&(this.gP=t,this.ZP())}wns(t){if(!HI.has(t))throw new Error("invalid alignment");this.yP!==t&&(this.yP=t,this.ZP())}qW(t){this.lQ!==t&&(this.lQ=t,this.nP())}YW(){return this.lQ}vns(t){this.Zns!==t&&(this.Zns=t,this.nP())}ZFt(){return this.Zns}bns(t){this.Kns!==t&&(this.Kns=t,this.nP())}srs(){return this.Kns}nA(t){this.aP=t,this.nP()}rA(){return this.aP}eO(t){t=BI.Zn(t,0,1),this.RM.a=t}DM(t){this.RM.equals(t)||this.RM.S(t)}rO(){return this.RM}GA(){return this.CA(),this.wP.Cy()}IA(){this.CA();const t=this.Qes._ns()*this.lQ,s=this.aP,i=t+s;return this.wP.Bg()*i-s}}}{const zI=self.Cs,qI=self.gns,YI={width:256,height:256,hrs:16,ors:16,characterSet:""};self.tns=class{constructor(t){if((t=Object.assign({},YI,t)).width<=0||t.height<=0||t.hrs<=0||t.ors<=0)throw new Error("invalid size");this.Py=t.width,this.Ay=t.height,this.ans=t.hrs,this.lns=t.ors,this.uns=t.characterSet,this.ars="",this.lrs=null,this.urs=!1,this.crs=-1,this.zns=new zI.Rect(0,0,1,1),this.frs=new Map,this.drs=!0,this.prs=new Set}Jn(){this.zns=null,this.mrs(),this.frs=null,this.prs&&this.prs.clear(),this.prs=null}mrs(){for(let t of this.frs.values())t.Jn();this.frs.clear()}Qns(t){this.prs.add(t)}trs(t){this.prs.delete(t)}ons(){if(!this.drs)return;this.mrs();let t=zI.Um(this.uns),s=Math.floor(this.Py/this.ans),i=s*Math.floor(this.Ay/this.lns);for(let e=0,n=t.length;e<n&&!(e>=i);++e){let i=t[e];if(this.frs.has(i))continue;let n=e%s,r=Math.floor(e/s);this.frs.set(i,zI.Un(self.Hns,this,i,n*this.ans,r*this.lns))}if(this.urs=!1,this.crs=-1,Array.isArray(this.lrs))for(let t of this.lrs){if(!Array.isArray(t))continue;if(2!==t.length)continue;let s=t[0],i=t[1];if("number"==typeof s&&isFinite(s)&&"string"==typeof i&&s!==this.ans)for(let t of i){let i=this.frs.get(t);i?(i.Lns(s),this.urs=!0):" "===t&&(this.crs=s,this.urs=!0)}}this.drs=!1;for(let t of this.prs)t.nP()}Nns(){this.urs=!0;for(const t of this.prs)t.nP()}kns(t){return this.ons(),this.frs.get(t)||null}irs(){return this.urs}Yg(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Py!==t&&(this.Py=t,this.drs=!0)}Vg(){return this.Py}jg(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Ay!==t&&(this.Ay=t,this.drs=!0)}Kg(){return this.Ay}Mns(t){if(!this.zns.equals(t)){this.zns.S(t);for(const t of this.frs.values())t.Yns()}}sR(){return this.zns}ens(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.ans!==t&&(this.ans=t,this.drs=!0)}xns(){return this.ans}nns(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.lns!==t&&(this.lns=t,this.drs=!0)}_ns(){return this.lns}rns(t){this.uns!==t&&(this.uns=t,this.drs=!0)}Tns(){return this.uns}hns(t){if(this.ars!==t&&(this.ars=t,this.drs=!0,this.lrs=null,this.ars.length))try{this.lrs=JSON.parse(this.ars)}catch(t){this.lrs=null}}Gns(){return this.ars}Dns(t){t<0&&(t=-1),this.crs!==t&&(this.crs=t,this.crs>=0&&(this.urs=!0))}ers(){return this.crs<0?this.ans:this.crs}}}{const XI=self.Cs;XI.PB.grs=class extends XI.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{const ZI=self.Cs;ZI.PB.grs.nRt=class extends ZI.TCt{constructor(t){super(t),this.yrs=null,this.AS=null}Jn(){this.v5(),super.Jn()}uCt(){this.sz().kB(this.Nc)}async m5(t){const s=this.sz();this.AS=await s.VPt()}Srs(t,s,i,e){!this.yrs&&this.AS&&(this.yrs=new self.wrs(this),this.yrs.brs(this.AS,t,s,i,e))}v5(){this.yrs&&(this.yrs.Jn(),this.yrs=null)}vrs(){return this.yrs}}}{const KI=self.Cs,QI=0,tP=1,sP=2,iP=3,eP=4,nP=5,rP=6,hP=8,oP=KI.Un(KI.Rect),aP=KI.Un(KI.Rect),lP=KI.Un(KI.Il);KI.PB.grs.Instance=class extends KI.nIt{constructor(t,s){super(t),this.Mrs=16,this.xrs=16,this._rs=16,this.Trs=16,this.Grs=1,this.Crs=1,this.Irs=!0,this.Prs=null,s&&(this.Mrs=s[QI],this.xrs=s[tP],this._rs=s[sP],this.Trs=s[iP],this.Grs=s[eP],this.Crs=s[nP],this.Irs=!!s[hP],this.aB().OV(!!s[rP])),this.ECt.Srs(this.Mrs,this.xrs,this._rs,this.Trs)}Jn(){super.Jn()}Ars(t){this.Prs=t}$x(t){const s=this.aB(),i=s.iU();this.Rrs(t,i.Br(),i.$r(),s.Vg(),s.Kg())}Rrs(t,s,i,e,n){let r=this.ECt.vrs();if(!r&&(this.ECt.Srs(this.Mrs,this.xrs,this._rs,this.Trs),r=this.ECt.vrs(),!r))return;const h=r.Ers(),o=r.Ors(),a=Math.min(this.Mrs,h),l=Math.min(this.xrs,h),u=Math.min(this._rs,o),c=Math.min(this.Trs,o),f=h-l,d=o-c,p=this.Irs?1:0,m=this.Grs,g=this.Crs;if(a>0&&u>0&&this.Frs(t,r.fT(),0,0,a+p,u+p,s,i,a+p,u+p),l>0&&u>0&&this.Frs(t,r.fT(),f-p,0,l+p,u+p,s+e-l-p,i,l+p,u+p),l>0&&c>0&&this.Frs(t,r.fT(),f-p,d-p,l+p,c+p,s+e-l-p,i+n-c-p,l+p,c+p),a>0&&c>0&&this.Frs(t,r.fT(),0,d-p,a+p,c+p,s,i+n-c-p,a+p,c+p),0===m){const h=2===g?0:p;a>0&&d>u&&this.Drs(t,r.krs(),s,i+u,a+h,n-u-c,0,0),l>0&&d>u&&this.Drs(t,r.Lrs(),s+e-l-h,i+u,l+h,n-u-c,h,0),u>0&&f>a&&this.Drs(t,r.Nrs(),s+a,i,e-a-l,u+h,0,0),c>0&&f>a&&this.Drs(t,r.Brs(),s+a,i+n-c-h,e-a-l,c+h,0,h)}else 1===m&&(a>0&&d>u&&this.Frs(t,r.fT(),0,u,a,d-u,s,i+u,a,n-u-c),l>0&&d>u&&this.Frs(t,r.fT(),f,u,l,d-u,s+e-l,i+u,l,n-u-c),u>0&&f>a&&this.Frs(t,r.fT(),a,0,f-a,u,s+a,i,e-a-l,u),c>0&&f>a&&this.Frs(t,r.fT(),a,d,f-a,c,s+a,i+n-c,e-a-l,c));d>u&&f>a&&(0===g?this.Drs(t,r.$rs(),s+a,i+u,e-a-l,n-u-c,0,0):1===g&&this.Frs(t,r.fT(),a,u,f-a,d-u,s+a,i+u,e-a-l,n-u-c))}Frs(t,s,i,e,n,r,h,o,a,l){const u=s.Vg(),c=s.Kg();if(t.hO(s),oP.set(h,o,h+a,o+l),aP.set(i/u,e/c,(i+n)/u,(e+r)/c),null===this.Prs){const s=this.aB(),i=s.iU(),e=i.Br(),n=i.$r();oP.offset(-e,-n),lP.Xl(oP,s.ZW()),lP.offset(e,n),t.ev(lP,aP)}else this.Prs(oP,aP)}Drs(t,s,i,e,n,r,h,o){const a=s.Vg(),l=s.Kg();if(t.hO(s),oP.set(i,e,i+n,e+r),aP.set(-h/a,-o/l,(n-h)/a,(r-o)/l),null===this.Prs){const s=this.aB(),i=s.iU(),e=i.Br(),n=i.$r();oP.offset(-e,-n),lP.Xl(oP,s.ZW()),lP.offset(e,n),t.ev(lP,aP)}else this.Prs(oP,aP)}fIt(){this.idt.sz()}Hrt(t){}Xrt(t,s){}}}self.Cs.PB.grs.CB={},self.Cs.PB.grs.hrt={fKt(t){this.aB().FM(t),this.Nc.mB()}},self.Cs.PB.grs.ort={};{let uP=function(t){const s=cP.co(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),s};CloneDrawable=uP;const cP=self.Cs;self.wrs=class{constructor(t){this.ECt=t,this.Nc=this.ECt.LB(),this.r_=null,this.Wrs=null,this.Vrs=null,this.jrs=null,this.Hrs=null,this.Urs=null,this.nK=0,this.rK=0,this.qv=this.Nc.pM(),this.yS=!1,this.YP=!1}Jn(){this.qv.QA()||(this.qv.hT(this.r_),this.qv.hT(this.Wrs),this.qv.hT(this.Vrs),this.qv.hT(this.jrs),this.qv.hT(this.Hrs),this.qv.hT(this.Urs)),this.r_=null,this.Wrs=null,this.Vrs=null,this.jrs=null,this.Hrs=null,this.Urs=null,this.ECt=null,this.qv=null,this.YP=!0}zn(){return this.YP}brs(t,s,i,e,n){this.Jrs(t,s,i,e,n)}zrs(){return!!this.r_}Jrs(t,s,i,e,n){if(this.YP)return;const r=t.width,h=t.height;this.nK=r,this.rK=h,s=Math.min(Math.floor(s),r),i=Math.min(Math.floor(i),r),e=Math.min(Math.floor(e),h);const o=r-i,a=h-(n=Math.min(Math.floor(n),h)),l=this.Nc.IL(),u=this.Nc.xB().oK();this.r_=this.qv.VO(uP(t),{Zx:l,Kx:u}),o>s&&a>e&&(this.Wrs=this.qv.VO(this.qrs(uP(t),s,e,o,a),{Yx:"repeat",Xx:"repeat",Zx:l,Kx:u})),s>0&&a>e&&(this.Vrs=this.qv.VO(this.qrs(uP(t),0,e,s,a),{Xx:"repeat",Zx:l,Kx:u})),i>0&&a>e&&(this.jrs=this.qv.VO(this.qrs(uP(t),o,e,r,a),{Xx:"repeat",Zx:l,Kx:u})),e>0&&o>s&&(this.Hrs=this.qv.VO(this.qrs(uP(t),s,0,o,e),{Yx:"repeat",Zx:l,Kx:u})),n>0&&o>s&&(this.Urs=this.qv.VO(this.qrs(uP(t),s,a,o,h),{Yx:"repeat",Zx:l,Kx:u}))}qrs(t,s,i,e,n){const r=e-s,h=n-i,o=cP.co(r,h);return o.getContext("2d").drawImage(t,s,i,r,h,0,0,r,h),o}Ers(){return this.nK}Ors(){return this.rK}fT(){return this.r_}$rs(){return this.Wrs}krs(){return this.Vrs}Lrs(){return this.jrs}Nrs(){return this.Hrs}Brs(){return this.Urs}}}{const fP=self.Cs;fP.PB.Yrs=class extends fP.WGt{constructor(t){super(t)}Jn(){super.Jn()}}}{let dP=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};WrapModeToStr=dP;const pP=self.Cs;pP.PB.Yrs.nRt=class extends pP.TCt{constructor(t,s){super(t),this.o_="repeat",this.a_="repeat",s&&(this.o_=dP(s[0]),this.a_=dP(s[1]))}Jn(){super.Jn()}uCt(){this.sz().kB(this.Nc)}m5(t){return this.sz().rX(t,{Zx:this.Nc.IL(),Yx:this.o_,Xx:this.a_})}v5(){this.sz().JP()}Xrs(){return this.o_}Zrs(){return this.a_}}}{const mP=self.Cs,gP=self.Ns,yP=0,SP=4,wP=5,bP=6,vP=7,MP=8,xP=9,_P=10,TP=11,GP=12,CP=13,IP=14,PP=mP.Un(mP.Rect),AP=mP.Un(mP.Il),RP=mP.Un(mP.Rect),EP=mP.Un(mP.Il);mP.PB.Yrs.Instance=class extends mP.nIt{constructor(t,s){super(t),this.Krs=0,this.Qrs=0,this.ths=1,this.shs=1,this.ihs=0,this.ehs=!1,this.nhs=0,this.rhs=0,this.hhs=0,this.ohs=0,this.ahs=0,this.lhs=null,s&&(this.aB().OV(!!s[yP]),this.Krs=s[SP],this.Qrs=s[wP],this.ths=s[bP],this.shs=s[vP],this.ihs=mP.Qn(s[MP]),this.ehs=!!s[xP],this.nhs=s[_P],this.rhs=s[TP],this.hhs=s[GP],this.ohs=s[CP],this.ahs=s[IP])}Jn(){this.uhs(),super.Jn()}uhs(){this.lhs&&(this.lhs.Jn(),this.lhs=null)}chs(t,s,i){const e=this.fIt(),n=e.Vg(),r=e.Kg(),h=this.Krs/n,o=this.Qrs/r,a=this.ihs;RP.set(0,0,t/(n*this.ths),s/(r*this.shs)),RP.offset(-h,-o),0===a?i.Yl(RP):i.Xl(RP,-a)}fhs(t,s=!0){if(this.ehs){const s=this.fIt();t.mb(),t.PO(s.Vg()*this.ths,s.Kg()*this.shs,this.nhs,this.rhs,this.hhs,this.ohs,this.ahs)}else s&&t.lb()}$x(t){const s=this.fIt(),i=s.fT();if(null===i)return;this.fhs(t),t.hO(i);const e=s.Vg(),n=s.Kg(),r=this.Krs/e,h=this.Qrs/n,o=this.aB();RP.set(0,0,o.Vg()/(e*this.ths),o.Kg()/(n*this.shs)),RP.offset(-r,-h),o.hJ()?this.iZt(o,t):this.eZt(o,t)}eZt(t,s){let i=t.iU();this.Nc.AL()&&(i=t.FDt(i)),0===this.ihs?s.ev(i,RP):(EP.Xl(RP,-this.ihs),s.gO(i,EP))}iZt(t,s){const i=t.KDt();if(t.tkt()){t.QH(PP,AP,!1);let s=AP;this.Nc.AL()&&(s=t.FDt(s));let e=RP;0!==this.ihs&&(EP.Xl(RP,-this.ihs),e=EP),i.Bx(t.oJ(),s,e),t.QDt(!1)}i.$x(s)}fIt(){return this.lhs||this.idt.sz()}vit(){return!0}fT(){return this.fIt().fT()}dhs(){this.aB().QDt(!0)}phs(t){this.Krs!==t&&(this.Krs=t,this.Nc.mB(),this.dhs())}mhs(){return this.Krs}ghs(t){this.Qrs!==t&&(this.Qrs=t,this.Nc.mB(),this.dhs())}yhs(){return this.Qrs}Shs(t){this.ths!==t&&(this.ths=t,this.Nc.mB(),this.dhs())}whs(){return this.ths}bhs(t){this.shs!==t&&(this.shs=t,this.Nc.mB(),this.dhs())}vhs(){return this.shs}Mhs(t){this.ihs!==t&&(this.ihs=t,this.Nc.mB(),this.dhs())}xhs(){return this.ihs}_hs(t){t=!!t,this.ehs!==t&&(this.ehs=t,this.Nc.mB())}Ths(){return this.ehs}Ghs(t){this.nhs!==t&&(this.nhs=t,this.Ths()&&this.Nc.mB())}Chs(){return this.nhs}Ihs(t){this.rhs!==t&&(this.rhs=t,this.Ths()&&this.Nc.mB())}Phs(){return this.rhs}Ahs(t){this.hhs!==t&&(this.hhs=t,this.Ths()&&this.Nc.mB())}Rhs(){return this.hhs}Ehs(t){this.ohs!==t&&(this.ohs=t,this.Ths()&&this.Nc.mB())}Ohs(){return this.ohs}Fhs(t){this.ahs!==t&&(this.ahs=t,this.Ths()&&this.Nc.mB())}Dhs(){return this.ahs}hx(){const t={};return 0!==this.Krs&&(t.iox=this.Krs),0!==this.Qrs&&(t.ioy=this.Qrs),1!==this.ths&&(t.isx=this.ths),1!==this.shs&&(t.isy=this.shs),0!==this.ihs&&(t.ia=this.ihs),this.ehs&&(t.tr=!0),1!==this.nhs&&(t.trx=this.nhs),1!==this.rhs&&(t.try=this.rhs),1!==this.hhs&&(t.tra=this.hhs),.1!==this.ohs&&(t.trbmx=this.ohs),.1!==this.ahs&&(t.trbmy=this.ahs),t}ox(t){this.Krs=t.iox||0,this.Qrs=t.ioy||0,this.ths=t.hasOwnProperty("isx")?t.isx:1,this.shs=t.hasOwnProperty("isy")?t.isy:1,this.ihs=t.ia||0,this.ehs=!!t.tr,this.nhs=t.hasOwnProperty("trx")?t.trx:1,this.rhs=t.hasOwnProperty("try")?t.try:1,this.hhs=t.hasOwnProperty("tra")?t.tra:1,this.ohs=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.ahs=t.hasOwnProperty("trbmy")?t.trbmy:.1}QCt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.mhs(),OZt:t=>this.phs(t)},{name:t+".image-offset-y.name",value:this.yhs(),OZt:t=>this.ghs(t)},{name:t+".image-scale-x.name",value:100*this.whs(),OZt:t=>this.Shs(t/100)},{name:t+".image-scale-y.name",value:100*this.vhs(),OZt:t=>this.bhs(t/100)},{name:t+".image-angle.name",value:mP.tr(this.xhs()),OZt:t=>this.Mhs(mP.Qn(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.Ths(),OZt:t=>this._hs(t)},{name:t+".x-random.name",value:100*this.Chs(),OZt:t=>this.Ghs(t/100)},{name:t+".y-random.name",value:100*this.Phs(),OZt:t=>this.Ihs(t/100)},{name:t+".angle-random.name",value:100*this.Rhs(),OZt:t=>this.Ahs(t/100)},{name:t+".blend-margin-x.name",value:100*this.Ohs(),OZt:t=>this.Ehs(t/100)},{name:t+".blend-margin-y.name",value:100*this.Dhs(),OZt:t=>this.Fhs(t/100)}]}]}Hrt(t){switch(t){case SP:return this.mhs();case wP:return this.yhs();case bP:return this.whs();case vP:return this.vhs();case MP:return this.xhs();case xP:return this.Ths();case _P:return this.Chs();case TP:return this.Phs();case GP:return this.Rhs();case CP:return this.Ohs();case IP:return this.Dhs()}}Xrt(t,s){switch(t){case SP:this.phs(s);break;case wP:this.ghs(s);break;case bP:this.Shs(s);break;case vP:this.bhs(s);break;case MP:this.Mhs(s);break;case xP:this._hs(!!s);break;case _P:this.Ghs(s);break;case TP:this.Ihs(s);break;case GP:this.Ahs(s);break;case CP:this.Ehs(s);break;case IP:this.Fhs(s)}}cCt(){return self.khs}};const OP=new WeakMap;self.khs=class extends self.cJ{constructor(){super(),OP.set(this,self.Gj.Aj().gJ())}set Lhs(t){gP.he(t),OP.get(this).phs(t)}get Lhs(){return OP.get(this).mhs()}set Nhs(t){gP.he(t),OP.get(this).ghs(t)}get Nhs(){return OP.get(this).yhs()}Bhs(t,s){gP.he(t),gP.he(s);const i=OP.get(this);i.phs(t),i.ghs(s)}$hs(){const t=OP.get(this);return[t.mhs(),t.yhs()]}set Whs(t){gP.he(t),OP.get(this).Shs(t)}get Whs(){return OP.get(this).whs()}set Vhs(t){gP.he(t),OP.get(this).bhs(t)}get Vhs(){return OP.get(this).vhs()}jhs(t,s){gP.he(t),gP.he(s);const i=OP.get(this);i.Shs(t),i.bhs(s)}Hhs(){const t=OP.get(this);return[t.whs(),t.vhs()]}set Uhs(t){gP.he(t),OP.get(this).Mhs(t)}get Uhs(){return OP.get(this).xhs()}set Jhs(t){gP.he(t),OP.get(this).Mhs(mP.Qn(t))}get Jhs(){return mP.tr(OP.get(this).xhs())}get imageWidth(){return OP.get(this).fIt().Vg()}get imageHeight(){return OP.get(this).fIt().Kg()}zZt(){const t=OP.get(this).fIt();return[t.Vg(),t.Kg()]}set zhs(t){OP.get(this)._hs(!!t)}get zhs(){return OP.get(this).Ths()}set qhs(t){gP.he(t),OP.get(this).Ghs(t)}get qhs(){return OP.get(this).Chs()}set Yhs(t){gP.he(t),OP.get(this).Ihs(t)}get Yhs(){return OP.get(this).Phs()}Xhs(t,s){gP.he(t),gP.he(s);const i=OP.get(this);i.Ghs(t),i.Ihs(s)}Zhs(){const t=OP.get(this);return[t.Chs(),t.Phs()]}set Khs(t){gP.he(t),OP.get(this).Ahs(t)}get Khs(){return OP.get(this).Rhs()}set Qhs(t){gP.he(t),OP.get(this).Ehs(t)}get Qhs(){return OP.get(this).Ohs()}set tos(t){gP.he(t),OP.get(this).Fhs(t)}get tos(){return OP.get(this).Dhs()}sos(t,s){gP.he(t),gP.he(s);const i=OP.get(this);i.Ehs(t),i.Fhs(s)}ios(){const t=OP.get(this);return[t.Ohs(),t.Dhs()]}async eos(t){gP.Be(t,Blob);const s=OP.get(this),i=s.LB(),e=mP.Un(mP.vPt);e.DPt(i,t),await e.rX(i.pM(),{Zx:i.IL(),Yx:s.Vxt().Xrs(),Xx:s.Vxt().Zrs()}),s.zn()?e.Jn():(s.uhs(),s.lhs=e,i.mB())}}}self.Cs.PB.Yrs.CB={iKt:()=>!0,eKt:()=>!0,nos(){return this.Ths()}};{const FP=self.Cs;FP.PB.Yrs.hrt={ros(t){this.phs(t)},hos(t){this.ghs(t)},oos(t){this.Shs(t/100)},aos(t){this.bhs(t/100)},los(t){this.Mhs(FP.Qn(t))},uos(t){this._hs(t)},fos(t,s){this.Ghs(t/100),this.Ihs(s/100)},dos(t){this.Ahs(t/100)},pos(t,s){this.Ehs(t/100),this.Fhs(s/100)},fKt(t){this.aB().FM(t),this.Nc.mB()},async uKt(t,s){if(this.lhs&&this.lhs.TZ()===t)return;const i=this.Nc,e=FP.Un(FP.vPt);try{if(await e.FPt(i,t),!e.tK())throw new Error("image failed to load");if(this.zn())return e.Jn(),null;if(!await e.rX(i.pM(),{Zx:i.IL(),Yx:this.Vxt().Xrs(),Xx:this.Vxt().Zrs()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.zn()||this.lH(FP.PB.Yrs.CB.eKt))}this.zn()?e.Jn():(this.uhs(),this.lhs=e,i.mB(),await this.TB(FP.PB.Yrs.CB.iKt))}}}{const DP=self.Cs;DP.PB.Yrs.ort={xKt(){return this.fIt().Vg()},_Kt(){return this.fIt().Kg()},mos(){return this.Krs},gos(){return this.Qrs},yos(){return 100*this.ths},Sos(){return 100*this.shs},wos(){return DP.tr(this.ihs)},bos(){return 100*this.Chs()},vos(){return 100*this.Phs()},Mos(){return 100*this.Rhs()},xos(){return 100*this.Ohs()},_os(){return 100*this.Dhs()}}}{const kP=self.Cs;kP.slt.tlt=class extends kP.WIt{constructor(t){super(t)}Jn(){super.Jn()}}}{const LP=self.Cs;LP.slt.tlt.nRt=class extends LP.JIt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const NP=self.Cs,BP=NP.slt.tlt,$P=0;BP.Instance=class extends NP.qIt{constructor(t,s){super(t),this.Tos=!1,this.fu=!0,s&&(this.Tos=!1,this.fu=!!s[$P]),this.Gos=new Map,this.Cos=[],this.Ios=new Map,this.Pos=null,this.Aos=null,this.Ros=null,this.Eos=null,this.Oos="",this.Fos=[],this.m6=t=>this.g6(),this.LB().Sf().addEventListener("afterload",this.m6)}Jn(){this.LB().Sf().removeEventListener("afterload",this.m6),this.m6=null,this.Pos&&(this.Dos(this.Pos),this.Pos=null),this.kos(),this.Los=null,this.Nos(),this.Cos=null,this.Bos(),this.Ios=null,this.Fos=null,super.Jn()}hlt(t){this.Fos.push(t)}olt(){this.Fos.pop()}$os(){return this.Fos[this.Fos.length-1]}SGt(t){this.fu=!!t,t?this.Ios&&this.Ios.size&&this.ZCt():this.FCt();for(const s of this.Wos())t?this.Vos(s)&&s.wz():((s.IsPlaying()||s.Itt())&&this.jos(s),s.Sz());t&&this.Nos()}Gu(){return this.fu}jos(t){this.Cos.push(t)}Vos(t){return this.Cos.includes(t)}Nos(){NP.bh(this.Cos)}Hos(){return this.Pos}Yst(){const t=this.IJ();return!!t&&!t.Oq()}Uos(t,s,i=!1){const e=s?this.Jos(s,i):this.Wos(i);if(e&&e.length)for(const s of e)if(s.bz(t))return s}zos(t,s){for(const i of this.Gos.values())for(const e of i)if(!e.gz()&&e.bz(t)&&s(e))return!0;for(const i of this.Ios.values())for(const e of i)if(!e.gz()&&e.bz(t)&&s(e))return!0;return!1}qos(t){for(const s of this.Gos.values())for(const i of s)if(!i.gz()&&t(i))return!0;for(const s of this.Ios.values())for(const i of s)if(!i.gz()&&t(i))return!0;return!1}Yos(t,s){return this.Uos(t,s,!0)}*Xos(t,s,i=!1){const e=s?this.Jos(s,i):this.Wos(i);if(e&&e.length)for(const s of e)s.bz(t)&&(yield s)}*Zos(t,s){yield*this.Xos(t,s,!0)}Jos(t,s){if(s){let s=this.Gos.get(t),i=this.Ios.get(t);return s||(s=[]),i||(i=[]),s.concat(i).filter((t=>t)).filter((t=>!t.gz()))}{let s=this.Gos.get(t);return s||(s=[]),s.filter((t=>t)).filter((t=>!t.gz()))}}Wos(t){if(t){const t=[...this.Gos.values()].flat(),s=[...this.Ios.values()].flat();return t.concat(s).filter((t=>t)).filter((t=>!t.gz()))}return[...this.Gos.values()].flat().filter((t=>t)).filter((t=>!t.gz()))}Kos(){return this.Wos(!0)}hx(t="full"){return{s:!1,e:!!this.fu,at:this.Qos(),dt:this.tas(),wt:this.sas(),ft:this.ias()}}ox(t,s="full"){t&&(this.Aos=t.at,this.Ros=t.dt,this.Eos=t.wt,this.Oos=t.ft,this.Tos=!1,this.fu=!!t.e,"state"===s&&this.g6())}g6(){const t=this.LB().J9();if(this.eas(this.Aos,this.Gos,t),this.Ros){NP.bh(this.Cos);for(const s of this.Ros)this.nas(this.Cos,s,t)}this.eas(this.Eos,this.Ios,t),this.Pos=this.ras(this.Oos,t),this.fu?this.Ios&&this.Ios.size&&this.ZCt():this.FCt()}eas(t,s,i){if(t)for(const e in t){let n=s.get(e);n?NP.bh(n):n=[];const r=t[e];for(const t of r)if(this.nas(n,t.name,i))this.oas(t.name,t,i);else{const s=NP.Lht.clt({runtime:this.LB(),json:t});NP.Lht.dit(s,this.IJ().$j()),s.Wat((t=>this.aas(t))),i.q6(s),this.nas(n,s,i)}s.set(e,n)}}ras(t,s){return s.U6(t)}nas(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this.ras(s,i);if(e)return!!t.push(e)}return!1}oas(t,s,i){if("string"==typeof t){const e=this.ras(t,i);e&&(e.i3(s),NP.Lht.dit(e,this.IJ().$j()))}else t.i3(s),NP.Lht.dit(t,this.IJ().$j())}Qos(){const t={};for(const[s,i]of this.Gos)t[s]=i.filter((t=>!t.gz())).map((t=>t.s3()));return t}tas(){return this.Cos.filter((t=>!t.gz())).map((t=>t.Pc()))}sas(){const t={};for(const[s,i]of this.Ios)t[s]=i.map((t=>t.s3()));return t}ias(){return this.Pos?this.Pos.Pc():""}qCt(){this.Bos()}las(t){const s=BP.cas.uas(t.uit,t.blt,t.vlt,t.wlt,t.glt,this.IJ()),i=BP.das.fas(t.uit);BP.das.pas(i)||this.mas(t.uit);const e=NP.Lht.clt({runtime:this.LB(),id:i,tags:t.tags,time:t.time,CJ:this.IJ(),plt:!!t.plt,loop:!!t.loop,mlt:!!t.mlt,WJ:t.WJ,dlt:t.dlt,flt:s});return e.Wat((t=>this.aas(t))),this.gas(e,t.uit),e}yas(t){const s=t.zz();if(this.Gos.has(s)){const i=this.Gos.get(s);if(i){const s=i.indexOf(t);-1!==s&&i.splice(s,1)}}}Bz(t,s=!1){this.yas(t),t.gz()||this.Sas(t)||(t.Sz(s),this.was(t))}mas(t,s=!1){if(NP.te(t)){const i=BP.das.fas(t);if(!this.Gos.has(i))return;const e=this.Gos.get(i),n=this.Hos();for(const t of e)t!==n&&(t.gz()||this.Sas(t)||(t.Sz(s),t.Jn()));NP.bh(e)}else{const t=this.Hos();for(const i of this.Wos())i!==t&&(i.gz()||this.Sas(i)||(i.Sz(s),i.Jn()));for(const t of this.Gos.keys())NP.bh(this.Gos.get(t)),this.Gos.delete(t);this.Gos.clear()}}Dos(t){this.Bz(t,!0)}kos(){this.mas(NaN,!0)}Hrt(t){if(t===$P)return this.fu}Xrt(t,s){t===$P&&(this.fu=!!s)}bas(t){const s=t.Vz().Lnt();for(const t of s){const s=t.GJ();if(s.GRt()===this.constructor)return s}}lH(t,s,i,e){return this.Nc?super.lH(t):s.lH(t,i,e)}aas(t){let s,i;if(this.Pos=t,BP.CB.vas(t),this.LB())s=this.di,i=this.Nc,this.lH(BP.CB.Mas),this.lH(BP.CB.xas),this.Bz(t);else{if(s=t.Vz(),!s)return;if(s&&s.Oq())return;i=s.LB();const e=this.bas(t);this.lH(BP.CB.Mas,i,s,e),this.lH(BP.CB.xas,i,s,e),t.Sz()}this.Pos=null,BP.CB.vas(null),t.Uz()&&i.Oj(s)}gas(t,s){const i=BP.das.fas(s);this.Gos.has(i)||this.Gos.set(i,[]),this.Gos.get(i).push(t)}was(t){const s=t.zz();this.Ios.has(s)||this.Ios.set(s,[]),this.Ios.get(s).push(t),this.KCt()||this.ZCt()}Sas(t){const s=t.zz();return!!this.Ios.has(s)&&this.Ios.get(s).includes(t)}Bos(){if(this.Ios.size){for(const t of this.Ios.values()){for(const s of t)s.gz()||s.Jn();NP.bh(t)}this.Ios.clear(),this.KCt()&&this.FCt()}}QCt(){return[{title:"$"+this.GJ().Pc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.Gu(),OZt:t=>this.SGt(t)}]}]}cCt(){return self._as}}}{const WP=self.Cs;let VP=null;WP.slt.tlt.CB={Qat:()=>!0,ilt(t){const s=this.$os();return!!s&&s.bz(t)},elt(t){const s=this.$os();return!!s&&(s.ott()===t||2===t)},nlt(t,s){const i=this.$os();return!!i&&(i.ott()===s||2===s)&&i.bz(t)},vas(t){VP=t},Mas:t=>VP.bz(t),xas:()=>!0,IsPlaying(t){return this.zos(t,WP.Lht.IsPlaying)},Y2t(){return this.qos(WP.Lht.IsPlaying)},Fz(t){return this.zos(t,WP.Lht.Fz)},Tas(){return this.qos(WP.Lht.Fz)},JJ(t,s){return 0===s?this.zos(t,WP.Lht.llt):1===s&&this.zos(t,WP.Lht.ult)},Gas(t){return 0===t?this.qos(WP.Lht.llt):1===t&&this.qos(WP.Lht.ult)}}}{const jP=self.Cs,HP=self.Vu,UP=jP.slt.tlt;UP.hrt={SGt(t){this.SGt(!!t)},async Cas(...t){if(!this.Gu()||!this.Yst())return;const s=this.las(UP.Pas.Ias(this,...t));s.Play()&&await s.Rz()},async Aas(...t){if(!this.Gu()||!this.Yst())return;const s=this.las(UP.Pas.Ras(this,...t));s.Play()&&await s.Rz()},async Eas(...t){if(!this.Gu()||!this.Yst())return;const s=this.las(UP.Pas.Oas(this,...t));s.Play()&&await s.Rz()},Fas(t){if(this.Gu()&&this.Yst())for(const s of this.Xos(t))s.Sz()},Das(){if(this.Gu()&&this.Yst())for(const t of this.Wos())t.Sz()},kas(t){if(this.Gu()&&this.Yst())for(const s of this.Xos(t))s.wz()},Las(){if(this.Gu()&&this.Yst())for(const t of this.Wos())t.wz()},Nas(t){if(this.Gu()&&this.Yst())for(const s of this.Xos(t))this.Bz(s)},Bas(){if(this.Gu()&&this.Yst())for(const t of this.Wos())this.Bz(t)},$as(t,s,i){if(!this.Gu()||!this.Yst())return;const e=jP.slt.tlt.das.Was(s);for(const s of this.Xos(t))s.Jat([e]),s.zat(i,e)},Vas(t,s,i,e){if(!this.Gu()||!this.Yst())return;const n=jP.slt.tlt.das.jas(s);for(const s of this.Xos(t))s.Jat(n),s.zat(i,n[0]),s.zat(e,n[1])},Has(t,s){if(this.Gu()&&this.Yst())for(const i of this.Xos(t,"value"))i.Hat(s,"value")},Uas(t,s){if(this.Gu()&&this.Yst())for(const i of this.Xos(t,"value"))i.Jat(["value"]),i.zat(s,"value")},Jas(t,s){if(!this.Gu()||!this.Yst())return;const i=HP.oc(s);for(const s of this.Xos(t))s.Wz(i)},zas(t){if(!this.Gu()||!this.Yst())return;const s=HP.oc(t);for(const t of this.Wos())t.Wz(s)},qas(t,s){if(this.Gu()&&this.Yst())for(const i of this.Xos(t))i.vz(s)},Yas(t){if(this.Gu()&&this.Yst())for(const s of this.Wos())s.vz(t)},Xas(t,s){if(this.Gu()&&this.Yst())for(const i of this.Xos(t))i.Iz(s)},Zas(t){if(this.Gu()&&this.Yst())for(const s of this.Wos())s.Iz(t)},Kas(t,s){if(this.Gu()&&this.Yst())for(const i of this.Xos(t))i.Jz(!!s)},Qas(t){if(this.Gu()&&this.Yst())for(const s of this.Wos())s.Jz(!!t)}}}self.Cs.slt.tlt.ort={tls(t){const s=this.Yos(t);return s?s.AF():0},f7t(t){const s=this.Yos(t);return s?s.AF()/s.xz():0},mrt(t){const s=this.Yos(t);return s?s.Pz():0},sls(t){const s=this.Yos(t,"value");return s?s.Yz("value").qz():0},CTt(){let t=this.Hos();return t?t.ctt():(t=this.$os(),t?t.ctt():"")}};{const JP=self.Cs,zP=self.Vu,qP=["position","size","scale"],YP=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],XP=["value"],ZP=[].concat(qP).concat(YP).concat(XP),KP={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},QP=Object.assign({},ZP.reduce(((t,s)=>Object.assign({},t,{[s]:[s]})),{}),KP);JP.slt.tlt.das=class{constructor(){}static ils(){return[...zP.Xu()]}static oc(t){return[...zP.Xu()][t]}static fas(t){return ZP[t]}static els(t){return ZP.indexOf(t)}static nls(t){return qP[t]}static Was(t){return YP[t]}static rls(t){return XP[t]}static hls(t){return KP[t]}static jas(t){return JP.le(t)?QP[t]:QP[ZP[t]]}static ols(t){return!!KP[t]}static als(t){return"offsetColor"===t}static lls(t){return"offsetAngle"===t}static uls(t){return"offsetOpacity"===t}static pas(t){return"value"===t}}}{const tA=self.Cs,sA=tA.slt.tlt,iA=new Map;sA.cas=class{constructor(){}static uas(t,s,i,e,n,r){0===iA.size&&this.cls();const h=sA.dls.fls(t);let o=iA.get(h);return tA.te(t)&&(t=sA.das.fas(t)),this.pls(o,t,s,i,e,n,r)}static mls(t,s){return tA.slt.tlt.uas(t).gls(s)}static cls(){const t=sA.dls,s=sA.yls;this.Sls(t.wls,this.bls,s.vls),this.Sls(t.COLOR,this.Mls,s.xls),this.Sls(t._ls,this.Tls,s.Gls),this.Sls(t.Cls,this.Ils,s.vls),this.Sls(t.Pls,this.Als,s.vls)}static Sls(t,s,i){iA.set(t,this.Rls(t,s,i))}static Rls(t,s,i){return{name:t,Els:s,gls:i}}static pls(t,s,i,e,n,r,h){return t.Els(s,t.gls(i),t.gls(e),n,r,h)}static bls(t,s,i,e,n,r){return sA.das.hls(t).map(((t,r)=>({ylt:"world-instance",uit:t,type:"float",valueType:"numeric",blt:s[r],vlt:i[r],wlt:sA.das.oc(e),glt:n})))}static Mls(t,s,i,e,n,r){return tA.PB.Text&&r.wW()instanceof tA.PB.Text?{ylt:"plugin",Slt:[7],uit:"color",type:"color",valueType:"color",blt:s,vlt:i,wlt:sA.das.oc(e),glt:n}:{ylt:"world-instance",uit:t,type:"color",valueType:"color",blt:s,vlt:i,wlt:sA.das.oc(e),glt:n}}static Tls(t,s,i,e,n,r){return{ylt:"world-instance",uit:t,type:"angle",valueType:"angle",blt:s,vlt:i,wlt:sA.das.oc(e),glt:n}}static Als(t,s,i,e,n,r){return{ylt:"world-instance",uit:t,type:"float",valueType:"numeric",blt:s,vlt:i,wlt:sA.das.oc(e),glt:n}}static Ils(t,s,i,e,n,r){return{ylt:"value",uit:t,type:"float",valueType:"numeric",blt:s,vlt:i,wlt:sA.das.oc(e),glt:n}}}}{const eA=self.Cs,nA=eA.slt.tlt,rA={glt:"absolute"},hA=Object.assign({},rA,{tags:"",uit:"",time:0,wlt:0,plt:0,loop:!1,mlt:!1,WJ:1}),oA=Object.assign({},hA,{dlt:"current-state",blt:0,vlt:0}),aA=Object.assign({},hA,{dlt:"current-state",blt:[0,0],vlt:[0,0]}),lA=Object.assign({},hA,{dlt:"current-state",blt:[0,0,0],vlt:[0,0,0]}),uA=Object.assign({},oA,{dlt:"start-value"}),cA=0,fA=1,dA=0,pA=1,mA=2;nA.Pas=class{constructor(){}static Ols(t,s,i,e,n,r,h,o){t.tags=s,t.time=i,t.wlt=e,t.plt=n,t.loop=r,t.mlt=h,t.WJ=o}static Ias(t,s,i,e,n,r,h,o,a,l){const u="string"==typeof i?i:nA.das.Was(i),c=nA.das.als(u)?lA:oA;return this.Ols(c,s,n,r,h,o,a,l),nA.das.als(u)?(lA.vlt[0]=eA.Ar(e),lA.vlt[1]=eA.Rr(e),lA.vlt[2]=eA.Er(e),lA.uit=nA.das.els(u)):nA.das.uls(u)?oA.vlt=e/100:oA.vlt=e,c.uit=nA.das.els(u),c}static Ras(t,s,i,e,n,r,h,o,a,l,u){this.Ols(aA,s,r,h,o,a,l,u);const c="string"==typeof i?i:nA.das.nls(i);return aA.vlt[0]=e,aA.vlt[1]=n,aA.uit=nA.das.els(c),aA}static Oas(t,s,i,e,n,r,h,o,a,l){return this.Ols(uA,s,n,r,h,o,a,l),uA.blt=i,uA.vlt=e,uA.uit=nA.das.els("value"),uA}}}{const gA=self.Cs,yA=gA.slt.tlt,SA=[];yA.dls=class{constructor(){}static fls(t){if(0===SA.length){const t=SA;t.push({RR:yA.das.ols,result:this.wls}),t.push({RR:yA.das.als,result:this.COLOR}),t.push({RR:yA.das.lls,result:this._ls}),t.push({RR:yA.das.pas,result:this.Cls}),t.push({RR:()=>!0,result:this.Pls})}gA.te(t)&&(t=gA.slt.tlt.das.fas(t));for(const s of SA)if(s.RR(t))return s.result}static get wls(){return"pair"}static get COLOR(){return"color"}static get _ls(){return"angle"}static get Cls(){return"value"}static get Pls(){return"other"}}}{const wA=self.Cs,bA=wA.slt.tlt;bA.yls=class{constructor(){}static Gls(t){const s=wA.Qn(parseFloat(t));return wA.Kn(s)}static xls(t){return t.slice(0)}static vls(t){return t}}}{let vA=function(t){_A.ue(t);const s=GA.Uu(t);let i;if(i=s?GA.ac(s,null):GA.ac(t,null),-1===i)throw new Error(`invalid ease name '${t}'`);return i},MA=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};getIndexForEase=vA,ValidateTags=MA;const xA=self.Cs,_A=self.Ns,TA=self.vJ,GA=self.Vu,CA=xA.slt.tlt,IA=new WeakMap,PA=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),AA={tags:"",Fls:!1,loop:!1,mlt:!1,WJ:1,blt:0},RA={Nz:vA};self._as=class extends TA{constructor(){super(),IA.set(this,TA.Aj().gJ())}Dls(t,s,i,e,n){const r=IA.get(this);if(!r.Gu()||!r.Yst())return null;const h=PA.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?_A.se(s):(_A.Te(s),"two"===h.type?(_A.se(s[0]),_A.se(s[1])):"color"===h.type&&(_A.se(s[0]),_A.se(s[1]),_A.se(s[2]))),"angle"===t?s=xA.tr(s):"opacity"===t?s*=100:"color"===t&&(s=xA.Pr(s[0],s[1],s[2]));const o=vA(e);let a;if(_A.he(i),n=Object.assign({},AA,n),"value"===h.type&&_A.se(n.blt),MA(n.tags,!0),"one"===h.type||"color"===h.type?a=r.las(CA.Pas.Ias(r,n.tags,h.name,s,i,o,!!n.Fls,!!n.loop,!!n.mlt,n.WJ)):"two"===h.type?a=r.las(CA.Pas.Ras(r,n.tags,h.name,s[0],s[1],i,o,!!n.Fls,!!n.loop,!!n.mlt,n.WJ)):"value"===h.type&&(a=r.las(CA.Pas.Oas(r,n.tags,n.blt,s,i,o,!!n.Fls,!!n.loop,!!n.mlt,n.WJ))),!a.Play())throw new Error("failed to start tween");return a.Mlt(r,RA)}*kls(){const t=IA.get(this);for(const s of t.Wos())yield s.Mlt(t,RA)}*Lls(t){MA(t);const s=IA.get(this);for(const i of s.Xos(t))yield i.Mlt(s,RA)}get isEnabled(){return IA.get(this).Gu()}set isEnabled(t){IA.get(this).SGt(t)}}}{const EA=self.Cs;EA.slt.Nls=class extends EA.WIt{constructor(t){super(t)}Jn(){super.Jn()}}}{const OA=self.Cs;OA.slt.Nls.nRt=class extends OA.JIt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const FA=self.Cs,DA=self.Ns,kA=self.vJ,LA=0,NA=1,BA=2,$A=3,WA=4,VA=5,jA=6,HA=7,UA=8,JA=0,zA=1,qA=2,YA=3,XA=4,ZA=5,KA=6,QA=7,tR=8,sR=9,iR=0,eR=1,nR=2,rR=3,hR=4,oR=2*Math.PI,aR=Math.PI/2,lR=3*Math.PI/2,uR=[0,1,8,3,4,2,5,6,9,7];FA.slt.Nls.Instance=class extends FA.qIt{constructor(t,s){super(t),this.Bls=0,this.$ls=0,this.Wls=0,this.Vls=0,this.jls=0,this.xbt=!0,this.Hls=0,this.Uls=0,this.Jls=0,this.zls=0,this.qls=0,this.Yls=0,this.qbt=0,this.Xls=0,this.Zls=0,this.Kls=0,this.Qls=0,s&&(this.$ls=uR[s[LA]],this.Wls=s[NA],this.zls=this.Nc.BN()*s[$A],this.Hls=s[BA],this.Vls=s[BA],this.Vls+=this.zls,this.Uls=s[WA],0!==this.Vls&&(this.qls=this.Nc.BN()*s[VA],this.Bls=s[WA]/this.Vls*oR,this.Bls+=this.qls/this.Vls*oR),this.Yls=this.Nc.BN()*s[HA],this.Jls=s[jA],this.jls=s[jA],this.jls+=this.Yls,this.xbt=!!s[UA]),this.$ls===ZA&&(this.jls=FA.Qn(this.jls)),this.CEt(),this.xbt&&this.YCt()}Jn(){super.Jn()}hx(){return{i:this.Bls,e:this.xbt,mv:this.$ls,w:this.Wls,p:this.Vls,mag:this.jls,iv:this.qbt,iv2:this.Xls,r:this.Qls,lkv:this.Zls,lkv2:this.Kls}}ox(t){this.Bls=t.i,this.bTt(t.e),this.$ls=t.mv,this.Wls=t.w,this.Vls=t.p,this.jls=t.mag,this.qbt=t.iv,this.Xls=t.iv2,this.Qls=t.r,this.Zls=t.lkv,this.Kls=t.lkv2}CEt(){const t=this.di.aB();switch(this.$ls){case JA:this.qbt=t.UM();break;case zA:this.qbt=t.qM();break;case qA:this.qbt=t.Vg(),this.Qls=t.Kg()/t.Vg();break;case YA:this.qbt=t.Vg();break;case XA:this.qbt=t.Kg();break;case ZA:this.qbt=t.ZW();break;case KA:this.qbt=t.sO();break;case QA:this.qbt=0;break;case tR:this.qbt=t.UM(),this.Xls=t.qM();break;case sR:this.qbt=t.XM()}this.Zls=this.qbt,this.Kls=this.Xls}tus(t){switch(t%=oR,this.Wls){case iR:return Math.sin(t);case eR:return t<=aR?t/aR:t<=lR?1-2*(t-aR)/Math.PI:(t-lR)/aR-1;case nR:return 2*t/oR-1;case rR:return-2*t/oR+1;case hR:return t<Math.PI?-1:1}return 0}d8(){const t=this.Nc.aN(this.di);this.xbt&&0!==t&&(0===this.Vls?this.Bls=0:this.Bls=(this.Bls+t/this.Vls*oR)%oR,this.sus())}sus(){const t=this.di.aB();switch(this.$ls){case JA:t.UM()!==this.Zls&&(this.qbt+=t.UM()-this.Zls),t.JM(this.qbt+this.tus(this.Bls)*this.jls),this.Zls=t.UM();break;case zA:t.qM()!==this.Zls&&(this.qbt+=t.qM()-this.Zls),t.YM(this.qbt+this.tus(this.Bls)*this.jls),this.Zls=t.qM();break;case qA:t.Yg(this.qbt+this.tus(this.Bls)*this.jls),t.jg(t.Vg()*this.Qls);break;case YA:t.Yg(this.qbt+this.tus(this.Bls)*this.jls);break;case XA:t.jg(this.qbt+this.tus(this.Bls)*this.jls);break;case ZA:t.ZW()!==this.Zls&&(this.qbt=FA.Kn(this.qbt+(t.ZW()-this.Zls))),t.XW(this.qbt+this.tus(this.Bls)*this.jls),this.Zls=t.ZW();break;case KA:t.eO(this.qbt+this.tus(this.Bls)*this.jls/100);break;case tR:t.UM()!==this.Zls&&(this.qbt+=t.UM()-this.Zls),t.qM()!==this.Kls&&(this.Xls+=t.qM()-this.Kls),t.JM(this.qbt+Math.cos(t.ZW())*this.tus(this.Bls)*this.jls),t.YM(this.Xls+Math.sin(t.ZW())*this.tus(this.Bls)*this.jls),this.Zls=t.UM(),this.Kls=t.qM();break;case sR:t.ZM(this.qbt+this.tus(this.Bls)*this.jls)}t.NH()}ius(t,s){}eus(t){this.Vls=t}nus(){return this.Vls}rus(t){this.jls=t}hus(t){5===this.$ls&&(t=FA.Qn(t)),this.rus(t)}ous(){return this.jls}aus(){let t=this.ous();return 5===this.$ls&&(t=FA.tr(t)),t}lus(t){5===this.$ls&&5!==t&&(this.jls=FA.tr(this.jls)),this.$ls=t,this.CEt()}uus(){return this.$ls}cus(t){this.Wls=t}fus(){return this.Wls}dus(t){this.Bls=FA.Zn(t,0,2*Math.PI),this.sus()}pus(){return this.Bls}bTt(t){this.xbt=!!t,this.xbt?this.YCt():this.OCt()}MTt(){return this.xbt}Hrt(t){switch(t){case LA:return this.$ls;case NA:return this.Wls;case BA:return this.Hls;case jA:return this.Jls;case UA:return this.xbt}}Xrt(t,s){switch(t){case LA:this.$ls=uR[s],this.CEt();break;case NA:this.Wls=s;break;case BA:this.Hls=s,this.Vls=this.Hls+this.zls,this.xbt||(0!==this.Vls?(this.Bls=this.Uls/this.Vls*oR,this.Bls+=this.qls/this.Vls*oR):this.Bls=0);break;case jA:this.Jls=s,this.jls=this.Jls+this.Yls,this.$ls===ZA&&(this.jls=FA.Qn(this.jls));break;case UA:this.xbt=!!s}}QCt(){const t="behaviors.sin";return[{title:"$"+this.GJ().Pc(),properties:[{name:t+".properties.enabled.name",value:this.MTt(),OZt:t=>this.bTt(t)},{name:t+".properties.period.name",value:this.nus(),OZt:t=>this.eus(t)},{name:t+".properties.magnitude.name",value:this.aus(),OZt:t=>this.hus(t)},{name:t+".debugger.value",value:this.tus(this.pus())*this.aus()}]}]}cCt(){return self.mus}};const cR=new WeakMap,fR=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],dR=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.mus=class extends kA{constructor(){super(),cR.set(this,kA.Aj().gJ())}set gus(t){DA.he(t),cR.get(this).eus(t)}get gus(){return cR.get(this).nus()}set yus(t){DA.he(t),cR.get(this).rus(t)}get yus(){return cR.get(this).ous()}set Sus(t){cR.get(this).dus(t)}get Sus(){return cR.get(this).pus()}set wus(t){DA.ue(t);const s=fR.indexOf(t);if(-1===s)throw new Error("invalid movement");cR.get(this).lus(s)}get wus(){return fR[cR.get(this).uus()]}set bus(t){DA.ue(t);const s=dR.indexOf(t);if(-1===s)throw new Error("invalid wave");cR.get(this).cus(s)}get bus(){return dR[cR.get(this).fus()]}get value(){const t=cR.get(this);return t.tus(t.pus())*t.ous()}vus(){cR.get(this).CEt()}set isEnabled(t){cR.get(this).bTt(!!t)}get isEnabled(){return cR.get(this).MTt()}}}{const pR=self.Cs;pR.slt.Nls.CB={Gu(){return this.MTt()},Mus(t){return this.uus()===t},xus(t,s){return pR.compare(this.nus(),t,s)},_us(t,s){return pR.compare(this.aus(),t,s)},Tus(t){return this.fus()===t}}}self.Cs.slt.Nls.hrt={SGt(t){this.bTt(0!==t)},Gus(t){this.eus(t)},Cus(t){this.hus(t)},Ius(t){this.lus(t)},Pus(t){this.Wls=t},Aus(t){const s=2*Math.PI;this.dus(t*s%s)},Rus(){this.CEt()}},self.Cs.slt.Nls.ort={Eus(){return this.pus()/(2*Math.PI)},Ous(){return this.nus()},Fus(){return this.aus()},sls(){return this.tus(this.pus())*this.aus()}};{const mR=self.Cs;mR.slt.Dus=class extends mR.WIt{constructor(t){super(t)}Jn(){super.Jn()}}}{const gR=self.Cs;gR.slt.Dus.nRt=class extends gR.JIt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const yR=self.Cs;yR.slt.Dus.Instance=class extends yR.qIt{constructor(t,s){super(t),this.kus=null,this.Lus=-1,this.Nus="",this.Bus=new Set,this.$us=0,this.Wus=0,this.Vus=0,this.jus=0,this.Hus=0,this.Uus=0,this.Jus=0,this.zus=0,this.qus=0,this.Yus=0,this.Xus=!1,s&&(this.Xus=s[0]);const i=this.Nc.Sf();this.Xf=new yR.zf(yR.Wf.Jf(i,"instancedestroy",(t=>this._2t(t.CJ))),yR.Wf.Jf(i,"afterload",(t=>this.g6())))}Jn(){this.kus=null,super.Jn()}Zus(t){t?(this.kus=t,this.ZCt()):(this.kus=null,this.FCt())}Kus(t,s,i){if(!t)return;const e=t.D_t(this.di);if(!e)return;this.Nus=s,this.Zus(e);const n=this.di.aB(),r=e.aB();if("properties"===this.Nus){const t=this.Bus;t.clear();for(const s of i)t.add(s);this.jus=n.UM()-r.UM(),this.Hus=n.qM()-r.qM(),this.zus=n.ZW()-r.ZW(),this.Yus=n.ZW(),this.qus=n.XM()-r.XM(),t.has("x")&&t.has("y")&&(this.Wus=yR.rr(r.UM(),r.qM(),n.UM(),n.qM())-r.ZW(),this.$us=yR.er(r.UM(),r.qM(),n.UM(),n.qM())),t.has("width-abs")?this.Uus=n.Vg()-r.Vg():t.has("width-scale")&&(this.Uus=n.Vg()/r.Vg()),t.has("height-abs")?this.Jus=n.Kg()-r.Kg():t.has("height-scale")&&(this.Jus=n.Kg()/r.Kg())}else this.$us=yR.er(r.UM(),r.qM(),n.UM(),n.qM())}hx(){const t=this.Bus,s=this.Nus,i={uid:this.kus&&!this.kus.Oq()?this.kus.$j():-1,m:s,d:this.Xus};return"rope"===s||"bar"===s?i.pd=this.$us:"properties"===s&&(i.ps=[...this.Bus],t.has("imagepoint")?i.ip=this.Vus:t.has("x")&&t.has("y")?(i.pa=this.Wus,i.pd=this.$us):(t.has("x")&&(i.dx=this.jus),t.has("y")&&(i.dy=this.Hus)),t.has("angle")&&(i.da=this.zus,i.lka=this.Yus),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.Uus),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.Jus),t.has("z")&&(i.dz=this.qus)),i}ox(t){const s=t.m,i=this.Bus;if(i.clear(),this.Lus=t.uid,"number"!=typeof s){if(this.Nus=s,t.hasOwnProperty("d")&&(this.Xus=!!t.d),"rope"===s||"bar"===s)this.$us=t.pd;else if("properties"===s){for(const s of t.ps)i.add(s);i.has("imagepoint")?this.Vus=t.ip:i.has("x")&&i.has("y")?(this.Wus=t.pa,this.$us=t.pd):(i.has("x")&&(this.jus=t.dx),i.has("y")&&(this.Hus=t.dy)),i.has("angle")&&(this.zus=t.da,this.Yus=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.Uus=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.Jus=t.dh),i.has("z")&&(this.qus=t.dz)}}else this.Qus(t)}Qus(t){const s=this.Bus,i=t.msa,e=t.tsa,n=t.pa,r=t.pd;switch(t.m){case 0:this.Nus="properties",s.add("x").add("y").add("angle"),this.Wus=n,this.$us=r,this.zus=i-e,this.Yus=t.lka;break;case 1:this.Nus="properties",s.add("x").add("y"),this.Wus=n,this.$us=r;break;case 2:this.Nus="properties",s.add("angle"),this.zus=i-e,this.Yus=t.lka;break;case 3:this.Nus="rope",this.$us=t.pd;break;case 4:this.Nus="bar",this.$us=t.pd}}g6(){-1===this.Lus?this.Zus(null):(this.Zus(this.Nc.eB(this.Lus)),this.Lus=-1)}_2t(t){this.kus===t&&(this.Zus(null),this.Xus&&this.Nc.Oj(this.di))}qCt(){const t=this.kus;if(!t||t.Oq())return;const s=t.aB(),i=this.di.aB(),e=this.Nus;let n=!1;if("rope"===e||"bar"===e){const t=yR.er(i.UM(),i.qM(),s.UM(),s.qM());if(t>this.$us||"bar"===e&&t<this.$us){const t=yR.rr(s.UM(),s.qM(),i.UM(),i.qM());i.BH(s.UM()+Math.cos(t)*this.$us,s.qM()+Math.sin(t)*this.$us),n=!0}}else{const e=this.Bus;let r=0;if(e.has("imagepoint")){const[s,e]=t.n_t(this.Vus);i.i_t(s,e)||(i.BH(s,e),n=!0)}else if(e.has("x")&&e.has("y")){const t=s.UM()+Math.cos(s.ZW()+this.Wus)*this.$us,e=s.qM()+Math.sin(s.ZW()+this.Wus)*this.$us;i.i_t(t,e)||(i.BH(t,e),n=!0)}else r=s.UM()+this.jus,e.has("x")&&r!==i.UM()&&(i.JM(r),n=!0),r=s.qM()+this.Hus,e.has("y")&&r!==i.qM()&&(i.YM(r),n=!0);e.has("angle")&&(this.Yus!==i.ZW()&&(this.zus=yR.Kn(this.zus+(i.ZW()-this.Yus))),r=yR.Kn(s.ZW()+this.zus),r!==i.ZW()&&(i.XW(r),n=!0),this.Yus=i.ZW()),e.has("width-abs")&&(r=s.Vg()+this.Uus,r!==i.Vg()&&(i.Yg(r),n=!0)),e.has("width-scale")&&(r=s.Vg()*this.Uus,r!==i.Vg()&&(i.Yg(r),n=!0)),e.has("height-abs")&&(r=s.Kg()+this.Jus,r!==i.Kg()&&(i.jg(r),n=!0)),e.has("height-scale")&&(r=s.Kg()*this.Jus,r!==i.Kg()&&(i.jg(r),n=!0)),e.has("z")&&(r=s.XM()+this.qus,r!==i.XM()&&(i.ZM(r),this.Nc.mB()))}n&&i.NH()}QCt(){const t="behaviors.pin.debugger";return[{title:"$"+this.GJ().Pc(),properties:[{name:t+".is-pinned",value:!!this.kus},{name:t+".pinned-uid",value:this.kus?this.kus.$j():0}]}]}}}self.Cs.slt.Dus.CB={tcs(){return!!this.kus},scs(){return this.Xus}},self.Cs.slt.Dus.hrt={ics(t,s){this.Kus(t,0===s?"rope":"bar")},ecs(t,s,i,e,n,r,h){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),h&&o.push("z"),1===n?o.push("width-abs"):2===n&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.Kus(t,"properties",o)},ncs(t,s,i,e,n,r){const h=["imagepoint"];i&&h.push("angle"),r&&h.push("z"),1===e?h.push("width-abs"):2===e&&h.push("width-scale"),1===n?h.push("height-abs"):2===n&&h.push("height-scale"),this.Vus=s,this.Kus(t,"properties",h)},rcs(t){"rope"!==this.Nus&&"bar"!==this.Nus||(this.$us=Math.max(t,0))},hcs(t){this.Xus=t},ocs(){this.Zus(null),this.Nus="",this.Bus.clear(),this.Vus=""},Dus(t,s){switch(s){case 0:this.Kus(t,"properties",["x","y","angle"]);break;case 1:this.Kus(t,"properties",["x","y"]);break;case 2:this.Kus(t,"properties",["angle"]);break;case 3:this.Kus(t,"rope");break;case 4:this.Kus(t,"bar")}}},self.Cs.slt.Dus.ort={acs(){return this.kus?this.kus.$j():-1}};{const SR=self.Cs;SR.slt.lcs=class extends SR.WIt{constructor(t){super(t)}Jn(){super.Jn()}}}{const wR=self.Cs;wR.slt.lcs.nRt=class extends wR.JIt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const bR=self.Cs,vR=self.Ns,MR=self.vJ,xR=0,_R=1,TR=2,GR=3,CR=4;bR.slt.lcs.Instance=class extends bR.qIt{constructor(t,s){super(t),this.ucs=0,this.ccs=0,this.fcs=0,this.Xus=!0,this.dcs=!0,this.pcs=!1,this.mcs=0,this.gcs=bR.Un(bR.Qf),this.ycs=this.di.aB().sO()||1,s&&(this.ucs=s[xR],this.ccs=s[_R],this.fcs=s[TR],this.Xus=!!s[GR],this.dcs=!!s[CR],this.mcs=this.dcs?0:3),this.dcs&&(0===this.ucs?(this.mcs=1,0===this.ccs&&(this.mcs=2)):(this.di.aB().eO(0),this.Nc.mB())),this.YCt()}Jn(){super.Jn()}hx(){return{fit:this.ucs,wt:this.ccs,fot:this.fcs,d:this.Xus,s:this.mcs,st:this.gcs.Js(),mo:this.ycs}}ox(t){this.ucs=t.fit,this.ccs=t.wt,this.fcs=t.fot,this.Xus=t.d,this.mcs=t.s,this.gcs.Set(t.st),this.ycs=t.mo,3===this.mcs?this.OCt():this.YCt()}d8(){const t=this.Nc.aN(this.di);this.gcs.Bu(t);const s=this.di.aB();0===this.mcs&&(s.eO(this.gcs.Js()/this.ucs*this.ycs),this.Nc.mB(),s.sO()>=this.ycs&&(s.eO(this.ycs),this.mcs=1,this.gcs.Bf(),this.ICt("fadeinend"),this.lH(bR.slt.lcs.CB.Scs))),1===this.mcs&&this.gcs.Js()>=this.ccs&&(this.mcs=2,this.gcs.Bf(),this.ICt("waitend"),this.lH(bR.slt.lcs.CB.wcs)),2===this.mcs&&(0!==this.fcs?(s.eO(this.ycs-this.gcs.Js()/this.fcs*this.ycs),this.Nc.mB(),s.sO()<=0&&(this.mcs=3,this.gcs.Bf(),this.ICt("fadeoutend"),this.lH(bR.slt.lcs.CB.bcs),this.Xus&&this.Nc.Oj(this.di))):(this.mcs=3,this.gcs.Bf())),3===this.mcs&&this.OCt()}vcs(){this.dcs||this.pcs||(this.ycs=this.di.aB().sO()||1,this.pcs=!0),3===this.mcs&&this.OO()}Mcs(){this.OO()}OO(){this.mcs=0,this.gcs.Bf(),0===this.ucs?(this.mcs=1,0===this.ccs&&(this.mcs=2)):(this.di.aB().eO(0),this.Nc.mB()),this.YCt()}xcs(t){this.ucs=Math.max(t,0)}_cs(){return this.ucs}Tcs(t){this.ccs=Math.max(t,0)}Gcs(){return this.ccs}Ccs(t){this.fcs=Math.max(t,0)}Ics(){return this.fcs}Hrt(t){switch(t){case xR:return this._cs();case _R:return this.Gcs();case TR:return this.Ics();case GR:return this.Xus}}Xrt(t,s){switch(t){case xR:this.xcs(s);break;case _R:this.Tcs(s);break;case TR:this.Ccs(s);break;case GR:this.Xus=!!s}}QCt(){const t="behaviors.fade";return[{title:"$"+this.GJ().Pc(),properties:[{name:t+".properties.fade-in-time.name",value:this._cs(),OZt:t=>this.xcs(t)},{name:t+".properties.wait-time.name",value:this.Gcs(),OZt:t=>this.Tcs(t)},{name:t+".properties.fade-out-time.name",value:this.Ics(),OZt:t=>this.Ccs(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.mcs]]}]}]}cCt(){return self.Pcs}};const IR=new WeakMap;self.Pcs=class extends MR{constructor(){super(),IR.set(this,MR.Aj().gJ())}Acs(){IR.get(this).vcs()}Rcs(){IR.get(this).Mcs()}set Ecs(t){vR.he(t),IR.get(this).xcs(t)}get Ecs(){return IR.get(this)._cs()}set Ocs(t){vR.he(t),IR.get(this).Tcs(t)}get Ocs(){return IR.get(this).Gcs()}set Fcs(t){vR.he(t),IR.get(this).Ccs(t)}get Fcs(){return IR.get(this).Ics()}}}self.Cs.slt.lcs.CB={bcs:()=>!0,Scs:()=>!0,wcs:()=>!0},self.Cs.slt.lcs.hrt={Dcs(){this.vcs()},kcs(){this.Mcs()},Lcs(t){this.xcs(t)},Ncs(t){this.Tcs(t)},Bcs(t){this.Ccs(t)}},self.Cs.slt.lcs.ort={$cs(){return this._cs()},Wcs(){return this.Gcs()},Vcs(){return this.Ics()}};{const PR=self.Cs;PR.slt.dPt=class extends PR.WIt{constructor(t){super(t)}Jn(){super.Jn()}}}{const AR=self.Cs;AR.slt.dPt.nRt=class extends AR.JIt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const RR=self.Cs,ER=self.Ns,OR=self.vJ,FR=0,DR=1,kR=new Set;RR.slt.dPt.Instance=class extends RR.qIt{constructor(t,s){super(t),this.SGt(!0),s&&(this.SGt(s[FR]),this.ltt(s[DR]))}Jn(){super.Jn()}SGt(t){this.di.WEt(!!t)}Gu(){return this.di.$Et()}ltt(t){const s=this.di.ZMt();if(!t.trim())return void s.delete("solidTags");let i=s.get("solidTags");i||(i=new Set,s.set("solidTags",i)),i.clear();for(const s of t.split(" "))s&&i.add(s.toLowerCase())}Az(){return this.di.ZMt().get("solidTags")||kR}jcs(){return[...this.Az()].join(" ")}hx(){return{e:this.Gu()}}ox(t){this.SGt(t.e)}Hrt(t){if(t===FR)return this.Gu()}Xrt(t,s){t===FR&&this.SGt(s)}QCt(){return[{title:"$"+this.GJ().Pc(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.Gu(),OZt:t=>this.SGt(t)},{name:"behaviors.solid.properties.tags.name",value:this.jcs(),OZt:t=>this.ltt(t)}]}]}cCt(){return self.Hcs}};const LR=new WeakMap;self.Hcs=class extends OR{constructor(){super(),LR.set(this,OR.Aj().gJ())}set isEnabled(t){LR.get(this).SGt(!!t)}get isEnabled(){return LR.get(this).Gu()}set tags(t){ER.ue(t),LR.get(this).ltt(t)}get tags(){return LR.get(this).jcs()}}}self.Cs.slt.dPt.CB={Gu(){return this.Gu()}},self.Cs.slt.dPt.hrt={SGt(t){this.SGt(t)},ltt(t){this.ltt(t)}},self.Cs.slt.dPt.ort={};{const NR=self.Cs;NR.slt.Ks=class extends NR.WIt{constructor(t){super(t)}Jn(){super.Jn()}}}{const BR=self.Cs;BR.slt.Ks.nRt=class extends BR.JIt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{let $R=function(t,s,i,e,n){const r=s*n,h=i*n;return WR.Zn(t*n+.5*e*n*n,r,h)};accelerate=$R;const WR=self.Cs,VR=self.Ns,jR=self.vJ,HR=0,UR=1,JR=2,zR=3,qR=4,YR=5,XR=6,ZR=7,KR=8,QR=9,tE=.05;WR.slt.Ks.Instance=class extends WR.qIt{constructor(t,s){super(t),this.Ucs=null,this.Jcs=!1,this.zcs=!1,this.qcs=!1,this.Ycs=!1,this.Xcs=!1,this.Zcs=!1,this.Kcs=!1,this.Qcs=!1,this.tfs=!1,this.sfs=!1,this.ifs=null,this.efs=-1,this.nfs=0,this.rfs=0,this.hfs=!1,this.ofs=!1,this.afs=this.Nc.fL().mLt(this.di),this.lfs=-1,this.ufs="stopped",this.cfs=-1,this.gts=!0,this.jus=0,this.Hus=0,this.ffs=0,this.dfs=0,this.pfs=0,this.mfs=0,this.Go=1500,this.gfs=1500,this.yfs=WR.Qn(90),this.Sfs=330,this.wfs=1500,this.bfs=1500,this.vfs=650,this.Mfs=1e3,this.xfs=!1,this._fs=0,this.Tfs=0,this.Gfs=!0,this.Cfs=0,this.xbt=!0,s&&(this.Sfs=s[HR],this.wfs=s[UR],this.bfs=s[JR],this.vfs=s[zR],this.Go=s[qR],this.Mfs=s[YR],this.xfs=!!s[XR],this._fs=s[ZR]/1e3,this.Gfs=!!s[KR],this.xbt=!!s[QR]);const i=this.Nc.Sf();this.Xf=new WR.zf(WR.Wf.Jf(i,"instancedestroy",(t=>this._2t(t.CJ))),WR.Wf.Jf(i,"afterload",(t=>this.g6()))),this.Gfs&&this.Ifs(),this.xbt&&this.tPt(),this.Pfs()}Jn(){this.Ucs&&(this.Ucs.Jn(),this.Ucs=null),this.ifs=null,this.afs=null,super.Jn()}Ifs(){if(this.Ucs)return;const t=this.Nc.Sf();this.Ucs=new WR.zf(WR.Wf.Jf(t,"keydown",(t=>this.Afs(t.data))),WR.Wf.Jf(t,"keyup",(t=>this.Rfs(t.data))),WR.Wf.Jf(t,"window-blur",(()=>this.Efs())),WR.Wf.Jf(t,"keyboard-blur",(()=>this.Efs())))}Ofs(){this.Ucs&&(this.Ucs.Jn(),this.Ucs=null)}_2t(t){this.ifs===t&&(this.ifs=null),this.afs===t&&(this.afs=null)}Afs(t){switch(t.key){case"ArrowLeft":this.Jcs=!0;break;case"ArrowRight":this.zcs=!0;break;case"ArrowUp":this.qcs=!0}}Rfs(t){switch(t.key){case"ArrowLeft":this.Jcs=!1;break;case"ArrowRight":this.zcs=!1;break;case"ArrowUp":this.qcs=!1,this.Ycs=!1}}Efs(){this.Jcs=!1,this.zcs=!1,this.qcs=!1,this.Ycs=!1}hx(){return{ii:this.Kcs,lfx:this.nfs,lfy:this.rfs,lfo:this.ifs?this.ifs.$j():-1,am:this.ufs,en:this.xbt,fallt:this.cfs,ft:this.gts,dx:this.jus,dy:this.Hus,ms:this.Sfs,acc:this.wfs,dec:this.bfs,js:this.vfs,g:this.Go,g1:this.gfs,mf:this.Mfs,wof:this.ofs,woj:this.afs?this.afs.$j():-1,ga:this.yfs,edj:this.xfs,cdj:this.Zcs,dj:this.Xcs,sus:this._fs,dc:this.Gfs,cc:this.Cfs}}ox(t){this.Kcs=t.ii,this.nfs=t.lfx,this.rfs=t.lfy,this.efs=t.lfo,this.ufs=t.am;const s=t.en;this.cfs=t.fallt||-1,this.gts=t.ft,this.jus=t.dx,this.Hus=t.dy,this.Sfs=t.ms,this.wfs=t.acc,this.bfs=t.dec,this.vfs=t.js,this.Go=t.g,this.gfs=t.g1,this.Mfs=t.mf,this.ofs=t.wof,this.lfs=t.woj,this.yfs=t.ga,this.xfs=t.edj,this.Zcs=t.cdj,this.Xcs=t.dj,this._fs=t.sus,this.Gfs=t.dc,this.Cfs=t.cc||0,this.Jcs=!1,this.zcs=!1,this.qcs=!1,this.Ycs=!1,this.Qcs=!1,this.tfs=!1,this.sfs=!1,this.Tfs=0,this.Gfs?this.Ifs():this.Ofs(),this.bTt(s),this.Pfs()}g6(){-1===this.efs?this.ifs=null:this.ifs=this.Nc.eB(this.efs),-1===this.lfs?this.afs=null:this.afs=this.Nc.eB(this.lfs)}Ffs(t){if(this.ifs=t,t){const s=t.aB();this.nfs=s.UM(),this.rfs=s.qM()}}Dfs(){return this.Nc.fN()>this.cfs+tE}Pfs(){this.ffs=Math.cos(this.yfs),this.dfs=Math.sin(this.yfs),this.pfs=Math.cos(this.yfs-Math.PI/2),this.mfs=Math.sin(this.yfs-Math.PI/2),this.ffs=WR.Tr(this.ffs,6),this.dfs=WR.Tr(this.dfs,6),this.pfs=WR.Tr(this.pfs,6),this.mfs=WR.Tr(this.mfs,6),this.gfs=this.Go,this.Go<0&&(this.ffs*=-1,this.dfs*=-1,this.Go=Math.abs(this.Go))}kfs(){return this.Go<0?-1:1}Lfs(){const t=this.di.aB(),s=this.Nc.fL(),i=this.di,e=this.ifs,n=t.UM(),r=t.qM();if(t.WH(this.ffs,this.dfs),t.NH(),!e||!s.n$(i,e)||e.Cj().iEt()&&!s.RDt(e,i)||e.Cj().eEt()&&!e.VEt()){let e=s.o$(i),h=null;if(!e&&this.Dfs()&&(h=s.mLt(i,!0)),t.BH(n,r),t.NH(),e)return s.n$(i,e)?null:(this.hfs=!1,e);if(h&&h.length){let t=0;for(let e=0,n=h.length;e<n;++e)h[t]=h[e],s.n$(i,h[e])||++t;if(t>=1)return this.hfs=!0,h[0]}return null}return t.BH(n,r),t.NH(),e}QIt(){if(!this.xbt)return;const t=this.Nc.aN(this.di);this.qcs||this.sfs||(this.Ycs=!1);let s=this.Jcs||this.Qcs,i=this.zcs||this.tfs,e=this.qcs||this.sfs,n=e&&!this.Ycs;this.Qcs=!1,this.tfs=!1,this.sfs=!1,this.Kcs&&(s=!1,i=!1,e=!1,n=!1),e||(this.Tfs=0),this.Nfs();const[r,h,o]=this.Bfs();let a=this.Lfs();const l=a&&!this.ofs;let u=!1;if([u,a]=this.$fs(a),u)return;this.Wfs(a,o,r,e),n=this.Vfs(a,n,e),a||this.jfs(n,e,t),this.ofs=!!a;const c=this.Hfs(s,i);let f=!1,d=0;if(0!==this.jus&&([f,a]=this.Ufs(t,c,a,n)),0!==this.Hus){const[s,i]=this.Jfs(t,a);f=f||s,d=i}!f&&l&&this.Hus<0&&d>0&&(this.Hus=0,f=!0),this.zfs(s,i,c,t),a&&!n||f||(this.Hus=Math.min(this.Hus+this.Go*t,this.Mfs)),this.qfs(a,f,n),this.afs=this.Nc.fL().mLt(this.di)}Nfs(){if(!this.gts)return;const t=this.di,s=this.Nc.fL();(s.o$(t)||s.mLt(t))&&s.yLt(t,-this.ffs,-this.dfs,4,!0),this.gts=!1}Bfs(){const t=this.ifs,s=t?t.aB():null;let i=0,e=0,n=!1;if(t&&0===this.Hus&&(s.qM()!==this.rfs||s.UM()!==this.nfs)){const t=this.di,r=t.aB(),h=this.Nc.fL(),o=s.UM(),a=s.qM();i=o-this.nfs,e=a-this.rfs,r.WH(i,e),r.NH(),this.nfs=o,this.rfs=a,n=!0;const l=h.o$(t);l&&(h.Qkt(t,l),h.yLt(t,-i,-e,2.5*WR.sr(i,e)))}return[i,e,n]}$fs(t){let s=!1;const i=this.di,e=i.aB(),n=this.Nc.fL(),r=n.o$(i);if(!r)return[!1,t];const h=Math.abs(e.Vg()),o=Math.abs(e.Kg());return n.yLt(i,-this.ffs,-this.dfs,o/8)?(n.Qkt(i,r),t=r,this.Ffs(r),this.hfs=!1,this.Hus=0):n.wLt(i,this.pfs,this.mfs,h/2)||n.wLt(i,this.ffs,this.dfs,o/2)||n.bLt(i,Math.max(h,o)/2)?n.Qkt(i,r):s=!0,[s,t]}Wfs(t,s,i,e){const n=this.di,r=this.Nc.fL();if(t){const e=this.ffs,h=this.dfs,o=this.pfs,a=this.mfs;if(this.Xcs=!1,this.Zcs=!1,this.Hus>0&&(this.ofs||(r.SLt(n,-e,-h,t,16),this.ofs=!0),this.Hus=0),this.ifs!==t)this.Ffs(t),r.Qkt(n,t);else if(s){const t=r.o$(n);t&&(r.Qkt(n,t),0!==i&&(i>0?r.yLt(n,-o,-a):r.yLt(n,o,a)),r.yLt(n,-e,-h))}}else e||(this.Zcs=!0)}Vfs(t,s,i){if(t&&s||!t&&this.xfs&&i&&this.Zcs&&!this.Xcs){const i=this.di,e=i.aB(),n=this.Nc.fL(),r=e.UM(),h=e.qM();e.WH(-this.ffs,-this.dfs),e.NH(),n.o$(i)?s=!1:(this.Tfs=this._fs,this.lH(WR.slt.Ks.CB.Yfs),this.ufs="jumping",this.Hus=-this.vfs,s=!0,t?this.Ycs=!0:this.Xcs=!0),e.BH(r,h),e.NH()}return s}jfs(t,s,i){s&&this.Tfs>0?(this.Hus=-this.vfs,this.Tfs-=i):this.ifs=null,t&&(this.Ycs=!0)}Hfs(t,s){let i=0;const e=this.wfs,n=this.bfs;return t&&!s&&(i=this.jus>0?-(e+n):-e),s&&!t&&(i=this.jus<0?e+n:e),i}zfs(t,s,i,e){const n=this.bfs;t===s&&(this.jus<0?this.jus=Math.min(this.jus+n*e,0):this.jus>0&&(this.jus=Math.max(this.jus-n*e,0))),this.jus=WR.Zn(this.jus+i*e,-this.Sfs,this.Sfs);const r=this.Nc.fL(),h=this.jus<0?this.Xfs(0,1,1):null;if(h)this.jus=0,r.Qkt(this.di,h);else{const t=this.jus>0?this.Xfs(1,1,1):null;t&&(this.jus=0,r.Qkt(this.di,t))}}Ufs(t,s,i,e){const n=this.di,r=n.aB(),h=this.Nc.fL(),o=this.ffs,a=this.dfs,l=this.pfs,u=this.mfs,c=this.Sfs;let f=!1;const d=new Set(h.mLt(n,!0));let p=r.UM(),m=r.qM();const g=$R(this.jus,-c,c,s,t)*l,y=$R(this.jus,-c,c,s,t)*u;r.WH(l*(this.jus>1?1:-1)-o,u*(this.jus>1?1:-1)-a),r.NH();let S=!1;const w=h.o$(n);r.BH(p+g,m+y),r.NH();let b=h.o$(n);if(!b&&i&&this.hfs&&(b=h.mLt(n),d.has(b)?b=null:S=!0),b){let s=Math.abs(this.jus*t)+2;w||!h.yLt(n,-o,-a,s,S,b)?(h.Qkt(n,b),s=Math.max(Math.abs(this.jus*t*2.5),Math.floor(r.Vg())),h.yLt(n,l*(this.jus<0?1:-1),u*(this.jus<0?1:-1),s,!1)?!i||S||this.hfs||(p=r.UM(),m=r.qM(),r.WH(o,a),h.o$(n)&&h.yLt(n,-o,-a,3,!1)||(r.BH(p,m),r.NH())):(r.BH(p,m),r.NH()),S||(this.jus=0)):!w&&!e&&Math.abs(this.Hus)<Math.abs(this.vfs/4)&&(this.Hus=0,i||(f=!0))}else{const s=this.Lfs();if(i&&!s){const s=Math.ceil(Math.abs(this.jus*t))+2;p=r.UM(),m=r.qM(),r.WH(o*s,a*s),r.NH();const e=h.mLt(n);let l=!1;e&&!d.has(e)&&h.yLt(n,-o,-a,s+2,!0,e)&&(i=e,this.Ffs(e),this.hfs=!0,l=!0),l||(h.o$(n)?h.yLt(n,-o,-a,s+2,!1):(r.BH(p,m),r.NH()))}else s&&(!i&&this.hfs&&(this.Ffs(s),this.Hus=0,f=!0),0===this.Hus&&h.SLt(n,-o,-a,s,16))}return[f,i]}Jfs(t,s){const i=this.di,e=i.aB(),n=this.Nc.fL(),r=this.ffs,h=this.dfs;let o=!1,a=e.UM(),l=e.qM();const u=$R(this.Hus,-1/0,this.Mfs,this.Go,t);e.WH(u*r,u*h);const c=e.UM(),f=e.qM();e.NH();let d=n.o$(i),p=!1;if(!d&&this.Hus>0&&!s){const t=this.Dfs()?n.mLt(i,!0):null;if(t&&t.length){if(this.afs){e.BH(a,l),e.NH();let s=0;for(let e=0,r=t.length;e<r;++e)t[s]=t[e],n.n$(i,t[e])||++s;WR.wh(t,s),e.BH(c,f),e.NH()}t.length>=1&&(d=t[0])}p=!!d}if(d){n.Qkt(i,d),this.Tfs=0;let s=1.1;p&&!this.afs&&(s=2);const u=Math.max(Math.abs(this.Hus*t*s),2);n.yLt(i,r*(this.Hus<0?1:-1),h*(this.Hus<0?1:-1),u,p,d)?(this.Ffs(d),this.hfs=p,this.Hus>0&&(o=!0),(this.Hus>0||0===this.Cfs)&&(this.Hus=0),this.Hus<0&&1===this.Cfs&&n.SLt(i,r,h,d,32)):(e.BH(a,l),e.NH(),this.ofs=!0,p||(this.Hus=0))}return[o,u]}qfs(t,s,i){"falling"!==this.ufs&&this.Hus>0&&!t&&(this.lH(WR.slt.Ks.CB.Zfs),this.ufs="falling"),(t||s)&&this.Hus>=0&&("falling"===this.ufs||s||i&&0===this.Hus?(this.lH(WR.slt.Ks.CB.Kfs),0===this.jus&&0===this.Hus?this.ufs="stopped":this.ufs="moving"):("stopped"!==this.ufs&&0===this.jus&&0===this.Hus&&(this.lH(WR.slt.Ks.CB.Qfs),this.ufs="stopped"),"moving"===this.ufs||0===this.jus&&0===this.Hus||i||(this.lH(WR.slt.Ks.CB.tds),this.ufs="moving")))}sds(){return 0!==this.ids()||0!==this.eds()}nds(){if(0!==this.Hus)return!1;const t=this.di,s=this.aB(),i=this.Nc.fL(),e=s.UM(),n=s.qM();s.WH(this.ffs,this.dfs),s.NH();const r=i.o$(t);let h=null;if(!r&&this.Dfs()&&(h=i.mLt(t,!0)),s.BH(e,n),s.NH(),r)return!i.n$(t,r);if(h&&h.length){let s=0;for(let e=0,n=h.length;e<n;++e)h[s]=h[e],i.n$(t,h[e])||s++;if(s>=1)return!0}return!1}rds(t,s=2,i=3){return!!this.Xfs(t,s,i)}Xfs(t,s=2,i=3){const e=this.di,n=this.aB(),r=this.Nc.fL(),h=n.UM(),o=n.qM();if(0===t?n.WH(-this.pfs*s,-this.mfs*s):n.WH(this.pfs*s,this.mfs*s),n.NH(),!r.o$(e))return n.BH(h,o),n.NH(),null;n.WH(-this.ffs*i,-this.dfs*i),n.NH();const a=r.o$(e);return n.BH(h,o),n.NH(),a}hds(){const t=this.aB(),s=t.UM(),i=t.qM();t.WH(this.ffs,this.dfs),t.NH();const e=this.Nc.fL().mLt(this.di,!1);t.BH(s,i),t.NH(),e&&(this.cfs=this.Nc.fN(),this.ifs=null)}ods(t){this.Xcs=!t}ads(){return Math.hypot(this.jus,this.Hus)}lds(){return Math.atan2(this.Hus,this.jus)}uds(){return this.Hus<0}cds(){return this.Hus>0}fds(t){this.Sfs=Math.max(t,0)}dds(){return this.Sfs}pds(t){this.wfs=Math.max(t,0)}mds(){return this.wfs}gds(t){this.bfs=Math.max(t,0)}yds(){return this.bfs}Sds(t){this.vfs=Math.max(t,0)}wds(){return this.vfs}bds(t){this.Mfs=Math.max(t,0)}vds(){return this.Mfs}Mds(t){if(this.gfs===t)return;this.Go=t,this.Pfs();const s=this.Nc.fL(),i=this.aB();s.o$(this.di)&&(s.yLt(this.di,this.ffs,this.dfs,10),i.WH(2*this.ffs,2*this.dfs),i.NH()),this.ifs=null}xds(){return this.Go}_ds(t){t=WR.Kn(t),this.yfs!==t&&(this.yfs=t,this.Pfs(),this.ifs=null)}Tds(){return this.yfs}Gds(t){this.xfs=!!t}Cds(){return this.xfs}Ids(t){this._fs=t}Pds(){return this._fs}Ads(t){this.Cfs=t}Rds(){return this.Cfs}Eds(t){this.jus=t}ids(){return this.jus}Ods(t){this.Hus=t}eds(){return this.Hus}Fds(t){if(this.xbt)switch(t){case 0:this.Qcs=!0;break;case 1:this.tfs=!0;break;case 2:this.sfs=!0}}Dds(t){t=!!t,this.Gfs!==t&&(this.Gfs=t,this.Gfs?this.Ifs():(this.Ofs(),this.Efs()))}kds(){return this.Gfs}Lds(t){this.Kcs=!!t}Nds(){return this.Kcs}bTt(t){t=!!t,this.xbt!==t&&(this.xbt=t,this.xbt?this.tPt():(this.XIt(),this.ifs=null,this.Qcs=!1,this.tfs=!1,this.sfs=!1))}MTt(){return this.xbt}Hrt(t){switch(t){case HR:return this.dds();case UR:return this.mds();case JR:return this.yds();case zR:return this.wds();case qR:return this.xds();case YR:return this.vds();case XR:return this.Cds();case ZR:return 1e3*this.Pds();case KR:return this.kds();case QR:return this.MTt()}}Xrt(t,s){switch(t){case HR:this.fds(s);break;case UR:this.pds(s);break;case JR:this.gds(s);break;case zR:this.Sds(s);break;case qR:this.Mds(s);break;case YR:this.bds(s);break;case XR:this.Gds(!!s);break;case ZR:this.Ids(s/1e3);break;case KR:this.Dds(!!s);break;case QR:this.bTt(!!s)}}QCt(){const t="behaviors.platform";return[{title:"$"+this.GJ().Pc(),properties:[{name:t+".debugger.vector-x",value:this.ids(),OZt:t=>this.Eds(t)},{name:t+".debugger.vector-y",value:this.eds(),OZt:t=>this.Ods(t)},{name:t+".properties.max-speed.name",value:this.dds(),OZt:t=>this.fds(t)},{name:t+".properties.acceleration.name",value:this.mds(),OZt:t=>this.pds(t)},{name:t+".properties.deceleration.name",value:this.yds(),OZt:t=>this.gds(t)},{name:t+".properties.jump-strength.name",value:this.wds(),OZt:t=>this.Sds(t)},{name:t+".properties.gravity.name",value:this.xds(),OZt:t=>this.Mds(t)},{name:t+".debugger.gravity-angle",value:WR.tr(this.Tds()),OZt:t=>this._ds(WR.Qn(t))},{name:t+".properties.max-fall-speed.name",value:this.vds(),OZt:t=>this.bds(t)},{name:t+".properties.double-jump.name",value:this.Cds(),OZt:t=>this.Gds(t)},{name:t+".properties.jump-sustain.name",value:1e3*this.Pds(),OZt:t=>this.Ids(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.ufs]},{name:t+".properties.enabled.name",value:this.MTt(),OZt:t=>this.bTt(t)}]}]}cCt(){return self.Bds}};const sE=new WeakMap,iE=new Map([["left",0],["right",1],["jump",2]]);self.Bds=class extends jR{constructor(){super(),sE.set(this,jR.Aj().gJ())}$ds(){sE.get(this).hds()}Wds(t){sE.get(this).ods(!!t)}Vds(t){VR.ue(t);const s=iE.get(t);if("number"!=typeof s)throw new Error("invalid control");sE.get(this).Fds(s)}get speed(){return sE.get(this).ads()}get jds(){return sE.get(this).dds()}set jds(t){VR.he(t),sE.get(this).fds(t)}get acceleration(){return sE.get(this).mds()}set acceleration(t){VR.he(t),sE.get(this).pds(t)}get Hds(){return sE.get(this).yds()}set Hds(t){VR.he(t),sE.get(this).gds(t)}get Uds(){return sE.get(this).wds()}set Uds(t){VR.he(t),sE.get(this).Sds(t)}get Jds(){return sE.get(this).vds()}set Jds(t){VR.he(t),sE.get(this).bds(t)}get Yss(){return sE.get(this).xds()}set Yss(t){VR.he(t),sE.get(this).Mds(t)}get zds(){return sE.get(this).Tds()}set zds(t){VR.he(t),sE.get(this)._ds(t)}get qds(){return sE.get(this).Cds()}set qds(t){sE.get(this).Gds(!!t)}get Yds(){return sE.get(this).Pds()}set Yds(t){VR.he(t),sE.get(this).Ids(t)}get Xds(){return 0===sE.get(this).Rds()?"stop":"preserve-momentum"}set Xds(t){VR.ue(t);const s=sE.get(this);if("stop"===t)s.Ads(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.Ads(1)}}get Zds(){return sE.get(this).nds()}Kds(t){VR.ue(t);const s=sE.get(this);if("left"===t)return s.rds(0);if("right"===t)return s.rds(1);throw new Error("invalid side")}get Qds(){return sE.get(this).sds()}get tps(){return sE.get(this).uds()}get sps(){return sE.get(this).cds()}get ips(){return sE.get(this).ids()}set ips(t){VR.he(t),sE.get(this).Eds(t)}get eps(){return sE.get(this).eds()}set eps(t){VR.he(t),sE.get(this).Ods(t)}nps(t,s){VR.he(t),VR.he(s);const i=sE.get(this);i.Eds(t),i.Ods(s)}rps(){const t=sE.get(this);return[t.ids(),t.eds()]}get hps(){return sE.get(this).kds()}set hps(t){sE.get(this).Dds(!!t)}get ops(){return sE.get(this).Nds()}set ops(t){sE.get(this).Lds(!!t)}get isEnabled(){return sE.get(this).MTt()}set isEnabled(t){sE.get(this).bTt(!!t)}}}{const eE=self.Cs;eE.slt.Ks.CB={aps(){return this.sds()},lps(t,s){return eE.compare(this.ads(),t,s)},ups(){return this.nds()},cps(t){return this.rds(t)},fps(){return this.uds()},dps(){return this.cds()},pps(){return this.Cds()},Yfs:()=>!0,Zfs:()=>!0,Qfs:()=>!0,tds:()=>!0,Kfs:()=>!0,Gu(){return this.MTt()}}}{const nE=self.Cs;nE.slt.Ks.hrt={mps(t){this.fds(t)},$ts(t){this.pds(t)},gps(t){this.gds(t)},yps(t){this.Sds(t)},Sps(t){this.bds(t)},Wts(t){this.Mds(t)},wps(t){this.Fds(t)},bps(t){this.Lds(!!t)},vps(t){this.Eds(t)},Mps(t){this.Ods(t)},xps(t){this._ds(nE.Qn(t))},SGt(t){this.bTt(0!==t)},_ps(){this.hds()},Tps(t){this.Gds(0!==t)},Gps(t){this.Ids(t/1e3)},Cps(t){this.Ads(t)},Ips(t){this.Dds(t)},Pps(t){this.ods(t)}}}{const rE=self.Cs;rE.slt.Ks.ort={Aps(){return this.ads()},Rps(){return this.dds()},Eps(){return this.mds()},Ops(){return this.yds()},Fps(){return this.wds()},Gis(){return this.xds()},Dps(){return rE.tr(this.Tds())},kps(){return this.vds()},Lps(){return rE.tr(this.lds())},Nps(){return this.ids()},Bps(){return this.eds()},$ps(){return 1e3*this.Pds()}}}{let hE=function(t,s,i){const e=t.ZMt(),n=s.ZMt();if(i){const i=e.get(pE);i&&i.delete(s.G0());const r=n.get(pE);r&&r.delete(t.G0())}else{let i=e.get(pE);i||(i=new Set,e.set(pE,i));let r=n.get(pE);r||(r=new Set,n.set(pE,r)),i.add(s.G0()),r.add(t.G0())}};SetObjectTypeCollisionsEnabled=hE;const oE=self.Cs,aE=self.Ns;let lE=null,uE=null,cE=[],fE=null,dE=null;const pE="Physics_DisabledCollisions";oE.slt.Wps=class extends oE.WIt{constructor(t){super(t),dE=this,this.Vps=null,this.jps=10,this.Hps=.02,this.Ups=null,this.Jps=-1,this.zps=1,this.qps=8,this.Yps=3,this.Xps=!0,this.Nc.vB(this.Zps())}cCt(){return self.Kps}async Zps(){const t=await this.Nc.lL().jB("box2d.wasm");await new Promise((s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then((t=>{fE=t,this.Qps(),s()}))}))}Qps(){const t=this.Nc.fL();lE=oE.slt.Wps.yAt(0,0),uE=oE.slt.Wps.yAt(0,0),this.Vps=new fE.b2World(oE.slt.Wps.tms(0,this.jps),!0);const s=new fE.JSContactListener;s.BeginContact=s=>{const i=fE.wrapPointer(s,fE.b2Contact),e=oE.slt.Wps.Instance.sms(i.GetFixtureA().GetBody()),n=oE.slt.Wps.Instance.sms(i.GetFixtureB().GetBody());t.Qkt(e.IJ(),n.IJ())},s.EndContact=()=>{},s.PreSolve=()=>{},s.PostSolve=()=>{},this.Vps.SetContactListener(s);const i=new fE.JSContactFilter;i.ShouldCollide=(t,s)=>{if(this.Xps)return!0;const i=fE.wrapPointer(t,fE.b2Fixture),e=fE.wrapPointer(s,fE.b2Fixture),n=oE.slt.Wps.Instance.sms(i.GetBody()),r=oE.slt.Wps.Instance.sms(e.GetBody()),h=n.IJ().Cj(),o=r.IJ().Cj(),a=h.G0(),l=o.G0(),u=h.ZMt().get(pE);if(u&&u.has(l))return!1;const c=o.ZMt().get(pE);return!c||!c.has(a)},this.Vps.SetContactFilter(i),this.Ups=new fE.b2WorldManifold}Jn(){super.Jn()}ims(){return fE}ems(){return this.Vps}nms(){return this.Hps}rms(){return this.zps}hms(t){this.zps=t}oms(t){this.Jps=t}ams(){return this.Jps}lms(t){this.qps=Math.max(t,1)}ums(){return this.qps}cms(t){this.Yps=Math.max(t,1)}fms(){return this.Yps}dms(t,s){this.lms(t),this.cms(s)}Sss(){return this.jps}Wts(t){t!==this.jps&&(this.Vps.SetGravity(oE.slt.Wps.tms(0,t)),this.jps=t,this.pms())}pms(){for(const t of this.RW()){const s=oE.slt.Wps.Instance.mms(t);if(!s)continue;const i=s.gms();i&&i.SetAwake(!0)}}yms(){this.Xps=!1}Sms(t,s,i){if(i=!!i,t&&s){if(s.S0())for(const e of s.XSt())hE(t,e,i);else hE(t,s,i);this.yms()}}wms(){return this.Ups}static bms(){return pE}static yAt(t,s){if(cE.length){const i=cE.pop();return i.set_x(t),i.set_y(s),i}return new(0,fE.b2Vec2)(t,s)}static vms(t){cE.push(t)}static tms(t,s){return lE.set_x(t),lE.set_y(s),lE}static Mms(t,s){return uE.set_x(t),uE.set_y(s),uE}static xms(t){const s=new(0,fE.b2PolygonShape),i=fE._malloc(8*t.length);let e=0;for(let s=0;s<t.length;++s)fE.HEAPF32[i+e>>2]=t[s].get_x(),fE.HEAPF32[i+(e+4)>>2]=t[s].get_y(),e+=8;const n=fE.wrapPointer(i,fE.b2Vec2);return s.Set(n,t.length),fE._free(i),s}};const mE=["fixed","variable"];self.Kps=class extends self.AJ{constructor(){super()}set _ms(t){aE.he(t),dE.Wts(t)}get _ms(){return dE.Sss()}set Tms(t){const s=mE.indexOf(t);if(s<0)throw new Error("invalid stepping mode");dE.hms(mE[s])}get Tms(){return mE[dE.rms()]}set Gms(t){aE.he(t),dE.lms(t)}get Gms(){return dE.ums()}set Cms(t){aE.he(t),dE.cms(t)}get Cms(){return dE.fms()}Ims(t,s,i){const e=dE.LB(),n=e.d$(t),r=e.d$(s);i=!!i,dE.Sms(n,r,i)}}}{const gE=self.Cs;gE.slt.Wps.nRt=class extends gE.JIt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{let yE=function(t,s){return VE.get(t).LB().oB(s)};UnwrapIWorldInstance=yE;const SE=self.Cs,wE=self.Ns,bE=self.vJ,vE=(self.assert,0),ME=1,xE=2,_E=3,TE=4,GE=5,CE=6,IE=7,PE=8,AE=9,RE=new WeakMap,EE=new WeakMap,OE=new WeakMap,FE=-2147483648,DE=1073741824,kE=536870912,LE=3758096384,NE=SE.slt.Wps.tms,BE=SE.slt.Wps.Mms,$E=SE.Un(SE.Rect),WE=SE.Un(SE.Il);SE.slt.Wps.Instance=class extends SE.qIt{constructor(t,s){super(t);const i=this.xJ(),e=this.aB();this.Pms=i.ims(),this.Vps=i.ems(),this.Hps=i.nms(),this.Ams=!1,this.Rms=0,this.Ems=0,this.Oms=!1,this.Fms=1,this.Dms=.5,this.kms=.2,this.Lms=0,this.Nms=.01,this.Bms=!1,this.xbt=!0,this.$ms=null,this.Wms=[],this.Vms=[],this.jms=[],this.Hms=new Set,this.Ums=e.UM(),this.Jms=e.qM(),this.Yus=e.ZW(),this.zms=0,this.qms=0,this.Yms=!1,s&&(this.Ams=!!s[vE],this.Rms=s[ME],this.Oms=!!s[xE],this.Fms=s[_E],this.Dms=s[TE],this.kms=s[GE],this.Lms=s[CE],this.Nms=s[IE],this.Bms=!!s[PE],this.xbt=!!s[AE]);const n=this.Nc.Sf();this.Xf=new SE.zf(SE.Wf.Jf(n,"instancedestroy",(t=>this._2t(t.CJ))),SE.Wf.Jf(n,"beforeload",(()=>this.p6())),SE.Wf.Jf(n,"afterload",(()=>this.g6()))),EE.set(this.di,this),this.xbt&&this.YCt()}KIt(){this.Xms()}Jn(){this.Zms(),SE.bh(this.jms),this.Hms.clear(),this.$ms&&(this.Kms(),this.Vps.DestroyBody(this.$ms),this.$ms=null),super.Jn()}Qms(t){if(!this.$ms)return;const s=this.$ms.CreateFixture(t);return this.Wms.push(s),s}Kms(){if(this.$ms){for(const t of this.Wms)this.$ms.DestroyFixture(t);SE.bh(this.Wms)}}tgs(){const t=this.aB();return t.hJ()?(t.QH($E,WE,!1),WE):t.iU()}sgs(t){this.Pms.destroy(t)}Xms(){if(!this.xbt)return;const t=this.Pms.b2FixtureDef,s=this.Pms.b2BodyDef,i=this.aB(),e=i.UDt();if(this.Ems=this.Rms,e||this.di.LEt()||0!==this.Ems||(this.Ems=1),!this.$ms){const t=new s;t.set_type(this.Ams?0:2);let e=i.UM()*this.Hps,n=i.qM()*this.Hps;if(2===this.Ems){const t=this.tgs();e=t.hl()*this.Hps,n=t.ol()*this.Hps}t.set_position(BE(e,n)),t.set_angle(i.ZW()),t.set_fixedRotation(this.Oms),t.set_linearDamping(this.Lms),t.set_angularDamping(this.Nms),t.set_bullet(this.Bms),this.$ms=this.Vps.CreateBody(t),this.sgs(t),RE.set(this.$ms,this)}this.Kms();const n=new t;n.set_density(this.Fms),n.set_friction(this.Dms),n.set_restitution(this.kms);const r=Math.max(Math.abs(i.Vg()),1),h=Math.max(Math.abs(i.Kg()),1);0===this.Ems?this.di.LEt()?this.igs(n):this.egs(n,r,h):1===this.Ems?this.ngs(n,i,r,h):this.rgs(n,r,h),this.zms=i.Vg(),this.qms=i.Kg(),i.YDt(!1),this.sgs(n)}ngs(t,s,i,e){const n=new(0,this.Pms.b2PolygonShape),r=i*this.Hps,h=e*this.Hps;let o=s.jH(),a=s.JH();s.Vg()<0&&(o=1-o),s.Kg()<0&&(a=1-a);const l=(.5-o)*r,u=(.5-a)*h,c=SE.slt.Wps.yAt(l,u);n.SetAsBox(r/2,h/2,c,0),t.set_shape(n),this.Qms(t),this.sgs(n),SE.slt.Wps.vms(c)}rgs(t,s,i){const e=new(0,this.Pms.b2CircleShape);e.set_m_radius(Math.min(s,i)*this.Hps*.5),t.set_shape(e),this.Qms(t),this.sgs(e)}egs(t,s,i){const e=this.aB(),n=e.Vg()<0,r=e.Kg()<0,h=this.Hps,o=e.qDt(n?-s:s,r?-i:i,0).du(),a=o.length/2,l=[];for(let t=0;t<a;++t)l.push(SE.slt.Wps.yAt(o[2*t],o[2*t+1]));n!==r&&l.reverse();const u=SE.slt.Wps.ogs.hgs(l,s*i);for(const t of l)SE.slt.Wps.vms(t);if(u.length)for(const s of u){for(const t of s)t.set_x(t.get_x()*h),t.set_y(t.get_y()*h);const i=SE.slt.Wps.xms(s);t.set_shape(i),this.Qms(t),this.sgs(i);for(const t of s)SE.slt.Wps.vms(t)}else this.ngs(t,e,s,i)}igs(t){const s=this.Hps,i=SE.slt.Wps.yAt,e=SE.slt.Wps.vms,n=[];this.di.gJ().ags(n);const r=[];for(let h=0,o=n.length;h<o;++h){const o=n[h],a=o.hLt(),l=o.oLt();if(l){let n=OE.get(l);if(!n){const t=l.du(),s=l.pu();for(let e=0;e<s;++e)r.push(i(t[2*e],t[2*e+1]));const h=o.lgs()&LE;(h===FE||h===DE||h===kE||h&FE&&h&DE&&h&kE)&&r.reverse(),n=SE.slt.Wps.ogs.hgs(r,a.width()*a.height()),OE.set(l,n);for(const t of r)e(t);SE.bh(r)}for(let h=0,o=n.length;h<o;++h){const o=n[h];for(let t=0,e=o.length;t<e;++t)r.push(i((a.Ka()+o[t].get_x())*s,(a.Qa()+o[t].get_y())*s));const l=SE.slt.Wps.xms(r);t.set_shape(l),this.Qms(t),this.sgs(l);for(const t of r)e(t);SE.bh(r)}}else{r.push(i(a.Ka()*s,a.Qa()*s)),r.push(i(a.tl()*s,a.Qa()*s)),r.push(i(a.tl()*s,a.sl()*s)),r.push(i(a.Ka()*s,a.sl()*s));const e=SE.slt.Wps.xms(r);t.set_shape(e),this.Qms(t),this.sgs(e)}for(const t of r)e(t);SE.bh(r)}}ugs(){this.$ms&&(this.Zms(),RE.delete(this.$ms),this.Kms(),this.Vps.DestroyBody(this.$ms),this.$ms=null)}Zms(){for(const t of this.Vms)this.Vps.DestroyJoint(t);SE.bh(this.Vms)}cgs(){for(const t of this.jms)switch(t.type){case 0:this.fgs(...t.dgs);break;case 1:this.pgs(...t.dgs);break;case 2:this.mgs(...t.dgs);break;case 3:this.ggs(...t.dgs)}}ygs(t){const s=this.aB();if(-1===t)return[s.UM(),s.qM()];if(0===t&&this.$ms){const t=this.$ms.GetWorldCenter();return[t.get_x()/this.Hps,t.get_y()/this.Hps]}return this.di.n_t(t)}Sgs(t,s,i,e,n){if(!this.xbt||!s||s===this.di)return;const r=SE.slt.Wps.Instance.mms(s);r&&r.MTt()&&(this.jms.push({type:0,dgs:[t,s.$j(),i,e,n]}),this.fgs(t,s.$j(),i,e,n))}fgs(t,s,i,e,n){if(!this.xbt)return;const r=this.Nc.eB(s);if(!r||r===this.di)return;const h=SE.slt.Wps.Instance.mms(r);if(!h||!h.MTt())return;h.Hms.add(this.di),this.wgs(!1),h.wgs(!1);const[o,a]=this.ygs(t),[l,u]=r.n_t(i),c=o-l,f=a-u,d=this.Pms.b2DistanceJointDef,p=this.Hps,m=new d;m.Initialize(this.$ms,h.gms(),NE(o*p,a*p),BE(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(e),m.set_frequencyHz(n),this.Vms.push(this.Vps.CreateJoint(m)),this.sgs(m)}bgs(t,s){if(!this.xbt||!s||s===this.di)return;const i=SE.slt.Wps.Instance.mms(s);i&&i.MTt()&&(this.jms.push({type:1,dgs:[t,s.$j()]}),this.pgs(t,s.$j()))}pgs(t,s){if(!this.xbt)return;const i=this.Nc.eB(s);if(!i||i===this.di)return;const e=SE.slt.Wps.Instance.mms(i);if(!e||!e.MTt())return;e.Hms.add(this.di),this.wgs(!1),e.wgs(!1);const[n,r]=this.ygs(t),h=this.Pms.b2RevoluteJointDef,o=this.Hps,a=new h;a.Initialize(this.$ms,e.gms(),NE(n*o,r*o)),this.Vms.push(this.Vps.CreateJoint(a)),this.sgs(a)}vgs(t,s,i,e){if(!this.xbt||!s||s===this.di)return;const n=SE.slt.Wps.Instance.mms(s);n&&n.MTt()&&(i=SE.tr(i),e=SE.tr(e),this.jms.push({type:2,dgs:[t,s.$j(),i,e]}),this.mgs(t,s.$j(),i,e))}mgs(t,s,i,e){if(!this.xbt)return;const n=this.Nc.eB(s);if(!n||n===this.di)return;const r=SE.slt.Wps.Instance.mms(n);if(!r||!r.MTt())return;r.Hms.add(this.di),this.wgs(!1),r.wgs(!1);const[h,o]=this.ygs(t),a=this.Pms.b2RevoluteJointDef,l=this.Hps,u=new a;u.Initialize(this.$ms,r.gms(),NE(h*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(SE.Qn(i)),u.set_upperAngle(SE.Qn(e)),this.Vms.push(this.Vps.CreateJoint(u)),this.sgs(u)}Mgs(t,s,i,e,n,r,h,o,a){if(!this.xbt||!s||s===this.di)return;const l=SE.slt.Wps.Instance.mms(s);l&&l.MTt()&&(i=SE.tr(i),o=SE.tr(o),this.jms.push({type:3,dgs:[t,s.$j(),i,e,n,r,h,o,a]}),this.ggs(t,s.$j(),i,e,n,r,h,o,a))}ggs(t,s,i,e,n,r,h,o,a){if(!this.xbt)return;const l=this.Nc.eB(s);if(!l||l===this.di)return;const u=SE.slt.Wps.Instance.mms(l);if(!u||!u.MTt())return;u.Hms.add(this.di),this.wgs(!1),u.wgs(!1);const[c,f]=this.ygs(t);i=SE.Qn(i);const d=Math.cos(i),p=Math.sin(i),m=this.Pms.b2PrismaticJointDef,g=this.Hps,y=new m;y.Initialize(this.$ms,u.gms(),NE(c*g,f*g),BE(d,p)),y.set_enableLimit(!!e),y.set_lowerTranslation(n*g),y.set_upperTranslation(r*g),y.set_enableMotor(!!h),y.set_motorSpeed(SE.Qn(o)),y.set_maxMotorForce(a),this.Vms.push(this.Vps.CreateJoint(y)),this.sgs(y)}xgs(){this.xbt&&(this.Zms(),SE.bh(this.jms),this.Hms.clear())}_gs(){for(const t of this.Hms){const s=SE.slt.Wps.Instance.mms(t);if(!s||!s.MTt())return;s.Tgs(this.di)}this.Hms.clear()}_2t(t){this.Tgs(t)}Tgs(t){const s=t.$j();let i=0;for(let t=0,e=this.jms.length;t<e;++t)this.jms[i]=this.jms[t],i<this.Vms.length&&(this.Vms[i]=this.Vms[t]),this.jms[t].dgs[1]===s?t<this.Vms.length&&this.Vps.DestroyJoint(this.Vms[t]):++i;SE.wh(this.jms,i),i<this.Vms.length&&SE.wh(this.Vms,i),this.Hms.delete(t)}gms(){return this.$ms}static sms(t){return RE.get(t)||null}static mms(t){return EE.get(t)||null}hx(){const t={e:this.xbt,im:this.Ams,pr:this.Oms,d:this.Fms,fr:this.Dms,re:this.kms,ld:this.Lms,ad:this.Nms,b:this.Bms,mcj:this.jms};if(this.xbt){const s=this.$ms.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.$ms.GetAngularVelocity()}return t}p6(){this.Zms(),SE.bh(this.jms),this.Hms.clear()}ox(t){this.ugs(),this.xbt=t.e,t.hasOwnProperty("im")&&(this.Ams=!!t.im),this.Oms=t.pr,this.Fms=t.d,this.Dms=t.fr,this.kms=t.re,this.Lms=t.ld,this.Nms=t.ad,this.Bms=t.b,this.jms=t.mcj;const s=this.aB();this.Ums=s.UM(),this.Jms=s.qM(),this.Yus=s.ZW(),this.zms=s.Vg(),this.qms=s.Kg(),this.xbt&&(this.Xms(),this.$ms.SetLinearVelocity(NE(t.vx,t.vy)),this.$ms.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.$ms.SetAwake(!0),this.jms=t.mcj),this.xbt?this.YCt():this.OCt()}g6(){this.xbt&&this.cgs()}d8(){if(!this.xbt)return;const t=this.Nc,s=this.xJ();let i=0;0===s.rms()?i=t.gN()/60:(i=t.aN(this.di),i>1/30&&(i=1/30));const e=t.fUt();e>s.ams()&&t.gN()>0&&(0!==i&&this.Vps.Step(i,s.ums(),s.fms()),this.Vps.ClearForces(),s.oms(e)),this.wgs(!0)}wgs(t){const s=this.di.aB(),i=this.Hps;(s.Vg()!==this.zms||s.Kg()!==this.qms||s.skt())&&this.Xms();const e=this.$ms,n=s.UM(),r=s.qM(),h=n-this.Ums,o=r-this.Jms,a=Math.abs(h)>.001||Math.abs(o)>.001,l=s.ZW()!==this.Yus;let u=n,c=r;if(2===this.Ems){const t=this.tgs();u=t.hl(),c=t.ol()}a?(l?e.SetTransform(NE(u*i,c*i),s.ZW()):e.SetTransform(NE(u*i,c*i),e.GetAngle()),t&&(e.SetLinearVelocity(NE(h,o)),this.Yms=!0),e.SetAwake(!0)):t&&this.Yms&&(this.Yms=!1,e.SetLinearVelocity(NE(0,0)),e.SetTransform(NE(u*i,c*i),e.GetAngle())),!a&&l&&(e.SetTransform(e.GetPosition(),s.ZW()),e.SetAwake(!0));const f=e.GetPosition(),d=f.get_x()/i,p=f.get_y()/i,m=e.GetAngle();if((d!==s.UM()||p!==s.qM()||m!==s.ZW())&&(s.BH(d,p),s.XW(m),s.NH(),2===this.Ems)){const t=this.tgs(),i=t.hl()-s.UM(),e=t.ol()-s.qM();0===i&&0===e||(s.WH(-i,-e),s.NH())}this.Ums=s.UM(),this.Jms=s.qM(),this.Yus=s.ZW()}Hrt(t){switch(t){case xE:return this.Ggs();case _E:return this.Cgs();case TE:return this.Igs();case GE:return this.Pgs();case CE:return this.Ags();case IE:return this.Rgs();case PE:return this.Egs();case AE:return this.MTt()}}Xrt(t,s){switch(t){case xE:this.Ogs(s);break;case _E:this.Fgs(s);break;case TE:this.Dgs(s);break;case GE:this.kgs(s);break;case CE:this.Lgs(s);break;case IE:this.Ngs(s);break;case PE:this.Bgs(s);break;case AE:this.bTt(s)}}bTt(t){t=!!t,this.xbt&&!t?(this._gs(),this.ugs(),this.xbt=!1,this.OCt()):!this.xbt&&t&&(this.xbt=!0,this.Xms(),this.YCt())}MTt(){return this.xbt}QCt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.MTt(),OZt:t=>this.bTt(t)},{name:t+".properties.immovable.name",value:this.$gs(),OZt:t=>this.Wgs(t)},{name:t+".properties.density.name",value:this.Cgs(),OZt:t=>this.Fgs(t)},{name:t+".properties.friction.name",value:this.Igs(),OZt:t=>this.Dgs(t)},{name:t+".properties.elasticity.name",value:this.Pgs(),OZt:t=>this.kgs(t)},{name:t+".properties.linear-damping.name",value:this.Ags(),OZt:t=>this.Lgs(t)},{name:t+".properties.angular-damping.name",value:this.Rgs(),OZt:t=>this.Ngs(t)}];return this.xbt&&(s.push({name:t+".debugger.is-sleeping",value:!this.Vgs()}),s.push({name:t+".debugger.velocity-x",value:this.jgs(),OZt:t=>this.Hgs(t,this.Ugs())}),s.push({name:t+".debugger.velocity-y",value:this.Ugs(),OZt:t=>this.Hgs(this.jgs(),t)}),s.push({name:t+".debugger.angular-velocity",value:SE.tr(this.Jgs()),OZt:t=>this.zgs(SE.Qn(t))}),s.push({name:t+".debugger.mass",value:this.qgs()})),[{title:"$"+this.GJ().Pc(),properties:s}]}Ygs(t,s,i){const[e,n]=this.ygs(i);this.Xgs(t,s,e,n)}Zgs(t,s,i,e){const[n,r]=this.ygs(e),h=SE.rr(n,r,s,i);this.Xgs(Math.cos(h)*t,Math.sin(h)*t,n,r)}Kgs(t,s,i){const[e,n]=this.ygs(i);this.Xgs(Math.cos(s)*t,Math.sin(s)*t,e,n)}Xgs(t,s,i,e){if(!this.xbt)return;const n=this.Hps;this.$ms.ApplyForce(NE(t,s),BE(i*n,e*n),!0)}Qgs(t,s,i){const[e,n]=this.ygs(i);this.tys(t,s,e,n)}sys(t,s,i,e){const[n,r]=this.ygs(e),h=SE.rr(n,r,s,i);this.tys(Math.cos(h)*t,Math.sin(h)*t,n,r)}iys(t,s,i){const[e,n]=this.ygs(i);this.tys(Math.cos(s)*t,Math.sin(s)*t,e,n)}tys(t,s,i,e){if(!this.xbt)return;const n=this.Hps;this.$ms.ApplyLinearImpulse(NE(t,s),BE(i*n,e*n),!0);const r=this.aB();this.Ums=r.UM(),this.Jms=r.qM(),this.Yms=!1}eys(t){this.xbt&&this.$ms.ApplyTorque(t,!0)}nys(t,s){const i=SE.lr(this.aB().ZW(),s)?-1:1;this.eys(t*i)}rys(t,s,i){const e=this.aB(),n=SE.rr(e.UM(),e.qM(),s,i),r=SE.lr(e.ZW(),n)?-1:1;this.eys(t*r)}zgs(t){this.xbt&&(this.$ms.SetAngularVelocity(t),this.$ms.SetAwake(!0))}Jgs(){return this.xbt?this.$ms.GetAngularVelocity():0}Hgs(t,s){if(!this.xbt)return;const i=this.Hps;this.$ms.SetLinearVelocity(NE(t*i,s*i)),this.$ms.SetAwake(!0);const e=this.aB();this.Ums=e.UM(),this.Jms=e.qM(),this.Yms=!1}hys(){if(!this.xbt)return[0,0];const t=this.Hps,s=this.$ms.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}jgs(){return this.xbt?this.$ms.GetLinearVelocity().get_x()/this.Hps:0}Ugs(){return this.xbt?this.$ms.GetLinearVelocity().get_y()/this.Hps:0}oys(t,s){if(!this.xbt)return;const i=this.Hps;this.$ms.SetTransform(NE(t*i,s*i),this.$ms.GetAngle());const e=this.aB();e.BH(t,s),e.NH(),this.Ums=e.UM(),this.Jms=e.qM()}Fgs(t){if(this.xbt&&this.Fms!==t){this.Fms=t;for(const s of this.Wms)s.SetDensity(t);this.$ms.ResetMassData()}}Cgs(){return this.xbt?this.Fms:0}Dgs(t){if(this.xbt&&this.Dms!==t){this.Dms=t;for(const s of this.Wms)s.SetFriction(t);if(this.$ms)for(let t=this.$ms.GetContactList();this.Pms.getPointer(t);t=t.get_next()){const s=t.get_contact();s&&s.ResetFriction()}}}Igs(){return this.xbt?this.Dms:0}kgs(t){if(this.xbt&&this.kms!==t){this.kms=t;for(const s of this.Wms)s.SetRestitution(t)}}Pgs(){return this.xbt?this.kms:0}Lgs(t){this.xbt&&this.Lms!==t&&(this.Lms=t,this.$ms.SetLinearDamping(t))}Ags(){return this.xbt?this.Lms:0}Ngs(t){this.xbt&&this.Nms!==t&&(this.Nms=t,this.$ms.SetAngularDamping(t))}Rgs(){return this.xbt?this.Nms:0}Wgs(t){this.xbt&&(t=!!t,this.Ams!==t&&(this.Ams=t,this.$ms.SetType(this.Ams?0:2),this.$ms.SetAwake(!0)))}$gs(){return this.Ams}Ogs(t){this.xbt&&(t=!!t,this.Oms!==t&&(this.Oms=t,this.$ms.SetFixedRotation(this.Oms),this.$ms.SetAngularVelocity(0),this.$ms.SetAwake(!0)))}Ggs(){return this.Oms}Bgs(t){this.xbt&&(t=!!t,this.Bms!==t&&(this.Bms=t,this.$ms.SetBullet(this.Bms),this.$ms.SetAwake(!0)))}Egs(){return this.Bms}ays(t){this.xbt&&this.$ms.SetAwake(!!t)}Vgs(){return!!this.xbt&&this.$ms.IsAwake()}qgs(){return this.xbt?this.$ms.GetMass()/this.Hps:0}lys(){return this.xbt?this.$ms.GetWorldCenter().get_x()/this.Hps:0}uys(){return this.xbt?this.$ms.GetWorldCenter().get_y()/this.Hps:0}cys(){if(!this.xbt)return[0,0];const t=this.$ms.GetWorldCenter(),s=this.Hps;return[t.get_x()/s,t.get_y()/s]}fys(){if(!this.xbt)return 0;let t=0;for(let s=this.$ms.GetContactList();this.Pms.getPointer(s);s=s.get_next()){const i=s.get_contact();i&&(t+=i.GetManifold().get_pointCount())}return t}dys(t){if(t=Math.floor(t),!this.xbt)return[0,0];let s=0;for(let i=this.$ms.GetContactList();this.Pms.getPointer(i);i=i.get_next()){const e=i.get_contact();if(!e)continue;const n=e.GetManifold().get_pointCount();if(t>=s&&t<s+n){const i=t-s,n=this.xJ().wms();e.GetWorldManifold(n);const r=n.get_points(i);return[r.get_x()/this.Hps,r.get_y()/this.Hps]}s+=n}return[0,0]}cCt(){return self.pys}};const VE=new WeakMap;self.pys=class extends bE{constructor(){super(),VE.set(this,bE.Aj().gJ())}get isEnabled(){return VE.get(this).MTt()}set isEnabled(t){VE.get(this).bTt(t)}mys(t,s,i=0){wE.he(t),wE.he(s),VE.get(this).Ygs(t,s,i)}gys(t,s,i,e=0){wE.he(t),wE.he(s),wE.he(i),VE.get(this).Zgs(t,s,i,e)}yys(t,s,i=0){wE.he(t),wE.he(s),VE.get(this).Kgs(t,s,i)}Sys(t,s,i=0){wE.he(t),wE.he(s),VE.get(this).Qgs(t,s,i)}wys(t,s,i,e=0){wE.he(t),wE.he(s),wE.he(i),VE.get(this).sys(t,s,i,e)}bys(t,s,i=0){wE.he(t),wE.he(s),VE.get(this).iys(t,s,i)}vys(t){wE.he(t),VE.get(this).eys(t)}Mys(t,s){wE.he(t),wE.he(s),VE.get(this).nys(t,s)}xys(t,s,i){wE.he(t),wE.he(s),wE.he(i),VE.get(this).rys(t,s,i)}set angularVelocity(t){wE.he(t),VE.get(this).zgs(t)}get angularVelocity(){return VE.get(this).Jgs()}setVelocity(t,s){wE.he(t),wE.he(s),VE.get(this).Hgs(t,s)}_ys(){return VE.get(this).jgs()}Tys(){return VE.get(this).Ugs()}Gys(){return VE.get(this).hys()}Cys(t,s){wE.he(t),wE.he(s),VE.get(this).oys(t,s)}set Iys(t){wE.he(t),VE.get(this).Fgs(t)}get Iys(){return VE.get(this).Cgs()}set Pys(t){wE.he(t),VE.get(this).Dgs(t)}get Pys(){return VE.get(this).Igs()}set Ays(t){wE.he(t),VE.get(this).kgs(t)}get Ays(){return VE.get(this).Pgs()}set Rys(t){wE.he(t),VE.get(this).Lgs(t)}get Rys(){return VE.get(this).Ags()}set Eys(t){wE.he(t),VE.get(this).Ngs(t)}get Eys(){return VE.get(this).Rgs()}set Oys(t){VE.get(this).Wgs(t)}get Oys(){return VE.get(this).$gs()}set Fys(t){VE.get(this).Ogs(t)}get Fys(){return VE.get(this).Ggs()}set Dys(t){VE.get(this).Bgs(t)}get Dys(){return VE.get(this).Egs()}get kys(){return VE.get(this).qgs()}Lys(){return VE.get(this).lys()}Nys(){return VE.get(this).uys()}Bys(){return VE.get(this).cys()}$ys(){return VE.get(this).fys()}Wys(t){return wE.he(t),VE.get(this).dys(t)[0]}Vys(t){return wE.he(t),VE.get(this).dys(t)[1]}jys(t){return wE.he(t),VE.get(this).dys(t)}set Hys(t){VE.get(this).ays(!!t)}get Hys(){return VE.get(this).Vgs()}get Uys(){return!VE.get(this).Vgs()}Jys(t,s,i,e,n){wE.he(e),wE.he(n);const r=yE(this,s);VE.get(this).Sgs(t,r,i,e,n)}zys(t,s){const i=yE(this,s);VE.get(this).bgs(t,i)}qys(t,s,i,e){wE.he(i),wE.he(e);const n=yE(this,s);VE.get(this).vgs(t,n,i,e)}Yys(t,s,i,e,n,r,h,o,a){const l=yE(this,s);VE.get(this).Mgs(t,l,i,e,n,r,h,o,a)}Xys(){VE.get(this).xgs()}}}{const jE=self.Cs;jE.slt.Wps.CB={Zys(){return!this.Vgs()},Kys(){return this.$gs()},Qys(t,s,i){if(!this.xbt)return!1;let e=0;if(0===t)e=this.jgs();else if(1===t)e=this.Ugs();else{const[t,s]=this.hys();e=Math.hypot(t,s)}return jE.compare(e,s,i)},tSs(t,s){if(!this.xbt)return!1;const i=jE.tr(this.Jgs());return jE.compare(i,t,s)},sSs(t,s){if(!this.xbt)return!1;const i=this.qgs();return jE.compare(i,t,s)},Gu(){return this.MTt()}}}{const HE=self.Cs;HE.slt.Wps.hrt={iSs(t,s,i){this.Ygs(t,s,i)},eSs(t,s,i,e){this.Zgs(t,s,i,e)},nSs(t,s,i){this.Kgs(t,HE.Qn(s),i)},rSs(t,s,i){this.Qgs(t,s,i)},hSs(t,s,i,e){this.sys(t,s,i,e)},oSs(t,s,i){this.iys(t,HE.Qn(s),i)},aSs(t){this.eys(HE.Qn(t))},lSs(t,s){this.nys(HE.Qn(t),HE.Qn(s))},uSs(t,s,i){this.rys(HE.Qn(t),s,i)},cSs(t){this.zgs(HE.Qn(t))},fSs(t,s,i,e,n){if(!s)return;const r=s.D_t(this.di);this.Sgs(t,r,i,e,n)},dSs(t,s){if(!s)return;const i=s.D_t(this.di);this.bgs(t,i)},pSs(t,s,i,e){if(!s)return;const n=s.D_t(this.di);this.vgs(t,n,HE.Qn(i),HE.Qn(e))},mSs(t,s,i,e,n,r,h,o,a){if(!s)return;const l=s.D_t(this.di);this.Mgs(t,l,HE.Qn(i),e,n,r,h,HE.Qn(o),a)},gSs(){this.xgs()},ySs(t){this.xJ().Wts(t)},hms(t){this.xJ().hms(t)},dms(t,s){this.xJ().dms(t,s)},SSs(t,s){this.Hgs(t,s)},wSs(t,s){this.oys(t,s)},bSs(t){this.Fgs(t)},vSs(t){this.Dgs(t)},MSs(t){this.kgs(t)},xSs(t){this.Lgs(t)},_Ss(t){this.Ngs(t)},TSs(t){this.Wgs(t)},GSs(t,s){this.xJ().Sms(this.Cj(),t,0!==s)},CSs(t){this.Ogs(0!==t)},ISs(t){this.Bgs(0!==t)},PSs(t){this.ays(!!t)},SGt(t){this.bTt(0!==t)}}}{const UE=self.Cs;UE.slt.Wps.ort={ASs(){return this.jgs()},RSs(){return this.Ugs()},ESs(){return UE.tr(this.Jgs())},OSs(){return this.qgs()},FSs(){return this.lys()},DSs(){return this.uys()},kSs(){return this.Cgs()},LSs(){return this.Igs()},NSs(){return this.Pgs()},BSs(){return this.Ags()},$Ss(){return this.Rgs()},WSs(){return this.fys()},VSs(t){return this.dys(t)[0]},jSs(t){return this.dys(t)[1]}}}{let JE=function(t){return ZE(t.get_x(),t.get_y())},zE=function(t){const s=[];for(const i of t)i.length<=8?s.push(i):s.push.apply(s,qE(i));return s},qE=function(t){const s=[];s.push(t.splice(0,8));const i=s[0][0];let e=s[0][7];for(;t.length;){const n=t.splice(0,Math.min(t.length,6));let r=n.at(-1);n.push(JE(i)),n.push(JE(e)),s.push(n),e=r}return s};CloneVec2=JE,SplitConvexPolysOver8Points=zE,SplitConvexPoly=qE;const YE=self.Cs,XE={};YE.slt.Wps.ogs=XE;const ZE=YE.slt.Wps.yAt,KE=YE.slt.Wps.vms;XE.HSs=function(t,s,i,e,n,r){return t*e+i*r+n*s-s*i-e*n-r*t},XE.USs=function(t,s,i,e,n,r,h,o){const a=i-t,l=e-s,u=h-n,c=o-r,f=(u*(r-s)-c*(n-t))/(l*u-a*c),d=t+f*a,p=s+f*l,m=XE.JSs(i,e,t,s,d,p),g=XE.JSs(d,p,n,r,h,o);return m&&g?ZE(d,p):null},XE.JSs=function(t,s,i,e,n,r){return(i+.1>=t&&t>=n-.1||i-.1<=t&&t<=n+.1)&&(e+.1>=s&&s>=r-.1||e-.1<=s&&s<=r+.1)&&XE.zSs(t,s,i,e,n,r)},XE.zSs=function(t,s,i,e,n,r){if(Math.abs(n-i)>.1){const h=(r-e)/(n-i)*(t-i)+e;return Math.abs(h-s)<.1}return Math.abs(t-i)<.1},XE.qSs=function(t,s,i,e){return Math.abs(i-t)<.1&&Math.abs(e-s)<.1},XE.hgs=function(t,s){const i=XE.YSs(t);let e=[];for(let t=0,n=i.length;t<n;++t){const n=i[t],r=[];let h=0;for(let t=0,s=n.length;t<s;++t){const i=n[t],e=n[(t+1)%s];h+=i.get_x()*e.get_y()-i.get_y()*e.get_x(),r.push(ZE(i.get_x(),i.get_y()))}if(h=Math.abs(h/2),h>=.001*s)e.push(r);else for(let t=0,s=r.length;t<s;t++)KE(r[t])}return e=zE(e),e},XE.YSs=function(t){let s,i,e,n,r,h,o,a=[],l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=0,S=0,w=0,b=0,v=0,M=0,x=0,_=[],T=[],G=!1,C=[],I=[],P=!1;for(I.push(t);I.length;){for(a=I[0],u=a.length,G=!0,l=0;l<u;l++)if(y=l,S=l<u-1?l+1:l+1-u,w=l<u-2?l+2:l+2-u,s=a[y],i=a[S],e=a[w],f=XE.HSs(s.get_x(),s.get_y(),i.get_x(),i.get_y(),e.get_x(),e.get_y()),f<0){for(G=!1,g=1e9,c=0;c<u;c++)c!==y&&c!==S&&(b=c,v=c<u-1?c+1:0,n=a[b],r=a[v],h=XE.USs(s.get_x(),s.get_y(),i.get_x(),i.get_y(),n.get_x(),n.get_y(),r.get_x(),r.get_y()),h&&(p=i.get_x()-h.get_x(),m=i.get_y()-h.get_y(),d=p*p+m*m,d<g?(x=b,M=v,o=h,g=d):KE(h)));if(1e9===g)return[];for(_=[],T=[],b=x,v=M,n=a[b],r=a[v],P=!1,XE.qSs(o.get_x(),o.get_y(),r.get_x(),r.get_y())||(_.push(o),P=!0),XE.qSs(o.get_x(),o.get_y(),n.get_x(),n.get_y())||(T.push(o),P=!0),P||KE(o),x=-1,M=y;;){if(M===v){if(x<0||x>=u)return[];XE.JSs(r.get_x(),r.get_y(),a[x].get_x(),a[x].get_y(),s.get_x(),s.get_y())||_.push(a[M]);break}_.push(a[M]),x=M,M-1<0?M=u-1:M--}for(_.reverse(),x=-1,M=S;;){if(M===b){if(x<0||x>=u)return[];M!==b||XE.JSs(n.get_x(),n.get_y(),a[x].get_x(),a[x].get_y(),i.get_x(),i.get_y())||T.push(a[M]);break}T.push(a[M]),x=M,M+1>u-1?M=0:M++}I.push(_,T),I.shift();break}G&&C.push(I.shift())}return C}}{const QE=self.Cs;QE.slt.XSs=class extends QE.WIt{constructor(t){super(t)}Jn(){super.Jn()}}}{const tO=self.Cs;tO.slt.XSs.nRt=class extends tO.JIt{constructor(t){super(t),this.ZSs=[]}Jn(){tO.bh(this.ZSs),super.Jn()}uCt(){}KSs(t){if(!this.ZSs.includes(t)){for(const s of this.ZSs)if(s.S0()&&s.w0(t))return;this.ZSs.push(t)}}QSs(){tO.bh(this.ZSs)}tws(){return this.ZSs}sws(t){const s=this.GJ();for(const i of t.Lnt())if(i.GJ()===s)return i.gJ();return null}}}{const sO=self.Cs,iO=self.Ns,eO=self.vJ,nO=0,rO=1,hO=2,oO=3,aO=0,lO=[];sO.slt.XSs.Instance=class extends sO.qIt{constructor(t,s){super(t),this.iws=0,this.ews=1e4,this.nws=sO.Qn(360),this.rws=!0,this.hws=new sO.OLt,s&&(this.iws=s[nO],this.ews=s[rO],this.nws=sO.Qn(s[hO]),this.rws=s[oO])}Jn(){super.Jn()}hx(){return{r:this.ews,c:this.nws,om:this.iws,ucc:this.rws,t:this.Vxt().tws().map((t=>t.G0()))}}ox(t){this.ews=t.r,this.nws=t.c,this.iws=t.om||0,this.rws=!!t.ucc;const s=this.Vxt().tws();sO.bh(s);for(const i of t.t){const t=this.Nc.dY(i);t&&s.push(t)}}ows(t,s){const i=t.$j(),[e,n]=t.n_t(s);return this.aws(e,n)||this.hws.ULt()&&this.hws.DLt===i}aws(t,s){const i=this.aB();let e=i.ZW();return i.Vg()<0&&(e+=Math.PI),this.lws(i.UM(),i.qM(),e,t,s)}lws(t,s,i,e,n){this.hws.Bf();const r=this.ews;if(sO.nr(t,s,e,n)>r*r)return!1;const h=sO.rr(t,s,e,n);return!(sO.hr(i,h)>this.nws/2)&&!this.uws(t,s,e,n,this.rws).ULt()}cws(t,s){if(s){const s=this.aB().lB(),i=this.Nc.fL();return this.iws===aO?i.cLt(s,t.rect,lO):i.p$(s,this.fws(),t.rect,lO),lO}if(this.iws===aO){const t=this.Nc.wPt();return t?t.RW():lO}for(const t of this.fws())sO.On(lO,t.RW());return lO}fws(){return this.Vxt().tws()}uws(t,s,i,e,n){const r=this.hws.Set(t,s,i,e),h=this.cws(r,n),o=this.Nc.fL(),a=this.iws===aO,l=this.di;for(let t=0,s=h.length;t<s;++t){const s=h[t];s!==l&&(a&&!o.RDt(s,l)||o.TLt(s,r))}return r.JLt(),sO.bh(lO),r}dws(){return this.hws}pws(){const t=this.hws;return t.ULt()?t.BLt:0}mws(){const t=this.hws;return t.ULt()?t.$Lt:0}gws(){const t=this.hws;return t.ULt()?t.vt:0}yws(){const t=this.hws;return t.ULt()?t.DLt:-1}Sws(t){const s=this.hws;return s.ULt()?s.BLt+t*s.WLt:0}wws(t){const s=this.hws;return s.ULt()?s.$Lt+t*s.VLt:0}bws(){const t=this.hws;return t.ULt()?t.kLt:0}vws(t){const s=this.hws;return s.ULt()?s.BLt+t*s.jLt:0}Mws(t){const s=this.hws;return s.ULt()?s.$Lt+t*s.HLt:0}xws(){const t=this.hws;return t.ULt()?Math.atan2(t.HLt,t.jLt):0}_ws(t){this.ews=t}Tws(){return this.ews}Gws(t){this.nws=t}Cws(){return this.nws}Hrt(t){switch(t){case nO:return this.iws;case rO:return this.ews;case hO:return sO.tr(this.nws);case oO:return this.rws}}Xrt(t,s){switch(t){case nO:this.iws=s;break;case rO:this.ews=s;break;case hO:this.nws=sO.Qn(s);break;case oO:this.rws=!!s}}QCt(){const t="behaviors.los.properties";return[{title:"$"+this.GJ().Pc(),properties:[{name:t+".range.name",value:this.Tws(),OZt:t=>this._ws(t)},{name:t+".cone-of-view.name",value:sO.tr(this.Cws()),OZt:t=>this.Gws(sO.Qn(t))}]}]}cCt(){return self.Iws}};const uO=new WeakMap;self.Iws=class extends eO{constructor(){super();const t=eO.Aj().gJ();uO.set(this,t),this.Pws=new self.Aws(t)}set range(t){iO.he(t),uO.get(this)._ws(t)}get range(){return uO.get(this).Tws()}set Rws(t){iO.he(t),uO.get(this).Gws(t)}get Rws(){return uO.get(this).Cws()}Ews(t,s){return iO.se(t),iO.se(s),uO.get(this).aws(t,s)}Ows(t,s,i,e,n){return iO.se(t),iO.se(s),iO.se(i),iO.se(e),iO.se(n),uO.get(this).lws(t,s,i,e,n)}Fws(t,s,i,e,n=!0){return iO.se(t),iO.se(s),iO.se(i),iO.se(e),uO.get(this).uws(t,s,i,e,n),this.Pws}Dws(t){const s=uO.get(this),i=s.LB().d$(t);s.Vxt().KSs(i)}kws(){uO.get(this).Vxt().QSs()}},self.Aws=class{constructor(t){uO.set(this,t)}get Lws(){return uO.get(this).dws().ULt()}get BLt(){return uO.get(this).pws()}get $Lt(){return uO.get(this).mws()}Nws(){const t=uO.get(this);return[t.pws(),t.mws()]}get Bws(){return uO.get(this).gws()}get DLt(){return uO.get(this).yws()}$ws(t){return iO.he(t),uO.get(this).Sws(t)}Wws(t){return iO.he(t),uO.get(this).wws(t)}Vws(t){iO.he(t);const s=uO.get(this);return[s.Sws(t),s.wws(t)]}get jws(){return uO.get(this).bws()}Hws(t){return iO.he(t),uO.get(this).vws(t)}Uws(t){return iO.he(t),uO.get(this).Mws(t)}Jws(t){iO.he(t);const s=uO.get(this);return[s.vws(t),s.Mws(t)]}get zws(){return uO.get(this).xws()}}}{const cO=self.Cs,fO=new Set,dO=new Set;cO.slt.XSs.CB={qws(t,s){return this.aws(t,s)},Yws(){return this.hws.ULt()},lws(t,s,i,e,n){return this.lws(t,s,cO.Qn(i),e,n)},Xws(t,s){if(!t)return!1;const i=this.Nc.Mmt(),e=i.jL().Rdt(),n=i.LB(),r=i.Cj().EW(),h=t.EW();let o=r.RW(),a=h.RW();r.pdt()?cO.bh(r.xdt()):e&&(o=n.zxt()&&!r.xdt().length&&r.Mdt().length?r.Mdt():r.xdt()),h.pdt()?cO.bh(h.xdt()):e&&(a=n.zxt()&&!h.xdt().length&&h.Mdt().length?h.Mdt():h.xdt());const l=i.JMt(),u=this.Vxt();for(const t of o){let i=!1;const e=u.sws(t);if(0===a.length)l&&(i=!0);else for(const n of a)t!==n&&cO.xor(e.ows(n,s),l)&&(i=!0,dO.add(n));i&&fO.add(t)}return e?(o===r.xdt()?r.Idt(fO):(r.Cdt(fO,o),r.Gdt(fO)),a===h.xdt()?h.Idt(dO):(h.Cdt(dO,a),h.Gdt(dO))):(r.Gdt(fO),h.Gdt(dO)),fO.clear(),dO.clear(),r.mdt()}}}{const pO=self.Cs;pO.slt.XSs.hrt={Zws(t){this._ws(t)},Kws(t){this.Gws(pO.Qn(t))},uws(t,s,i,e,n){this.uws(t,s,i,e,n)},KSs(t){this.Vxt().KSs(t)},QSs(){this.Vxt().QSs()}}}{const mO=self.Cs;mO.slt.XSs.ort={Range(){return this.Tws()},Qws(){return mO.tr(this.Cws())},tbs(){return this.pws()},sbs(){return this.mws()},ibs(){return this.gws()},ebs(){return this.yws()},nbs(t){return this.Sws(t)},rbs(t){return this.wws(t)},hbs(){return mO.tr(this.bws())},obs(t){return this.vws(t)},lbs(t){return this.Mws(t)},ubs(){return mO.tr(this.xws())}}}{const gO=self.Cs;gO.slt.cbs=class extends gO.WIt{constructor(t){super(t)}Jn(){super.Jn()}}}{const yO=self.Cs;yO.slt.cbs.nRt=class extends yO.JIt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const SO=self.Cs,wO=self.Ns,bO=self.vJ;SO.slt.cbs.fbs=class{constructor(t,s,i,e){this.rdt=SO.Un(SO.Qf),this.rdt.Set(t||0),this.dbs=SO.Un(SO.Qf),this.dbs.Set(s||0),this.aAt=i||0,this.pbs=!!e,this.mbs=!1}gbs(){return this.rdt.Js()}xz(){return this.dbs.Js()}iz(){return this.aAt}u3t(t){this.mbs=!!t}Fz(){return this.mbs}Bu(t){this.rdt.Bu(t),this.dbs.Bu(t)}ybs(){return this.rdt.Js()>=this.aAt}AK(){if(this.ybs()){if(!this.pbs)return!0;this.rdt.nd(this.aAt)}return!1}hx(){return{c:this.rdt.Js(),t:this.dbs.Js(),d:this.aAt,r:this.pbs,p:this.mbs}}ox(t){this.rdt.Set(t.c),this.dbs.Set(t.t),this.aAt=t.d,this.pbs=!!t.r,this.mbs=!!t.p}},SO.slt.cbs.Instance=class extends SO.qIt{constructor(t,s){super(t),this.Sbs=new Map}Jn(){this.Sbs.clear(),super.Jn()}wbs(t,s,i){const e=new SO.slt.cbs.fbs(0,0,t,i);this.Sbs.set(s.toLowerCase(),e),this.bbs()}vbs(t){this.Sbs.delete(t.toLowerCase()),this.bbs()}Mbs(){this.Sbs.clear(),this.bbs()}xbs(t){return this.Sbs.has(t.toLowerCase())}_bs(t){const s=this.Sbs.get(t.toLowerCase());return s?s.gbs():0}Tbs(t){const s=this.Sbs.get(t.toLowerCase());return s?s.gbs()/s.iz():0}Gbs(t){const s=this.Sbs.get(t.toLowerCase());return s?s.xz():0}Cbs(t){const s=this.Sbs.get(t.toLowerCase());return s?s.iz():0}Ibs(t){const s=this.Sbs.get(t.toLowerCase());return!!s&&s.ybs()}Pbs(t,s){const i=this.Sbs.get(t.toLowerCase());i&&i.u3t(s)}Abs(t){const s=this.Sbs.get(t.toLowerCase());return!!s&&s.Fz()}Rbs(t){for(const s of this.Sbs.values())s.u3t(t)}bbs(){this.Sbs.size>0?(this.YCt(),this.ZCt()):(this.OCt(),this.FCt())}hx(){const t={};for(const[s,i]of this.Sbs.entries())t[s]=i.hx();return t}ox(t){this.Sbs.clear();for(const[s,i]of Object.entries(t)){const t=new SO.slt.cbs.fbs;t.ox(i),this.Sbs.set(s,t)}this.bbs()}d8(){const t=this.Nc.aN(this.di);for(const[s,i]of this.Sbs)i.Fz()||(i.Bu(t),i.ybs()&&this.ICt("timer",!1,{tag:s}))}qCt(){for(const[t,s]of this.Sbs.entries())s.AK()&&this.Sbs.delete(t)}QCt(){return[{title:"behaviors.timer.debugger.timers",properties:[...this.Sbs.entries()].map((t=>({name:"$"+t[0],value:`${Math.round(10*t[1].gbs())/10} / ${Math.round(10*t[1].iz())/10}`})))}]}cCt(){return self.Ebs}};const vO=["once","regular"];self.Ebs=class extends bO{#t;constructor(){super(),this.#t=bO.Aj().gJ()}Obs(t,s,i="once"){wO.he(t),wO.ue(s);const e=vO.indexOf(i);if(-1===e)throw new Error("invalid type");this.#t.wbs(t,s,1===e)}Fbs(t,s){wO.ue(t),this.#t.Pbs(t,!!s)}Dbs(t){this.#t.Rbs(!!t)}kbs(t){wO.ue(t),this.#t.vbs(t)}Lbs(){this.#t.Mbs()}Nbs(t){return wO.ue(t),this.#t.xbs(t)}Bbs(t){return wO.ue(t),this.#t.Abs(t)}getCurrentTime(t){return wO.ue(t),this.#t._bs(t)}$bs(t){return wO.ue(t),this.#t.Tbs(t)}Wbs(t){return wO.ue(t),this.#t.Gbs(t)}Vbs(t){return wO.ue(t),this.#t.Cbs(t)}jbs(t){return wO.ue(t),this.#t.Ibs(t)}}}self.Cs.slt.cbs.CB={Hbs(t){return this.Ibs(t)},Ubs(t){return this.xbs(t)},Jbs(t){return this.Abs(t)}},self.Cs.slt.cbs.hrt={zbs(t,s,i){this.wbs(t,i,1===s)},qbs(t){this.vbs(t)},Ybs(){this.Mbs()},Xbs(t,s){this.Pbs(t,0===s)},Zbs(t){this.Rbs(0===t)}},self.Cs.slt.cbs.ort={H3t(t){return this._bs(t)},Kbs(t){return this.Tbs(t)},Qbs(t){return this.Gbs(t)},k3t(t){return this.Cbs(t)}};{const MO=self.Cs;MO.slt.tvs=class extends MO.WIt{constructor(t){super(t)}Jn(){super.Jn()}}}{const xO=self.Cs;xO.slt.tvs.nRt=class extends xO.JIt{constructor(t){super(t)}Jn(){super.Jn()}uCt(){}}}{const _O=self.Cs,TO=self.Ns,GO=self.vJ,CO=0,IO=1,PO=2,AO=3,RO=4,EO=5,OO=6;_O.slt.tvs.Instance=class extends _O.qIt{constructor(t,s){super(t);const i=this.aB();this.UPt=0,this.wfs=0,this.Go=0,this.svs=!1,this.ivs=!1,this.evs=!1,this.xbt=!0,this.jus=0,this.Hus=0,this._8t=i.UM(),this.T8t=i.qM(),this.Yus=i.ZW(),this.nvs=0,this.rvs=Math.min(Math.abs(i.Vg()),Math.abs(i.Kg())/2),this.hvs=!1,s&&(this.UPt=s[CO],this.wfs=s[IO],this.Go=s[PO],this.svs=!!s[AO],this.ivs=!!s[RO],this.evs=!!s[EO],this.xbt=!!s[OO]);const e=i.ZW();this.jus=Math.cos(e)*this.UPt,this.Hus=Math.sin(e)*this.UPt,this.xbt&&(this.YCt(),this.svs&&this.tPt())}Jn(){super.Jn()}hx(){const t={dx:this.jus,dy:this.Hus,lx:this._8t,ly:this.T8t,lka:this.Yus,t:this.nvs};return 0!==this.wfs&&(t.acc=this.wfs),0!==this.Go&&(t.g=this.Go),this.evs&&(t.st=this.evs),this.xbt||(t.e=this.xbt),this.svs&&(t.bos=this.svs),this.ivs&&(t.sa=this.ivs),t}ox(t){this.jus=t.dx,this.Hus=t.dy,this._8t=t.lx,this.T8t=t.ly,this.Yus=t.lka,this.nvs=t.t,this.wfs=t.hasOwnProperty("acc")?t.acc:0,this.Go=t.hasOwnProperty("g")?t.g:0,this.evs=!!t.hasOwnProperty("st")&&t.st,this.svs=!!t.hasOwnProperty("bos")&&t.bos,this.ivs=!!t.hasOwnProperty("sa")&&t.sa,this.bTt(!t.hasOwnProperty("e")||t.e)}d8(){if(!this.xbt)return;const t=this.Nc.aN(this.di),s=this.di.aB();if(s.ZW()!==this.Yus){const t=s.ZW();if(this.ivs){const s=_O.er(0,0,this.jus,this.Hus);this.jus=Math.cos(t)*s,this.Hus=Math.sin(t)*s}this.Yus=t}let i=0,e=0;if(0!==this.wfs){let n=_O.er(0,0,this.jus,this.Hus),r=0;r=0===this.jus&&0===this.Hus?s.ZW():_O.rr(0,0,this.jus,this.Hus),n+=this.wfs*t,i=Math.cos(r)*this.wfs,e=Math.sin(r)*this.wfs,n<0&&(n=0,i=0,e=0),this.jus=Math.cos(r)*n,this.Hus=Math.sin(r)*n}if(0!==this.Go&&(this.Hus+=this.Go*t,e+=this.Go),this._8t=s.UM(),this.T8t=s.qM(),0!==this.jus||0!==this.Hus){const n=this.jus*t+.5*i*t*t,r=this.Hus*t+.5*e*t*t,h=_O.er(0,0,n,r);if(this.ovs(n,r,h),this.nvs+=h,this.ivs&&(0!==n||0!==r)){const t=_O.rr(0,0,n,r);s.XW(t),this.Yus=s.ZW()}s.NH()}}ovs(t,s,i){const e=this.aB();if(!this.evs||i<=this.rvs)return e.WH(t,s),e.NH(),void(this.evs&&this.lH(_O.slt.tvs.CB.avs));this.hvs=!1;const n=e.UM(),r=e.qM(),h=n+t,o=r+s,a=_O.rr(0,0,t,s),l=Math.cos(a)*this.rvs,u=Math.sin(a)*this.rvs,c=Math.floor(i/this.rvs);for(let t=1;t<=c;++t)if(e.BH(n+l*t,r+u*t),e.NH(),this.lH(_O.slt.tvs.CB.avs),this.di.Oq()||this.hvs)return;e.BH(h,o),e.NH(),this.lH(_O.slt.tvs.CB.avs)}QIt(){if(!this.xbt||!this.svs||0===this.jus&&0===this.Hus)return;const t=this.Nc.aN(this.di),s=this.di.aB(),i=this.Nc.fL(),e=i.o$(this.di);if(e){i.Qkt(this.di,e);const n=_O.er(0,0,this.jus,this.Hus),r=i.vLt(this.di,this._8t,this.T8t);this.jus=Math.cos(r)*n,this.Hus=Math.sin(r)*n,s.WH(this.jus*t,this.Hus*t),s.NH(),this.ivs&&(s.XW(r),this.Yus=s.ZW(),s.NH()),i.yLt(this.di,this.jus/n,this.Hus/n,Math.max(2.5*n*t,30))||i.bLt(this.di,100)}}Hrt(t){switch(t){case CO:return this.ads();case IO:return this.mds();case PO:return this.xds();case RO:return this.ivs;case EO:return this.evs;case OO:return this.MTt()}}Xrt(t,s){switch(t){case CO:this.lvs(s);break;case IO:this.wfs=s;break;case PO:this.Go=s;break;case RO:this.ivs=!!s;break;case EO:this.evs=!!s;break;case OO:this.bTt(!!s)}}lvs(t){const s=_O.rr(0,0,this.jus,this.Hus);this.jus=Math.cos(s)*t,this.Hus=Math.sin(s)*t}ads(){return _O.Tr(_O.er(0,0,this.jus,this.Hus),6)}pds(t){this.wfs=t}mds(){return this.wfs}Mds(t){this.Go=t}xds(){return this.Go}uvs(t){const s=_O.er(0,0,this.jus,this.Hus);this.jus=Math.cos(t)*s,this.Hus=Math.sin(t)*s}cvs(){return _O.rr(0,0,this.jus,this.Hus)}fvs(t){t=!!t,this.svs!==t&&(this.svs=t,this.xbt&&(this.svs?this.tPt():this.XIt()))}dvs(){return this.svs}pvs(t){this.nvs=t}mvs(){return this.nvs}bTt(t){this.xbt=!!t,this.xbt?(this.YCt(),this.svs&&this.tPt()):(this.OCt(),this.XIt())}MTt(){return this.xbt}QCt(){const t="behaviors.bullet";return[{title:"$"+this.GJ().Pc(),properties:[{name:t+".debugger.vector-x",value:this.jus,OZt:t=>this.jus=t},{name:t+".debugger.vector-y",value:this.Hus,OZt:t=>this.Hus=t},{name:t+".properties.speed.name",value:this.ads(),OZt:t=>this.lvs(t)},{name:t+".debugger.angle-of-motion",value:_O.tr(this.cvs())},{name:t+".properties.gravity.name",value:this.xds(),OZt:t=>this.Mds(t)},{name:t+".properties.acceleration.name",value:this.mds(),OZt:t=>this.pds(t)},{name:t+".debugger.distance-travelled",value:this.mvs()},{name:t+".properties.enabled.name",value:this.MTt(),OZt:t=>this.bTt(t)}]}]}cCt(){return self.gvs}};const FO=new WeakMap;self.gvs=class extends GO{constructor(){super(),FO.set(this,GO.Aj().gJ())}get speed(){return FO.get(this).ads()}set speed(t){TO.he(t),FO.get(this).lvs(t)}get acceleration(){return FO.get(this).mds()}set acceleration(t){TO.he(t),FO.get(this).pds(t)}get Yss(){return FO.get(this).xds()}set Yss(t){TO.he(t),FO.get(this).Mds(t)}get yvs(){return FO.get(this).cvs()}set yvs(t){TO.he(t),FO.get(this).uvs(t)}get Svs(){return FO.get(this).dvs()}set Svs(t){FO.get(this).fvs(!!t)}get wvs(){return FO.get(this).mvs()}set wvs(t){TO.he(t),FO.get(this).pvs(t)}get isEnabled(){return FO.get(this).MTt()}set isEnabled(t){FO.get(this).bTt(t)}}}{const DO=self.Cs;DO.slt.tvs.CB={lps(t,s){const i=Math.hypot(this.jus,this.Hus);return DO.compare(i,t,s)},bvs(t,s){return DO.compare(this.mvs(),t,s)},avs:()=>!0,Gu(){return this.MTt()}}}{const kO=self.Cs;kO.slt.tvs.hrt={vvs(t){this.lvs(t)},$ts(t){this.pds(t)},Wts(t){this.Mds(t)},Mvs(t){this.uvs(kO.Qn(t))},VD(t){if(!t)return;const s=t.D_t(this.di);if(!s)return;const i=this.di.aB(),e=this.Nc.fL(),n=this.Nc.aN(this.di),r=kO.er(0,0,this.jus,this.Hus),h=e.vLt(this.di,this._8t,this.T8t,s);this.jus=Math.cos(h)*r,this.Hus=Math.sin(h)*r,i.WH(this.jus*n,this.Hus*n),i.NH(),this.ivs&&(i.XW(h),this.Yus=i.ZW(),i.NH()),0!==r&&(this.svs?e.yLt(this.di,this.jus/r,this.Hus/r,Math.max(2.5*r*n,30))||e.bLt(this.di,100):e.gLt(this.di,this.jus/r,this.Hus/r,Math.max(2.5*r*n,30),s))},xvs(t){this.fvs(t)},_vs(t){this.pvs(t)},SGt(t){this.bTt(t)},Tvs(){this.hvs=!0}}}{const LO=self.Cs;LO.slt.tvs.ort={Aps(){return this.ads()},Eps(){return this.mds()},Gvs(){return LO.tr(this.cvs())},Cvs(){return this.mvs()},Gis(){return this.xds()}}}{let NO=function(t){return"number"==typeof t?-t:t},BO=function(t,s){return"number"==typeof t&&"number"==typeof s},$O=function(t,s){return BO(t,s)?t+s:t},WO=function(t,s){return BO(t,s)?t-s:t},VO=function(t,s){return BO(t,s)?t*s:t},jO=function(t,s){return BO(t,s)?t/s:t},HO=function(t,s){return BO(t,s)?t%s:t},UO=function(t,s){return BO(t,s)?Math.pow(t,s):t},JO=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},zO=function(t,s){return BO(t,s)?t||s?1:0:t};unaryminus=NO,bothNumbers=BO,add=$O,subtract=WO,multiply=VO,divide=jO,mod=HO,pow=UO,and=JO,or=zO;const qO=self.Cs;self.Lvt=[()=>"STARTING CODE",()=>20,()=>40,()=>10,()=>"game",()=>.1,()=>0,()=>"",()=>640,()=>360,()=>1,()=>400,()=>650,()=>3,t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).dvt(),e=t.zvt(2),n=t.zvt(3);return()=>s(i(e.xvt(),n.xvt()),2)},()=>"add_power",()=>2,()=>420,()=>660,()=>450,()=>670,()=>1.5,()=>4,()=>470,()=>680,()=>.8,()=>1.3,()=>5,()=>500,()=>700,()=>.5,()=>"cpu_hit",()=>"high",()=>"low",t=>{const s=t.zvt(0).kvt();return()=>"Idle"+s.Eet()},()=>"Field1",()=>"Field2",()=>"Field3",t=>{const s=t.zvt(0).dvt();return()=>s()},()=>"Game",()=>"Layer 4",()=>330,()=>180,()=>"add",()=>"GAME BUTTONS",()=>"tap",()=>.9,()=>.3,t=>{const s=t.zvt(0).kvt();return()=>s.Eet()},t=>{const s=t.zvt(0);return()=>s.wvt()},()=>"lose",()=>"draw",()=>"BALL LIMITS",()=>"Default",()=>"ss",()=>"on",()=>.2,()=>"goal",()=>"cpu",()=>"on_power",()=>"gamer",()=>800,()=>150,()=>"pos",()=>"sb",t=>{const s=t.zvt(0).dvt();return()=>s(-30,20)},t=>{const s=t.zvt(0).dvt();return()=>s("CrossBar1","CrossBar2")},()=>"Layer 3",()=>"Animation 5",t=>{const s=t.zvt(0).dvt();return()=>180+s(-30,20)},()=>.05,()=>200,t=>{const s=t.zvt(0).dvt();return()=>s("Bounce1","Bounce2")},()=>-12,t=>{const s=t.zvt(0);return()=>s.wvt()+5},()=>"MOBILE CONTROLS",()=>100,()=>6,()=>"mig",()=>"h",t=>{const s=t.zvt(0).kvt();return()=>100-s.Eet()},()=>"off",()=>"power",()=>"on_shield",()=>"shield",()=>"hit",t=>{const s=t.zvt(0);return()=>s.wvt()+60},()=>"show",()=>85,()=>"hide",()=>.4,()=>"flip",()=>-360,t=>{const s=t.zvt(0);return()=>s.wvt()+45},()=>75,()=>"fire_1",t=>{const s=t.zvt(0),i=t.zvt(1),e=t.zvt(2),n=t.zvt(3);return()=>qO.tr(qO.rr(s.wvt(),i.wvt(),e.wvt("hit"),n.wvt("hit")))},()=>"tale",t=>{const s=t.zvt(0).dvt();return()=>s("Hit1","Hit2","Hit3","Hit4","Hit5")},t=>{const s=t.zvt(0);return()=>s.Rvt("flip")},()=>50,()=>1150,()=>"hit_high",t=>{const s=t.zvt(0);return()=>s.wvt()+10},()=>"ang",()=>.15,t=>{const s=t.zvt(0);return()=>s.wvt()+35},()=>"add_power_gamer",()=>320,t=>{const s=t.zvt(0).kvt();return()=>"Hit"+s.Eet()},t=>{const s=t.zvt(0).kvt();return()=>"Walk"+s.Eet()},()=>"Animation 4",t=>{const s=t.zvt(0);return()=>s.wvt()-1},t=>{const s=t.zvt(0);return()=>s.wvt()+1},t=>{const s=t.zvt(0).kvt();return()=>"Jump"+s.Eet()},()=>-8,()=>270,()=>"A",t=>{const s=t.zvt(0);return()=>s.Tvt()},()=>"start",()=>"back",t=>{const s=t.zvt(0).dvt();return()=>JO("Loading ",Math.round(100*s()))+" %"},()=>"save",t=>{const s=t.zvt(0);return()=>s.wvt("match")},()=>"tutorial",()=>"GRAPHICS MENU CODE AND VARIABLES",()=>"STARTING LAYOUT CODE",()=>45,t=>{const s=t.zvt(0).dvt();return()=>s(1,2,3,4,5,6,7,8,9,10)},t=>{const s=t.zvt(0).dvt();return()=>s("A","B","C","D","E","F","G","H","I","J")},t=>{const s=t.zvt(0).dvt();return()=>s(0,1,2)},t=>{const s=t.zvt(0).kvt();return()=>JO("Match",s.Eet())},()=>"SCENE CODE",t=>{const s=t.zvt(0);return()=>s.wvt()+25},t=>{const s=t.zvt(0);return()=>s.wvt()-25},()=>-720,()=>"end",t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).dvt(),e=t.zvt(2).dvt(),n=t.zvt(3).dvt();return()=>JO(s()+i(),e())+n().toString()},()=>-10,()=>"Popup",t=>{const s=t.zvt(0).dvt();return()=>s()/2},()=>80,()=>3e3,()=>369,()=>95,()=>-45,()=>"[b][size=52][color=#f3d40c][font=sans-serif]Congratulations![/font][/color][/size][/b]",()=>620,t=>{const s=t.zvt(0).kvt();return()=>JO("[b][font=sans-serif][size=30][color=white]Your score[/size][size=50]\n",s.Eet())+"[/size][/color][/font][/b]"},()=>1044,()=>70,()=>"tap to move on",()=>32,()=>-717750023016447,()=>"sans-serif",()=>.7,()=>"Timer",()=>"text",()=>-1e4,()=>"wait",()=>24,t=>{const s=t.zvt(0),i=t.zvt(1).kvt();return()=>s.wvt(JO("text_",i.Eet()))},()=>-100,()=>920,()=>480,()=>.6,()=>"target",()=>.75,()=>.28,()=>250,t=>{const s=t.zvt(0);return()=>s.wvt()+80},t=>{const s=t.zvt(0);return()=>s.wvt()-100},()=>90,()=>980,()=>18,()=>7,()=>160,()=>8,()=>35,()=>15,t=>{const s=t.zvt(0).dvt();return()=>s("Layer 3")+300},()=>"left",()=>-1e3,()=>22,()=>"Rotate Screen",()=>"sound",()=>"VsCPU",()=>-5,()=>"menu",()=>"shop",()=>"Menu",()=>"Shop1Player",()=>"Tutorial",t=>{const s=t.zvt(0).dvt();return()=>s("ui")},t=>{const s=t.zvt(0).dvt();return()=>s("ui")+80},t=>{const s=t.zvt(0);return()=>1===s.wvt("sound")?0:1},t=>{const s=t.zvt(0);return()=>s.wvt()-5},t=>{const s=t.zvt(0).dvt();return()=>Math.round(s(900,1050))},t=>{const s=t.zvt(0);return()=>s.xvt()},t=>{const s=t.zvt(0).dvt();return()=>s(0,1,2,3)},()=>350,t=>{const s=t.zvt(0).dvt();return()=>s("high","low","high")},t=>{const s=t.zvt(0).dvt();return()=>s("low","high","low")},t=>{const s=t.zvt(0).dvt();return()=>Math.round(s(1,100))},t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).dvt();return()=>s(i(.4,.8),2)},()=>"cpu_high",()=>-50,t=>{const s=t.zvt(0);return()=>s.wvt()-35},()=>"cpu_low",t=>{const s=t.zvt(0);return()=>s.wvt()-30},()=>"cup",()=>220,()=>185,t=>{const s=t.zvt(0).dvt();return()=>Math.round(s(2,10))},t=>{const s=t.zvt(0);return()=>s.wvt()-45},()=>170,t=>{const s=t.zvt(0);return()=>s.wvt()-60},t=>{const s=t.zvt(0),i=t.zvt(1),e=t.zvt(2),n=t.zvt(3);return()=>qO.tr(qO.rr(s.wvt(),i.wvt(),e.wvt(0),n.wvt(0)))}]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self.Cs;self.Vjt=function(){return[C32.PB.jnt,C32.slt.tlt,C32.PB.Text,C32.PB.PlatformInfo,C32.PB.Audio,C32.PB.si,C32.PB.Touch,C32.PB.P8t,C32.PB.d7t,C32.PB.T9t,C32.PB.pts,C32.slt.Nls,C32.slt.Dus,C32.PB.Oes,C32.slt.lcs,C32.slt.dPt,C32.PB.Kes,C32.slt.Ks,C32.slt.Wps,C32.slt.XSs,C32.slt.cbs,C32.slt.tvs,C32.PB.grs,C32.PB.Yrs,C32.PB.IB.CB.ayt,C32.PB.IB.CB.J5,C32.slt.Wps.hrt.ySs,C32.slt.Wps.hrt.dms,C32.PB.IB.hrt.Izt,C32.PB.IB.hrt.ph,C32.PB.Audio.hrt.Play,C32.PB.jnt.hrt.s_t,C32.PB.IB.CB.izt,C32.slt.Ks.hrt.mps,C32.slt.Ks.hrt.yps,C32.PB.jnt.hrt.kTt,C32.slt.cbs.hrt.zbs,C32.PB.IB.ort.Jqt,C32.PB.IB.ort.random,C32.PB.IB.hrt.Bqt,C32.PB.jnt.hrt.FZt,C32.PB.jnt.hrt.eO,C32.PB.jnt.hrt.OV,C32.slt.Ks.hrt.SGt,C32.PB.IB.CB.tzt,C32.PB.IB.ort.PYt,C32.slt.Wps.hrt.SGt,C32.PB.IB.hrt.Dzt,C32.slt.Wps.hrt.nSs,C32.PB.Touch.CB.g6t,C32.slt.tlt.CB.Y2t,C32.slt.tlt.hrt.Aas,C32.PB.IB.hrt.Pzt,C32.PB.T9t.hrt.Q9t,C32.PB.d7t.ort.g9t,C32.PB.IB.hrt.tqt,C32.PB.IB.CB.JSt,C32.PB.jnt.hrt.OTt,C32.PB.jnt.CB.xTt,C32.PB.IB.hrt.Ozt,C32.PB.IB.hrt.eqt,C32.PB.jnt.CB.q_t,C32.PB.jnt.CB.XZt,C32.slt.tvs.hrt.SGt,C32.PB.jnt.CB.tTt,C32.PB.pts.hrt.OTt,C32.PB.jnt.hrt.rTt,C32.slt.Wps.hrt.SSs,C32.PB.jnt.hrt.XW,C32.slt.Wps.hrt.oSs,C32.PB.jnt.CB.J_t,C32.PB.IB.hrt.sN,C32.PB.jnt.hrt.AU,C32.PB.IB.CB.$gt,C32.PB.jnt.hrt._A,C32.slt.tlt.hrt.Cas,C32.PB.Audio.hrt.t3t,C32.PB.IB.ort.cvt,C32.PB.jnt.hrt.nKt,C32.PB.IB.CB.YJt,C32.slt.Wps.CB.Qys,C32.PB.jnt.hrt.E_t,C32.PB.IB.hrt.Azt,C32.PB.Audio.hrt.l3t,C32.PB.IB.CB.zJt,C32.PB.jnt.hrt.JM,C32.PB.jnt.ort.QTt,C32.PB.Kes.hrt.Vc,C32.slt.tlt.hrt.Nas,C32.PB.jnt.hrt.DZt,C32.PB.Yrs.hrt.OV,C32.PB.jnt.ort.L_t,C32.slt.tlt.CB.Mas,C32.slt.tlt.CB.IsPlaying,C32.slt.tlt.hrt.Eas,C32.slt.tvs.hrt.Mvs,C32.PB.jnt.ort.tGt,C32.PB.jnt.ort.wKt,C32.PB.jnt.ort.bKt,C32.PB.pts.hrt.F_t,C32.slt.tlt.ort.sls,C32.PB.Touch.CB.F6t,C32.PB.jnt.CB.T_t,C32.slt.Ks.hrt.wps,C32.PB.jnt.CB.Xxt,C32.PB.jnt.hrt.YM,C32.slt.Ks.CB.ups,C32.slt.Ks.CB.aps,C32.slt.Ks.CB.Yfs,C32.slt.Ks.CB.fps,C32.PB.jnt.ort.sGt,C32.PB.jnt.ort.iGt,C32.slt.Ks.CB.dps,C32.slt.Ks.CB.Kfs,C32.PB.pts.hrt.XW,C32.PB.jnt.CB.mZt,C32.PB.jnt.hrt.e_t,C32.PB.IB.CB.ezt,C32.PB.Text.hrt.Vc,C32.PB.IB.ort.uXt,C32.PB.IB.CB.lHt,C32.PB.T9t.hrt.ets,C32.PB.T9t.CB.J9t,C32.PB.P8t.hrt.s7t,C32.PB.P8t.CB.J8t,C32.PB.d7t.hrt.t9t,C32.PB.P8t.ort.u7t,C32.PB.T9t.CB.U9t,C32.PB.T9t.hrt.sts,C32.PB.T9t.CB.B9t,C32.PB.T9t.ort.ats,C32.PB.d7t.ort.Js,C32.PB.d7t.CB.X7t,C32.slt.Dus.hrt.Dus,C32.slt.Dus.hrt.ocs,C32.PB.Yrs.hrt.YM,C32.PB.Yrs.ort.tGt,C32.PB.Yrs.CB.Zxt,C32.PB.PlatformInfo.CB.q0t,C32.PB.IB.hrt.Rzt,C32.Pvs.Ivs,C32.Pvs.Avs,C32.Pvs.Rvs,C32.Pvs.Evs,C32.Pvs.Ovs,C32.Pvs.Fvs,C32.Pvs.Dvs,C32.PB.IB.ort.wXt,C32.PB.IB.ort.bXt,C32.PB.IB.ort.GYt,C32.PB.IB.ort.TYt,C32.PB.IB.ort.EYt,C32.PB.IB.ort.OYt,C32.PB.jnt.hrt.BTt,C32.PB.Text.hrt._A,C32.PB.Text.hrt.XW,C32.PB.Text.hrt.ZM,C32.PB.Text.hrt.o0t,C32.PB.Text.hrt.a0t,C32.PB.Text.hrt.eO,C32.PB.Text.hrt.sA,C32.PB.Text.hrt.n0t,C32.PB.Text.hrt.e0t,C32.PB.Text.hrt.OTt,C32.PB.Text.hrt.i0t,C32.PB.Text.ort.Text,C32.PB.IB.hrt.Wzt,C32.PB.grs.hrt.s_t,C32.PB.jnt.ort.rGt,C32.PB.grs.hrt.eO,C32.PB.grs.ort.QTt,C32.PB.jnt.hrt.qW,C32.PB.Yrs.hrt.jg,C32.PB.d7t.hrt.pnt,C32.slt.Wps.CB.Gu,C32.PB.IB.ort.NYt,C32.PB.pts.hrt.rTt,C32.PB.PlatformInfo.CB.V0t,C32.PB.si.CB.R5t,C32.PB.IB.CB.qJt,C32.PB.IB.hrt.nqt,C32.PB.IB.hrt.Nzt,C32.PB.Audio.hrt.f3t,C32.PB.Audio.CB.X2t,C32.PB.Audio.hrt.Sz,C32.PB.IB.ort.LYt,C32.PB.IB.ort.kYt,C32.PB.Touch.CB.M6t,C32.slt.XSs.CB.Xws,C32.PB.jnt.CB.Zxt,C32.PB.IB.hrt.Wqt,C32.slt.cbs.CB.Hbs,C32.PB.Touch.CB.m6t]},self.uHt=[{kvs:0},{tlt:0},{Lvs:0},{Nvs:0},{Bvs:0},{$vs:0},{PlatformInfo:0},{Audio:0},{si:0},{Wvs:0},{Touch:0},{P8t:0},{Vvs:0},{jvs:0},{T9t:0},{Hvs:0},{Uvs:0},{Jvs:0},{zvs:0},{qvs:0},{Yvs:0},{Xvs:0},{Zvs:0},{Kvs:0},{Qvs:0},{tMs:0},{sMs:0},{iMs:0},{Dus:0},{eMs:0},{nMs:0},{Text:0},{rMs:0},{hMs:0},{oMs:0},{aMs:0},{lMs:0},{uMs:0},{cMs:0},{fMs:0},{dMs:0},{pMs:0},{mMs:0},{gMs:0},{yMs:0},{SMs:0},{lcs:0},{wMs:0},{bMs:0},{vMs:0},{MMs:0},{xMs:0},{_Ms:0},{TMs:0},{GMs:0},{nRt:0},{CMs:0},{IMs:0},{PMs:0},{AMs:0},{RMs:0},{EMs:0},{OMs:0},{FMs:0},{DMs:0},{kMs:0},{LMs:0},{NMs:0},{BMs:0},{Ks:0},{Wps:0},{$Ms:0},{WMs:0},{VMs:0},{jMs:0},{HMs:0},{UMs:0},{JMs:0},{zMs:0},{qMs:0},{YMs:0},{XMs:0},{ZMs:0},{KMs:0},{QMs:0},{txs:0},{sxs:0},{ixs:0},{exs:0},{nxs:0},{rxs:0},{hxs:0},{oxs:0},{axs:0},{lxs:0},{uxs:0},{cxs:0},{fxs:0},{dxs:0},{pxs:0},{mxs:0},{cbs:0},{tvs:0},{gxs:0},{yxs:0},{Sxs:0},{wxs:0},{bxs:0},{vxs:0},{Mxs:0},{xxs:0},{_xs:0},{Txs:0},{Gxs:0},{Cxs:0},{Ixs:0},{Pxs:0},{Axs:0},{Rxs:0},{Exs:0},{Oxs:0},{Fxs:0},{Dxs:0},{kxs:0},{Lxs:0},{Nxs:0},{Bxs:0},{$xs:0},{Wxs:0},{Vxs:0},{jxs:0},{Hxs:0},{Uxs:0},{Jxs:0},{zxs:0},{qxs:0},{Yxs:0},{Xxs:0},{Zxs:0},{Kxs:0},{Qxs:0},{t_s:0},{s_s:0},{i_s:0},{e_s:0},{n_s:0},{r_s:0},{h_s:0},{o_s:0},{a_s:0},{l_s:0},{u_s:0},{c_s:0},{f_s:0},{d_s:0},{p_s:0},{m_s:0},{g_s:0},{y_s:0},{S_s:0},{w_s:0},{b_s:0},{v_s:0},{M_s:0},{x_s:0},{__s:0},{T_s:0},{G_s:0},{C_s:0},{I_s:0},{P_s:0},{A_s:0},{R_s:0},{E_s:0},{O_s:0},{F_s:0},{D_s:0},{k_s:0},{L_s:0},{N_s:0},{type:0},{B_s:0},{$_s:0},{W_s:0},{V_s:0},{j_s:0},{H_s:0},{U_s:0},{J_s:0},{z_s:0},{q_s:0},{Y_s:0},{X_s:0},{Z_s:0},{K_s:0},{Q_s:0},{tTs:0},{Ig:0},{sTs:0},{iTs:0},{start:0},{restart:0},{eTs:0},{a:0},{nTs:0},{rTs:0},{hTs:0},{oTs:0},{aTs:0},{lTs:0},{uTs:0},{cTs:0},{fTs:0},{dTs:0},{pTs:0},{mTs:0},{gTs:0},{yTs:0},{STs:0}],self.wTs={Lvs:class extends self.BZt{},Nvs:class extends self.NQt{},Bvs:class extends self.BZt{},$vs:class extends self.BZt{},PlatformInfo:class extends self.Gj{},Audio:class extends self.Gj{},si:class extends self.Gj{},Wvs:class extends self.BZt{},Touch:class extends self.Gj{},P8t:class extends self.Gj{},Vvs:class extends self.V7t{},jvs:class extends self.V7t{},T9t:class extends self.Gj{},Hvs:class extends self.BZt{},Uvs:class extends self.Lss{},Jvs:class extends self.Lss{},zvs:class extends self.Lss{},qvs:class extends self.Lss{},Yvs:class extends self.Lss{},Xvs:class extends self.Lss{},Kvs:class extends self.BZt{},Qvs:class extends self.BZt{},tMs:class extends self.BZt{},sMs:class extends self.BZt{},iMs:class extends self.BZt{},eMs:class extends self.BZt{},nMs:class extends self.BZt{},Text:class extends self.NQt{},rMs:class extends self.BZt{},lMs:class extends self.BZt{},uMs:class extends self.Ues{},cMs:class extends self.BZt{},fMs:class extends self.BZt{},dMs:class extends self.BZt{},pMs:class extends self.BZt{},mMs:class extends self.BZt{},gMs:class extends self.BZt{},yMs:class extends self.BZt{},SMs:class extends self.BZt{},wMs:class extends self.BZt{},bMs:class extends self.BZt{},vMs:class extends self.BZt{},MMs:class extends self.BZt{},_Ms:class extends self.BZt{},TMs:class extends self.BZt{},GMs:class extends self.BZt{},CMs:class extends self.BZt{},IMs:class extends self.BZt{},PMs:class extends self.BZt{},AMs:class extends self.BZt{},RMs:class extends self.BZt{},EMs:class extends self.BZt{},OMs:class extends self.Rns{},FMs:class extends self.BZt{},DMs:class extends self.BZt{},kMs:class extends self.BZt{},LMs:class extends self.BZt{},NMs:class extends self.BZt{},BMs:class extends self.BZt{},$Ms:class extends self.BZt{},WMs:class extends self.Rns{},VMs:class extends self.Rns{},jMs:class extends self.Rns{},HMs:class extends self.Rns{},UMs:class extends self.Rns{},JMs:class extends self.Rns{},zMs:class extends self.BZt{},qMs:class extends self.BZt{},YMs:class extends self.BZt{},XMs:class extends self.BZt{},ZMs:class extends self.BZt{},KMs:class extends self.BZt{},uxs:class extends self.BZt{},cxs:class extends self.BZt{},fxs:class extends self.BZt{},dxs:class extends self.BZt{},gxs:class extends self.BZt{},yxs:class extends self.BZt{},Sxs:class extends self.BZt{},wxs:class extends self.Lss{},bxs:class extends self.Lss{},vxs:class extends self.BZt{},Mxs:class extends self.BZt{},xxs:class extends self.BZt{},_xs:class extends self.BZt{},Txs:class extends self.BZt{},Gxs:class extends self.BZt{},Cxs:class extends self.BZt{},Ixs:class extends self.BZt{},Pxs:class extends self.BZt{},Axs:class extends self.BZt{},Rxs:class extends self.BZt{},Exs:class extends self.BZt{},Oxs:class extends self.BZt{},Fxs:class extends self.BZt{},Dxs:class extends self.BZt{},kxs:class extends self.BZt{},Lxs:class extends self.BZt{},Nxs:class extends self.BZt{},Bxs:class extends self.BZt{},$xs:class extends self.BZt{},jxs:class extends self.BZt{},Hxs:class extends self.BZt{},Uxs:class extends self.BZt{},Jxs:class extends self.BZt{},zxs:class extends self.BZt{},qxs:class extends self.BZt{},Yxs:class extends self.BZt{},Xxs:class extends self.BZt{},Zxs:class extends self.BZt{},Kxs:class extends self.BZt{},Qxs:class extends self.cJ{},t_s:class extends self.BZt{},s_s:class extends self.NQt{},i_s:class extends self.BZt{},e_s:class extends self.BZt{},n_s:class extends self.khs{},r_s:class extends self.khs{},h_s:class extends self.BZt{},o_s:class extends self.BZt{},a_s:class extends self.BZt{},l_s:class extends self.BZt{},u_s:class extends self.BZt{},c_s:class extends self.khs{},f_s:class extends self.Lss{},d_s:class extends self.BZt{},p_s:class extends self.BZt{},m_s:class extends self.BZt{},g_s:class extends self.BZt{},y_s:class extends self.BZt{},S_s:class extends self.BZt{}};var scriptsInEvents={async Ivs(t,s){Android.gameLoaded()},async Avs(t,s){Android[s.tTs](s.Ig)},async Rvs(t,s){console.log(s.tTs+" : "+s.Ig)},async Evs(t,s){try{var i={type:s.type,value:s.Ig};window.webkit.messageHandlers.ports.postMessage(i)}catch(t){console.log(t)}},async Ovs(t,s){Android[s.tTs](s.Ig)},async Fvs(t,s){console.log(s.tTs+" : "+s.Ig)},async Dvs(t,s){try{var i={type:s.type,value:s.Ig};window.webkit.messageHandlers.ports.postMessage(i)}catch(t){console.log(t)}}};self.Cs.Pvs=scriptsInEvents;
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/